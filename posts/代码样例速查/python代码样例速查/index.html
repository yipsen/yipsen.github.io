<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
<meta name="X-UA-Compatible" , content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<link rel="icon" type="image/png" href="/%20/favicon.png">

<title>Pythonä»£ç æ ·ä¾‹é€ŸæŸ¥ | Yipsen Ye</title>
<meta name="description" content="éå†æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰æ–‡ä»¶å import os for filename in os.listdir(target_folder_path): print(filename) éå†æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰æ–‡ä»¶åï¼ˆé€’å½’ï¼‰ import os ROOT_PATH = r&amp;#39;&amp;#39; for root, dirs, files in os.walk(ROOT_PATH): for file in files: path = os.path.join(root, file) size = os.path.getsize(path) # æ¸…ç©ºç©ºæ–‡ä»¶å¤¹ï¼Ÿï¼Ÿï¼Ÿå¾…ç¡®è®¤ if size == 0: print(path, size) os.remove(path) è¿æ¥æ–‡ä»¶è·¯å¾„ import os for filename in os.listdir(target_folder_path): file_path = os.path.join(target_folder_path, filename) print(file_path) ç§»åŠ¨æ–‡ä»¶ import shutil shutil.move(source_path, target_path) å¤åˆ¶æ–‡ä»¶ import shutil shutil.copyfile(source_path, target_path) shutil.copy2(source_path, target_path) åˆ¤æ–­æ˜¯å¦æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ import os if os.path.isfile(target_path): return True if os.">
<meta name="author" content="yipsen">

<link rel="stylesheet" type="text/css" href="/styles/main.css">

</head>

<body id="page">
    <header>
        <div class="logo-link" style="width: 60px; color: #CA6924;">
    <a href="http://yipsen.github.io/">
        <img style="margin-bottom: -1rem;" src="/images/deer.svg" alt="logo">
        <span style="font-size: 0.5rem; color: #CA6924;">Yipsen Ye</span>
    </a>
</div>
<nav class="navbar justify-content-end">
    <ul class="nav-list">
        
        
        <li class="nav-item">
            <a class="nav-link active"
                href="http://yipsen.github.io/posts/">æœ­è®°</a>
        </li>
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/collections/">é™„è¡¨</a>
        </li>
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/about/">å…³äº</a>
        </li>
        
    </ul>
</nav>
    </header>
    <main id="content">
        
<div class="container"><article class="post-block">
        <h1 class="post-title">Pythonä»£ç æ ·ä¾‹é€ŸæŸ¥</h1>
        <div class="post-info">
            <div> 
                <span class="post-date">ğŸ“…&nbsp;2022-02-06 16:31:43</span></div></div>
        <div class="post-content">
            <h3 id="éå†æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰æ–‡ä»¶å">éå†æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰æ–‡ä»¶å</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> os

<span style="color:#66d9ef">for</span> filename <span style="color:#f92672">in</span> os<span style="color:#f92672">.</span>listdir(target_folder_path):
    print(filename)
</code></pre></div><h3 id="éå†æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰æ–‡ä»¶åé€’å½’">éå†æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰æ–‡ä»¶åï¼ˆé€’å½’ï¼‰</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> os

ROOT_PATH <span style="color:#f92672">=</span> <span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;&#39;</span>

<span style="color:#66d9ef">for</span> root, dirs, files <span style="color:#f92672">in</span> os<span style="color:#f92672">.</span>walk(ROOT_PATH):
    <span style="color:#66d9ef">for</span> file <span style="color:#f92672">in</span> files:
        path <span style="color:#f92672">=</span> os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>join(root, file)
        size <span style="color:#f92672">=</span> os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>getsize(path)
        <span style="color:#75715e"># æ¸…ç©ºç©ºæ–‡ä»¶å¤¹ï¼Ÿï¼Ÿï¼Ÿå¾…ç¡®è®¤</span>
        <span style="color:#66d9ef">if</span> size <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>:
            print(path, size)
            os<span style="color:#f92672">.</span>remove(path)
</code></pre></div><h3 id="è¿æ¥æ–‡ä»¶è·¯å¾„">è¿æ¥æ–‡ä»¶è·¯å¾„</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> os

<span style="color:#66d9ef">for</span> filename <span style="color:#f92672">in</span> os<span style="color:#f92672">.</span>listdir(target_folder_path):
    file_path <span style="color:#f92672">=</span> os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>join(target_folder_path, filename)
    print(file_path)
</code></pre></div><h3 id="ç§»åŠ¨æ–‡ä»¶">ç§»åŠ¨æ–‡ä»¶</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> shutil

shutil<span style="color:#f92672">.</span>move(source_path, target_path)
</code></pre></div><h3 id="å¤åˆ¶æ–‡ä»¶">å¤åˆ¶æ–‡ä»¶</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> shutil

shutil<span style="color:#f92672">.</span>copyfile(source_path, target_path)
shutil<span style="color:#f92672">.</span>copy2(source_path, target_path)
</code></pre></div><h3 id="åˆ¤æ–­æ˜¯å¦æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹">åˆ¤æ–­æ˜¯å¦æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> os

<span style="color:#66d9ef">if</span> os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>isfile(target_path):
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">True</span>

<span style="color:#66d9ef">if</span> os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>isdir(target_path):
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">True</span>
</code></pre></div><h3 id="åˆ›å»ºæ–‡ä»¶å¤¹">åˆ›å»ºæ–‡ä»¶å¤¹</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> os

<span style="color:#66d9ef">try</span>:
    os<span style="color:#f92672">.</span>mkdir(target_path)
<span style="color:#66d9ef">except</span> <span style="color:#a6e22e">FileExistsError</span>:
    print(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">%s</span><span style="color:#e6db74"> already EXIST!&#34;</span>, target_path)
<span style="color:#66d9ef">else</span>:
    logger<span style="color:#f92672">.</span>info(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">%s</span><span style="color:#e6db74"> created.&#34;</span>, target_path)
</code></pre></div><h3 id="ç§»é™¤æ–‡ä»¶å¤¹">ç§»é™¤æ–‡ä»¶å¤¹</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> os

os<span style="color:#f92672">.</span>rmdir(target_path)
</code></pre></div><h3 id="ç§»é™¤ç©ºæ–‡ä»¶å¤¹">ç§»é™¤ç©ºæ–‡ä»¶å¤¹</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> os

SOURCE_PATH <span style="color:#f92672">=</span> <span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;E:\target&#39;</span>

folder_names <span style="color:#f92672">=</span> os<span style="color:#f92672">.</span>listdir(SOURCE_PATH)

<span style="color:#66d9ef">for</span> folder_name <span style="color:#f92672">in</span> folder_names:
    folder_path <span style="color:#f92672">=</span> os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>join(SOURCE_PATH, folder_name)
    <span style="color:#66d9ef">try</span>:
        os<span style="color:#f92672">.</span>rmdir(folder_path)
        print(<span style="color:#e6db74">&#34;removed empty folder: </span><span style="color:#e6db74">%s</span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">%</span> folder_path)
    <span style="color:#66d9ef">except</span> <span style="color:#a6e22e">OSError</span> <span style="color:#66d9ef">as</span> e:
        print(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">%s</span><span style="color:#e6db74"> is not empty: </span><span style="color:#e6db74">%s</span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">%</span> (folder_path, e))

</code></pre></div><h3 id="è¯»éšæœºæ•°å¸¦æƒé‡">è¯»éšæœºæ•°ï¼ˆå¸¦æƒé‡ï¼‰</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> random

PART_COUNT <span style="color:#f92672">=</span> random<span style="color:#f92672">.</span>choices([<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>], weights<span style="color:#f92672">=</span>[<span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">1</span>], k<span style="color:#f92672">=</span><span style="color:#ae81ff">300</span>)
</code></pre></div><h3 id="æ‰§è¡Œcmdå‘½ä»¤">æ‰§è¡ŒCMDå‘½ä»¤</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> os

os<span style="color:#f92672">.</span>system(<span style="color:#e6db74">r</span><span style="color:#e6db74">&#34;echo hello world&#34;</span>)
</code></pre></div><h3 id="è¯»å–jsonæ–‡ä»¶åˆ°string">è¯»å–Jsonæ–‡ä»¶åˆ°string</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> json

<span style="color:#66d9ef">with</span> open(json_file, <span style="color:#e6db74">&#39;r&#39;</span>, encoding<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;utf8&#39;</span>) <span style="color:#66d9ef">as</span> j:
    data <span style="color:#f92672">=</span> json<span style="color:#f92672">.</span>loads(j)
</code></pre></div><h3 id="è¯»å–jsonæ–‡ä»¶åˆ°dict">è¯»å–Jsonæ–‡ä»¶åˆ°dict</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> json

<span style="color:#66d9ef">with</span> open(json_file, <span style="color:#e6db74">&#39;r&#39;</span>, encoding<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;utf8&#39;</span>) <span style="color:#66d9ef">as</span> j:
    data <span style="color:#f92672">=</span> json<span style="color:#f92672">.</span>load(j)
</code></pre></div><h3 id="è¯»å–jsonæ–‡ä»¶åˆ°dictå¸¦å¼•å·é—®é¢˜">è¯»å–Jsonæ–‡ä»¶åˆ°dictï¼ˆå¸¦å¼•å·é—®é¢˜ï¼‰</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> json

<span style="color:#66d9ef">with</span> open(meta_file, <span style="color:#e6db74">&#39;r&#39;</span>, encoding<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;UTF-8&#39;</span>) <span style="color:#66d9ef">as</span> f:
    data <span style="color:#f92672">=</span> f<span style="color:#f92672">.</span>read()
    meta <span style="color:#f92672">=</span> json<span style="color:#f92672">.</span>loads(json<span style="color:#f92672">.</span>dumps(eval(data)))
</code></pre></div><h3 id="è®°å½•æ—¶é—´åˆ°æ–‡ä»¶é‡Œç”¨äºæ–­ç‚¹ç»§ç»­">è®°å½•æ—¶é—´åˆ°æ–‡ä»¶é‡Œï¼Œç”¨äºæ–­ç‚¹ç»§ç»­</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> os
<span style="color:#f92672">import</span> time

<span style="color:#75715e"># file to store time string which is time of last run.</span>
TM_TIME_FILE <span style="color:#f92672">=</span> <span style="color:#e6db74">r</span><span style="color:#e6db74">&#34;last_modified.time&#34;</span>

<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">get_target_modified_time</span>():
    <span style="color:#75715e"># IMPORTANT: open mode cannot be a+, must be r, otherwise the readline function will return except result.</span>
    <span style="color:#66d9ef">with</span> open(TM_TIME_FILE, <span style="color:#e6db74">&#39;r&#39;</span>, encoding<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;utf-8&#39;</span>) <span style="color:#66d9ef">as</span> f:
        target_modified_time <span style="color:#f92672">=</span> f<span style="color:#f92672">.</span>readline()
        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">r</span><span style="color:#e6db74">&#34;1971-01-01 00:00:00&#34;</span> <span style="color:#66d9ef">if</span> len(target_modified_time) <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> <span style="color:#66d9ef">else</span> target_modified_time


<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">set_target_modified_time</span>(target_modified_time):
    <span style="color:#66d9ef">with</span> open(TM_TIME_FILE, <span style="color:#e6db74">&#39;w&#39;</span>, encoding<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;utf-8&#39;</span>) <span style="color:#66d9ef">as</span> f:
        f<span style="color:#f92672">.</span>write(target_modified_time)
        f<span style="color:#f92672">.</span>flush()

<span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;__main__&#34;</span>:
    <span style="color:#75715e"># read target modified time from file.</span>
    tm_time_str <span style="color:#f92672">=</span> get_target_modified_time()
    tm_time <span style="color:#f92672">=</span> time<span style="color:#f92672">.</span>mktime(time<span style="color:#f92672">.</span>strptime(tm_time_str, <span style="color:#e6db74">&#34;%Y-%m-</span><span style="color:#e6db74">%d</span><span style="color:#e6db74"> %H:%M:%S&#34;</span>))

    <span style="color:#75715e"># update next target modified time as current time to file.</span>
    next_tm_time <span style="color:#f92672">=</span> time<span style="color:#f92672">.</span>time()
    next_tm_time_str <span style="color:#f92672">=</span> time<span style="color:#f92672">.</span>strftime(<span style="color:#e6db74">&#34;%Y-%m-</span><span style="color:#e6db74">%d</span><span style="color:#e6db74"> %H:%M:%S&#34;</span>, time<span style="color:#f92672">.</span>localtime(next_tm_time))
    <span style="color:#75715e"># should create a lock file to handle except situation so that can update back the original target modified time</span>
    set_target_modified_time(next_tm_time_str)
    
    <span style="color:#75715e"># filter out target files which updated after tm_time.</span>
    files <span style="color:#f92672">=</span> [b <span style="color:#66d9ef">for</span> b <span style="color:#f92672">in</span> os<span style="color:#f92672">.</span>listdir(SOURCE) <span style="color:#66d9ef">if</span> tm_time <span style="color:#f92672">&lt;=</span> os<span style="color:#f92672">.</span>stat(os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>join(SOURCE, b))<span style="color:#f92672">.</span>st_mtime <span style="color:#f92672">&lt;=</span> next_tm_time]

    <span style="color:#75715e"># TODO: your code here...</span>

</code></pre></div><h3 id="ä½¿ç”¨å¤šçº¿ç¨‹è¿è¡Œ">ä½¿ç”¨å¤šçº¿ç¨‹è¿è¡Œ</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> concurrent.futures

tasks <span style="color:#f92672">=</span> os<span style="color:#f92672">.</span>listdir(TASK_PATH) <span style="color:#75715e"># TODO: è·å–éœ€è¦æ‰§è¡Œçš„ä»»åŠ¡åˆ—è¡¨</span>

totally <span style="color:#f92672">=</span> len(tasks) <span style="color:#75715e"># è¿è¡Œæ€»ä»»åŠ¡æ•°</span>
success <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span> <span style="color:#75715e"># è¿è¡ŒæˆåŠŸæ•°</span>
failure <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span> <span style="color:#75715e"># è¿è¡Œå¤±è´¥æ•°</span>
<span style="color:#75715e"># æ‰“å¼€çº¿ç¨‹æ± ï¼Œæ± å¤§å°100ä¸ªçº¿ç¨‹</span>
<span style="color:#66d9ef">with</span> concurrent<span style="color:#f92672">.</span>futures<span style="color:#f92672">.</span>ThreadPoolExecutor(max_workers<span style="color:#f92672">=</span><span style="color:#ae81ff">100</span>) <span style="color:#66d9ef">as</span> executor:
    <span style="color:#75715e"># å°†ä»»åŠ¡æäº¤ï¼Œå¹¶è·å–å¯¹åº”future</span>
    futures <span style="color:#f92672">=</span> {executor<span style="color:#f92672">.</span>submit(process, task): task <span style="color:#66d9ef">for</span> task <span style="color:#f92672">in</span> tasks}
    <span style="color:#75715e"># åˆ¤æ–­çº¿ç¨‹ä»»åŠ¡æ˜¯å¦å·²å®Œæˆï¼Œå³futureæ˜¯å¦completed</span>
    <span style="color:#66d9ef">for</span> future <span style="color:#f92672">in</span> concurrent<span style="color:#f92672">.</span>futures<span style="color:#f92672">.</span>as_completed(futures):
        <span style="color:#66d9ef">try</span>:
            <span style="color:#75715e"># è·å–çº¿ç¨‹ç»“æœ</span>
            <span style="color:#66d9ef">if</span> future<span style="color:#f92672">.</span>result():
                success <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
            <span style="color:#66d9ef">else</span>:
                failure <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
        <span style="color:#66d9ef">except</span> <span style="color:#a6e22e">Exception</span> <span style="color:#66d9ef">as</span> e:
            <span style="color:#75715e"># çº¿ç¨‹è¿è¡Œå‡ºç°å¼‚å¸¸</span>
            print(<span style="color:#e6db74">&#39;exception raised.&#39;</span>, e)
            failure <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
        <span style="color:#75715e"># è®¡ç®—å¹¶æ‰“å°è¿è¡Œæƒ…å†µçš„ç»Ÿè®¡ä¿¡æ¯</span>
        progress <span style="color:#f92672">=</span> (success <span style="color:#f92672">+</span> failure)<span style="color:#f92672">/</span>totally <span style="color:#f92672">*</span> <span style="color:#ae81ff">100</span>
        print(<span style="color:#e6db74">&#34;[</span><span style="color:#e6db74">%s</span><span style="color:#e6db74">] success: </span><span style="color:#e6db74">%d</span><span style="color:#e6db74">, failure: </span><span style="color:#e6db74">%d</span><span style="color:#e6db74">, progress: </span><span style="color:#e6db74">%.2f</span><span style="color:#e6db74"> </span><span style="color:#e6db74">%%</span><span style="color:#e6db74">&#34;</span>, futures[future], success, failure, progress)

<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">process</span>(task):
    <span style="color:#75715e"># TODO: your code here...</span>
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">True</span>

</code></pre></div><h3 id="ä½¿ç”¨æ•°æ®åº“è¿æ¥æ± ">ä½¿ç”¨æ•°æ®åº“è¿æ¥æ± </h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">from</span> DBUtils.PooledDB <span style="color:#f92672">import</span> PooledDB
<span style="color:#f92672">import</span> pymysql


MAX_CONNECTIONS <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>

pool <span style="color:#f92672">=</span> PooledDB(
    pymysql,
    MAX_CONNECTIONS,
    host<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;192.168.0.200&#39;</span>,
    port<span style="color:#f92672">=</span><span style="color:#ae81ff">33066</span>,
    user<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;PRIVATE_THEATER&#39;</span>,
    passwd<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;nvjQ0FsR$Cu5*csF&#39;</span>,
    db<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;PRIVATE_THEATER&#39;</span>,
    use_unicode<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)

<span style="color:#75715e"># æŸ¥è¯¢ä¸€æ¡è¡¨æ•°æ®</span>
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">select_one</span>(name):
    conn <span style="color:#f92672">=</span> pool<span style="color:#f92672">.</span>connection()
    cursor <span style="color:#f92672">=</span> conn<span style="color:#f92672">.</span>cursor()
    cursor<span style="color:#f92672">.</span>execute(<span style="color:#e6db74">r</span><span style="color:#e6db74">&#34;SELECT id FROM table WHERE name = &#39;</span><span style="color:#e6db74">%s</span><span style="color:#e6db74">&#39;&#34;</span> <span style="color:#f92672">%</span> name)
    <span style="color:#66d9ef">return</span> cursor<span style="color:#f92672">.</span>fetchone()

<span style="color:#75715e"># æŸ¥è¯¢å¤šæ¡è¡¨æ•°æ®</span>
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">select_list</span>(size):
    conn <span style="color:#f92672">=</span> pool<span style="color:#f92672">.</span>connection()
    cursor <span style="color:#f92672">=</span> conn<span style="color:#f92672">.</span>cursor()
    cursor<span style="color:#f92672">.</span>execute(<span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;SELECT * FROM table WHERE process_status = 0 ORDER BY id LIMIT </span><span style="color:#e6db74">%d</span><span style="color:#e6db74">&#39;</span> <span style="color:#f92672">%</span> size)
    <span style="color:#66d9ef">return</span> cursor<span style="color:#f92672">.</span>fetchall()

<span style="color:#75715e"># æ›´æ–°å¤šæ¡è¡¨æ•°æ®</span>
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">update_list</span>():
    conn <span style="color:#f92672">=</span> pool<span style="color:#f92672">.</span>connection()
    cursor <span style="color:#f92672">=</span> conn<span style="color:#f92672">.</span>cursor()
    cursor<span style="color:#f92672">.</span>execute(<span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;UPDATE table SET process_status = 0, process_time = now() WHERE process_status = 0&#39;</span>)
    conn<span style="color:#f92672">.</span>commit()

<span style="color:#75715e"># æ’å…¥è¡¨æ•°æ®å¹¶è·å¾—id</span>
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">insert</span>():
    conn <span style="color:#f92672">=</span> pool<span style="color:#f92672">.</span>connection()
    cursor <span style="color:#f92672">=</span> conn<span style="color:#f92672">.</span>cursor()
    insert_sql <span style="color:#f92672">=</span> <span style="color:#e6db74">r</span><span style="color:#e6db74">&#34;INSERT INTO table (code, name, created_time, creator, updated_time, updator, version, deleted) &#34;</span> \
                 <span style="color:#e6db74">r</span><span style="color:#e6db74">&#34;VALUES (&#39;</span><span style="color:#e6db74">%s</span><span style="color:#e6db74">&#39;, &#39;</span><span style="color:#e6db74">%s</span><span style="color:#e6db74">&#39;, now(), &#39;SYSADMIN&#39;, now(), &#39;SYSADMIN&#39;, 0, 0)&#34;</span>  <span style="color:#f92672">%</span> (<span style="color:#e6db74">&#39;code&#39;</span>, <span style="color:#e6db74">&#39;name&#39;</span>)
    cursor<span style="color:#f92672">.</span>execute(insert_sql)
    id <span style="color:#f92672">=</span> cursor<span style="color:#f92672">.</span>lastrowid
    <span style="color:#66d9ef">return</span> id

<span style="color:#75715e"># åˆ é™¤è¡¨æ•°æ®</span>
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">delete_list</span>():
    <span style="color:#66d9ef">pass</span>

<span style="color:#75715e"># å¼‚å¸¸å›æ»š</span>
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">rollback</span>():
    conn <span style="color:#f92672">=</span> pool<span style="color:#f92672">.</span>connection()
    cursor <span style="color:#f92672">=</span> conn<span style="color:#f92672">.</span>cursor()
    <span style="color:#66d9ef">try</span>:
        <span style="color:#75715e"># TODO: your code here...</span>
        conn<span style="color:#f92672">.</span>commit()
    <span style="color:#66d9ef">except</span> <span style="color:#a6e22e">Exception</span> <span style="color:#66d9ef">as</span> e:
        conn<span style="color:#f92672">.</span>rollback()
        <span style="color:#66d9ef">raise</span> e
    <span style="color:#66d9ef">finally</span>:
        cursor<span style="color:#f92672">.</span>close()
        conn<span style="color:#f92672">.</span>close()
</code></pre></div><h3 id="ä½¿ç”¨æ—¥å¿—---åŸºæœ¬é…ç½®">ä½¿ç”¨æ—¥å¿— - åŸºæœ¬é…ç½®</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> logging.config

<span style="color:#75715e"># ç®€å•é…ç½®</span>
logging<span style="color:#f92672">.</span>basicConfig(filename<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;./logs/application.log&#39;</span>,
                    level<span style="color:#f92672">=</span>logging<span style="color:#f92672">.</span>DEBUG,
                    format<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">%(asctime)s</span><span style="color:#e6db74"> [</span><span style="color:#e6db74">%(levelname)s</span><span style="color:#e6db74">] [L</span><span style="color:#e6db74">%(lineno)d</span><span style="color:#e6db74">] </span><span style="color:#e6db74">%(message)s</span><span style="color:#e6db74"> &#39;</span>,
                    datefmt<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;%Y-%m-</span><span style="color:#e6db74">%d</span><span style="color:#e6db74"> %H:%M:%S&#39;</span>)

<span style="color:#75715e"># è·å–logger</span>
logger <span style="color:#f92672">=</span> logging<span style="color:#f92672">.</span>getLogger(<span style="color:#e6db74">&#34;default&#34;</span>)

<span style="color:#75715e"># ä½¿ç”¨</span>
logger<span style="color:#f92672">.</span>debug(<span style="color:#e6db74">&#39;this is debug log.&#39;</span>)
logger<span style="color:#f92672">.</span>info(<span style="color:#e6db74">&#39;this is info log.&#39;</span>)
logger<span style="color:#f92672">.</span>warning(<span style="color:#e6db74">&#39;this is warning log.&#39;</span>)
logger<span style="color:#f92672">.</span>error(<span style="color:#e6db74">&#39;this is error exception raised.&#39;</span>)
</code></pre></div><h3 id="ä½¿ç”¨æ—¥å¿—---è‡ªå®šä¹‰é…ç½®å†…åµŒé…ç½®ä¿¡æ¯">ä½¿ç”¨æ—¥å¿— - è‡ªå®šä¹‰é…ç½®ï¼ˆå†…åµŒé…ç½®ä¿¡æ¯ï¼‰</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># LOGGER CONFIG</span>
<span style="color:#75715e">#####################################################################################################################</span>
<span style="color:#f92672">import</span> logging.config


LOG_PATH <span style="color:#f92672">=</span> <span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;./logs/&#39;</span>

<span style="color:#75715e"># è‡ªå®šä¹‰é…ç½®</span>
log_config <span style="color:#f92672">=</span> {
    <span style="color:#e6db74">&#34;version&#34;</span>: <span style="color:#ae81ff">1</span>,
    <span style="color:#e6db74">&#39;disable_existing_loggers&#39;</span>: <span style="color:#66d9ef">False</span>,  <span style="color:#75715e"># æ˜¯å¦ç¦ç”¨ç°æœ‰çš„è®°å½•å™¨</span>

    <span style="color:#75715e"># æ—¥å¿—ç®¡ç†å™¨é›†åˆ</span>
    <span style="color:#e6db74">&#39;loggers&#39;</span>: {
        <span style="color:#75715e"># ç®¡ç†å™¨</span>
        <span style="color:#e6db74">&#39;default&#39;</span>: {
            <span style="color:#e6db74">&#39;handlers&#39;</span>: [<span style="color:#e6db74">&#39;console&#39;</span>, <span style="color:#e6db74">&#39;info_file&#39;</span>, <span style="color:#e6db74">&#39;error_file&#39;</span>],
            <span style="color:#e6db74">&#39;level&#39;</span>: <span style="color:#e6db74">&#39;DEBUG&#39;</span>,
            <span style="color:#e6db74">&#39;propagate&#39;</span>: <span style="color:#66d9ef">True</span>,  <span style="color:#75715e"># æ˜¯å¦ä¼ é€’ç»™çˆ¶è®°å½•å™¨</span>
        },
        <span style="color:#e6db74">&#39;sql&#39;</span>: {
            <span style="color:#e6db74">&#39;handlers&#39;</span>: [<span style="color:#e6db74">&#39;sql_file&#39;</span>],
            <span style="color:#e6db74">&#39;level&#39;</span>: <span style="color:#e6db74">&#39;DEBUG&#39;</span>,
            <span style="color:#e6db74">&#39;propagate&#39;</span>: <span style="color:#66d9ef">True</span>,  <span style="color:#75715e"># æ˜¯å¦ä¼ é€’ç»™çˆ¶è®°å½•å™¨</span>
        }
    },

    <span style="color:#75715e"># å¤„ç†å™¨é›†åˆ</span>
    <span style="color:#e6db74">&#39;handlers&#39;</span>: {
        <span style="color:#75715e"># è¾“å‡ºåˆ°æ§åˆ¶å°</span>
        <span style="color:#e6db74">&#39;console&#39;</span>: {
            <span style="color:#e6db74">&#39;level&#39;</span>: <span style="color:#e6db74">&#39;INFO&#39;</span>,  <span style="color:#75715e"># è¾“å‡ºä¿¡æ¯çš„æœ€ä½çº§åˆ«</span>
            <span style="color:#e6db74">&#39;class&#39;</span>: <span style="color:#e6db74">&#39;logging.StreamHandler&#39;</span>,
            <span style="color:#e6db74">&#39;formatter&#39;</span>: <span style="color:#e6db74">&#39;standard&#39;</span>,  <span style="color:#75715e"># ä½¿ç”¨standardæ ¼å¼</span>
        },
        <span style="color:#75715e"># è¾“å‡ºåˆ°æ–‡ä»¶</span>
        <span style="color:#e6db74">&#39;info_file&#39;</span>: {
            <span style="color:#e6db74">&#39;level&#39;</span>: <span style="color:#e6db74">&#39;INFO&#39;</span>,
            <span style="color:#e6db74">&#39;class&#39;</span>: <span style="color:#e6db74">&#39;logging.handlers.TimedRotatingFileHandler&#39;</span>,
            <span style="color:#e6db74">&#39;formatter&#39;</span>: <span style="color:#e6db74">&#39;standard&#39;</span>,
            <span style="color:#e6db74">&#39;filename&#39;</span>: LOG_PATH <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;info.log&#39;</span>,  <span style="color:#75715e"># è¾“å‡ºä½ç½®</span>
            <span style="color:#e6db74">&#39;when&#39;</span>: <span style="color:#e6db74">&#39;h&#39;</span>,  <span style="color:#75715e"># æ¯å°æ—¶ä¸€ä¸ªæ—¥å¿—æ–‡ä»¶</span>
            <span style="color:#e6db74">&#39;backupCount&#39;</span>: <span style="color:#ae81ff">10</span>,  <span style="color:#75715e"># å¤‡ä»½ä»½æ•°</span>
            <span style="color:#e6db74">&#39;encoding&#39;</span>: <span style="color:#e6db74">&#39;utf8&#39;</span>,  <span style="color:#75715e"># æ–‡ä»¶ç¼–ç </span>
        },
        <span style="color:#75715e"># è¾“å‡ºåˆ°æ–‡ä»¶</span>
        <span style="color:#e6db74">&#39;error_file&#39;</span>: {
            <span style="color:#e6db74">&#39;level&#39;</span>: <span style="color:#e6db74">&#39;ERROR&#39;</span>,
            <span style="color:#e6db74">&#39;class&#39;</span>: <span style="color:#e6db74">&#39;logging.handlers.TimedRotatingFileHandler&#39;</span>,
            <span style="color:#e6db74">&#39;formatter&#39;</span>: <span style="color:#e6db74">&#39;standard&#39;</span>,
            <span style="color:#e6db74">&#39;filename&#39;</span>: LOG_PATH <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;error.log&#39;</span>,
            <span style="color:#e6db74">&#39;when&#39;</span>: <span style="color:#e6db74">&#39;h&#39;</span>,
            <span style="color:#e6db74">&#39;backupCount&#39;</span>: <span style="color:#ae81ff">10</span>,
            <span style="color:#e6db74">&#39;encoding&#39;</span>: <span style="color:#e6db74">&#39;utf8&#39;</span>,
        },
        <span style="color:#75715e"># è¾“å‡ºåˆ°æ–‡ä»¶</span>
        <span style="color:#e6db74">&#39;sql_file&#39;</span>: {
            <span style="color:#e6db74">&#39;level&#39;</span>: <span style="color:#e6db74">&#39;DEBUG&#39;</span>,
            <span style="color:#e6db74">&#39;class&#39;</span>: <span style="color:#e6db74">&#39;logging.handlers.TimedRotatingFileHandler&#39;</span>,
            <span style="color:#e6db74">&#39;formatter&#39;</span>: <span style="color:#e6db74">&#39;standard&#39;</span>,
            <span style="color:#e6db74">&#39;filename&#39;</span>: LOG_PATH <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;sql.log&#39;</span>,
            <span style="color:#e6db74">&#39;when&#39;</span>: <span style="color:#e6db74">&#39;h&#39;</span>,
            <span style="color:#e6db74">&#39;backupCount&#39;</span>: <span style="color:#ae81ff">10</span>,
            <span style="color:#e6db74">&#39;encoding&#39;</span>: <span style="color:#e6db74">&#39;utf8&#39;</span>,
        },
    },
    <span style="color:#75715e"># æ—¥å¿—æ ¼å¼é›†åˆ</span>
    <span style="color:#e6db74">&#39;formatters&#39;</span>: {
        <span style="color:#75715e"># æ ‡å‡†è¾“å‡ºæ ¼å¼</span>
        <span style="color:#e6db74">&#39;standard&#39;</span>: {
            <span style="color:#75715e"># [å…·ä½“æ—¶é—´][çº¿ç¨‹å:çº¿ç¨‹ID][æ—¥å¿—åå­—:æ—¥å¿—çº§åˆ«åç§°(æ—¥å¿—çº§åˆ«ID)] [è¾“å‡ºçš„æ¨¡å—:è¾“å‡ºçš„å‡½æ•°]:æ—¥å¿—å†…å®¹</span>
            <span style="color:#e6db74">&#39;format&#39;</span>: <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">%(asctime)s</span><span style="color:#e6db74"> [</span><span style="color:#e6db74">%(levelname)s</span><span style="color:#e6db74">] [L</span><span style="color:#e6db74">%(lineno)d</span><span style="color:#e6db74">] </span><span style="color:#e6db74">%(message)s</span><span style="color:#e6db74"> &#39;</span>
        }
    }
}


<span style="color:#75715e"># ä½¿ç”¨è‡ªå®šä¹‰é…ç½®å¹¶è·å–logger</span>
logging<span style="color:#f92672">.</span>config<span style="color:#f92672">.</span>dictConfig(log_config)
logger <span style="color:#f92672">=</span> logging<span style="color:#f92672">.</span>getLogger(<span style="color:#e6db74">&#34;default&#34;</span>)
sql_logger <span style="color:#f92672">=</span> logging<span style="color:#f92672">.</span>getLogger(<span style="color:#e6db74">&#34;sql&#34;</span>) <span style="color:#75715e"># ä½¿ç”¨æ­¤loggerä¼šæ‰“å°åˆ°sql.logæ–‡ä»¶</span>

<span style="color:#75715e"># ä½¿ç”¨</span>
logger<span style="color:#f92672">.</span>debug(<span style="color:#e6db74">&#39;this is debug log.&#39;</span>)
logger<span style="color:#f92672">.</span>info(<span style="color:#e6db74">&#39;this is info log.&#39;</span>)
logger<span style="color:#f92672">.</span>warning(<span style="color:#e6db74">&#39;this is warning log.&#39;</span>)
logger<span style="color:#f92672">.</span>error(<span style="color:#e6db74">&#39;this is error exception raised.&#39;</span>)
</code></pre></div><h3 id="ä½¿ç”¨æ—¥å¿—---è‡ªå®šä¹‰é…ç½®ç‹¬ç«‹é…ç½®æ–‡ä»¶">ä½¿ç”¨æ—¥å¿— - è‡ªå®šä¹‰é…ç½®ï¼ˆç‹¬ç«‹é…ç½®æ–‡ä»¶ï¼‰</h3>
<p>ä¸€ã€æ—¥å¿—é…ç½®æ–‡ä»¶ï¼ˆä¾‹å¦‚æ–‡ä»¶åä¸ºï¼šlogging.confï¼‰</p>
<pre tabindex="0"><code class="language-conf" data-lang="conf">[loggers]
keys=root,default

[handlers]
keys=console,info,warn,error

[formatters]
keys=standard

[logger_root]
level=INFO
handlers=console

[logger_default]
level=DEBUG
handlers=info,warn,error
qualname=default
propagate=1

[handler_console]
class=StreamHandler
args=(sys.stdout,)
level=DEBUG
formatter=standard

[handler_info]
class=handlers.TimedRotatingFileHandler
args=('logs/info.log', 'h', 1, 30)
level=INFO
formatter=standard

[handler_warn]
class=handlers.TimedRotatingFileHandler
args=('logs/warn.log', 'h', 1, 30)
level=WARN
formatter=standard

[handler_error]
class=handlers.TimedRotatingFileHandler
args=('logs/error.log', 'h', 1, 30)
level=ERROR
formatter=standard

[formatter_standard]
format=%(asctime)s - %(thread)s - %(levelname)s: %(message)s
datefmt=
</code></pre><p>äºŒã€å®é™…pythonä½¿ç”¨</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> logging.config

<span style="color:#75715e"># ä½¿ç”¨è‡ªå®šä¹‰é…ç½®æ–‡ä»¶å¹¶è·å–logger</span>
logging<span style="color:#f92672">.</span>config<span style="color:#f92672">.</span>fileConfig(<span style="color:#e6db74">&#39;logging.conf&#39;</span>)
logger <span style="color:#f92672">=</span> logging<span style="color:#f92672">.</span>getLogger(<span style="color:#e6db74">&#39;default&#39;</span>)

<span style="color:#75715e"># ä½¿ç”¨</span>
logger<span style="color:#f92672">.</span>debug(<span style="color:#e6db74">&#39;this is debug log.&#39;</span>)
logger<span style="color:#f92672">.</span>info(<span style="color:#e6db74">&#39;this is info log.&#39;</span>)
logger<span style="color:#f92672">.</span>warning(<span style="color:#e6db74">&#39;this is warning log.&#39;</span>)
logger<span style="color:#f92672">.</span>error(<span style="color:#e6db74">&#39;this is error exception raised.&#39;</span>)
</code></pre></div><h3 id="è®¡ç®—æ–‡ä»¶md5ç ">è®¡ç®—æ–‡ä»¶MD5ç </h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">calculate_file_hashed</span>(file_path):
    <span style="color:#66d9ef">with</span> open(file_path, <span style="color:#e6db74">&#39;rb&#39;</span>) <span style="color:#66d9ef">as</span> file:
        m <span style="color:#f92672">=</span> hashlib<span style="color:#f92672">.</span>md5()
        <span style="color:#66d9ef">while</span> <span style="color:#66d9ef">True</span>:
            data <span style="color:#f92672">=</span> file<span style="color:#f92672">.</span>read(<span style="color:#ae81ff">8192</span>)
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> data:
                <span style="color:#66d9ef">break</span>
            m<span style="color:#f92672">.</span>update(data)
        <span style="color:#66d9ef">return</span> m<span style="color:#f92672">.</span>hexdigest()
</code></pre></div><h3 id="æ¨¡æ‹Ÿæµè§ˆå™¨å‘é€-http-è¯·æ±‚">æ¨¡æ‹Ÿæµè§ˆå™¨å‘é€ HTTP è¯·æ±‚</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> requests

URL <span style="color:#f92672">=</span> <span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;https://devcloud.cn-north-4.huaweicloud.com/codehub/rest/me?_=1659853888215&#39;</span>

headers <span style="color:#f92672">=</span> {
    <span style="color:#e6db74">&#39;User-Agent&#39;</span>: <span style="color:#e6db74">&#39;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.5060.134 Safari/537.36 Edg/103.0.1264.77&#39;</span>,
    <span style="color:#e6db74">&#39;Accept&#39;</span>: <span style="color:#e6db74">&#39;*/*&#39;</span>,
    <span style="color:#e6db74">&#39;Accept-Encoding&#39;</span>: <span style="color:#e6db74">&#39;gzip, deflate, br&#39;</span>,
    <span style="color:#e6db74">&#39;Accept-Language&#39;</span>: <span style="color:#e6db74">&#39;zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6&#39;</span>,
    <span style="color:#e6db74">&#39;Connection&#39;</span>: <span style="color:#e6db74">&#39;keep-alive&#39;</span>
    <span style="color:#e6db74">&#39;Content-Type&#39;</span>: <span style="color:#e6db74">&#39;application/json;charset=utf-8&#39;</span>
    <span style="color:#e6db74">&#39;Cookie&#39;</span>: <span style="color:#e6db74">&#39;&#39;</span>,
    <span style="color:#e6db74">&#39;Host&#39;</span>: <span style="color:#e6db74">&#39;devcloud.cn-north-4.huaweicloud.com&#39;</span>,
    <span style="color:#e6db74">&#39;Referer&#39;</span>: <span style="color:#e6db74">&#39;https://devcloud.cn-north-4.huaweicloud.com/codehub/ssh&#39;</span>,
    <span style="color:#e6db74">&#39;X-Requested-With&#39;</span>: <span style="color:#e6db74">&#39;XMLHttpRequest&#39;</span>,
}

response <span style="color:#f92672">=</span> request<span style="color:#f92672">.</span>get(URL, headers<span style="color:#f92672">=</span>headers)
content <span style="color:#f92672">=</span> str(response<span style="color:#f92672">.</span>content, <span style="color:#e6db74">&#39;UTF-8&#39;</span>)
print(content)
</code></pre></div><h3 id="å†™å…¥æ–‡ä»¶">å†™å…¥æ–‡ä»¶</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># è¦†ç›–æ¨¡å¼</span>
<span style="color:#66d9ef">with</span> open(<span style="color:#e6db74">&#39;override_mode.txt&#39;</span>, <span style="color:#e6db74">&#39;w&#39;</span>) <span style="color:#66d9ef">as</span> file:
    file<span style="color:#f92672">.</span>write(<span style="color:#e6db74">&#39;somethind&#39;</span>)

<span style="color:#75715e"># è¿½åŠ æ¨¡å¼</span>
<span style="color:#66d9ef">with</span> open(<span style="color:#e6db74">&#39;append_mode.txt&#39;</span>, <span style="color:#e6db74">&#39;a&#39;</span>) <span style="color:#66d9ef">as</span> file:
    file<span style="color:#f92672">.</span>write(<span style="color:#e6db74">&#39;somethind&#39;</span>)

<span style="color:#75715e"># æŒ‰è¡Œå†™å…¥</span>
<span style="color:#66d9ef">for</span> line <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">10</span>):
    <span style="color:#66d9ef">with</span> open(<span style="color:#e6db74">&#39;lines.txt&#39;</span>, <span style="color:#e6db74">&#39;a&#39;</span>) <span style="color:#66d9ef">as</span> file:
        file<span style="color:#f92672">.</span>write(<span style="color:#e6db74">&#39;line NO.:&#39;</span> <span style="color:#f92672">+</span> line <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span>)
</code></pre></div>
        </div>
    </article>
</div>

    </main>
    <footer>
        <div id="pagination">
            
<div class="paginator">
    <div class="prev">
        
        <a href="/posts/redis/trouble-shootings/"><span>Redis ç›¸å…³å¸¸è§å¼‚å¸¸</span></a>
    </div>
    <div class="next">
        
        <a href="/posts/java%E5%9F%BA%E7%A1%80/java-trouble-shootings/"><span>Java å¸¸è§å¼‚å¸¸</span></a>
    </div>
</div>

        </div>
        <div class="toggler" onclick="toggleLight(this);">ğŸ’¡</div>
        <div id="copyright" style="display: none;">
    
    
    <p>&copy; 27270 <a href="/"></a>, powered by Hugo and Qiao</p>
</div>
    </footer>
    
<script>
    function toggleLight() {
        document.getElementById('page').classList.toggle('night');
    }
</script>
</body>

</html>