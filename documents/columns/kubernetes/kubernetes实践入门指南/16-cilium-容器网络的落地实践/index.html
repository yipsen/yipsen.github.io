<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
<meta name="X-UA-Compatible" , content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<link rel="icon" type="image/png" href="/%20/favicon.png">

<title>16 Cilium å®¹å™¨ç½‘ç»œçš„è½åœ°å®è·µ | Yipsen Ye</title>
<meta name="description" content="éšç€è¶Šæ¥è¶Šå¤šçš„ä¼ä¸šé‡‡ç”¨ Kubernetesï¼Œå›´ç»•å¤šäº‘ã€å®‰å…¨ã€å¯è§æ€§å’Œå¯æ‰©å±•æ€§ç­‰æ–°è¦æ±‚ï¼Œå¯ç¼–ç¨‹æ•°æ®å¹³é¢çš„éœ€æ±‚ç”¨ä¾‹èŒƒå›´è¶Šæ¥è¶Šå¹¿ã€‚æ­¤å¤–ï¼ŒæœåŠ¡ç½‘æ ¼å’Œæ— æœåŠ¡å™¨ç­‰æ–°æŠ€æœ¯å¯¹ Kubernetes åº•å±‚æå‡ºäº†æ›´å¤šçš„å®šåˆ¶åŒ–è¦æ±‚ã€‚è¿™äº›æ–°éœ€æ±‚éƒ½æœ‰ä¸€äº›å…±åŒç‚¹ï¼šå®ƒä»¬éœ€è¦ä¸€ä¸ªæ›´å¯ç¼–ç¨‹çš„æ•°æ®å¹³é¢ï¼Œèƒ½å¤Ÿåœ¨ä¸ç‰ºç‰²æ€§èƒ½çš„æƒ…å†µä¸‹æ‰§è¡Œ Kubernetes æ„ŸçŸ¥çš„ç½‘ç»œæ•°æ®æ“ä½œã€‚
Cilium é¡¹ç›®é€šè¿‡å¼•å…¥æ‰©å±•çš„ä¼¯å…‹åˆ©æ•°æ®åŒ…è¿‡æ»¤å™¨ï¼ˆeBPFï¼‰æŠ€æœ¯ï¼Œåœ¨ Linux å†…æ ¸å†…å‘ç½‘ç»œæ ˆæš´éœ²äº†å¯ç¼–ç¨‹çš„é’©å­ã€‚ä½¿å¾—ç½‘æ ¼æ•°æ®åŒ…ä¸éœ€è¦åœ¨ç”¨æˆ·å’Œå†…æ ¸ç©ºé—´ä¹‹é—´æ¥å›åˆ‡æ¢å°±å¯ä»¥é€šè¿‡ä¸Šä¸‹æ–‡å¿«é€Ÿè¿›è¡Œæ•°æ®äº¤æ¢æ“ä½œã€‚è¿™æ˜¯ä¸€ç§æ–°å‹çš„ç½‘ç»œèŒƒå¼ï¼Œå®ƒä¹Ÿæ˜¯ Cilium å®¹å™¨ç½‘ç»œé¡¹ç›®çš„æ ¸å¿ƒæ€æƒ³ã€‚
ä¸ºä»€ä¹ˆéœ€è¦è½åœ° Cilium å®¹å™¨ç½‘ç»œï¼Ÿ Kubernetes çš„å®¹å™¨ç½‘ç»œæ–¹æ¡ˆå‘å±•è‡³ä»Šï¼Œä¸€ç›´æ˜¯ç™¾å®¶äº‰é¸£ï¼Œå„æœ‰ç‰¹è‰²ã€‚ä¹‹å‰å› ä¸º CNI ç½‘ç»œæ–¹æ¡ˆä¸æˆç†Ÿï¼Œå¤§å®¶ç”¨èµ·æ¥éƒ½æ˜¯æˆ˜æˆ˜å…¢å…¢ï¼Œæ—¶åˆ»æé˜²å®¹å™¨ç½‘ç»œç»™ä¸šåŠ¡å¸¦æ¥ä¸å¯æ¥å—çš„æ•ˆæœï¼Œéšå³å°±æŠŠå®¹å™¨ç½‘ç»œæ›¿æ¢æˆä¸»æœºç½‘ç»œã€‚éšç€æ—¶é—´çš„ç£¨ç ºï¼Œå½“å‰ä¸»æµçš„å®¹å™¨ç½‘ç»œæ–¹æ¡ˆå¦‚ Calico ç­‰å·²ç»ç»å†æˆç™¾ä¸Šåƒæ¬¡ç”Ÿäº§ç¯å¢ƒçš„åº”ç”¨è€ƒéªŒï¼Œå¤§éƒ¨åˆ†åœºæ™¯ä¸‹éƒ½å¯ä»¥è¾¾åˆ°ç”¨æˆ·å¯ä»¥æ¥å—çš„ç½‘ç»œæ€§èƒ½æŒ‡æ ‡ã€‚å› ä¸ºæˆåŠŸç»éªŒå¼€å§‹å¢å¤šï¼Œç”¨æˆ·ä¹Ÿå¼€å§‹å¤§è§„æ¨¡å¯ç”¨å®¹å™¨ç½‘ç»œçš„ä¸Šçº¿äº†ã€‚éšç€ä¸šåŠ¡æµé‡çš„å¼•å…¥è¶Šæ¥è¶Šå¤§ï¼Œç”¨æˆ·å¯¹ Kubernetes ç½‘ç»œçš„è®¤çŸ¥ä¹Ÿè¶‹äºä¸€è‡´ã€‚å¤§è‡´åˆ†ä¸ºä¸¤å¤§ç±»ï¼Œä¸€ç±»æ˜¯ Cluster IPï¼Œæ˜¯ä¸€å±‚åå‘ä»£ç†çš„è™šæ‹Ÿç½‘ç»œï¼›ä¸€ç±»æ˜¯ Pod IPï¼Œæ˜¯å®¹å™¨é—´äº¤äº’æ•°æ®çš„ç½‘ç»œæ•°æ®å¹³é¢ã€‚å¯¹äºåå‘ä»£ç†è™šæ‹Ÿç½‘ç»œçš„æŠ€æœ¯å®ç°ï¼Œæ—©æœŸ kube-proxy æ˜¯é‡‡ç”¨ iptablesï¼Œåæ¥å¼•å…¥ IPVS ä¹Ÿè§£å†³äº†å¤§è§„æ¨¡å®¹å™¨é›†ç¾¤çš„ç½‘ç»œç¼–æ’çš„æ€§èƒ½é—®é¢˜ã€‚è¿™æ ·çš„å®ç°ç»“æ„ä½ ä»é¡¶ç«¯ä¿¯ç°ä¼šæ˜æ˜¾æ„ŸçŸ¥åˆ° Kubernetes ç½‘ç»œæ•°æ®å¹³å°éå¸¸é›¶æ•£ï¼Œå¹¶æ²¡æœ‰å®ç°ä¸€å¥—ä½“ç³»çš„ç½‘ç»œç­–ç•¥ç¼–æ’å’Œéš”ç¦»ã€‚æ˜¾ç„¶ï¼Œè¿™æ ·çš„æŠ€æœ¯ç»“æ„ä¹Ÿæ— æ³•å¼•å…¥æ•°æ®å¯è§†åŒ–èƒ½åŠ›ã€‚è¿™ä¹Ÿæ˜¯ Istio æœåŠ¡ç½‘æ ¼å¼•å…¥åï¼Œé€šè¿‡å¢åŠ  envoy sidecar æ¥å®ç°ç½‘ç»œæµé‡å¯è§†åŒ–å¸¦æ¥äº†æœºä¼šã€‚ä½†æ˜¯è¿™ç§é™„åŠ çš„è¾¹ç•Œç½‘å…³æ¯•ç«Ÿåˆå¯¹æµé‡å¢åŠ äº†ä¸€å±‚åå‘ä»£ç†ï¼Œè®©ç½‘ç»œæ€§èƒ½æ›´æ…¢äº†ã€‚Cilium åŸç”Ÿé€šè¿‡ eBPF ç¼–æ’ç½‘ç»œæ•°æ®ï¼Œè®©å¯è§†åŒ–æ›´ç®€å•ã€‚
Cilium è¿˜æœ‰ä¸€ä¸ªå¼ºé¡¹å°±æ˜¯é€šè¿‡ eBPF æ˜¯å¯ä»¥è‡ªå®šä¹‰éš”ç¦»ç­–ç•¥çš„ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨éä¿¡ä»»çš„ä¸»æœºç¯å¢ƒç¼–æ’æ›´å¤šçš„å®¹å™¨ç½‘ç»œéš”ç¦»æˆå¤šç§Ÿæˆ·ç¯å¢ƒï¼Œè®©ç”¨æˆ·ä¸åœ¨æ‹…å¿ƒæ•°æ®çš„æ³„éœ²ï¼Œå¯ä»¥æ›´ä¸“æ³¨åœ¨æ•°æ®ä¸šåŠ¡çš„è¿é€šæ€§ä¸Šã€‚å› ä¸º eBPF çš„å¯ç¼–ç¨‹æ€§ï¼Œæˆ‘ä»¬è¿˜èƒ½ä¾æ®ä¸šåŠ¡éœ€æ±‚ï¼Œå¢åŠ å„ç§å®šåˆ¶åŒ–æ’ä»¶ï¼Œè®©æ•°æ®å¹³å°å¯ä»¥æ›´åŠ çµæ´»å®‰å…¨ã€‚
Cilium CNI å®ç° Cilium Agentã€Cilium CLI Client å’Œ CNI Plugin è¿è¡Œåœ¨é›†ç¾¤ä¸­çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼ˆä»¥å®ˆæŠ¤è¿›ç¨‹çš„å½¢å¼éƒ¨ç½²ï¼‰ã€‚Cilium CNI æ’ä»¶æ‰§è¡Œæ‰€æœ‰ä¸ç½‘ç»œç®¡é“æœ‰å…³çš„ä»»åŠ¡ï¼Œå¦‚åˆ›å»ºé“¾æ¥è®¾å¤‡ï¼ˆveth å¯¹ï¼‰ï¼Œä¸ºå®¹å™¨åˆ†é… IPï¼Œé…ç½® IP åœ°å€ï¼Œè·¯ç”±è¡¨ï¼Œsysctl å‚æ•°ç­‰ã€‚Cilium Agent ç¼–è¯‘ BPF ç¨‹åºï¼Œå¹¶ä½¿å†…æ ¸åœ¨ç½‘ç»œæ ˆçš„å…³é”®ç‚¹ä¸Šè¿è¡Œè¿™äº›ç¨‹åºã€‚">
<meta name="author" content="">

<link rel="stylesheet" type="text/css" href="/styles/main.css">

</head>

<body id="page">
    <header>
        <div class="logo-link" style="width: 60px; color: #CA6924;">
    <a href="http://yipsen.github.io/">
        <img style="margin-bottom: -1rem;" src="/images/deer.svg" alt="logo">
        <span style="font-size: 0.5rem; color: #CA6924;">Yipsen Ye</span>
    </a>
</div>
<nav class="navbar justify-content-end">
    <ul class="nav-list">
        
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/posts/">æœ­è®°</a>
        </li>
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/collections/">é™„è¡¨</a>
        </li>
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/about/">å…³äº</a>
        </li>
        
    </ul>
</nav>
    </header>
    <main id="content">
        
<div class="container"><aside>
    <div>
        
        
            
            
            <div class="post-category-icon"></div>
            <a href="/categories/kubernetes%e5%ae%9e%e8%b7%b5%e5%85%a5%e9%97%a8%e6%8c%87%e5%8d%97/">Kuberneteså®è·µå…¥é—¨æŒ‡å—</a>
            <ul>
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E5%AE%9E%E8%B7%B5%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/00-%E4%B8%BA%E4%BB%80%E4%B9%88%E6%88%91%E4%BB%AC%E8%A6%81%E5%AD%A6%E4%B9%A0-kubernetes-%E6%8A%80%E6%9C%AF/">00 ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦å­¦ä¹  Kubernetes æŠ€æœ¯</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E5%AE%9E%E8%B7%B5%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/01-%E9%87%8D%E6%96%B0%E8%AE%A4%E8%AF%86-kubernetes-%E7%9A%84%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B6/">01 é‡æ–°è®¤è¯† Kubernetes çš„æ ¸å¿ƒç»„ä»¶</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E5%AE%9E%E8%B7%B5%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/02-%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3-kubernets-%E7%9A%84%E7%BC%96%E6%8E%92%E5%AF%B9%E8%B1%A1/">02 æ·±å…¥ç†è§£ Kubernets çš„ç¼–æ’å¯¹è±¡</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E5%AE%9E%E8%B7%B5%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/03-devops-%E5%9C%BA%E6%99%AF%E4%B8%8B%E8%90%BD%E5%9C%B0-k8s-%E7%9A%84%E5%9B%B0%E9%9A%BE%E5%88%86%E6%9E%90/">03 DevOps åœºæ™¯ä¸‹è½åœ° K8s çš„å›°éš¾åˆ†æ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E5%AE%9E%E8%B7%B5%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/04-%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF%E4%B8%8B%E8%90%BD%E5%9C%B0-k8s-%E7%9A%84%E5%9B%B0%E9%9A%BE%E5%88%86%E6%9E%90/">04 å¾®æœåŠ¡åº”ç”¨åœºæ™¯ä¸‹è½åœ° K8s çš„å›°éš¾åˆ†æ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E5%AE%9E%E8%B7%B5%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/05-%E8%A7%A3%E5%86%B3-k8s-%E8%90%BD%E5%9C%B0%E9%9A%BE%E9%A2%98%E7%9A%84%E6%96%B9%E6%B3%95%E8%AE%BA%E6%8F%90%E7%82%BC/">05 è§£å†³ K8s è½åœ°éš¾é¢˜çš„æ–¹æ³•è®ºæç‚¼</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E5%AE%9E%E8%B7%B5%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/06-%E7%BB%83%E4%B9%A0%E7%AF%87k8s-%E6%A0%B8%E5%BF%83%E5%AE%9E%E8%B7%B5%E7%9F%A5%E8%AF%86%E6%8E%8C%E6%8F%A1/">06 ç»ƒä¹ ç¯‡ï¼šK8s æ ¸å¿ƒå®è·µçŸ¥è¯†æŒæ¡</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E5%AE%9E%E8%B7%B5%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/07-%E5%AE%B9%E5%99%A8%E5%BC%95%E6%93%8E-containerd-%E8%90%BD%E5%9C%B0%E5%AE%9E%E8%B7%B5/">07 å®¹å™¨å¼•æ“ containerd è½åœ°å®è·µ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E5%AE%9E%E8%B7%B5%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/08-k8s-%E9%9B%86%E7%BE%A4%E5%AE%89%E8%A3%85%E5%B7%A5%E5%85%B7-kubeadm-%E7%9A%84%E8%90%BD%E5%9C%B0%E5%AE%9E%E8%B7%B5/">08 K8s é›†ç¾¤å®‰è£…å·¥å…· kubeadm çš„è½åœ°å®è·µ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E5%AE%9E%E8%B7%B5%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/09-%E5%8D%97%E5%8C%97%E5%90%91%E6%B5%81%E9%87%8F%E7%BB%84%E4%BB%B6-ipvs-%E7%9A%84%E8%90%BD%E5%9C%B0%E5%AE%9E%E8%B7%B5/">09 å—åŒ—å‘æµé‡ç»„ä»¶ IPVS çš„è½åœ°å®è·µ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E5%AE%9E%E8%B7%B5%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/10-%E4%B8%9C%E8%A5%BF%E5%90%91%E6%B5%81%E9%87%8F%E7%BB%84%E4%BB%B6-calico-%E7%9A%84%E8%90%BD%E5%9C%B0%E5%AE%9E%E8%B7%B5/">10 ä¸œè¥¿å‘æµé‡ç»„ä»¶ Calico çš„è½åœ°å®è·µ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E5%AE%9E%E8%B7%B5%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/11-%E6%9C%8D%E5%8A%A1%E5%8F%91%E7%8E%B0-dns-%E7%9A%84%E8%90%BD%E5%9C%B0%E5%AE%9E%E8%B7%B5/">11 æœåŠ¡å‘ç° DNS çš„è½åœ°å®è·µ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E5%AE%9E%E8%B7%B5%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/12-%E7%BB%83%E4%B9%A0%E7%AF%87k8s-%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AE%E6%B5%8B%E9%AA%8C/">12 ç»ƒä¹ ç¯‡ï¼šK8s é›†ç¾¤é…ç½®æµ‹éªŒ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E5%AE%9E%E8%B7%B5%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/13-%E7%90%86%E8%A7%A3%E5%AF%B9%E6%96%B9%E6%9A%B4%E9%9C%B2%E6%9C%8D%E5%8A%A1%E7%9A%84%E5%AF%B9%E8%B1%A1-ingress-%E5%92%8C-service/">13 ç†è§£å¯¹æ–¹æš´éœ²æœåŠ¡çš„å¯¹è±¡ Ingress å’Œ Service</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E5%AE%9E%E8%B7%B5%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/14-%E5%BA%94%E7%94%A8%E7%BD%91%E5%85%B3-openresty-%E5%AF%B9%E6%8E%A5-k8s-%E5%AE%9E%E8%B7%B5/">14 åº”ç”¨ç½‘å…³ OpenResty å¯¹æ¥ K8s å®è·µ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E5%AE%9E%E8%B7%B5%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/15-service-%E5%B1%82%E5%BC%95%E6%B5%81%E6%8A%80%E6%9C%AF%E5%AE%9E%E8%B7%B5/">15 Service å±‚å¼•æµæŠ€æœ¯å®è·µ</a></li>
                
                
                
                    <li>16 Cilium å®¹å™¨ç½‘ç»œçš„è½åœ°å®è·µ</li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E5%AE%9E%E8%B7%B5%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/17-%E5%BA%94%E7%94%A8%E6%B5%81%E9%87%8F%E7%9A%84%E4%BC%98%E9%9B%85%E6%97%A0%E6%8D%9F%E5%88%87%E6%8D%A2%E5%AE%9E%E8%B7%B5/">17 åº”ç”¨æµé‡çš„ä¼˜é›…æ— æŸåˆ‡æ¢å®è·µ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E5%AE%9E%E8%B7%B5%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/18-%E7%BB%83%E4%B9%A0%E7%AF%87%E5%BA%94%E7%94%A8%E6%B5%81%E9%87%8F%E6%97%A0%E6%8D%9F%E5%88%87%E6%8D%A2%E6%8A%80%E6%9C%AF%E6%B5%8B%E9%AA%8C/">18 ç»ƒä¹ ç¯‡ï¼šåº”ç”¨æµé‡æ— æŸåˆ‡æ¢æŠ€æœ¯æµ‹éªŒ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E5%AE%9E%E8%B7%B5%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/19-%E4%BD%BF%E7%94%A8-rook-%E6%9E%84%E5%BB%BA%E7%94%9F%E4%BA%A7%E5%8F%AF%E7%94%A8%E5%AD%98%E5%82%A8%E7%8E%AF%E5%A2%83%E5%AE%9E%E8%B7%B5/">19 ä½¿ç”¨ Rook æ„å»ºç”Ÿäº§å¯ç”¨å­˜å‚¨ç¯å¢ƒå®è·µ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E5%AE%9E%E8%B7%B5%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/20-%E6%9C%89%E7%8A%B6%E6%80%81%E5%BA%94%E7%94%A8%E7%9A%84%E9%BB%98%E8%AE%A4%E7%89%B9%E6%80%A7%E8%90%BD%E5%9C%B0%E5%88%86%E6%9E%90/">20 æœ‰çŠ¶æ€åº”ç”¨çš„é»˜è®¤ç‰¹æ€§è½åœ°åˆ†æ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E5%AE%9E%E8%B7%B5%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/21-%E6%A1%88%E4%BE%8B%E5%88%86%E5%B8%83%E5%BC%8F-mysql-%E9%9B%86%E7%BE%A4%E5%B7%A5%E5%85%B7-vitess-%E5%AE%9E%E8%B7%B5%E5%88%86%E6%9E%90/">21 æ¡ˆä¾‹ï¼šåˆ†å¸ƒå¼ MySQL é›†ç¾¤å·¥å…· Vitess å®è·µåˆ†æ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E5%AE%9E%E8%B7%B5%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/22-%E5%AD%98%E5%82%A8%E5%AF%B9%E8%B1%A1-pvpvcstorage-classes-%E7%9A%84%E7%AE%A1%E7%90%86%E8%90%BD%E5%9C%B0%E5%AE%9E%E8%B7%B5/">22 å­˜å‚¨å¯¹è±¡ PVã€PVCã€Storage Classes çš„ç®¡ç†è½åœ°å®è·µ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E5%AE%9E%E8%B7%B5%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/23-k8s-%E9%9B%86%E7%BE%A4%E4%B8%AD%E5%AD%98%E5%82%A8%E5%AF%B9%E8%B1%A1%E7%81%BE%E5%A4%87%E7%9A%84%E8%90%BD%E5%9C%B0%E5%AE%9E%E8%B7%B5/">23 K8s é›†ç¾¤ä¸­å­˜å‚¨å¯¹è±¡ç¾å¤‡çš„è½åœ°å®è·µ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E5%AE%9E%E8%B7%B5%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/24-%E7%BB%83%E4%B9%A0%E7%AF%87k8s-%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AE%E6%B5%8B%E9%AA%8C/">24 ç»ƒä¹ ç¯‡ï¼šK8s é›†ç¾¤é…ç½®æµ‹éªŒ</a></li>
                
                
            </ul>
        
    </div>
</aside>

<style>
    aside {
        position: fixed;
        left: 20px;
        background: #ffdee3;
        border-radius: 6px;
        padding: 20px;
        padding-top: 60px;
        box-shadow: 5px 10px #888;
        list-style-type: none;
        display: none;
    }

    .post-category-icon {
        position: absolute;
        width: 80px;
        height: 80px;
        top: -40px;
        left: 50%;
        margin-left: -40px;
        text-align: center;
        font-size: 36px;
        content: 'J';
        background: #ffdee3;
        border-radius: 100%;
        border: 10px solid #fff;
        box-shadow: 5px 10px #888;
    }
</style><article class="post-block">
        <h1 class="post-title">16 Cilium å®¹å™¨ç½‘ç»œçš„è½åœ°å®è·µ</h1>
        <div class="post-info">
            <div> 
                <span class="post-date">ğŸ“…&nbsp;2021-12-22 01:48:22</span>ğŸ·ï¸&nbsp;<a class="post-tag" href="/tags/kubernetes/">kubernetes</a></div><div class="post-category">
                
                ğŸ“š&nbsp;<a href="/categories/kubernetes%E5%AE%9E%E8%B7%B5%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/">Kuberneteså®è·µå…¥é—¨æŒ‡å—</a>
                
            </div></div>
        <div class="post-content">
            <p>éšç€è¶Šæ¥è¶Šå¤šçš„ä¼ä¸šé‡‡ç”¨ Kubernetesï¼Œå›´ç»•å¤šäº‘ã€å®‰å…¨ã€å¯è§æ€§å’Œå¯æ‰©å±•æ€§ç­‰æ–°è¦æ±‚ï¼Œå¯ç¼–ç¨‹æ•°æ®å¹³é¢çš„éœ€æ±‚ç”¨ä¾‹èŒƒå›´è¶Šæ¥è¶Šå¹¿ã€‚æ­¤å¤–ï¼ŒæœåŠ¡ç½‘æ ¼å’Œæ— æœåŠ¡å™¨ç­‰æ–°æŠ€æœ¯å¯¹ Kubernetes åº•å±‚æå‡ºäº†æ›´å¤šçš„å®šåˆ¶åŒ–è¦æ±‚ã€‚è¿™äº›æ–°éœ€æ±‚éƒ½æœ‰ä¸€äº›å…±åŒç‚¹ï¼šå®ƒä»¬éœ€è¦ä¸€ä¸ªæ›´å¯ç¼–ç¨‹çš„æ•°æ®å¹³é¢ï¼Œèƒ½å¤Ÿåœ¨ä¸ç‰ºç‰²æ€§èƒ½çš„æƒ…å†µä¸‹æ‰§è¡Œ Kubernetes æ„ŸçŸ¥çš„ç½‘ç»œæ•°æ®æ“ä½œã€‚</p>
<p>Cilium é¡¹ç›®é€šè¿‡å¼•å…¥æ‰©å±•çš„ä¼¯å…‹åˆ©æ•°æ®åŒ…è¿‡æ»¤å™¨ï¼ˆeBPFï¼‰æŠ€æœ¯ï¼Œåœ¨ Linux å†…æ ¸å†…å‘ç½‘ç»œæ ˆæš´éœ²äº†å¯ç¼–ç¨‹çš„é’©å­ã€‚ä½¿å¾—ç½‘æ ¼æ•°æ®åŒ…ä¸éœ€è¦åœ¨ç”¨æˆ·å’Œå†…æ ¸ç©ºé—´ä¹‹é—´æ¥å›åˆ‡æ¢å°±å¯ä»¥é€šè¿‡ä¸Šä¸‹æ–‡å¿«é€Ÿè¿›è¡Œæ•°æ®äº¤æ¢æ“ä½œã€‚è¿™æ˜¯ä¸€ç§æ–°å‹çš„ç½‘ç»œèŒƒå¼ï¼Œå®ƒä¹Ÿæ˜¯ Cilium å®¹å™¨ç½‘ç»œé¡¹ç›®çš„æ ¸å¿ƒæ€æƒ³ã€‚</p>
<p><img src="http://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/Kubernetes%20%E5%AE%9E%E8%B7%B5%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/assets/e071dc20-0c99-11eb-8b8d-fb5aa176e4a4.jpg" alt="14-1-cilium-cni"></p>
<h3 id="ä¸ºä»€ä¹ˆéœ€è¦è½åœ°-cilium-å®¹å™¨ç½‘ç»œ">ä¸ºä»€ä¹ˆéœ€è¦è½åœ° Cilium å®¹å™¨ç½‘ç»œï¼Ÿ</h3>
<p>Kubernetes çš„å®¹å™¨ç½‘ç»œæ–¹æ¡ˆå‘å±•è‡³ä»Šï¼Œä¸€ç›´æ˜¯ç™¾å®¶äº‰é¸£ï¼Œå„æœ‰ç‰¹è‰²ã€‚ä¹‹å‰å› ä¸º CNI ç½‘ç»œæ–¹æ¡ˆä¸æˆç†Ÿï¼Œå¤§å®¶ç”¨èµ·æ¥éƒ½æ˜¯æˆ˜æˆ˜å…¢å…¢ï¼Œæ—¶åˆ»æé˜²å®¹å™¨ç½‘ç»œç»™ä¸šåŠ¡å¸¦æ¥ä¸å¯æ¥å—çš„æ•ˆæœï¼Œéšå³å°±æŠŠå®¹å™¨ç½‘ç»œæ›¿æ¢æˆä¸»æœºç½‘ç»œã€‚éšç€æ—¶é—´çš„ç£¨ç ºï¼Œå½“å‰ä¸»æµçš„å®¹å™¨ç½‘ç»œæ–¹æ¡ˆå¦‚ Calico ç­‰å·²ç»ç»å†æˆç™¾ä¸Šåƒæ¬¡ç”Ÿäº§ç¯å¢ƒçš„åº”ç”¨è€ƒéªŒï¼Œå¤§éƒ¨åˆ†åœºæ™¯ä¸‹éƒ½å¯ä»¥è¾¾åˆ°ç”¨æˆ·å¯ä»¥æ¥å—çš„ç½‘ç»œæ€§èƒ½æŒ‡æ ‡ã€‚å› ä¸ºæˆåŠŸç»éªŒå¼€å§‹å¢å¤šï¼Œç”¨æˆ·ä¹Ÿå¼€å§‹å¤§è§„æ¨¡å¯ç”¨å®¹å™¨ç½‘ç»œçš„ä¸Šçº¿äº†ã€‚éšç€ä¸šåŠ¡æµé‡çš„å¼•å…¥è¶Šæ¥è¶Šå¤§ï¼Œç”¨æˆ·å¯¹ Kubernetes ç½‘ç»œçš„è®¤çŸ¥ä¹Ÿè¶‹äºä¸€è‡´ã€‚å¤§è‡´åˆ†ä¸ºä¸¤å¤§ç±»ï¼Œä¸€ç±»æ˜¯ Cluster IPï¼Œæ˜¯ä¸€å±‚åå‘ä»£ç†çš„è™šæ‹Ÿç½‘ç»œï¼›ä¸€ç±»æ˜¯ Pod IPï¼Œæ˜¯å®¹å™¨é—´äº¤äº’æ•°æ®çš„ç½‘ç»œæ•°æ®å¹³é¢ã€‚å¯¹äºåå‘ä»£ç†è™šæ‹Ÿç½‘ç»œçš„æŠ€æœ¯å®ç°ï¼Œæ—©æœŸ kube-proxy æ˜¯é‡‡ç”¨ iptablesï¼Œåæ¥å¼•å…¥ IPVS ä¹Ÿè§£å†³äº†å¤§è§„æ¨¡å®¹å™¨é›†ç¾¤çš„ç½‘ç»œç¼–æ’çš„æ€§èƒ½é—®é¢˜ã€‚è¿™æ ·çš„å®ç°ç»“æ„ä½ ä»é¡¶ç«¯ä¿¯ç°ä¼šæ˜æ˜¾æ„ŸçŸ¥åˆ° Kubernetes ç½‘ç»œæ•°æ®å¹³å°éå¸¸é›¶æ•£ï¼Œå¹¶æ²¡æœ‰å®ç°ä¸€å¥—ä½“ç³»çš„ç½‘ç»œç­–ç•¥ç¼–æ’å’Œéš”ç¦»ã€‚æ˜¾ç„¶ï¼Œè¿™æ ·çš„æŠ€æœ¯ç»“æ„ä¹Ÿæ— æ³•å¼•å…¥æ•°æ®å¯è§†åŒ–èƒ½åŠ›ã€‚è¿™ä¹Ÿæ˜¯ Istio æœåŠ¡ç½‘æ ¼å¼•å…¥åï¼Œé€šè¿‡å¢åŠ  envoy sidecar æ¥å®ç°ç½‘ç»œæµé‡å¯è§†åŒ–å¸¦æ¥äº†æœºä¼šã€‚ä½†æ˜¯è¿™ç§é™„åŠ çš„è¾¹ç•Œç½‘å…³æ¯•ç«Ÿåˆå¯¹æµé‡å¢åŠ äº†ä¸€å±‚åå‘ä»£ç†ï¼Œè®©ç½‘ç»œæ€§èƒ½æ›´æ…¢äº†ã€‚Cilium åŸç”Ÿé€šè¿‡ eBPF ç¼–æ’ç½‘ç»œæ•°æ®ï¼Œè®©å¯è§†åŒ–æ›´ç®€å•ã€‚</p>
<p>Cilium è¿˜æœ‰ä¸€ä¸ªå¼ºé¡¹å°±æ˜¯é€šè¿‡ eBPF æ˜¯å¯ä»¥è‡ªå®šä¹‰éš”ç¦»ç­–ç•¥çš„ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨éä¿¡ä»»çš„ä¸»æœºç¯å¢ƒç¼–æ’æ›´å¤šçš„å®¹å™¨ç½‘ç»œéš”ç¦»æˆå¤šç§Ÿæˆ·ç¯å¢ƒï¼Œè®©ç”¨æˆ·ä¸åœ¨æ‹…å¿ƒæ•°æ®çš„æ³„éœ²ï¼Œå¯ä»¥æ›´ä¸“æ³¨åœ¨æ•°æ®ä¸šåŠ¡çš„è¿é€šæ€§ä¸Šã€‚å› ä¸º eBPF çš„å¯ç¼–ç¨‹æ€§ï¼Œæˆ‘ä»¬è¿˜èƒ½ä¾æ®ä¸šåŠ¡éœ€æ±‚ï¼Œå¢åŠ å„ç§å®šåˆ¶åŒ–æ’ä»¶ï¼Œè®©æ•°æ®å¹³å°å¯ä»¥æ›´åŠ çµæ´»å®‰å…¨ã€‚</p>
<h3 id="cilium-cni-å®ç°">Cilium CNI å®ç°</h3>
<p>Cilium Agentã€Cilium CLI Client å’Œ CNI Plugin è¿è¡Œåœ¨é›†ç¾¤ä¸­çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼ˆä»¥å®ˆæŠ¤è¿›ç¨‹çš„å½¢å¼éƒ¨ç½²ï¼‰ã€‚Cilium CNI æ’ä»¶æ‰§è¡Œæ‰€æœ‰ä¸ç½‘ç»œç®¡é“æœ‰å…³çš„ä»»åŠ¡ï¼Œå¦‚åˆ›å»ºé“¾æ¥è®¾å¤‡ï¼ˆveth å¯¹ï¼‰ï¼Œä¸ºå®¹å™¨åˆ†é… IPï¼Œé…ç½® IP åœ°å€ï¼Œè·¯ç”±è¡¨ï¼Œsysctl å‚æ•°ç­‰ã€‚Cilium Agent ç¼–è¯‘ BPF ç¨‹åºï¼Œå¹¶ä½¿å†…æ ¸åœ¨ç½‘ç»œæ ˆçš„å…³é”®ç‚¹ä¸Šè¿è¡Œè¿™äº›ç¨‹åºã€‚</p>
<p>Cilium æä¾›ä¸¤ç§è”ç½‘æ¨¡å¼ï¼š</p>
<ul>
<li>å åŠ ç½‘ç»œï¼ˆï¼‰Overlayï¼‰æ¨¡å¼ï¼šCilium é»˜è®¤çš„ç½‘ç»œæ¨¡å¼ã€‚é›†ç¾¤ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹ä¸ºä¸€ä¸ªç½‘çŠ¶çš„éš§é“ï¼Œä½¿ç”¨åŸºäº udp çš„å°è£…åè®®ã€‚VXLANï¼ˆé»˜è®¤ï¼‰æˆ– Geneve ï¼ˆé€šç”¨ç½‘ç»œè™šæ‹ŸåŒ–å°è£…ï¼‰ã€‚åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼ŒCilium å¯ä»¥è‡ªåŠ¨å½¢æˆä¸€ä¸ªè¦†ç›–ç½‘ç»œï¼Œæ— éœ€ç”¨æˆ·ä½¿ç”¨ kube-controller-manager ä¸­çš„ <code>--allocate-node-cidrs</code> é€‰é¡¹è¿›è¡Œä»»ä½•é…ç½®ã€‚</li>
<li>ç›´æ¥/æœ¬åœ°è·¯ç”±æ¨¡å¼ï¼šåœ¨è¿™ä¸ªé…ç½®ä¸­ï¼ŒCilium ä¼šæŠŠæ‰€æœ‰ä¸é’ˆå¯¹å¦ä¸€ä¸ªæœ¬åœ°ç«¯ç‚¹çš„æ•°æ®åŒ…äº¤ç»™ linux å†…æ ¸çš„è·¯ç”±å­ç³»ç»Ÿã€‚è¿™ä¸ªè®¾ç½®éœ€è¦ä¸€ä¸ªé¢å¤–çš„è·¯ç”±å®ˆæŠ¤ç¨‹åºï¼Œå¦‚ Birdã€Quaggaã€BGPDã€Zebra ç­‰ï¼Œé€šè¿‡èŠ‚ç‚¹çš„ IP å‘æ‰€æœ‰å…¶ä»–èŠ‚ç‚¹å…¬å¸ƒéæœ¬åœ°èŠ‚ç‚¹åˆ†é…çš„å‰ç¼€ã€‚ä¸ VxLAN å åŠ ç›¸æ¯”ï¼ŒBGP æ–¹æ¡ˆå…·æœ‰æ›´å¥½çš„æ€§èƒ½ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œå®ƒä½¿å®¹å™¨ IP å¯è·¯ç”±åŒ–ï¼Œæ— éœ€ä»»ä½•é¢å¤–çš„ç½‘çŠ¶é…ç½®ã€‚</li>
</ul>
<p>Cilium åœ¨ä¸»æœºç½‘ç»œç©ºé—´ä¸Šåˆ›å»ºäº†ä¸‰ä¸ªè™šæ‹Ÿæ¥å£ï¼šcilium_hostã€cilium_net å’Œ cilium_vxlanã€‚Cilium Agent åœ¨å¯åŠ¨æ—¶åˆ›å»ºä¸€ä¸ªåä¸ºâ€œcilium_host -&gt; cilium_netâ€çš„ veth å¯¹ï¼Œå¹¶å°† CIDR çš„ç¬¬ä¸€ä¸ª IP åœ°å€è®¾ç½®ä¸º cilium_hostï¼Œç„¶åä½œä¸º CIDR çš„ç½‘å…³ã€‚CNI æ’ä»¶ä¼šç”Ÿæˆ BPF è§„åˆ™ï¼Œç¼–è¯‘åæ³¨å…¥å†…æ ¸ï¼Œä»¥è§£å†³ veth å¯¹ä¹‹é—´çš„è¿é€šé—®é¢˜ã€‚æ•°æ®é“¾è·¯å‚è€ƒå¦‚ä¸‹ï¼š</p>
<p><img src="http://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/Kubernetes%20%E5%AE%9E%E8%B7%B5%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/assets/30eb18f0-0c9b-11eb-bf86-c1f111c841d1.jpg" alt="14-2-cilium-cni-kube-impl"></p>
<h3 id="è½åœ°å®‰è£…å®è·µ">è½åœ°å®‰è£…å®è·µ</h3>
<p>å› ä¸º Cilium å¯¹å†…æ ¸è¦æ±‚å¾ˆé«˜ï¼Œæœ¬æ¥æˆ‘ä»¥ä¸ºéœ€è¦é‡‡ç”¨ Ubuntu æ‰å¯ä»¥å®‰è£…ï¼Œåæ¥æŸ¥é˜…æ–‡æ¡£å‘ç°ï¼Œåªè¦æ˜¯ CentOS 7.x ä¹‹åå°±å¯ä»¥æ”¯æŒã€‚å®‰è£…æ­¥éª¤å¦‚ä¸‹ã€‚</p>
<ol>
<li>å…ˆæŒ‚è½½ bpf æ¨¡å—ï¼š</li>
</ol>
<pre tabindex="0"><code>sudo mount bpffs -t bpf /sys/fs/bpf

</code></pre><ol start="2">
<li>ä¿®æ”¹ /etc/fstab æ–‡ä»¶ï¼Œåœ¨æœ€åé¢åŠ å…¥å¦‚ä¸‹é…ç½®ï¼š</li>
</ol>
<pre tabindex="0"><code>bpffs                  /sys/fs/bpf             bpf     defaults 0 0

</code></pre><ol start="3">
<li>å®‰è£…ä¸€å¥—å¹²å‡€çš„ Kubernetes ç³»ç»Ÿï¼Œè¿™é‡Œæˆ‘é‡‡ç”¨ K3s å¿«é€Ÿæ­å»ºï¼š</li>
</ol>
<pre tabindex="0"><code>export MASTER_IP=$(ip a |grep global | grep -v '10.0.2.15' | awk '{print $2}' | cut -f1 -d '/')
curl -sfL https://get.k3s.io | INSTALL_K3S_EXEC=&quot;--flannel-backend=none --no-flannel --node-ip=${MASTER_IP} --node-external-ip=${MASTER_IP} --bind-address=${MASTER_IP} --no-deploy servicelb --no-deploy traefik&quot; sh -

</code></pre><ol start="4">
<li>åœ¨è¿™ä¹‹åï¼Œå½“ä½ è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œä½ åº”è¯¥çœ‹åˆ° local-pathï¼Œmetrics-server å’Œ coredns pods å¤„äº Pending çŠ¶æ€ã€‚è¿™æ˜¯æ­£å¸¸çš„ã€‚</li>
</ol>
<pre tabindex="0"><code>[root@dev-mng-temp ~]# kubectl get po -n kube-system
NAME                                     READY   STATUS    RESTARTS   AGE
coredns-7944c66d8d-xn96v                 0/1     Pending   0          3m2s
local-path-provisioner-6d59f47c7-77bfz   0/1     Pending   0          3m2s
metrics-server-7566d596c8-8bhrq          0/1     Pending   0          3m2s

</code></pre><ol start="5">
<li>å®‰è£… helm3ï¼š</li>
</ol>
<pre tabindex="0"><code>sudo wget â€” no-check-certificate https://get.helm.sh/helm-v3.2.4-linux-amd64.tar.gz
sudo tar -zxvf helm-v3.2.4-linux-amd64.tar.gz
sudo mv linux-amd64/helm /usr/local/bin/helm

</code></pre><ol start="6">
<li>å®‰è£… Cilium å¥—ä»¶ï¼š</li>
</ol>
<pre tabindex="0"><code># sudo helm repo add cilium https://helm.cilium.io/

# sudo helm install cilium cilium/cilium --set global.device=eth0 --set global.tag=&quot;v1.8.1&quot; \
--set global.containerRuntime.integration=&quot;containerd&quot; \
--set global.containerRuntime.socketPath=&quot;/var/run/k3s/containerd/containerd.sock&quot; \
--set global.kubeProxyReplacement=&quot;strict&quot; \
--set global.hubble.enabled=&quot;true&quot; \
--set global.hubble.listenAddress=&quot;:4244&quot; \
--set global.hubble.metrics.enabled=&quot;{dns,drop,tcp,flow,port-distribution,icmp,http}&quot; \
--set global.hubble.relay.enabled=&quot;true&quot; \
--set global.hubble.ui.enabled=&quot;true&quot; \
--kubeconfig /etc/rancher/k3s/k3s.yaml --namespace kube-system

NAME: cilium
LAST DEPLOYED: Fri Oct  9 19:53:59 2020
NAMESPACE: kube-system
STATUS: deployed
REVISION: 1
TEST SUITE: None
NOTES:
You have successfully installed Cilium with Hubble Relay and Hubble UI.

Your release version is 1.8.4.

For any further help, visit https://docs.cilium.io/en/v1.8/gettinghelp

</code></pre><ol start="7">
<li>å»æ‰ IPAM ç‰¹æ€§ï¼š</li>
</ol>
<pre tabindex="0"><code>kubectl edit configmap cilium-config -n kube-system

### æŠŠä»¥ä¸‹é…ç½®å»æ‰
  ipam: cluster-pool
  k8s-require-ipv4-pod-cidr: &quot;true&quot;
  k8s-require-ipv6-pod-cidr: &quot;false&quot;

</code></pre><p>ç¨ç­‰ç‰‡åˆ»ï¼Œå°±å¯ä»¥çœ‹åˆ° Cilium ç›¸å…³çš„å®¹å™¨éƒ½å¯åŠ¨èµ·æ¥äº†ã€‚Cilium å®¹å™¨ç½‘ç»œé…ç½®æˆåŠŸã€‚</p>
<ol start="8">
<li>ä¿®æ”¹ Hubble UI æ§åˆ¶å°æœåŠ¡ä¸º NodePort æ¨¡å¼ï¼š</li>
</ol>
<pre tabindex="0"><code>sudo kubectl edit svc hubble-ui -n kube-system

sudo kubectl get svc hubble-ui -n kube-system

</code></pre><p>ç„¶åå°±å¯ä»¥æŸ¥çœ‹å¯è§†åŒ–æ•°æ®å¹³å°ï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="http://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/Kubernetes%20%E5%AE%9E%E8%B7%B5%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/assets/649f0760-0c9b-11eb-b059-25b81b32ffa7.jpg" alt="14-3-hubble-ui"></p>
<h3 id="ç»éªŒæ€»ç»“">ç»éªŒæ€»ç»“</h3>
<p>Cilium ç½‘ç»œæ–¹æ¡ˆä»å®é™…ä½“éªŒæ¥çœ‹ï¼Œå·²ç»å¯ä»¥æ»¡è¶³å¸¸è§„å®¹å™¨ç½‘ç»œéœ€æ±‚ã€‚å®ƒçš„å¯è§†åŒ–æ§åˆ¶å° Hubble æ˜¯å¯¹æ•°æ®å¹³é¢å¯è§†åŒ–çš„æœ€åŸç”Ÿå®ç°ï¼Œæ¯” Istio çš„æ–¹æ¡ˆæ˜¾ç„¶è¦æŠ€é«˜ä¸€ç­¹ã€‚æ•°æ®å¯è§†åŒ–è¿™å—è®©ç¬”è€…æœ‰ç‚¹æ„å¤–ï¼Œæ²¡æœ‰æƒ³åˆ° eBPF çš„ç¼–ç¨‹èƒ½åŠ›å¯ä»¥è¿™ä¹ˆå¼ºï¼Œä¸ºä¹‹åæ›´å¤šçš„æ’ä»¶åŠŸèƒ½å¸¦æ¥æ›´å¤šæœŸå¾…ã€‚å› ä¸º cilium æŠ€æœ¯å¤ªæ–°ï¼ŒæŒ‰ç…§å®è·µç»éªŒï¼Œç¬”è€…æ¨èå¤§å®¶åœ¨å¼€å‘æµ‹è¯•ç¯å¢ƒå¯ä»¥å¤§èƒ†ä½¿ç”¨èµ·æ¥ï¼Œç”Ÿäº§ç¯å¢ƒè¿˜è¦å†ç­‰ç­‰ï¼Œæˆ‘ç›¸ä¿¡åœ¨ç»è¿‡åŠå¹´çš„ç£¨ç ºï¼ŒCilium åº”è¯¥ä¼šæˆä¸º Kubernetes ç¤¾åŒºä½¿ç”¨æœ€å¤šçš„å®¹å™¨ç½‘ç»œæ–¹æ¡ˆã€‚</p>

        </div>
    </article>
</div>

    </main>
    <footer>
        <div id="pagination">
            
<div class="paginator">
    <div class="prev">
        
        <a href="/documents/columns/kubernetes/kubernetes%E5%AE%9E%E8%B7%B5%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/15-service-%E5%B1%82%E5%BC%95%E6%B5%81%E6%8A%80%E6%9C%AF%E5%AE%9E%E8%B7%B5/"><span>15 Service å±‚å¼•æµæŠ€æœ¯å®è·µ</span></a>
    </div>
    <div class="next">
        
        <a href="/documents/columns/kubernetes/kubernetes%E5%AE%9E%E8%B7%B5%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/17-%E5%BA%94%E7%94%A8%E6%B5%81%E9%87%8F%E7%9A%84%E4%BC%98%E9%9B%85%E6%97%A0%E6%8D%9F%E5%88%87%E6%8D%A2%E5%AE%9E%E8%B7%B5/"><span>17 åº”ç”¨æµé‡çš„ä¼˜é›…æ— æŸåˆ‡æ¢å®è·µ</span></a>
    </div>
</div>

        </div>
        <div class="toggler" onclick="toggleLight(this);">ğŸ’¡</div>
        <div id="copyright" style="display: none;">
    
    
    <p>&copy; 28280 <a href="/"></a>, powered by Hugo and Qiao</p>
</div>
    </footer>
    
<script>
    function toggleLight() {
        document.getElementById('page').classList.toggle('night');
    }
</script>
</body>

</html>