<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
<meta name="X-UA-Compatible" , content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<link rel="icon" type="image/png" href="/%20/favicon.png">

<title>10 åº”ç”¨ç®¡ç†ï¼šåˆè¯† Helm | Yipsen Ye</title>
<meta name="description" content="æ•´ä½“æ¦‚è§ˆ ä¸ŠèŠ‚ï¼Œæˆ‘ä»¬å·²ç»å­¦ä¹ äº†å¦‚ä½•é€šè¿‡ç¼–å†™é…ç½®æ–‡ä»¶çš„æ–¹å¼éƒ¨ç½²é¡¹ç›®ã€‚è€Œåœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œé¡¹ç›®æ‰€åŒ…å«ç»„ä»¶å¯èƒ½ä¸æ­¢ 3 ä¸ªï¼Œå¹¶ä¸”å¯èƒ½é¡¹ç›®æ•°ä¼šå¾ˆå¤šï¼Œå¦‚æœæ¯ä¸ªé¡¹ç›®çš„å‘å¸ƒï¼Œæ›´æ–°ç­‰éƒ½é€šè¿‡æ‰‹åŠ¨å»ç¼–å†™é…ç½®æ–‡ä»¶çš„æ–¹å¼ï¼Œå®åœ¨ä¸åˆ©äºç®¡ç†ã€‚
å¹¶ä¸”ï¼Œå½“çº¿ä¸Šå‡ºç°ä¸ªåˆ«ç»„ä»¶å‡çº§å›æ»šä¹‹ç±»çš„æ“ä½œï¼Œå¦‚æœç»„ä»¶ä¹‹é—´æœ‰ç›¸å…³ç‰ˆæœ¬ä¾èµ–ç­‰æƒ…å†µï¼Œé‚£äº‹æƒ…ä¼šå˜å¾—å¤æ‚çš„å¤šã€‚æˆ‘ä»¬éœ€è¦æœ‰æ›´ç®€å•çš„æœºåˆ¶æ¥è¾…åŠ©æˆ‘ä»¬å®Œæˆè¿™äº›äº‹æƒ…ã€‚
Helm ä»‹ç» Helm æ˜¯æ„å»ºäº K8S ä¹‹ä¸Šçš„åŒ…ç®¡ç†å™¨ï¼Œå¯ä¸æˆ‘ä»¬å¹³æ—¶æ¥è§¦åˆ°çš„ Yumï¼ŒAPTï¼ŒHomebrew æˆ–è€… Pip ç­‰åŒ…ç®¡ç†å™¨ç›¸ç±»æ¯”ã€‚
ä½¿ç”¨ Helm å¯ç®€åŒ–åŒ…åˆ†å‘ï¼Œå®‰è£…ï¼Œç‰ˆæœ¬ç®¡ç†ç­‰æ“ä½œæµç¨‹ã€‚åŒæ—¶å®ƒä¹Ÿæ˜¯ CNCF å­µåŒ–é¡¹ç›®ã€‚
Helm å®‰è£… Helm æ˜¯ C/S æ¶æ„ï¼Œä¸»è¦åˆ†ä¸ºå®¢æˆ·ç«¯ helm å’ŒæœåŠ¡ç«¯ Tillerã€‚å®‰è£…æ—¶å¯ç›´æ¥åœ¨ Helm ä»“åº“çš„ Release é¡µé¢ ä¸‹è½½æ‰€éœ€äºŒè¿›åˆ¶æ–‡ä»¶æˆ–è€…æºç åŒ…ã€‚
ç”±äºå½“å‰é¡¹ç›®çš„äºŒè¿›åˆ¶æ–‡ä»¶å­˜å‚¨å·²åˆ‡æ¢ä¸º GCSï¼Œæˆ‘å·²ç»ä¸ºå›½å†…ç”¨æˆ·å‡†å¤‡äº†æœ€æ–°ç‰ˆæœ¬çš„äºŒè¿›åˆ¶åŒ…ï¼Œå¯é€šè¿‡ä»¥ä¸‹é“¾æ¥è¿›è¡Œä¸‹è½½ã€‚
é“¾æ¥: https://pan.baidu.com/s/1n1zj3rlv2NyfiA6kRGrHfg æå–ç : 5huw ä¸‹è½½åå¯¹æ–‡ä»¶è¿›è¡Œè§£å‹ï¼Œæˆ‘è¿™é‡Œä»¥ Linux amd64 ä¸ºä¾‹ã€‚
âœ /tmp tar -zxvf helm-v2.11.0-linux-amd64.tar.gz linux-amd64/ linux-amd64/tiller linux-amd64/README.md linux-amd64/helm linux-amd64/LICENSE âœ /tmp tree linux-amd64 linux-amd64 â”œâ”€â”€ helm â”œâ”€â”€ LICENSE â”œâ”€â”€ README.md â””â”€â”€ tiller 0 directories, 4 files è§£å‹å®Œæˆåï¼Œå¯çœ‹åˆ°å…¶ä¸­åŒ…å« helm å’Œ tiller äºŒè¿›åˆ¶æ–‡ä»¶ã€‚">
<meta name="author" content="">

<link rel="stylesheet" type="text/css" href="/styles/main.css">

</head>

<body id="page">
    <header>
        <div class="logo-link" style="width: 60px; color: #CA6924;">
    <a href="http://yipsen.github.io/">
        <img style="margin-bottom: -1rem;" src="/images/deer.svg" alt="logo">
        <span style="font-size: 0.5rem; color: #CA6924;">Yipsen Ye</span>
    </a>
</div>
<nav class="navbar justify-content-end">
    <ul class="nav-list">
        
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/posts/">æœ­è®°</a>
        </li>
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/collections/">é™„è¡¨</a>
        </li>
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/about/">å…³äº</a>
        </li>
        
    </ul>
</nav>
    </header>
    <main id="content">
        
<div class="container"><aside>
    <div>
        
        
            
            
            <div class="post-category-icon"></div>
            <a href="/categories/kubernetes%e4%bb%8e%e4%b8%8a%e6%89%8b%e5%88%b0%e5%ae%9e%e8%b7%b5/">Kubernetesä»ä¸Šæ‰‹åˆ°å®è·µ</a>
            <ul>
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/01-%E5%BC%80%E7%AF%87-kubernetes-%E6%98%AF%E4%BB%80%E4%B9%88%E4%BB%A5%E5%8F%8A%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E5%AE%83/">01 å¼€ç¯‡ï¼š Kubernetes æ˜¯ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆéœ€è¦å®ƒ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/02-%E5%88%9D%E6%AD%A5%E8%AE%A4%E8%AF%86kubernetes-%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/">02 åˆæ­¥è®¤è¯†ï¼šKubernetes åŸºç¡€æ¦‚å¿µ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/03-%E5%AE%8F%E8%A7%82%E8%AE%A4%E8%AF%86%E6%95%B4%E4%BD%93%E6%9E%B6%E6%9E%84/">03 å®è§‚è®¤è¯†ï¼šæ•´ä½“æ¶æ„</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/04-%E6%90%AD%E5%BB%BA-kubernetes-%E9%9B%86%E7%BE%A4-%E6%9C%AC%E5%9C%B0%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BA/">04 æ­å»º Kubernetes é›†ç¾¤ - æœ¬åœ°å¿«é€Ÿæ­å»º</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/05-%E5%8A%A8%E6%89%8B%E5%AE%9E%E8%B7%B5%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA-kubernetes-%E9%9B%86%E7%BE%A4-%E7%94%9F%E4%BA%A7%E5%8F%AF%E7%94%A8/">05 åŠ¨æ‰‹å®è·µï¼šæ­å»ºä¸€ä¸ª Kubernetes é›†ç¾¤ - ç”Ÿäº§å¯ç”¨</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/06-%E9%9B%86%E7%BE%A4%E7%AE%A1%E7%90%86%E5%88%9D%E8%AF%86-kubectl/">06 é›†ç¾¤ç®¡ç†ï¼šåˆè¯† kubectl</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/07-%E9%9B%86%E7%BE%A4%E7%AE%A1%E7%90%86%E4%BB%A5-redis-%E4%B8%BA%E4%BE%8B-%E9%83%A8%E7%BD%B2%E5%8F%8A%E8%AE%BF%E9%97%AE/">07 é›†ç¾¤ç®¡ç†ï¼šä»¥ Redis ä¸ºä¾‹-éƒ¨ç½²åŠè®¿é—®</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/08-%E5%AE%89%E5%85%A8%E9%87%8D%E7%82%B9-%E8%AE%A4%E8%AF%81%E5%92%8C%E6%8E%88%E6%9D%83/">08 å®‰å…¨é‡ç‚¹ è®¤è¯å’Œæˆæƒ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/09-%E5%BA%94%E7%94%A8%E5%8F%91%E5%B8%83%E9%83%A8%E7%BD%B2%E5%AE%9E%E9%99%85%E9%A1%B9%E7%9B%AE/">09 åº”ç”¨å‘å¸ƒï¼šéƒ¨ç½²å®é™…é¡¹ç›®</a></li>
                
                
                
                    <li>10 åº”ç”¨ç®¡ç†ï¼šåˆè¯† Helm</li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/11-%E9%83%A8%E7%BD%B2%E5%AE%9E%E8%B7%B5%E4%BB%A5-helm-%E9%83%A8%E7%BD%B2%E9%A1%B9%E7%9B%AE/">11 éƒ¨ç½²å®è·µï¼šä»¥ Helm éƒ¨ç½²é¡¹ç›®</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/12-%E5%BA%96%E4%B8%81%E8%A7%A3%E7%89%9Bkube-apiserver/">12 åº–ä¸è§£ç‰›ï¼škube-apiserver</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/13-%E5%BA%96%E4%B8%81%E8%A7%A3%E7%89%9Betcd/">13 åº–ä¸è§£ç‰›ï¼šetcd</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/14-%E5%BA%96%E4%B8%81%E8%A7%A3%E7%89%9Bcontroller-manager/">14 åº–ä¸è§£ç‰›ï¼šcontroller-manager</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/15-%E5%BA%96%E4%B8%81%E8%A7%A3%E7%89%9Bkube-scheduler/">15 åº–ä¸è§£ç‰›ï¼škube-scheduler</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/16-%E5%BA%96%E4%B8%81%E8%A7%A3%E7%89%9Bkubelet/">16 åº–ä¸è§£ç‰›ï¼škubelet</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/17-%E5%BA%96%E4%B8%81%E8%A7%A3%E7%89%9Bkube-proxy/">17 åº–ä¸è§£ç‰›ï¼škube-proxy</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/18-%E5%BA%96%E4%B8%81%E8%A7%A3%E7%89%9Bcontainer-runtime-docker/">18 åº–ä¸è§£ç‰›ï¼šContainer Runtime ï¼ˆDockerï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/19-troubleshoot/">19 Troubleshoot</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/20-%E6%89%A9%E5%B1%95%E5%A2%9E%E5%BC%BAdashboard/">20 æ‰©å±•å¢å¼ºï¼šDashboard</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/21-%E6%89%A9%E5%B1%95%E5%A2%9E%E5%BC%BAcoredns/">21 æ‰©å±•å¢å¼ºï¼šCoreDNS</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/22-%E6%9C%8D%E5%8A%A1%E5%A2%9E%E5%BC%BAingress/">22 æœåŠ¡å¢å¼ºï¼šIngress</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/23-%E7%9B%91%E6%8E%A7%E5%AE%9E%E8%B7%B5%E5%AF%B9-k8s-%E9%9B%86%E7%BE%A4%E8%BF%9B%E8%A1%8C%E7%9B%91%E6%8E%A7/">23 ç›‘æ§å®è·µï¼šå¯¹ K8S é›†ç¾¤è¿›è¡Œç›‘æ§</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/24-%E6%80%BB%E7%BB%93/">24 æ€»ç»“</a></li>
                
                
            </ul>
        
    </div>
</aside>

<style>
    aside {
        position: fixed;
        left: 20px;
        background: #ffdee3;
        border-radius: 6px;
        padding: 20px;
        padding-top: 60px;
        box-shadow: 5px 10px #888;
        list-style-type: none;
        display: none;
    }

    .post-category-icon {
        position: absolute;
        width: 80px;
        height: 80px;
        top: -40px;
        left: 50%;
        margin-left: -40px;
        text-align: center;
        font-size: 36px;
        content: 'J';
        background: #ffdee3;
        border-radius: 100%;
        border: 10px solid #fff;
        box-shadow: 5px 10px #888;
    }
</style><article class="post-block">
        <h1 class="post-title">10 åº”ç”¨ç®¡ç†ï¼šåˆè¯† Helm</h1>
        <div class="post-info">
            <div> 
                <span class="post-date">ğŸ“…&nbsp;2021-12-22 01:47:36</span>ğŸ·ï¸&nbsp;<a class="post-tag" href="/tags/kubernetes/">kubernetes</a></div><div class="post-category">
                
                ğŸ“š&nbsp;<a href="/categories/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/">Kubernetesä»ä¸Šæ‰‹åˆ°å®è·µ</a>
                
            </div></div>
        <div class="post-content">
            <h2 id="æ•´ä½“æ¦‚è§ˆ">æ•´ä½“æ¦‚è§ˆ</h2>
<p>ä¸ŠèŠ‚ï¼Œæˆ‘ä»¬å·²ç»å­¦ä¹ äº†å¦‚ä½•é€šè¿‡ç¼–å†™é…ç½®æ–‡ä»¶çš„æ–¹å¼éƒ¨ç½²é¡¹ç›®ã€‚è€Œåœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œé¡¹ç›®æ‰€åŒ…å«ç»„ä»¶å¯èƒ½ä¸æ­¢ 3 ä¸ªï¼Œå¹¶ä¸”å¯èƒ½é¡¹ç›®æ•°ä¼šå¾ˆå¤šï¼Œå¦‚æœæ¯ä¸ªé¡¹ç›®çš„å‘å¸ƒï¼Œæ›´æ–°ç­‰éƒ½é€šè¿‡æ‰‹åŠ¨å»ç¼–å†™é…ç½®æ–‡ä»¶çš„æ–¹å¼ï¼Œå®åœ¨ä¸åˆ©äºç®¡ç†ã€‚</p>
<p>å¹¶ä¸”ï¼Œå½“çº¿ä¸Šå‡ºç°ä¸ªåˆ«ç»„ä»¶å‡çº§å›æ»šä¹‹ç±»çš„æ“ä½œï¼Œå¦‚æœç»„ä»¶ä¹‹é—´æœ‰ç›¸å…³ç‰ˆæœ¬ä¾èµ–ç­‰æƒ…å†µï¼Œé‚£äº‹æƒ…ä¼šå˜å¾—å¤æ‚çš„å¤šã€‚æˆ‘ä»¬éœ€è¦æœ‰æ›´ç®€å•çš„æœºåˆ¶æ¥è¾…åŠ©æˆ‘ä»¬å®Œæˆè¿™äº›äº‹æƒ…ã€‚</p>
<h2 id="helm-ä»‹ç»">Helm ä»‹ç»</h2>
<p><a href="https://www.helm.sh/">Helm</a> æ˜¯æ„å»ºäº K8S ä¹‹ä¸Šçš„åŒ…ç®¡ç†å™¨ï¼Œå¯ä¸æˆ‘ä»¬å¹³æ—¶æ¥è§¦åˆ°çš„ <code>Yum</code>ï¼Œ<code>APT</code>ï¼Œ<code>Homebrew</code> æˆ–è€… <code>Pip</code> ç­‰åŒ…ç®¡ç†å™¨ç›¸ç±»æ¯”ã€‚</p>
<p>ä½¿ç”¨ Helm å¯ç®€åŒ–åŒ…åˆ†å‘ï¼Œå®‰è£…ï¼Œç‰ˆæœ¬ç®¡ç†ç­‰æ“ä½œæµç¨‹ã€‚åŒæ—¶å®ƒä¹Ÿæ˜¯ CNCF å­µåŒ–é¡¹ç›®ã€‚</p>
<h2 id="helm-å®‰è£…">Helm å®‰è£…</h2>
<p>Helm æ˜¯ C/S æ¶æ„ï¼Œä¸»è¦åˆ†ä¸ºå®¢æˆ·ç«¯ <code>helm</code> å’ŒæœåŠ¡ç«¯ <code>Tiller</code>ã€‚å®‰è£…æ—¶å¯ç›´æ¥åœ¨ <a href="https://github.com/helm/helm/releases">Helm ä»“åº“çš„ Release é¡µé¢</a> ä¸‹è½½æ‰€éœ€äºŒè¿›åˆ¶æ–‡ä»¶æˆ–è€…æºç åŒ…ã€‚</p>
<p>ç”±äºå½“å‰é¡¹ç›®çš„äºŒè¿›åˆ¶æ–‡ä»¶å­˜å‚¨å·²åˆ‡æ¢ä¸º GCSï¼Œæˆ‘å·²ç»ä¸ºå›½å†…ç”¨æˆ·å‡†å¤‡äº†æœ€æ–°ç‰ˆæœ¬çš„äºŒè¿›åˆ¶åŒ…ï¼Œå¯é€šè¿‡ä»¥ä¸‹é“¾æ¥è¿›è¡Œä¸‹è½½ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">é“¾æ¥: https://pan.baidu.com/s/1n1zj3rlv2NyfiA6kRGrHfg æå–ç : 5huw 
</code></pre></div><p>ä¸‹è½½åå¯¹æ–‡ä»¶è¿›è¡Œè§£å‹ï¼Œæˆ‘è¿™é‡Œä»¥ Linux amd64 ä¸ºä¾‹ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">âœ  /tmp tar -zxvf helm-v2.11.0-linux-amd64.tar.gz
linux-amd64/
linux-amd64/tiller
linux-amd64/README.md
linux-amd64/helm
linux-amd64/LICENSE
âœ  /tmp tree linux-amd64 
linux-amd64
â”œâ”€â”€ helm
â”œâ”€â”€ LICENSE
â”œâ”€â”€ README.md
â””â”€â”€ tiller

<span style="color:#ae81ff">0</span> directories, <span style="color:#ae81ff">4</span> files
</code></pre></div><p>è§£å‹å®Œæˆåï¼Œå¯çœ‹åˆ°å…¶ä¸­åŒ…å« <code>helm</code> å’Œ <code>tiller</code> äºŒè¿›åˆ¶æ–‡ä»¶ã€‚</p>
<h3 id="å®¢æˆ·ç«¯-helm">å®¢æˆ·ç«¯ helm</h3>
<p><code>helm</code> æ˜¯ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œç›´æ¥å°†å®ƒç§»åŠ¨è‡³ <code>/usr/bin</code> ç›®å½•ä¸‹å³å¯ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">âœ  /tmp sudo mv linux-amd64/helm /usr/bin/helm 
</code></pre></div><p>è¿™æ—¶å€™ä¾¿å¯ç›´æ¥é€šè¿‡ <code>helm</code> å‘½ä»¤ä½¿ç”¨äº†ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬éªŒè¯å½“å‰ä½¿ç”¨çš„ç‰ˆæœ¬ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">âœ  /tmp helm version
Client: &amp;version.Version<span style="color:#f92672">{</span>SemVer:<span style="color:#e6db74">&#34;v2.11.0&#34;</span>, GitCommit:<span style="color:#e6db74">&#34;2e55dbe1fdb5fdb96b75ff144a339489417b146b&#34;</span>, GitTreeState:<span style="color:#e6db74">&#34;clean&#34;</span><span style="color:#f92672">}</span>
Error: Get http://localhost:8080/api/v1/namespaces/kube-system/pods?labelSelector<span style="color:#f92672">=</span>app%3Dhelm%2Cname%3Dtiller: dial tcp 127.0.0.1:8080: connect: connection refused
</code></pre></div><p>å¯ä»¥çœ‹åˆ°ä¸Šé¢æœ‰æ˜æ˜¾çš„æŠ¥é”™ï¼Œå¹¶ä¸”å¾ˆåƒ <code>kubectl</code> æœªæ­£ç¡®é…ç½®æ—¶çš„é”™è¯¯ã€‚è¿™æ˜¯å› ä¸º <code>helm</code> é»˜è®¤ä¼šå»è¯»å– <code>$HOME/.kube/config</code> çš„é…ç½®æ–‡ä»¶ï¼Œç”¨äºæ­£ç¡®çš„è¿æ¥è‡³ç›®æ ‡é›†ç¾¤ã€‚</p>
<p>å½“æˆ‘ä»¬æ­£ç¡®çš„é…ç½®å¥½ <code>$HOME/.kube/config</code> æ–‡ä»¶æ—¶ï¼Œå†æ¬¡æ‰§è¡Œï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">âœ  /tmp helm version
Client: &amp;version.Version<span style="color:#f92672">{</span>SemVer:<span style="color:#e6db74">&#34;v2.11.0&#34;</span>, GitCommit:<span style="color:#e6db74">&#34;2e55dbe1fdb5fdb96b75ff144a339489417b146b&#34;</span>, GitTreeState:<span style="color:#e6db74">&#34;clean&#34;</span><span style="color:#f92672">}</span>
Error: could not find tiller
</code></pre></div><p>è¿™æ¬¡æŠ¥é”™æ˜¯å› ä¸ºæ‰¾ä¸åˆ°æœåŠ¡ç«¯ <code>Tiller</code>ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬éƒ¨ç½²æœåŠ¡ç«¯ã€‚</p>
<h3 id="æœåŠ¡ç«¯-tiller">æœåŠ¡ç«¯ Tiller</h3>
<p>ä»¥ä¸‹è®¨è®ºä¸­ï¼Œå‰æéƒ½æ˜¯ <code>$HOME/.kube/config</code> å·²æ­£ç¡®é…ç½®ï¼Œå¹¶ä¸” <code>kebectl</code> æœ‰æ“ä½œé›†ç¾¤çš„æƒé™ã€‚</p>
<h4 id="æœ¬åœ°å®‰è£…">æœ¬åœ°å®‰è£…</h4>
<p>åˆšæ‰æˆ‘ä»¬è§£å‹çš„æ–‡ä»¶ä¸­ï¼Œè¿˜æœ‰ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ <code>tiller</code> ã€‚æˆ‘ä»¬å¯ä»¥ç›´æ¥æ‰§è¡Œå®ƒï¼Œç”¨äºåœ¨æœ¬åœ°å¯åŠ¨æœåŠ¡ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">âœ  /tmp ./linux-amd64/tiller
<span style="color:#f92672">[</span>main<span style="color:#f92672">]</span> 2018/11/18 23:47:10 Starting Tiller v2.11.0 <span style="color:#f92672">(</span>tls<span style="color:#f92672">=</span>false<span style="color:#f92672">)</span>
<span style="color:#f92672">[</span>main<span style="color:#f92672">]</span> 2018/11/18 23:47:10 GRPC listening on :44134
<span style="color:#f92672">[</span>main<span style="color:#f92672">]</span> 2018/11/18 23:47:10 Probes listening on :44135
<span style="color:#f92672">[</span>main<span style="color:#f92672">]</span> 2018/11/18 23:47:10 Storage driver is ConfigMap
<span style="color:#f92672">[</span>main<span style="color:#f92672">]</span> 2018/11/18 23:47:10 Max history per release is <span style="color:#ae81ff">0</span>
</code></pre></div><p>ç›´æ¥æ‰§è¡Œæ—¶ï¼Œé»˜è®¤ä¼šç›‘å¬ <code>44134</code> å’Œ <code>44135</code> ç«¯å£ï¼Œ<code>44134</code> ç«¯å£ç”¨äºå’Œ <code>helm</code> è¿›è¡Œé€šä¿¡ï¼Œè€Œ <code>44135</code> ä¸»è¦æ˜¯ç”¨äºåšæ¢æ´»çš„ï¼Œåœ¨éƒ¨ç½²è‡³ K8S æ—¶ä½¿ç”¨ã€‚</p>
<p>å½“æˆ‘ä»¬ä½¿ç”¨å®¢æˆ·ç«¯è¿æ¥æ—¶ï¼Œåªéœ€è®¾ç½® <code>HELM_HOST</code> ç¯å¢ƒå˜é‡å³å¯ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">âœ  ~ export HELM_HOST<span style="color:#f92672">=</span>localhost:44134
âœ  ~ helm version
Client: &amp;version.Version<span style="color:#f92672">{</span>SemVer:<span style="color:#e6db74">&#34;v2.11.0&#34;</span>, GitCommit:<span style="color:#e6db74">&#34;2e55dbe1fdb5fdb96b75ff144a339489417b146b&#34;</span>, GitTreeState:<span style="color:#e6db74">&#34;clean&#34;</span><span style="color:#f92672">}</span>
Server: &amp;version.Version<span style="color:#f92672">{</span>SemVer:<span style="color:#e6db74">&#34;v2.11.0&#34;</span>, GitCommit:<span style="color:#e6db74">&#34;2e55dbe1fdb5fdb96b75ff144a339489417b146b&#34;</span>, GitTreeState:<span style="color:#e6db74">&#34;clean&#34;</span><span style="color:#f92672">}</span>
</code></pre></div><p><strong>æ³¨æ„</strong> ä¸€å®šè¦æ­£ç¡®é…ç½® <code>$HOME/.kube/config</code> æ–‡ä»¶ï¼Œå¦åˆ™ä¼šå½±å“æ­£å¸¸åŠŸèƒ½ä½¿ç”¨ã€‚</p>
<h4 id="é»˜è®¤å®‰è£…">é»˜è®¤å®‰è£…</h4>
<p>å®˜æ–¹æä¾›äº†ä¸€ç§ä¸€é”®å¼å®‰è£…çš„æ–¹å¼ã€‚é‚£ä¾¿æ˜¯ <code>helm init</code> æ‰§è¡Œè¿™æ¡å‘½ä»¤åï¼Œä¼šåŒæ—¶åœ¨ K8S ä¸­éƒ¨ç½²æœåŠ¡ç«¯ Tiller å’Œåˆå§‹åŒ– helm çš„é»˜è®¤ç›®å½• <code>$HELM_HOME</code> é»˜è®¤å€¼ä¸º <code>$HOME/.helm</code>ã€‚</p>
<p>è¿™ç§æ–¹å¼ä¸‹ä¼šé»˜è®¤ä½¿ç”¨å®˜æ–¹é•œåƒ <code>gcr.io/kubernetes-helm/tiller</code> ç½‘ç»œåŸå› å¯èƒ½ä¼šå¯¼è‡´å®‰è£…å¤±è´¥ã€‚æ‰€ä»¥æˆ‘å·²å°†å®˜æ–¹é•œåƒè¿›è¡ŒåŒæ­¥ã€‚å¯ä½¿ç”¨ä»¥ä¸‹æ–¹å¼è¿›è¡Œä½¿ç”¨ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">âœ  ~ helm init --tiller-image taobeier/tiller:v2.11.0 
Creating /root/.helm
Creating /root/.helm/repository
Creating /root/.helm/repository/cache
Creating /root/.helm/repository/local
Creating /root/.helm/plugins
Creating /root/.helm/starters
Creating /root/.helm/cache/archive
Creating /root/.helm/repository/repositories.yaml
Adding stable repo with URL: https://kubernetes-charts.storage.googleapis.com
Adding local repo with URL: http://127.0.0.1:8879/charts
$HELM_HOME has been configured at /root/.helm.

Tiller <span style="color:#f92672">(</span>the Helm server-side component<span style="color:#f92672">)</span> has been installed into your Kubernetes Cluster.

Please note: by default, Tiller is deployed with an insecure <span style="color:#e6db74">&#39;allow unauthenticated users&#39;</span> policy.
To prevent this, run <span style="color:#e6db74">`</span>helm init<span style="color:#e6db74">`</span> with the --tiller-tls-verify flag.
For more information on securing your installation see: https://docs.helm.sh/using_helm/#securing-your-helm-installation
Happy Helming!
âœ  ~ helm version
Client: &amp;version.Version<span style="color:#f92672">{</span>SemVer:<span style="color:#e6db74">&#34;v2.11.0&#34;</span>, GitCommit:<span style="color:#e6db74">&#34;9ad53aac42165a5fadc6c87be0dea6b115f93090&#34;</span>, GitTreeState:<span style="color:#e6db74">&#34;clean&#34;</span><span style="color:#f92672">}</span>
Server: &amp;version.Version<span style="color:#f92672">{</span>SemVer:<span style="color:#e6db74">&#34;v2.11.0&#34;</span>, GitCommit:<span style="color:#e6db74">&#34;2e55dbe1fdb5fdb96b75ff144a339489417b146b&#34;</span>, GitTreeState:<span style="color:#e6db74">&#34;clean&#34;</span><span style="color:#f92672">}</span>
</code></pre></div><p>å¯ä»¥çœ‹åˆ° <code>$HELM_HOME</code> ç›®å½•å·²ç»åˆå§‹åŒ–å®Œæˆï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯å·²å¯ä»¥æ­£å¸¸é€šä¿¡ã€‚æŸ¥çœ‹ä¸‹å½“å‰ K8S é›†ç¾¤ä¸­çš„æƒ…å†µï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">âœ  ~ kubectl -n kube-system get deploy tiller-deploy
NAME            DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
tiller-deploy   <span style="color:#ae81ff">1</span>         <span style="color:#ae81ff">1</span>         <span style="color:#ae81ff">1</span>            <span style="color:#ae81ff">1</span>           6m
</code></pre></div><p>å¯ä»¥çœ‹åˆ°å·²æ­£å¸¸éƒ¨ç½²ã€‚</p>
<h4 id="æ‰‹åŠ¨å®‰è£…">æ‰‹åŠ¨å®‰è£…</h4>
<p>é€šè¿‡ä¸Šé¢çš„æè¿°ï¼Œå¯èƒ½ä½ å·²ç»å‘ç°ï¼Œå®‰è£…æœåŠ¡ç«¯ï¼Œå…¶å®ä¹Ÿå°±æ˜¯ä¸€æ¬¡æ™®é€šçš„éƒ¨ç½²ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ¥è‡ªè¡Œé€šè¿‡ <code>kubectl</code> å®Œæˆéƒ¨ç½²ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">âœ  ~ helm init --dry-run --debug  <span style="color:#75715e"># ç¯‡å¹…åŸå› ï¼Œä»¥ä¸‹å†…å®¹è¿›è¡Œäº†çœç•¥</span>
---                               
apiVersion: extensions/v1beta1
kind: Deployment                                    
metadata:                            
  creationTimestamp: null
  labels:         
    app: helm              
    name: tiller       
  name: tiller-deploy           
  namespace: kube-system   
spec:               
  replicas: <span style="color:#ae81ff">1</span> 
  strategy: <span style="color:#f92672">{}</span>                
  ...
status: <span style="color:#f92672">{}</span>

---
apiVersion: v1
kind: Service
metadata:
  creationTimestamp: null
  labels:
    app: helm
    name: tiller
  name: tiller-deploy
  namespace: kube-system
spec:
  ports:
  - name: tiller
    port: <span style="color:#ae81ff">44134</span>
    targetPort: tiller
  selector:
    app: helm
    name: tiller
  type: ClusterIP
status:
  loadBalancer: <span style="color:#f92672">{}</span>
</code></pre></div><p>å°†è¾“å‡ºå†…å®¹ä¿å­˜è‡³æ–‡ä»¶ä¸­ï¼Œè‡ªè¡Œä¿®æ”¹åï¼Œé€šè¿‡ <code>kubectl</code> è¿›è¡Œéƒ¨ç½²å³å¯ã€‚å»ºè®®åœ¨ä¿®æ”¹è¿‡ç¨‹ä¸­ï¼Œå°½é‡ä¸è¦å»æ›´æ”¹æ ‡ç­¾åŠé€‰æ‹©å™¨ã€‚</p>
<h4 id="rbac-ä½¿ç”¨">RBAC ä½¿ç”¨</h4>
<p>ä¸Šé¢çš„å†…å®¹ä¸­ï¼Œå‡æœªæåŠåˆ°æƒé™æ§åˆ¶ç›¸å…³çš„å†…å®¹ï¼Œä½†æ˜¯åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½æ˜¯ä¼šè¿›è¡Œæƒé™æ§åˆ¶çš„ã€‚</p>
<p>åœ¨ç¬¬ 8 èŠ‚ä¸­ï¼Œæˆ‘ä»¬å·²ç»è¯¦ç»†çš„è§£é‡Šäº†è®¤è¯æˆæƒç›¸å…³çš„å†…å®¹ã€‚æ‰€ä»¥ä¸‹é¢çš„å†…å®¹ä¸åšå¤ªå¤šè¯¦ç»†è§£é‡Šã€‚</p>
<p>è¿™é‡Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª <code>ServiceAccount</code> å‘½åä¸º <code>tiller</code>ï¼Œä¸ºäº†ç®€å•ï¼Œæˆ‘ä»¬ç›´æ¥å°†å®ƒä¸ <code>cluster-admin</code> è¿›è¡Œç»‘å®šã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
<span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ServiceAccount</span>
<span style="color:#f92672">metadata</span>:
  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">tiller</span>
  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">kube-system</span>
---
<span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">rbac.authorization.k8s.io/v1</span>
<span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ClusterRoleBinding</span>
<span style="color:#f92672">metadata</span>:
  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">tiller</span>
<span style="color:#f92672">roleRef</span>:
  <span style="color:#f92672">apiGroup</span>: <span style="color:#ae81ff">rbac.authorization.k8s.io</span>
  <span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ClusterRole</span>
  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">cluster-admin</span>
<span style="color:#f92672">subjects</span>:
  - <span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ServiceAccount</span>
    <span style="color:#f92672">name</span>: <span style="color:#ae81ff">tiller</span>
    <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">kube-system</span>
</code></pre></div><p>å°†æ­¤å†…å®¹ä¿å­˜ä¸º <code>tiller-rbac.yaml</code>ï¼Œå¼€å§‹è¿›è¡Œéƒ¨ç½²æ“ä½œã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">âœ  ~ kubectl apply -f tiller-rbac.yaml
serviceaccount/tiller created
clusterrolebinding.rbac.authorization.k8s.io/tiller created
âœ  ~ helm init --service-account tiller
Creating /root/.helm
Creating /root/.helm/repository
Creating /root/.helm/repository/cache
Creating /root/.helm/repository/local
Creating /root/.helm/plugins
Creating /root/.helm/starters
Creating /root/.helm/cache/archive
Creating /root/.helm/repository/repositories.yaml
Adding stable repo with URL: https://kubernetes-charts.storage.googleapis.com
Adding local repo with URL: http://127.0.0.1:8879/charts
$HELM_HOME has been configured at /root/.helm.

Tiller <span style="color:#f92672">(</span>the Helm server-side component<span style="color:#f92672">)</span> has been installed into your Kubernetes Cluster.

Please note: by default, Tiller is deployed with an insecure <span style="color:#e6db74">&#39;allow unauthenticated users&#39;</span> policy.
To prevent this, run <span style="color:#e6db74">`</span>helm init<span style="color:#e6db74">`</span> with the --tiller-tls-verify flag.
For more information on securing your installation see: https://docs.helm.sh/using_helm/#securing-your-helm-installation
Happy Helming!
âœ  ~ helm version
Client: &amp;version.Version<span style="color:#f92672">{</span>SemVer:<span style="color:#e6db74">&#34;v2.11.0&#34;</span>, GitCommit:<span style="color:#e6db74">&#34;2e55dbe1fdb5fdb96b75ff144a339489417b146b&#34;</span>, GitTreeState:<span style="color:#e6db74">&#34;clean&#34;</span><span style="color:#f92672">}</span>
Server: &amp;version.Version<span style="color:#f92672">{</span>SemVer:<span style="color:#e6db74">&#34;v2.11.0&#34;</span>, GitCommit:<span style="color:#e6db74">&#34;2e55dbe1fdb5fdb96b75ff144a339489417b146b&#34;</span>, GitTreeState:<span style="color:#e6db74">&#34;clean&#34;</span><span style="color:#f92672">}</span>
</code></pre></div><p>ä»¥æ­¤æ–¹å¼å®Œæˆéƒ¨ç½²ã€‚</p>
<h2 id="helm-æ¦‚å¿µ">Helm æ¦‚å¿µ</h2>
<h3 id="chart">Chart</h3>
<p><code>chart</code> å°±æ˜¯ Helm æ‰€ç®¡ç†çš„åŒ…ï¼Œç±»ä¼¼äº <code>Yum</code> æ‰€ç®¡ç†çš„ <code>rpm</code> åŒ…æˆ–æ˜¯ <code>Homebrew</code> ç®¡ç†çš„ <code>Formulae</code>ã€‚å®ƒåŒ…å«ç€ä¸€ä¸ªåº”ç”¨è¦éƒ¨ç½²è‡³ K8S ä¸Šæ‰€å¿…é¡»çš„æ‰€æœ‰èµ„æºã€‚</p>
<h3 id="release">Release</h3>
<p><code>Release</code> å°±æ˜¯ <code>chart</code> åœ¨ K8S ä¸Šéƒ¨ç½²åçš„å®ä¾‹ã€‚<code>chart</code> çš„æ¯æ¬¡éƒ¨ç½²éƒ½å°†äº§ç”Ÿä¸€æ¬¡ <code>Release</code>ã€‚è¿™å’Œä¸Šé¢ç±»æ¯”çš„åŒ…ç®¡ç†å™¨å°±æœ‰æ‰€ä¸åŒäº†ï¼Œå¤šæ•°çš„ç³»ç»Ÿçº§åŒ…ç®¡ç†å™¨æ‰€å®‰è£…çš„åŒ…åªä¼šåœ¨ç³»ç»Ÿä¸­å­˜åœ¨ä¸€ä»½ã€‚æˆ‘ä»¬å¯ä»¥ä»¥ <code>Pip</code> åœ¨è™šæ‹Ÿç¯å¢ƒä¸‹çš„åŒ…å®‰è£…ï¼Œæˆ–è€… <code>Npm</code> çš„ local install æ¥è¿›è¡Œç±»æ¯”ã€‚</p>
<h3 id="repository">Repository</h3>
<p><code>Repository</code> å°±æ˜¯å­—é¢æ„æ€ï¼Œå­˜å‚¨ <code>chart</code> çš„ä»“åº“ã€‚è¿˜è®°å¾—æˆ‘ä»¬ä¸Šé¢æ‰§è¡Œ <code>helm init</code> æ—¶çš„è¾“å‡ºå—ï¼Ÿé»˜è®¤æƒ…å†µä¸‹ï¼Œåˆå§‹åŒ– Helm çš„æ—¶å€™ï¼Œä¼šæ·»åŠ ä¸¤ä¸ªä»“åº“ï¼Œä¸€ä¸ªæ˜¯ <code>stable</code> ä»“åº“ <a href="https://kubernetes-charts.storage.googleapis.com/">kubernetes-charts.storage.googleapis.com</a> å¦ä¸€ä¸ªåˆ™æ˜¯ <code>local</code> ä»“åº“ï¼Œåœ°å€æ˜¯ <a href="http://127.0.0.1:8879/charts">http://127.0.0.1:8879/charts</a> ã€‚</p>
<h3 id="config">Config</h3>
<p>å‰é¢æåˆ°äº† <code>chart</code> æ˜¯åº”ç”¨ç¨‹åºæ‰€å¿…é¡»çš„èµ„æºï¼Œå½“ç„¶æˆ‘ä»¬å®é™…éƒ¨ç½²çš„æ—¶å€™ï¼Œå¯èƒ½å°±éœ€è¦æœ‰äº›è‡ªå®šä¹‰çš„é…ç½®äº†ã€‚<code>Config</code> ä¾¿æ˜¯ç”¨äºå®Œæˆæ­¤é¡¹åŠŸèƒ½çš„ï¼Œåœ¨éƒ¨ç½²æ—¶å€™ï¼Œä¼šå°† <code>config</code> ä¸ <code>chart</code> è¿›è¡Œåˆå¹¶ï¼Œå…±åŒæ„æˆæˆ‘ä»¬å°†éƒ¨ç½²çš„åº”ç”¨ã€‚</p>
<h2 id="helm-çš„å·¥ä½œåŸç†">Helm çš„å·¥ä½œåŸç†</h2>
<p><code>helm</code> é€šè¿‡ <code>gRPC</code> å°† <code>chart</code> å‘é€è‡³ <code>Tiller</code> ï¼Œ<code>Tiller</code> åˆ™é€šè¿‡å†…ç½®çš„ <code>kubernetes</code> å®¢æˆ·ç«¯åº“ä¸ K8S çš„ API server è¿›è¡Œäº¤æµï¼Œå°† <code>chart</code> è¿›è¡Œéƒ¨ç½²ï¼Œå¹¶ç”Ÿæˆ <code>Release</code> ç”¨äºç®¡ç†ã€‚</p>
<p>å‰é¢åªè¯´åˆ°äº† <code>helm</code> ä¸ <code>Tiller</code> äº¤äº’çš„åè®®ï¼Œä½†å°šæœªè¯´å…¶æ•°æ®é“¾è·¯ã€‚</p>
<p>æˆ‘ä»¬æ¥çœ‹çœ‹ <code>Tiller</code> çš„éƒ¨ç½²æƒ…å†µã€‚ä¸»è¦çœ‹ <code>Service</code>ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">âœ  ~ kubectl -n kube-system get svc
NAME            TYPE        CLUSTER-IP       EXTERNAL-IP   PORT<span style="color:#f92672">(</span>S<span style="color:#f92672">)</span>         AGE
kube-dns        ClusterIP   10.96.0.10       &lt;none&gt;        53/UDP,53/TCP   1h
tiller-deploy   ClusterIP   10.107.204.164   &lt;none&gt;        44134/TCP       33m
</code></pre></div><p><code>Tiller</code> é»˜è®¤é‡‡ç”¨ <code>ClusterIP</code> ç±»å‹çš„ <code>Service</code> è¿›è¡Œéƒ¨ç½²ã€‚è€Œæˆ‘ä»¬çŸ¥é“çš„ <code>ClusterIP</code> ç±»å‹çš„ <code>Service</code> æ˜¯ä»…é™é›†ç¾¤å†…è®¿é—®çš„ã€‚</p>
<p>åœ¨è¿™é‡Œæ‰€ä¾èµ–çš„æŠ€æœ¯ï¼Œä¾¿æ˜¯åœ¨ç¬¬ 5 èŠ‚ï¼Œæˆ‘ä»¬æåˆ°çš„ <code>socat</code> ã€‚<code>helm</code> é€šè¿‡ <code>socat</code> çš„ç«¯å£è½¬å‘ï¼ˆæˆ–è€…è¯´ K8S çš„ä»£ç†ï¼‰ï¼Œè¿›è€Œå®ç°äº†æœ¬åœ°ä¸ <code>Tiller</code> çš„é€šä¿¡ã€‚</p>
<p>å½“ç„¶ï¼Œä»¥ä¸Šå†…å®¹å‡ä»¥å½“å‰æœ€æ–°ç‰ˆæœ¬ <code>2.11.0</code> ä¸ºä¾‹ã€‚å½“ä¸‹ä¸€ä¸ªå¤§ç‰ˆæœ¬ Helm v3 å‡ºç°æ—¶ï¼Œ <code>Tiller</code> å°†ä¸å¤å­˜åœ¨ï¼Œé€šä¿¡æœºåˆ¶å’Œå·¥ä½œåŸç†ä¹Ÿå°†å‘ç”Ÿå˜åŒ–ã€‚</p>
<h2 id="æ€»ç»“">æ€»ç»“</h2>
<p>é€šè¿‡æœ¬èŠ‚ï¼Œæˆ‘ä»¬å·²ç»å­¦ä¹ åˆ°äº† Helm çš„åŸºç¡€çŸ¥è¯†å’Œå·¥ä½œåŸç†ï¼Œäº†è§£åˆ°äº† Helm çš„ç”¨é€”ä»¥åŠå¦‚ä½•åœ¨æœ¬åœ°å’Œ K8S ä¸­éƒ¨ç½²å®ƒã€‚éœ€è¦æ³¨æ„çš„æ˜¯ <code>$HOME/.kube/config</code> éœ€è¦æå‰é…ç½®å¥½ï¼Œä»¥åŠ <code>socat</code> å·¥å…·éœ€è¦æå‰å®‰è£…ï¼Œå¯å‚è€ƒç¬¬ 5 èŠ‚çš„å†…å®¹ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ä¸ŠèŠ‚ä¸­çš„ç¤ºä¾‹é¡¹ç›®ä½¿ç”¨ Helm éƒ¨ç½²è‡³ K8S é›†ç¾¤ä¸­ã€‚</p>

        </div>
    </article>
</div>

    </main>
    <footer>
        <div id="pagination">
            
<div class="paginator">
    <div class="prev">
        
        <a href="/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/09-%E5%BA%94%E7%94%A8%E5%8F%91%E5%B8%83%E9%83%A8%E7%BD%B2%E5%AE%9E%E9%99%85%E9%A1%B9%E7%9B%AE/"><span>09 åº”ç”¨å‘å¸ƒï¼šéƒ¨ç½²å®é™…é¡¹ç›®</span></a>
    </div>
    <div class="next">
        
        <a href="/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/11-%E9%83%A8%E7%BD%B2%E5%AE%9E%E8%B7%B5%E4%BB%A5-helm-%E9%83%A8%E7%BD%B2%E9%A1%B9%E7%9B%AE/"><span>11 éƒ¨ç½²å®è·µï¼šä»¥ Helm éƒ¨ç½²é¡¹ç›®</span></a>
    </div>
</div>

        </div>
        <div class="toggler" onclick="toggleLight(this);">ğŸ’¡</div>
        <div id="copyright" style="display: none;">
    
    
    <p>&copy; 28280 <a href="/"></a>, powered by Hugo and Qiao</p>
</div>
    </footer>
    
<script>
    function toggleLight() {
        document.getElementById('page').classList.toggle('night');
    }
</script>
</body>

</html>