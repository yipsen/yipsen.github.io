<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
<meta name="X-UA-Compatible" , content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<link rel="icon" type="image/png" href="/%20/favicon.png">

<title>11 éƒ¨ç½²å®è·µï¼šä»¥ Helm éƒ¨ç½²é¡¹ç›® | Yipsen Ye</title>
<meta name="description" content="æ¦‚è§ˆ ä¸ŠèŠ‚ï¼Œæˆ‘ä»¬å­¦ä¹ åˆ°äº† Helm çš„åŸºç¡€æ¦‚å¿µå’Œå·¥ä½œåŸç†ï¼Œæœ¬èŠ‚æˆ‘ä»¬å°† Helm ç”¨äºæˆ‘ä»¬çš„å®é™…é¡¹ç›®ï¼Œç¼–å†™ Helm chart ä»¥åŠé€šè¿‡ Helm è¿›è¡Œéƒ¨ç½²ã€‚
Helm chart ä¸ŠèŠ‚æˆ‘ä»¬è§£é‡Šè¿‡ chart çš„å«ä¹‰ï¼Œç°åœ¨æˆ‘ä»¬è¦å°†é¡¹ç›®ä½¿ç”¨ Helm éƒ¨ç½²ï¼Œé‚£ä¹ˆé¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ª chartã€‚
Chart ç»“æ„ åœ¨æˆ‘ä»¬é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ï¼Œé€šè¿‡ä»¥ä¸‹å‘½ä»¤åˆ›å»ºä¸€ä¸ª chartã€‚
âœ saythx git:(master) helm create saythx Creating saythx âœ saythx git:(master) âœ— tree -a saythx saythx â”œâ”€â”€ charts â”œâ”€â”€ Chart.yaml â”œâ”€â”€ .helmignore â”œâ”€â”€ templates â”‚ â”œâ”€â”€ deployment.yaml â”‚ â”œâ”€â”€ _helpers.tpl â”‚ â”œâ”€â”€ ingress.yaml â”‚ â”œâ”€â”€ NOTES.txt â”‚ â””â”€â”€ service.yaml â””â”€â”€ values.yaml 2 directories, 8 files åˆ›å»ºå®Œæˆåï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°é»˜è®¤åˆ›å»ºçš„ chart ä¸­åŒ…å«äº†å‡ ä¸ªæ–‡ä»¶å’Œç›®å½•ã€‚æˆ‘ä»¬å…ˆå¯¹å…¶è¿›è¡Œè§£é‡Šã€‚">
<meta name="author" content="">

<link rel="stylesheet" type="text/css" href="/styles/main.css">

</head>

<body id="page">
    <header>
        <div class="logo-link" style="width: 60px; color: #CA6924;">
    <a href="http://yipsen.github.io/">
        <img style="margin-bottom: -1rem;" src="/images/deer.svg" alt="logo">
        <span style="font-size: 0.5rem; color: #CA6924;">Yipsen Ye</span>
    </a>
</div>
<nav class="navbar justify-content-end">
    <ul class="nav-list">
        
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/posts/">æœ­è®°</a>
        </li>
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/collections/">é™„è¡¨</a>
        </li>
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/about/">å…³äº</a>
        </li>
        
    </ul>
</nav>
    </header>
    <main id="content">
        
<div class="container"><aside>
    <div>
        
        
            
            
            <div class="post-category-icon"></div>
            <a href="/categories/kubernetes%e4%bb%8e%e4%b8%8a%e6%89%8b%e5%88%b0%e5%ae%9e%e8%b7%b5/">Kubernetesä»ä¸Šæ‰‹åˆ°å®è·µ</a>
            <ul>
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/01-%E5%BC%80%E7%AF%87-kubernetes-%E6%98%AF%E4%BB%80%E4%B9%88%E4%BB%A5%E5%8F%8A%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E5%AE%83/">01 å¼€ç¯‡ï¼š Kubernetes æ˜¯ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆéœ€è¦å®ƒ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/02-%E5%88%9D%E6%AD%A5%E8%AE%A4%E8%AF%86kubernetes-%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/">02 åˆæ­¥è®¤è¯†ï¼šKubernetes åŸºç¡€æ¦‚å¿µ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/03-%E5%AE%8F%E8%A7%82%E8%AE%A4%E8%AF%86%E6%95%B4%E4%BD%93%E6%9E%B6%E6%9E%84/">03 å®è§‚è®¤è¯†ï¼šæ•´ä½“æ¶æ„</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/04-%E6%90%AD%E5%BB%BA-kubernetes-%E9%9B%86%E7%BE%A4-%E6%9C%AC%E5%9C%B0%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BA/">04 æ­å»º Kubernetes é›†ç¾¤ - æœ¬åœ°å¿«é€Ÿæ­å»º</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/05-%E5%8A%A8%E6%89%8B%E5%AE%9E%E8%B7%B5%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA-kubernetes-%E9%9B%86%E7%BE%A4-%E7%94%9F%E4%BA%A7%E5%8F%AF%E7%94%A8/">05 åŠ¨æ‰‹å®è·µï¼šæ­å»ºä¸€ä¸ª Kubernetes é›†ç¾¤ - ç”Ÿäº§å¯ç”¨</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/06-%E9%9B%86%E7%BE%A4%E7%AE%A1%E7%90%86%E5%88%9D%E8%AF%86-kubectl/">06 é›†ç¾¤ç®¡ç†ï¼šåˆè¯† kubectl</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/07-%E9%9B%86%E7%BE%A4%E7%AE%A1%E7%90%86%E4%BB%A5-redis-%E4%B8%BA%E4%BE%8B-%E9%83%A8%E7%BD%B2%E5%8F%8A%E8%AE%BF%E9%97%AE/">07 é›†ç¾¤ç®¡ç†ï¼šä»¥ Redis ä¸ºä¾‹-éƒ¨ç½²åŠè®¿é—®</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/08-%E5%AE%89%E5%85%A8%E9%87%8D%E7%82%B9-%E8%AE%A4%E8%AF%81%E5%92%8C%E6%8E%88%E6%9D%83/">08 å®‰å…¨é‡ç‚¹ è®¤è¯å’Œæˆæƒ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/09-%E5%BA%94%E7%94%A8%E5%8F%91%E5%B8%83%E9%83%A8%E7%BD%B2%E5%AE%9E%E9%99%85%E9%A1%B9%E7%9B%AE/">09 åº”ç”¨å‘å¸ƒï¼šéƒ¨ç½²å®é™…é¡¹ç›®</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/10-%E5%BA%94%E7%94%A8%E7%AE%A1%E7%90%86%E5%88%9D%E8%AF%86-helm/">10 åº”ç”¨ç®¡ç†ï¼šåˆè¯† Helm</a></li>
                
                
                
                    <li>11 éƒ¨ç½²å®è·µï¼šä»¥ Helm éƒ¨ç½²é¡¹ç›®</li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/12-%E5%BA%96%E4%B8%81%E8%A7%A3%E7%89%9Bkube-apiserver/">12 åº–ä¸è§£ç‰›ï¼škube-apiserver</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/13-%E5%BA%96%E4%B8%81%E8%A7%A3%E7%89%9Betcd/">13 åº–ä¸è§£ç‰›ï¼šetcd</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/14-%E5%BA%96%E4%B8%81%E8%A7%A3%E7%89%9Bcontroller-manager/">14 åº–ä¸è§£ç‰›ï¼šcontroller-manager</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/15-%E5%BA%96%E4%B8%81%E8%A7%A3%E7%89%9Bkube-scheduler/">15 åº–ä¸è§£ç‰›ï¼škube-scheduler</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/16-%E5%BA%96%E4%B8%81%E8%A7%A3%E7%89%9Bkubelet/">16 åº–ä¸è§£ç‰›ï¼škubelet</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/17-%E5%BA%96%E4%B8%81%E8%A7%A3%E7%89%9Bkube-proxy/">17 åº–ä¸è§£ç‰›ï¼škube-proxy</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/18-%E5%BA%96%E4%B8%81%E8%A7%A3%E7%89%9Bcontainer-runtime-docker/">18 åº–ä¸è§£ç‰›ï¼šContainer Runtime ï¼ˆDockerï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/19-troubleshoot/">19 Troubleshoot</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/20-%E6%89%A9%E5%B1%95%E5%A2%9E%E5%BC%BAdashboard/">20 æ‰©å±•å¢å¼ºï¼šDashboard</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/21-%E6%89%A9%E5%B1%95%E5%A2%9E%E5%BC%BAcoredns/">21 æ‰©å±•å¢å¼ºï¼šCoreDNS</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/22-%E6%9C%8D%E5%8A%A1%E5%A2%9E%E5%BC%BAingress/">22 æœåŠ¡å¢å¼ºï¼šIngress</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/23-%E7%9B%91%E6%8E%A7%E5%AE%9E%E8%B7%B5%E5%AF%B9-k8s-%E9%9B%86%E7%BE%A4%E8%BF%9B%E8%A1%8C%E7%9B%91%E6%8E%A7/">23 ç›‘æ§å®è·µï¼šå¯¹ K8S é›†ç¾¤è¿›è¡Œç›‘æ§</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/24-%E6%80%BB%E7%BB%93/">24 æ€»ç»“</a></li>
                
                
            </ul>
        
    </div>
</aside>

<style>
    aside {
        position: fixed;
        left: 20px;
        background: #ffdee3;
        border-radius: 6px;
        padding: 20px;
        padding-top: 60px;
        box-shadow: 5px 10px #888;
        list-style-type: none;
        display: none;
    }

    .post-category-icon {
        position: absolute;
        width: 80px;
        height: 80px;
        top: -40px;
        left: 50%;
        margin-left: -40px;
        text-align: center;
        font-size: 36px;
        content: 'J';
        background: #ffdee3;
        border-radius: 100%;
        border: 10px solid #fff;
        box-shadow: 5px 10px #888;
    }
</style><article class="post-block">
        <h1 class="post-title">11 éƒ¨ç½²å®è·µï¼šä»¥ Helm éƒ¨ç½²é¡¹ç›®</h1>
        <div class="post-info">
            <div> 
                <span class="post-date">ğŸ“…&nbsp;2021-12-22 01:47:37</span>ğŸ·ï¸&nbsp;<a class="post-tag" href="/tags/kubernetes/">kubernetes</a></div><div class="post-category">
                
                ğŸ“š&nbsp;<a href="/categories/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/">Kubernetesä»ä¸Šæ‰‹åˆ°å®è·µ</a>
                
            </div></div>
        <div class="post-content">
            <h2 id="æ¦‚è§ˆ">æ¦‚è§ˆ</h2>
<p>ä¸ŠèŠ‚ï¼Œæˆ‘ä»¬å­¦ä¹ åˆ°äº† Helm çš„åŸºç¡€æ¦‚å¿µå’Œå·¥ä½œåŸç†ï¼Œæœ¬èŠ‚æˆ‘ä»¬å°† Helm ç”¨äºæˆ‘ä»¬çš„å®é™…é¡¹ç›®ï¼Œç¼–å†™ Helm <code>chart</code> ä»¥åŠé€šè¿‡ Helm è¿›è¡Œéƒ¨ç½²ã€‚</p>
<h2 id="helm-chart">Helm chart</h2>
<p>ä¸ŠèŠ‚æˆ‘ä»¬è§£é‡Šè¿‡ <code>chart</code> çš„å«ä¹‰ï¼Œç°åœ¨æˆ‘ä»¬è¦å°†é¡¹ç›®ä½¿ç”¨ Helm éƒ¨ç½²ï¼Œé‚£ä¹ˆé¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ª <code>chart</code>ã€‚</p>
<h3 id="chart-ç»“æ„">Chart ç»“æ„</h3>
<p>åœ¨æˆ‘ä»¬é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ï¼Œé€šè¿‡ä»¥ä¸‹å‘½ä»¤åˆ›å»ºä¸€ä¸ª <code>chart</code>ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">âœ  saythx git:<span style="color:#f92672">(</span>master<span style="color:#f92672">)</span> helm create saythx
Creating saythx
âœ  saythx git:<span style="color:#f92672">(</span>master<span style="color:#f92672">)</span> âœ— tree -a saythx
saythx
â”œâ”€â”€ charts
â”œâ”€â”€ Chart.yaml
â”œâ”€â”€ .helmignore
â”œâ”€â”€ templates
â”‚   â”œâ”€â”€ deployment.yaml
â”‚   â”œâ”€â”€ _helpers.tpl
â”‚   â”œâ”€â”€ ingress.yaml
â”‚   â”œâ”€â”€ NOTES.txt
â”‚   â””â”€â”€ service.yaml
â””â”€â”€ values.yaml

<span style="color:#ae81ff">2</span> directories, <span style="color:#ae81ff">8</span> files
</code></pre></div><p>åˆ›å»ºå®Œæˆåï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°é»˜è®¤åˆ›å»ºçš„ <code>chart</code> ä¸­åŒ…å«äº†å‡ ä¸ªæ–‡ä»¶å’Œç›®å½•ã€‚æˆ‘ä»¬å…ˆå¯¹å…¶è¿›è¡Œè§£é‡Šã€‚</p>
<h4 id="chartyaml">Chart.yaml</h4>
<pre tabindex="0"><code>âœ  saythx git:(master) âœ— cat saythx/Chart.yaml
apiVersion: v1
appVersion: &quot;1.0&quot;
description: A Helm chart for Kubernetes
name: saythx
version: 0.1.0
</code></pre><p>è¿™ä¸ªæ–‡ä»¶æ˜¯æ¯ä¸ª <code>chart</code> å¿…ä¸å¯å°‘çš„ä¸€ä¸ªæ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«ç€å‡ ä¸ªé‡è¦çš„å±æ€§ï¼Œå¦‚ï¼š</p>
<ul>
<li><code>apiVersion</code>ï¼šç›®å‰ç‰ˆæœ¬éƒ½ä¸º <code>v1</code></li>
<li><code>appVersion</code>ï¼šè¿™æ˜¯åº”ç”¨çš„ç‰ˆæœ¬å·ï¼Œéœ€è¦ä¸ <code>apiVersion</code>ï¼Œ <code>version</code> ç­‰å­—æ®µæ³¨æ„åŒºåˆ†</li>
<li><code>name</code>: é€šå¸¸è¦æ±‚ <code>chart</code> çš„åå­—å¿…é¡»å’Œå®ƒæ‰€åœ¨ç›®å½•ä¿æŒä¸€è‡´ï¼Œä¸”æ­¤å­—æ®µå¿…é¡»</li>
<li><code>version</code>ï¼šè¡¨æ˜å½“å‰ <code>chart</code> çš„ç‰ˆæœ¬å·ï¼Œä¼šç›´æ¥å½±å“ <code>Release</code> çš„è®°å½•ï¼Œä¸”æ­¤å­—æ®µå¿…é¡»</li>
<li><code>description</code>ï¼šæè¿°</li>
</ul>
<h4 id="charts">charts</h4>
<p><code>charts</code> æ–‡ä»¶å¤¹æ˜¯ç”¨äºå­˜æ”¾ä¾èµ–çš„ <code>chart</code> çš„ã€‚å½“æœ‰ä¾èµ–éœ€è¦ç®¡ç†æ—¶ï¼Œå¯æ·»åŠ  <code>requirements.yaml</code> æ–‡ä»¶ï¼Œå¯ç”¨äºç®¡ç†é¡¹ç›®å†…æˆ–è€…å¤–éƒ¨çš„ä¾èµ–ã€‚</p>
<h4 id="helmignore">.helmignore</h4>
<p><code>.helmignore</code> ç±»ä¼¼äº <code>.gitignore</code> å’Œ <code>.dockerignore</code> ä¹‹ç±»çš„ï¼Œç”¨äºå¿½ç•¥æ‰ä¸€äº›ä¸æƒ³åŒ…å«åœ¨ <code>chart</code> å†…çš„æ–‡ä»¶ã€‚</p>
<h4 id="templates">templates</h4>
<p><code>templates</code> æ–‡ä»¶å¤¹å†…å­˜æ”¾ç€ <code>chart</code> æ‰€ä½¿ç”¨çš„æ¨¡æ¿æ–‡ä»¶ï¼Œä¹Ÿæ˜¯ <code>chart</code> çš„å®é™…æ‰§è¡Œå†…å®¹ã€‚åœ¨ä½¿ç”¨ <code>chart</code> è¿›è¡Œå®‰è£…çš„æ—¶å€™ï¼Œä¼šå°† ä¸‹é¢ä»‹ç»çš„ <code>values.yaml</code> ä¸­çš„é…ç½®é¡¹ä¸ <code>templates</code> ä¸­çš„æ¨¡æ¿è¿›è¡Œç»„è£…ï¼Œç”Ÿæˆæœ€ç»ˆè¦æ‰§è¡Œçš„é…ç½®æ–‡ä»¶ã€‚</p>
<p><code>templates</code> ä¸­ï¼Œæ¨èå‘½ååº”è¯¥æ¸…æ™°ï¼Œå¦‚ <code>xx-deployment.yaml</code>ï¼Œä¸­é—´ä½¿ç”¨ <code>-</code> è¿›è¡Œåˆ†å‰²ï¼Œé¿å…ä½¿ç”¨é©¼å³°å¼å‘½åã€‚</p>
<p><code>Notes.txt</code> æ–‡ä»¶åœ¨ <code>helm install</code> å®Œæˆåï¼Œä¼šè¿›è¡Œå›æ˜¾ï¼Œå¯ç”¨äºè§£é‡Šè¯´æ˜å¦‚ä½•è®¿é—®æœåŠ¡ç­‰ã€‚</p>
<h4 id="valuesyaml">values.yaml</h4>
<p><code>values.yaml</code> å­˜æ”¾ç€é¡¹ç›®çš„ä¸€äº›å¯é…ç½®é¡¹ï¼Œå¦‚é•œåƒçš„åç§°æˆ–è€… tag ä¹‹ç±»çš„ã€‚ä½œç”¨å°±æ˜¯ç”¨äºå’Œæ¨¡æ¿è¿›è¡Œç»„è£…ã€‚</p>
<h3 id="ç¼–å†™-chart">ç¼–å†™ chart</h3>
<p>äº†è§£å®Œç»“æ„ä¹‹åï¼Œæˆ‘ä»¬æ¥å®é™…ç¼–å†™æˆ‘ä»¬çš„ chart ã€‚æ‰€æœ‰å®Œæ•´çš„ä»£ç å¯åœ¨ <a href="https://github.com/tao12345666333/saythx">SayThx é¡¹ç›®</a> è·å–ã€‚</p>
<pre tabindex="0"><code># Chart.yaml
apiVersion: v1
appVersion: &quot;1.0&quot;
description: A Helm chart for SayThx.
name: saythx
version: 0.1.0
maintainers:
  - name: Jintao Zhang
</code></pre><p>å¯æ·»åŠ  <code>maintainers</code> å­—æ®µï¼Œè¡¨ç¤ºç»´æŠ¤è€…ã€‚</p>
<pre tabindex="0"><code># values.yaml

# backend is the values for backend
backend:
  image: taobeier/saythx-be
  tag: &quot;1.0&quot;
  pullPolicy: IfNotPresent
  replicas: 1

# namespace is the values for deploy namespace
namespace: work

# service.type is the values for service type
service:
  type: NodePort
</code></pre><p><code>values.yaml</code> æ–‡ä»¶ä¸­å®šä¹‰äº†æˆ‘ä»¬é¢„æœŸå“ªäº›ä¸œè¥¿æ˜¯å¯é…ç½®çš„ï¼Œæ¯”å¦‚ <code>namespace</code> ä»¥åŠé•œåƒåç§° tag ç­‰ã€‚è¿™é‡Œåªæ˜¯è´´å‡ºäº†éƒ¨åˆ†å†…å®¹ï¼Œä»…åšè¯´æ˜ä½¿ç”¨ï¼Œå®Œæ•´å†…å®¹å¯æŸ¥çœ‹æˆ‘ä»¬çš„<a href="https://github.com/tao12345666333/saythx">ç¤ºä¾‹é¡¹ç›®</a> ã€‚</p>
<p>å†™ <code>values.yaml</code> æ–‡ä»¶çš„æ—¶å€™ï¼Œç”±äºæ˜¯ä½¿ç”¨ <code>YAML</code> æ ¼å¼çš„é…ç½®ï¼Œæ‰€ä»¥å®ƒéå¸¸çš„çµæ´»ï¼Œå³å¯ä»¥ä½¿ç”¨å¦‚ä¸Šé¢ä¾‹å­ä¸­çš„ <code>backend</code> é‚£ç§å­—å…¸ç±»å‹çš„ï¼Œ ä¹Ÿå¯ä»¥å†™æˆç®€å•çš„ k-v å½¢å¼ã€‚ä½†é€šå¸¸æ¥è®²ï¼Œåº”è¯¥å°½å¯èƒ½çš„å°†å®ƒå†™çš„æ¸…æ™°æ˜ç¡®ã€‚å¹¶ä¸”å®¹æ˜“è¢«æ›¿æ¢ã€‚</p>
<pre tabindex="0"><code># templates/backend-service.yaml 

apiVersion: v1
kind: Service
metadata:
  labels:
    app: backend
  name: saythx-backend
  namespace: {{ .Values.namespace }}
spec:
  ports:
  - protocol: TCP
    port: 8080
    targetPort: 8080
  selector:
    app: backend
  type: {{ .Values.service.type }}
</code></pre><p>å°†æˆ‘ä»¬ä¹‹å‰å†™çš„éƒ¨ç½²æ–‡ä»¶æ¨¡æ¿åŒ–ï¼Œä¸é…ç½®é¡¹è¿›è¡Œç»„è£…ã€‚</p>
<pre tabindex="0"><code>1. Get the application URL by running these commands:
{{- if contains &quot;NodePort&quot; .Values.service.type }}
  export NODE_PORT=$(kubectl get --namespace {{ .Values.namespace }} -o jsonpath=&quot;{.spec.ports[0].nodePort}&quot; services saythx-frontend)
  export NODE_IP=$(kubectl get nodes --namespace {{ .Values.namespace }} -o jsonpath=&quot;{.items[0].status.addresses[0].address}&quot;)
  echo http://$NODE_IP:$NODE_PORT
{{- else if contains &quot;ClusterIP&quot; .Values.service.type }}
  export POD_NAME=$(kubectl get pods --namespace {{ .Values.namespace }} -l &quot;app=frontend&quot; -o jsonpath=&quot;{.items[0].metadata.name}&quot;)
  echo &quot;Visit http://127.0.0.1:8080 to use your application&quot;
  kubectl --namespace {{ .Values.namespace }} port-forward $POD_NAME 8080:80
{{- end }}
</code></pre><p>ä¸Šé¢è¿™æ˜¯ <code>NOTES.txt</code> æ–‡ä»¶å†…çš„å†…å®¹ã€‚ è¿™äº›å†…å®¹ä¼šåœ¨ <code>helm install</code> æ‰§è¡ŒæˆåŠŸåæ˜¾ç¤ºåœ¨ç»ˆç«¯ï¼Œç”¨äºè¯´æ˜æœåŠ¡å¦‚ä½•è®¿é—®æˆ–è€…å…¶ä»–æ³¨æ„äº‹é¡¹ç­‰ã€‚</p>
<p>å½“ç„¶ï¼Œè¿™é‡Œçš„å†…å®¹ä¸»è¦æ˜¯ä¸ºäº†è¯´æ˜å¦‚ä½•ç¼–å†™ <code>chart</code> ï¼Œåœ¨å®è·µä¸­ï¼Œå°½é‡é¿å…ç¡¬ç¼–ç é…ç½®åœ¨é‡Œé¢ã€‚</p>
<h2 id="éƒ¨ç½²">éƒ¨ç½²</h2>
<h3 id="ç›´æ¥éƒ¨ç½²">ç›´æ¥éƒ¨ç½²</h3>
<p>Helm çš„ <code>chart</code> å¯ä»¥ç›´æ¥åœ¨æºç ç›®å½•ä¸‹é€šè¿‡ <code>helm install</code> å®Œæˆéƒ¨ç½²ã€‚ä¾‹å¦‚ï¼š</p>
<pre tabindex="0"><code>âœ  saythx helm install saythx
NAME:   handy-seastar
LAST DEPLOYED: Tue Nov 20 23:33:42 2018
NAMESPACE: default
STATUS: DEPLOYED

RESOURCES:
==&gt; v1/Namespace
NAME  STATUS  AGE
work  Active  1s

==&gt; v1/Service
NAME             TYPE      CLUSTER-IP      EXTERNAL-IP  PORT(S)         AGE
saythx-backend   NodePort  10.102.206.213  &lt;none&gt;       8080:30663/TCP  0s
saythx-frontend  NodePort  10.96.109.45    &lt;none&gt;       80:30300/TCP    0s
saythx-redis     NodePort  10.97.174.8     &lt;none&gt;       6379:30589/TCP  0s

==&gt; v1/Deployment
NAME             DESIRED  CURRENT  UP-TO-DATE  AVAILABLE  AGE
saythx-backend   1        1        1           0          0s
saythx-frontend  1        1        1           0          0s
saythx-redis     1        1        1           0          0s
saythx-work      1        1        1           0          0s

==&gt; v1/Pod(related)
NAME                              READY  STATUS             RESTARTS  AGE
saythx-backend-7f6d86d9c8-xqttg   0/1    ContainerCreating  0         0s
saythx-frontend-777fc64997-9zmq6  0/1    Pending            0         0s
saythx-redis-8558c7d7d-lh5df      0/1    ContainerCreating  0         0s
saythx-work-9b4446d84-c2pr4       0/1    ContainerCreating  0         0s

NOTES:
1. Get the application URL by running these commands:
  export NODE_PORT=$(kubectl get --namespace work -o jsonpath=&quot;{.spec.ports[0].nodePort}&quot; services saythx-frontend)
  export NODE_IP=$(kubectl get nodes --namespace work -o jsonpath=&quot;{.items[0].status.addresses[0].address}&quot;)
  echo http://$NODE_IP:$NODE_PORT
</code></pre><h3 id="æ‰“åŒ…">æ‰“åŒ…</h3>
<p>å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°† <code>chart</code> æ‰“åŒ…ï¼Œä»¥ä¾¿äºåˆ†å‘ã€‚</p>
<pre tabindex="0"><code>âœ  saythx helm package saythx 
Successfully packaged chart and saved it to: /root/saythx/saythx-0.1.0.tgz
</code></pre><p>å¯ä»¥çœ‹åˆ°æ‰“åŒ…æ—¶æ˜¯æŒ‰ç…§ <code>chart</code> çš„åå­—åŠ ç‰ˆæœ¬å·è¿›è¡Œå‘½åçš„ã€‚</p>
<p>è‡³äºéƒ¨ç½²ï¼Œå’Œå‰é¢æ²¡ä»€ä¹ˆå¤ªå¤§åŒºåˆ«ï¼Œ <code>helm install saythx-0.1.0.tgz</code> å³å¯ã€‚</p>
<h3 id="è®¿é—®æœåŠ¡">è®¿é—®æœåŠ¡</h3>
<p>å‰é¢åœ¨éƒ¨ç½²å®Œæˆåï¼Œæœ‰ä¸€äº›è¿”å›ä¿¡æ¯ï¼Œæˆ‘ä»¬æ¥æŒ‰ç…§å…¶å†…å®¹è®¿é—®æˆ‘ä»¬çš„æœåŠ¡ï¼š</p>
<pre tabindex="0"><code>âœ  saythx export NODE_PORT=$(kubectl get --namespace work -o jsonpath=&quot;{.spec.ports[0].nodePort}&quot; services saythx-frontend)
âœ  saythx export NODE_IP=$(kubectl get nodes --namespace work -o jsonpath=&quot;{.items[0].status.addresses[0].address}&quot;)
âœ  saythx echo http://$NODE_IP:$NODE_PORT
http://172.17.0.5:30300
âœ  saythx curl http://172.17.0.5:30300
&lt;!DOCTYPE html&gt;&lt;html lang=en&gt;&lt;head&gt;&lt;meta charset=utf-8&gt;&lt;meta http-equiv=X-UA-Compatible content=&quot;IE=edge&quot;&gt;&lt;meta name=viewport content=&quot;width=device-width,initial-scale=1&quot;&gt;&lt;link rel=icon href=/favicon.ico&gt;&lt;title&gt;fe&lt;/title&gt;&lt;link href=/css/app.0a6f0b04.css rel=preload as=style&gt;&lt;link href=/css/chunk-vendors.ea3fa8e3.css rel=preload as=style&gt;&lt;link href=/js/app.ee469174.js rel=preload as=script&gt;&lt;link href=/js/chunk-vendors.14b9b088.js rel=preload as=script&gt;&lt;link href=/css/chunk-vendors.ea3fa8e3.css rel=stylesheet&gt;&lt;link href=/css/app.0a6f0b04.css rel=stylesheet&gt;&lt;/head&gt;&lt;body&gt;&lt;noscript&gt;&lt;strong&gt;We're sorry but fe doesn't work properly without JavaScript enabled. Please enable it to continue.&lt;/strong&gt;&lt;/noscript&gt;&lt;div id=app&gt;&lt;/div&gt;&lt;script src=/js/chunk-vendors.14b9b088.js&gt;&lt;/script&gt;&lt;script src=/js/app.ee469174.js&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;
</code></pre><p>æœåŠ¡å¯ä»¥æ­£å¸¸è®¿é—®ã€‚</p>
<h2 id="æ€»ç»“">æ€»ç»“</h2>
<p>é€šè¿‡æœ¬èŠ‚æˆ‘ä»¬å­¦ä¹ åˆ°äº† <code>chart</code> çš„å®é™…ç»“æ„ï¼ŒåŠç¼–å†™æ–¹å¼ã€‚ä»¥åŠç¼–å†™äº†æˆ‘ä»¬è‡ªå·±çš„ <code>chart</code> å¹¶ä½¿ç”¨è¯¥ <code>chart</code> éƒ¨ç½²äº†æœåŠ¡ã€‚</p>
<p>ç¤ºä¾‹é¡¹ç›®è¿˜ä»…ä»…æ˜¯ä¸ªå°é¡¹ç›®ï¼Œè¯•æƒ³å½“æˆ‘ä»¬éœ€è¦éƒ¨ç½²ä¸€ä¸ªå¤§å‹é¡¹ç›®ï¼Œå¦‚æœä¸é€šè¿‡ç±»ä¼¼ Helm è¿™æ ·çš„è½¯ä»¶è¿›è¡Œç®¡ç†ï¼Œæ¯æ¬¡çš„æ›´æ–°å‘å¸ƒï¼Œç»´æŠ¤ <code>YAML</code> çš„é…ç½®æ–‡ä»¶å°±ä¼šå¾ˆç¹çäº†ã€‚</p>
<p>å¦å¤–ï¼ŒHelm çš„åŠŸèƒ½è¿˜ä¸ä»…é™äºæ­¤ï¼Œä½¿ç”¨ Helm æˆ‘ä»¬è¿˜å¯ä»¥ç®¡ç† <code>Release</code> ï¼Œå¹¶è¿›è¡Œæ›´æ–°å›æ»šç­‰æ“ä½œã€‚ä»¥åŠï¼Œæˆ‘ä»¬å¯ä»¥æ­å»ºè‡ªå·±çš„ç§æœ‰ <code>chart</code> ä»“åº“ç­‰ã€‚</p>
<p>ä¸‹èŠ‚å¼€å§‹ï¼Œæˆ‘ä»¬å°†è¿›å…¥æ·±å…¥å­¦ä¹ é˜¶æ®µï¼Œé€ä¸ªè®²è§£ K8S çš„æ ¸å¿ƒç»„ä»¶ï¼Œä»¥ä¾¿åç»­é‡åˆ°é—®é¢˜æ—¶ï¼Œå¯å¿«é€Ÿå®šä½å’Œè§£å†³ã€‚</p>

        </div>
    </article>
</div>

    </main>
    <footer>
        <div id="pagination">
            
<div class="paginator">
    <div class="prev">
        
        <a href="/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/10-%E5%BA%94%E7%94%A8%E7%AE%A1%E7%90%86%E5%88%9D%E8%AF%86-helm/"><span>10 åº”ç”¨ç®¡ç†ï¼šåˆè¯† Helm</span></a>
    </div>
    <div class="next">
        
        <a href="/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/12-%E5%BA%96%E4%B8%81%E8%A7%A3%E7%89%9Bkube-apiserver/"><span>12 åº–ä¸è§£ç‰›ï¼škube-apiserver</span></a>
    </div>
</div>

        </div>
        <div class="toggler" onclick="toggleLight(this);">ğŸ’¡</div>
        <div id="copyright" style="display: none;">
    
    
    <p>&copy; 27270 <a href="/"></a>, powered by Hugo and Qiao</p>
</div>
    </footer>
    
<script>
    function toggleLight() {
        document.getElementById('page').classList.toggle('night');
    }
</script>
</body>

</html>