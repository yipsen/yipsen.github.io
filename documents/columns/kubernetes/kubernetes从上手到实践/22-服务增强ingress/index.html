<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
<meta name="X-UA-Compatible" , content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<link rel="icon" type="image/png" href="/%20/favicon.png">

<title>22 æœåŠ¡å¢å¼ºï¼šIngress | Yipsen Ye</title>
<meta name="description" content="æ•´ä½“æ¦‚è§ˆ é€šè¿‡å‰é¢çš„å­¦ä¹ ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“ K8S ä¸­æœ‰ Service çš„æ¦‚å¿µï¼ŒåŒæ—¶é»˜è®¤æƒ…å†µä¸‹è¿˜æœ‰ CoreDNS å®Œæˆé›†ç¾¤å†…éƒ¨çš„åŸŸåè§£æç­‰å·¥ä½œï¼Œä»¥æ­¤å®ŒæˆåŸºç¡€çš„æœåŠ¡æ³¨å†Œå‘ç°èƒ½åŠ›ã€‚
åœ¨ç¬¬ 7 èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº† Service çš„ 4 ç§åŸºç¡€ç±»å‹ï¼Œåœ¨å‰é¢çš„ä»‹ç»ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½åœ¨ä½¿ç”¨ ClusterIP æˆ– NodePort ç­‰æ–¹å¼å°†æœåŠ¡æš´éœ²åœ¨é›†ç¾¤å†…æˆ–è€…é›†ç¾¤å¤–ã€‚
æœ¬èŠ‚ï¼Œæˆ‘ä»¬å°†ä»‹ç»å¦ä¸€ç§å¤„ç†æœåŠ¡è®¿é—®çš„æ–¹å¼ Ingressã€‚
Ingress æ˜¯ä»€ä¹ˆ é€šè¿‡ kubectl explain ingress å‘½ä»¤ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹å¯¹ Ingress çš„æè¿°ã€‚
 Ingress is a collection of rules that allow inbound connections to reach the endpoints defined by a backend. An Ingress can be configured to give services externally-reachable urls, load balance traffic, terminate SSL, offer name based virtual hosting etc.">
<meta name="author" content="">

<link rel="stylesheet" type="text/css" href="/styles/main.css">

</head>

<body id="page">
    <header>
        <div class="logo-link" style="width: 60px; color: #CA6924;">
    <a href="http://yipsen.github.io/">
        <img style="margin-bottom: -1rem;" src="/images/deer.svg" alt="logo">
        <span style="font-size: 0.5rem; color: #CA6924;">Yipsen Ye</span>
    </a>
</div>
<nav class="navbar justify-content-end">
    <ul class="nav-list">
        
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/posts/">æœ­è®°</a>
        </li>
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/collections/">é™„è¡¨</a>
        </li>
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/about/">å…³äº</a>
        </li>
        
    </ul>
</nav>
    </header>
    <main id="content">
        
<div class="container"><aside>
    <div>
        
        
            
            
            <div class="post-category-icon"></div>
            <a href="/categories/kubernetes%e4%bb%8e%e4%b8%8a%e6%89%8b%e5%88%b0%e5%ae%9e%e8%b7%b5/">Kubernetesä»ä¸Šæ‰‹åˆ°å®è·µ</a>
            <ul>
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/01-%E5%BC%80%E7%AF%87-kubernetes-%E6%98%AF%E4%BB%80%E4%B9%88%E4%BB%A5%E5%8F%8A%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E5%AE%83/">01 å¼€ç¯‡ï¼š Kubernetes æ˜¯ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆéœ€è¦å®ƒ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/02-%E5%88%9D%E6%AD%A5%E8%AE%A4%E8%AF%86kubernetes-%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/">02 åˆæ­¥è®¤è¯†ï¼šKubernetes åŸºç¡€æ¦‚å¿µ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/03-%E5%AE%8F%E8%A7%82%E8%AE%A4%E8%AF%86%E6%95%B4%E4%BD%93%E6%9E%B6%E6%9E%84/">03 å®è§‚è®¤è¯†ï¼šæ•´ä½“æ¶æ„</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/04-%E6%90%AD%E5%BB%BA-kubernetes-%E9%9B%86%E7%BE%A4-%E6%9C%AC%E5%9C%B0%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BA/">04 æ­å»º Kubernetes é›†ç¾¤ - æœ¬åœ°å¿«é€Ÿæ­å»º</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/05-%E5%8A%A8%E6%89%8B%E5%AE%9E%E8%B7%B5%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA-kubernetes-%E9%9B%86%E7%BE%A4-%E7%94%9F%E4%BA%A7%E5%8F%AF%E7%94%A8/">05 åŠ¨æ‰‹å®è·µï¼šæ­å»ºä¸€ä¸ª Kubernetes é›†ç¾¤ - ç”Ÿäº§å¯ç”¨</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/06-%E9%9B%86%E7%BE%A4%E7%AE%A1%E7%90%86%E5%88%9D%E8%AF%86-kubectl/">06 é›†ç¾¤ç®¡ç†ï¼šåˆè¯† kubectl</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/07-%E9%9B%86%E7%BE%A4%E7%AE%A1%E7%90%86%E4%BB%A5-redis-%E4%B8%BA%E4%BE%8B-%E9%83%A8%E7%BD%B2%E5%8F%8A%E8%AE%BF%E9%97%AE/">07 é›†ç¾¤ç®¡ç†ï¼šä»¥ Redis ä¸ºä¾‹-éƒ¨ç½²åŠè®¿é—®</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/08-%E5%AE%89%E5%85%A8%E9%87%8D%E7%82%B9-%E8%AE%A4%E8%AF%81%E5%92%8C%E6%8E%88%E6%9D%83/">08 å®‰å…¨é‡ç‚¹ è®¤è¯å’Œæˆæƒ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/09-%E5%BA%94%E7%94%A8%E5%8F%91%E5%B8%83%E9%83%A8%E7%BD%B2%E5%AE%9E%E9%99%85%E9%A1%B9%E7%9B%AE/">09 åº”ç”¨å‘å¸ƒï¼šéƒ¨ç½²å®é™…é¡¹ç›®</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/10-%E5%BA%94%E7%94%A8%E7%AE%A1%E7%90%86%E5%88%9D%E8%AF%86-helm/">10 åº”ç”¨ç®¡ç†ï¼šåˆè¯† Helm</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/11-%E9%83%A8%E7%BD%B2%E5%AE%9E%E8%B7%B5%E4%BB%A5-helm-%E9%83%A8%E7%BD%B2%E9%A1%B9%E7%9B%AE/">11 éƒ¨ç½²å®è·µï¼šä»¥ Helm éƒ¨ç½²é¡¹ç›®</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/12-%E5%BA%96%E4%B8%81%E8%A7%A3%E7%89%9Bkube-apiserver/">12 åº–ä¸è§£ç‰›ï¼škube-apiserver</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/13-%E5%BA%96%E4%B8%81%E8%A7%A3%E7%89%9Betcd/">13 åº–ä¸è§£ç‰›ï¼šetcd</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/14-%E5%BA%96%E4%B8%81%E8%A7%A3%E7%89%9Bcontroller-manager/">14 åº–ä¸è§£ç‰›ï¼šcontroller-manager</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/15-%E5%BA%96%E4%B8%81%E8%A7%A3%E7%89%9Bkube-scheduler/">15 åº–ä¸è§£ç‰›ï¼škube-scheduler</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/16-%E5%BA%96%E4%B8%81%E8%A7%A3%E7%89%9Bkubelet/">16 åº–ä¸è§£ç‰›ï¼škubelet</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/17-%E5%BA%96%E4%B8%81%E8%A7%A3%E7%89%9Bkube-proxy/">17 åº–ä¸è§£ç‰›ï¼škube-proxy</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/18-%E5%BA%96%E4%B8%81%E8%A7%A3%E7%89%9Bcontainer-runtime-docker/">18 åº–ä¸è§£ç‰›ï¼šContainer Runtime ï¼ˆDockerï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/19-troubleshoot/">19 Troubleshoot</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/20-%E6%89%A9%E5%B1%95%E5%A2%9E%E5%BC%BAdashboard/">20 æ‰©å±•å¢å¼ºï¼šDashboard</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/21-%E6%89%A9%E5%B1%95%E5%A2%9E%E5%BC%BAcoredns/">21 æ‰©å±•å¢å¼ºï¼šCoreDNS</a></li>
                
                
                
                    <li>22 æœåŠ¡å¢å¼ºï¼šIngress</li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/23-%E7%9B%91%E6%8E%A7%E5%AE%9E%E8%B7%B5%E5%AF%B9-k8s-%E9%9B%86%E7%BE%A4%E8%BF%9B%E8%A1%8C%E7%9B%91%E6%8E%A7/">23 ç›‘æ§å®è·µï¼šå¯¹ K8S é›†ç¾¤è¿›è¡Œç›‘æ§</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/24-%E6%80%BB%E7%BB%93/">24 æ€»ç»“</a></li>
                
                
            </ul>
        
    </div>
</aside>

<style>
    aside {
        position: fixed;
        left: 20px;
        background: #ffdee3;
        border-radius: 6px;
        padding: 20px;
        padding-top: 60px;
        box-shadow: 5px 10px #888;
        list-style-type: none;
        display: none;
    }

    .post-category-icon {
        position: absolute;
        width: 80px;
        height: 80px;
        top: -40px;
        left: 50%;
        margin-left: -40px;
        text-align: center;
        font-size: 36px;
        content: 'J';
        background: #ffdee3;
        border-radius: 100%;
        border: 10px solid #fff;
        box-shadow: 5px 10px #888;
    }
</style><article class="post-block">
        <h1 class="post-title">22 æœåŠ¡å¢å¼ºï¼šIngress</h1>
        <div class="post-info">
            <div> 
                <span class="post-date">ğŸ“…&nbsp;2021-12-22 01:47:49</span>ğŸ·ï¸&nbsp;<a class="post-tag" href="/tags/kubernetes/">kubernetes</a></div><div class="post-category">
                
                ğŸ“š&nbsp;<a href="/categories/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/">Kubernetesä»ä¸Šæ‰‹åˆ°å®è·µ</a>
                
            </div></div>
        <div class="post-content">
            <h2 id="æ•´ä½“æ¦‚è§ˆ">æ•´ä½“æ¦‚è§ˆ</h2>
<p>é€šè¿‡å‰é¢çš„å­¦ä¹ ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“ K8S ä¸­æœ‰ <code>Service</code> çš„æ¦‚å¿µï¼ŒåŒæ—¶é»˜è®¤æƒ…å†µä¸‹è¿˜æœ‰ <code>CoreDNS</code> å®Œæˆé›†ç¾¤å†…éƒ¨çš„åŸŸåè§£æç­‰å·¥ä½œï¼Œä»¥æ­¤å®ŒæˆåŸºç¡€çš„æœåŠ¡æ³¨å†Œå‘ç°èƒ½åŠ›ã€‚</p>
<p>åœ¨ç¬¬ 7 èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº† <code>Service</code> çš„ 4 ç§åŸºç¡€ç±»å‹ï¼Œåœ¨å‰é¢çš„ä»‹ç»ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½åœ¨ä½¿ç”¨ <code>ClusterIP</code> æˆ– <code>NodePort</code> ç­‰æ–¹å¼å°†æœåŠ¡æš´éœ²åœ¨é›†ç¾¤å†…æˆ–è€…é›†ç¾¤å¤–ã€‚</p>
<p>æœ¬èŠ‚ï¼Œæˆ‘ä»¬å°†ä»‹ç»å¦ä¸€ç§å¤„ç†æœåŠ¡è®¿é—®çš„æ–¹å¼ <code>Ingress</code>ã€‚</p>
<h2 id="ingress-æ˜¯ä»€ä¹ˆ">Ingress æ˜¯ä»€ä¹ˆ</h2>
<p>é€šè¿‡ <code>kubectl explain ingress</code> å‘½ä»¤ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹å¯¹ Ingress çš„æè¿°ã€‚</p>
<blockquote>
<p>Ingress is a collection of rules that allow inbound connections to reach the endpoints defined by a backend. An Ingress can be configured to give services externally-reachable urls, load balance traffic, terminate SSL, offer name based virtual hosting etc.</p>
</blockquote>
<p><code>Ingress</code> æ˜¯ä¸€ç»„å…è®¸å¤–éƒ¨è¯·æ±‚è¿›å…¥é›†ç¾¤çš„è·¯ç”±è§„åˆ™çš„é›†åˆã€‚å®ƒå¯ä»¥ç»™ <code>Service</code> æä¾›é›†ç¾¤å¤–éƒ¨è®¿é—®çš„ URLï¼Œè´Ÿè½½å‡è¡¡ï¼ŒSSL ç»ˆæ­¢ç­‰ã€‚</p>
<p>ç›´ç™½ç‚¹è¯´ï¼Œ<code>Ingress</code> å°±ç±»ä¼¼èµ·åˆ°äº†æ™ºèƒ½è·¯ç”±çš„è§’è‰²ï¼Œå¤–éƒ¨æµé‡åˆ°è¾¾ <code>Ingress</code> ï¼Œå†ç”±å®ƒæŒ‰å·²ç»åˆ¶å®šå¥½çš„è§„åˆ™åˆ†å‘åˆ°ä¸åŒçš„åç«¯æœåŠ¡ä¸­å»ã€‚</p>
<p>çœ‹èµ·æ¥å®ƒå¾ˆåƒæˆ‘ä»¬ä½¿ç”¨çš„è´Ÿè½½å‡è¡¡å™¨ä¹‹ç±»çš„ã€‚é‚£ä½ å¯èƒ½ä¼šé—®ï¼Œ<code>Ingress</code> ä¸ <code>LoadBalancer</code> ç±»å‹çš„ <code>Service</code> çš„åŒºåˆ«æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<ul>
<li>
<p><code>Ingress</code> ä¸æ˜¯ä¸€ç§ <code>Service</code> ç±»å‹</p>
<p><code>Ingress</code> æ˜¯ K8S ä¸­çš„ä¸€ç§èµ„æºç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡ <code>kubectl get ingress</code> çš„æ–¹å¼è·å–æˆ‘ä»¬å·²æœ‰çš„ <code>Ingress</code> èµ„æºã€‚</p>
</li>
<li>
<p><code>Ingress</code> å¯ä»¥æœ‰å¤šç§æ§åˆ¶å™¨ï¼ˆå®ç°ï¼‰</p>
<p>é€šè¿‡ä¹‹å‰çš„ä»‹ç»ï¼Œæˆ‘ä»¬çŸ¥é“ K8S ä¸­æœ‰å¾ˆå¤šçš„ <code>Controller</code> (æ§åˆ¶å™¨)ï¼Œè€Œè¿™äº› <code>Controller</code> å·²ç»æ‰“åŒ…è¿›äº† <code>kube-controller-manager</code> ä¸­ï¼Œé€šè¿‡ <code>--controllers</code> å‚æ•°æ§åˆ¶å¯ç”¨å“ªäº›ã€‚</p>
<p>ä½†æ˜¯ <code>Ingress</code> çš„ <code>Controller</code> å¹¶æ²¡æœ‰åŒ…å«åœ¨å…¶ä¸­ï¼Œè€Œä¸”æœ‰å¤šç§é€‰æ‹©ã€‚</p>
<p>ç”±ç¤¾åŒºç»´æŠ¤ï¼ˆæˆ–æ˜¯è¯´å®˜æ–¹æ”¯æŒçš„ï¼‰æœ‰ä¸¤ä¸ªï¼šé€‚ç”¨äº Google Cloud çš„ <a href="https://github.com/kubernetes/ingress-gce">GLBC</a>ï¼Œå½“ä½ ä½¿ç”¨ GKE çš„æ—¶å€™ï¼Œä¾¿ä¼šçœ‹åˆ°å®ƒï¼›å’Œ <a href="https://github.com/kubernetes/ingress-nginx">NGINX Ingress Controller</a> å®ƒæ˜¯ä½¿ç”¨ <code>ConfigMap</code> å­˜å‚¨ NGINX é…ç½®å®ç°çš„ã€‚</p>
<p>ç¬¬ä¸‰æ–¹çš„å®ç°è¿˜æœ‰ï¼šåŸºäº Envoy çš„ <a href="https://github.com/heptio/contour">Contour</a>; F5 çš„ <a href="https://clouddocs.f5.com/products/connectors/k8s-bigip-ctlr/v1.7/">F5 BIG-IP Controller</a>; åŸºäº HAProxy çš„ <a href="https://github.com/jcmoraisjr/haproxy-ingress">haproxy-ingress</a>; åŸºäº Istio çš„ <a href="https://istio.io/docs/tasks/traffic-management/ingress/">Control Ingress Traffic</a>; ç°ä»£åŒ–çš„åå‘ä»£ç†æœåŠ¡å™¨ <a href="https://github.com/containous/traefik">Traefik</a>; ä»¥åŠ Kong æ”¯æŒçš„ <a href="https://konghq.com/blog/kubernetes-ingress-controller-for-kong/">Kong Ingress Controller for Kubernetes</a> å’Œ NGINX å®˜æ–¹æ”¯æŒçš„ <a href="https://github.com/nginxinc/kubernetes-ingress">NGINX Ingress Controller</a>ã€‚</p>
<p>è¿™é‡Œå¯ä»¥çœ‹åˆ° K8S ç¤¾åŒºå’Œ NGINX éƒ½æœ‰ NGINX Ingress Controllerï¼Œå¾ˆå¤šäººåœ¨ä¸€å¼€å§‹æ¥è§¦ Ingress çš„æ—¶å€™ä¾¿é™·å…¥äº†é€‰æ‹©çš„è‹¦æ¼ä¸­ï¼Œé™¤å»å‰é¢çš„é‚£äº›é€‰æ‹©å¤–ï¼Œå• NGINX çš„æ§åˆ¶å™¨å°±æœ‰ä¸¤ä¸ªï¼Œåˆ°åº•åº”è¯¥æ€ä¹ˆé€‰ã€‚</p>
<p>è¿™é‡Œæä¾›ä¸¤ç‚¹å»ºè®®ï¼š</p>
<ul>
<li>å¯èƒ½å¤šæ•°äººä½¿ç”¨çš„éƒ½æ˜¯ NGINX è€Œé NGINX Plusï¼Œå¦‚æœä½ éœ€è¦ä¼šè¯ä¿æŒï¼ˆSession persistenceï¼‰çš„è¯ï¼Œé‚£ä½ åº”è¯¥é€‰æ‹© K8S ç¤¾åŒºç»´æŠ¤çš„ç‰ˆæœ¬</li>
<li>å³ä½¿æˆ‘ä»¬å¹³æ—¶ä½¿ç”¨ NGINX çš„æ—¶å€™ï¼Œä¹Ÿå¸¸å¸¸ä¼šæœ‰åŠ¨æ€é…ç½®çš„éœ€æ±‚ï¼Œå¦‚æœä½ ä»ç„¶æœ‰è¿™æ ·çš„éœ€æ±‚ï¼Œé‚£ä½ è¿˜æ˜¯ç»§ç»­ä½¿ç”¨ K8S ç¤¾åŒºç»´æŠ¤çš„ç‰ˆæœ¬ï¼ˆå…¶ä¸­å†…ç½®äº† Lua æ”¯æŒï¼‰ã€‚</li>
</ul>
</li>
</ul>
<h2 id="å¦‚ä½•ä½¿ç”¨">å¦‚ä½•ä½¿ç”¨</h2>
<p>å‰é¢ä¹Ÿå·²ç»è¯´åˆ°äº†ï¼Œå•çº¯çš„åˆ›å»ºä¸€ä¸ª <code>Ingress</code> èµ„æºæ²¡ä»€ä¹ˆæ„ä¹‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆé…ç½®ä¸€ä¸ª <code>Controller</code> ï¼Œæ‰èƒ½è®©å®ƒæ­£å¸¸å·¥ä½œã€‚å›½å†…ä½¿ç”¨ GKE çš„å¯èƒ½ä¸æ˜¯å¾ˆå¤šï¼Œä¸ºäº†æ›´åŠ é€šç”¨ï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹© K8S ç¤¾åŒºç»´æŠ¤çš„ NGINX Ingress Controllerã€‚</p>
<h3 id="å®‰è£…">å®‰è£…</h3>
<p>æ•´ä¸ªå®‰è£…è¿‡ç¨‹å…¶å®ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼ˆä»¥ä¸‹æ­¥éª¤ä¸­éƒ½å°†ç›´æ¥å±•ç¤ºè¯¥æ­¥éª¤æ‰€éœ€çš„ YAML é…ç½®æ–‡ä»¶ï¼‰ï¼š</p>
<ul>
<li>
<p>åˆ›å»º <code>Namespace</code></p>
<pre tabindex="0"><code>apiVersion: v1
kind: Namespace
metadata:
  name: ingress-nginx
  labels:
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
</code></pre><p>å°†ä»¥ä¸Šå†…å®¹ä¿å­˜ä¸º namespace.yaml æ–‡ä»¶ï¼Œç„¶åæ‰§è¡Œ <code>kubectl apply -f namespace.yaml</code> å³å¯ã€‚ä»¥ä¸‹æ­¥éª¤å‡ç±»ä¼¼ï¼Œä¸å†èµ˜è¿°ã€‚ æ³¨æ„ï¼šè¿™é‡Œåˆ›å»º <code>Namespace</code> åªæ˜¯ä¸ºäº†ä¿æŒé›†ç¾¤ç›¸å¯¹è§„èŒƒï¼Œéå¼ºåˆ¶ï¼Œä½†æ¨èæ­¤åšæ³•ã€‚</p>
</li>
<li>
<p>åˆ›å»º <code>ConfigMap</code></p>
<pre tabindex="0"><code>kind: ConfigMap
apiVersion: v1
metadata:
  name: nginx-configuration
  namespace: ingress-nginx
  labels:
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx

---
kind: ConfigMap
apiVersion: v1
metadata:
  name: tcp-services
  namespace: ingress-nginx
  labels:
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx

---
kind: ConfigMap
apiVersion: v1
metadata:
  name: udp-services
  namespace: ingress-nginx
  labels:
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx

---
</code></pre><p>è¿™é‡Œåˆ›å»ºäº†å‡ ä¸ª <code>ConfigMap</code>ï¼Œä¸»è¦æ˜¯ç»™ <code>Controller</code> ä½¿ç”¨ã€‚</p>
</li>
<li>
<p>ç”±äºæˆ‘ä»¬çš„é›†ç¾¤ä½¿ç”¨ <code>kubeadm</code> åˆ›å»ºæ—¶ï¼Œé»˜è®¤å¼€å¯äº† <code>RBAC</code> ï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦ç›¸åº”çš„åˆ›å»ºå¯¹åº”çš„ <code>Role</code> å’Œ <code>RoleBinding</code>ã€‚</p>
<pre tabindex="0"><code>apiVersion: v1
kind: ServiceAccount
metadata:
  name: nginx-ingress-serviceaccount
  namespace: ingress-nginx
  labels:
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx

---
apiVersion: rbac.authorization.k8s.io/v1beta1
kind: ClusterRole
metadata:
  name: nginx-ingress-clusterrole
  labels:
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
rules:
  - apiGroups:
      - &quot;&quot;
    resources:
      - configmaps
      - endpoints
      - nodes
      - pods
      - secrets
    verbs:
      - list
      - watch
  - apiGroups:
      - &quot;&quot;
    resources:
      - nodes
    verbs:
      - get
  - apiGroups:
      - &quot;&quot;
    resources:
      - services
    verbs:
      - get
      - list
      - watch
  - apiGroups:
      - &quot;extensions&quot;
    resources:
      - ingresses
    verbs:
      - get
      - list
      - watch
  - apiGroups:
      - &quot;&quot;
    resources:
      - events
    verbs:
      - create
      - patch
  - apiGroups:
      - &quot;extensions&quot;
    resources:
      - ingresses/status
    verbs:
      - update

---
apiVersion: rbac.authorization.k8s.io/v1beta1
kind: Role
metadata:
  name: nginx-ingress-role
  namespace: ingress-nginx
  labels:
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
rules:
  - apiGroups:
      - &quot;&quot;
    resources:
      - configmaps
      - pods
      - secrets
      - namespaces
    verbs:
      - get
  - apiGroups:
      - &quot;&quot;
    resources:
      - configmaps
    resourceNames:
      - &quot;ingress-controller-leader-nginx&quot;
    verbs:
      - get
      - update
  - apiGroups:
      - &quot;&quot;
    resources:
      - configmaps
    verbs:
      - create
  - apiGroups:
      - &quot;&quot;
    resources:
      - endpoints
    verbs:
      - get

---
apiVersion: rbac.authorization.k8s.io/v1beta1
kind: RoleBinding
metadata:
  name: nginx-ingress-role-nisa-binding
  namespace: ingress-nginx
  labels:
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: nginx-ingress-role
subjects:
  - kind: ServiceAccount
    name: nginx-ingress-serviceaccount
    namespace: ingress-nginx

---
apiVersion: rbac.authorization.k8s.io/v1beta1
kind: ClusterRoleBinding
metadata:
  name: nginx-ingress-clusterrole-nisa-binding
  labels:
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: nginx-ingress-clusterrole
subjects:
  - kind: ServiceAccount
    name: nginx-ingress-serviceaccount
    namespace: ingress-nginx

---
</code></pre><p>å…³äº <code>RBAC</code> ç›¸å…³çš„å†…å®¹ï¼Œå¯æŸ¥çœ‹ç¬¬ 8 èŠ‚ ã€Šå®‰å…¨é‡ç‚¹: è®¤è¯å’Œæˆæƒã€‹ï¼Œäº†è§£æ­¤å¤„çš„é…ç½®åŠå…¶å«ä¹‰ã€‚</p>
</li>
<li>
<p>éƒ¨ç½² NGINX Ingress Controller</p>
<pre tabindex="0"><code>apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: nginx-ingress-controller
  namespace: ingress-nginx
  labels:
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: ingress-nginx
      app.kubernetes.io/part-of: ingress-nginx
  template:
    metadata:
      labels:
        app.kubernetes.io/name: ingress-nginx
        app.kubernetes.io/part-of: ingress-nginx
      annotations:
        prometheus.io/port: &quot;10254&quot;
        prometheus.io/scrape: &quot;true&quot;
    spec:
      serviceAccountName: nginx-ingress-serviceaccount
      containers:
        - name: nginx-ingress-controller
          image: taobeier/nginx-ingress-controller:0.21.0
          args:
            - /nginx-ingress-controller
            - --configmap=$(POD_NAMESPACE)/nginx-configuration
            - --tcp-services-configmap=$(POD_NAMESPACE)/tcp-services
            - --udp-services-configmap=$(POD_NAMESPACE)/udp-services
            - --publish-service=$(POD_NAMESPACE)/ingress-nginx
            - --annotations-prefix=nginx.ingress.kubernetes.io
          securityContext:
            capabilities:
              drop:
                - ALL
              add:
                - NET_BIND_SERVICE
            # www-data -&gt; 33
            runAsUser: 33
          env:
            - name: POD_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.name
            - name: POD_NAMESPACE
              valueFrom:
                fieldRef:
                  fieldPath: metadata.namespace
          ports:
            - name: http
              containerPort: 80
            - name: https
              containerPort: 443
          livenessProbe:
            failureThreshold: 3
            httpGet:
              path: /healthz
              port: 10254
              scheme: HTTP
            initialDelaySeconds: 10
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          readinessProbe:
            failureThreshold: 3
            httpGet:
              path: /healthz
              port: 10254
              scheme: HTTP
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
</code></pre><p>æ³¨æ„ï¼Œè¿™é‡Œçš„é•œåƒæ˜¯æˆ‘ä»å®˜æ–¹é•œåƒç›´æ¥åŒæ­¥çš„ï¼Œä¸ºäº†è§£å†³å›½å†…æ— æ³•ä¸‹è½½é•œåƒçš„æƒ…å†µã€‚</p>
<p>å¦å¤–ï¼Œåœ¨å¯åŠ¨å‚æ•°ä¸­ï¼ŒæŒ‡å®šäº†æˆ‘ä»¬ç¬¬äºŒæ­¥ä¸­åˆ›å»ºçš„ <code>ConfigMap</code> ã€‚ä»¥åŠï¼Œåœ¨æ­¤éƒ¨ç½²ä¸­ï¼Œç”¨åˆ°äº†ä¹‹å‰å°šæœªè¯¦ç»†è¯´æ˜çš„ <code>readinessProbe</code> å’Œ <code>livenessProbe</code>ï¼šæˆ‘ä»¬ä¹‹å‰åœ¨è¯¦è§£ <code>kubelet</code> æ—¶ï¼Œå¤§è‡´æåˆ°è¿‡å…³äºå®ƒæ‰€å…·å¤‡çš„èŒè´£ï¼Œè¿™ä¸¤ä¸ªé…ç½®ä¸»è¦æ˜¯ç”¨äºåšæ¢é’ˆï¼Œç”¨æˆ·æ£€æŸ¥ Pod æ˜¯å¦å·²ç»å‡†å¤‡å¥½æ¥å—è¯·æ±‚æµé‡å’Œæ˜¯å¦å­˜æ´»ã€‚</p>
<p>è¿™é‡Œè¿˜è¿›è¡Œäº† <code>annotations</code> é‡Œé¢æ ‡æ³¨äº†å…³äº <code>Prometheus</code> çš„ç›¸å…³å†…å®¹ï¼Œæˆ‘ä»¬ä¼šåœ¨ä¸‹èŠ‚ä¸­æè¿°ã€‚</p>
<pre tabindex="0"><code>master $ kubectl -n ingress-nginx get all
NAME                                            READY     STATUS    RESTARTS   AGE
pod/nginx-ingress-controller-6f647f7866-659ph   1/1       Running   0          75s

NAME                                       DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
deployment.apps/nginx-ingress-controller   1         1         1            1           75s

NAME                                                  DESIRED   CURRENT   READY     AGE
replicaset.apps/nginx-ingress-controller-6f647f7866   1         1         1         75s
</code></pre><p>å¯ä»¥çœ‹åˆ° NGINX Ingress Controller å·²ç»éƒ¨ç½²æˆåŠŸã€‚</p>
</li>
<li>
<p><strong>å°† NGINX Ingress Controller æš´éœ²è‡³é›†ç¾¤å¤–</strong></p>
<p>ç»è¿‡å‰é¢çš„ä»‹ç»ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“ Ingress çš„ä½œç”¨åœ¨äºå°†é›†ç¾¤å¤–çš„è¯·æ±‚æµé‡è½¬å‘é›†ç¾¤å†…çš„æœåŠ¡ï¼Œè€Œæˆ‘ä»¬çŸ¥é“ï¼Œé»˜è®¤æƒ…å†µä¸‹é›†ç¾¤å¤–å’Œé›†ç¾¤å†…æ˜¯ä¸äº’é€šçš„ï¼Œæ‰€ä»¥å¿…é¡»å°† NGINX Ingress Controller æš´éœ²è‡³é›†ç¾¤å¤–ï¼Œä»¥ä¾¿è®©å…¶èƒ½æ¥å—æ¥è‡ªé›†ç¾¤å¤–çš„è¯·æ±‚ã€‚</p>
<p>å°†å…¶æš´éœ²çš„æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹©æˆ‘ä»¬ä¹‹å‰å·²ç»ä»‹ç»è¿‡çš„ <code>NodePort</code> çš„æ–¹å¼ã€‚é€‰æ‹©å®ƒä¸»è¦æœ‰ä»¥ä¸‹åŸå› ï¼š</p>
<ul>
<li>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨çº¯çš„ LB å®ç°å®ŒæˆæœåŠ¡æš´éœ²ï¼Œæ¯”å¦‚ <a href="https://metallb.universe.tf/">MetalLB</a>ï¼Œä½†å®ƒè¿˜å¤„äº Beta é˜¶æ®µï¼Œå°šæœªæœ‰å¤§è§„æ¨¡ç”Ÿäº§ç¯å¢ƒä½¿ç”¨çš„éªŒè¯ã€‚</li>
<li>æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨å®¿ä¸»æœºçš„ç½‘ç»œï¼Œåªéœ€è®¾ç½® <code>hostNetwork: true</code> å³å¯ï¼Œä½†è¿™ä¸ªæ–¹å¼å¯èƒ½ä¼šå¸¦æ¥å®‰å…¨é—®é¢˜ã€‚</li>
<li>æˆ‘ä»¬å¯ä»¥é€‰æ‹© External IPs çš„æ–¹å¼ï¼Œä½†è¿™ç§æ–¹å¼æ— æ³•ä¿ç•™è¯·æ±‚çš„æº IPï¼Œæ‰€ä»¥å¹¶ä¸æ˜¯å¾ˆå¥½ã€‚</li>
<li>å…¶å®æˆ‘ä»¬ä¸€èˆ¬ä¼šé€‰æ‹©è‡ªå·±æä¾›è¾¹ç¼˜èŠ‚ç‚¹çš„æ–¹å¼ï¼Œä¸è¿‡è¿™ç§æ–¹å¼æ˜¯å»ºç«‹åœ¨ <code>NodePort</code> çš„æ–¹å¼ä¹‹ä¸Šï¼Œå¹¶ä¸”éœ€è¦æä¾›é¢å¤–çš„ç»„ä»¶ï¼Œæ­¤å¤„å°±æš‚ä¸åšå±•å¼€äº†ã€‚</li>
</ul>
<p>æˆ‘ä»¬ä½¿ç”¨ä»¥ä¸‹çš„é…ç½®ï¼Œå°† NGINX Ingress Controller æš´éœ²è‡³é›†ç¾¤å¤–</p>
<pre tabindex="0"><code>apiVersion: v1
kind: Service
metadata:
  name: ingress-nginx
  namespace: ingress-nginx
  labels:
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
spec:
  type: NodePort
  ports:
    - name: http
      port: 80
      targetPort: 80
      protocol: TCP
    - name: https
      port: 443
      targetPort: 443
      protocol: TCP
  selector:
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
</code></pre><p>åˆ›å»ºè¯¥ <code>Service</code>ã€‚</p>
<pre tabindex="0"><code>master $ kubectl -n ingress-nginx get svc                                                  
NAME            TYPE       CLUSTER-IP   EXTERNAL-IP   PORT(S)                      AGE
ingress-nginx   NodePort   10.0.38.53   &lt;none&gt;        80:30871/TCP,443:30356/TCP   11s
</code></pre><p>ç°åœ¨ï¼Œæˆ‘ä»¬ç›´æ¥è®¿é—® <code>Node:Port</code> ä¾¿å¯è®¿é—®åˆ°è¯¥ Controllerã€‚</p>
<pre tabindex="0"><code>master $ curl 172.17.0.3:30871                    
&lt;html&gt;
&lt;head&gt;&lt;title&gt;404 Not Found&lt;/title&gt;&lt;/head&gt;
&lt;body&gt;
&lt;center&gt;&lt;h1&gt;404 Not Found&lt;/h1&gt;&lt;/center&gt;
&lt;hr&gt;&lt;center&gt;nginx/1.15.6&lt;/center&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><p>ç”±äºæˆ‘ä»¬å¹¶æ²¡æœ‰è®¾ç½®ä»»ä½•çš„é»˜è®¤å“åº”åç«¯ï¼Œæ‰€ä»¥å½“ç›´æ¥è¯·æ±‚æ—¶ï¼Œä¾¿è¿”å› 404 ã€‚</p>
</li>
</ul>
<h3 id="å®è·µ">å®è·µ</h3>
<p>å°†æˆ‘ä»¬çš„ç¤ºä¾‹é¡¹ç›® <a href="https://github.com/tao12345666333/saythx">SayThx</a> é€šè¿‡ <code>Ingress</code> çš„æ–¹å¼è¿›è¡Œè®¿é—®ã€‚</p>
<p>è¯¥ç¤ºä¾‹é¡¹ç›®çš„éƒ¨ç½²ï¼Œä¸å†è¿›è¡Œèµ˜è¿°ã€‚å¯åœ¨ <a href="https://github.com/tao12345666333/saythx/blob/ingress/deploy/ingress.yaml">ingress åˆ†æ”¯</a> æŸ¥çœ‹æ­¤å¤„æ‰€éœ€é…ç½®ã€‚</p>
<p>åœ¨æˆ‘ä»¬å°† NGINX Ingress Controller åŠ SayThx é¡¹ç›®éƒ¨ç½²å¥½ä¹‹åï¼Œæˆ‘ä»¬ä½¿ç”¨ä»¥ä¸‹çš„é…ç½®åˆ›å»º <code>Ingress</code> èµ„æºã€‚</p>
<pre tabindex="0"><code>apiVersion: extensions/v1beta1
kind: Ingress
metadata:
  name: saythx-ing
  namespace: work
  annotations:
    nginx.ingress.kubernetes.io/ssl-redirect: &quot;false&quot;
spec:
  rules:
  - host: saythx.moelove.info
    http:
      paths:
      - path: /
        backend:
          serviceName: saythx-frontend
          servicePort: 80
</code></pre><ul>
<li>
<p>åˆ›å»º</p>
<pre tabindex="0"><code>master $ kubectl apply -f ingress.yaml         
ingress.extensions/saythx-ing created
master $ kubectl -n work get ing
NAME         HOSTS                 ADDRESS   PORTS     AGE
saythx-ing   saythx.moelove.info             80        23s
</code></pre></li>
<li>
<p>éªŒè¯</p>
<p>è¿™é‡Œæ¥è§£é‡Šä¸‹åˆšæ‰çš„é…ç½®æ–‡ä»¶ã€‚é¦–å…ˆï¼ŒæŒ‡å®šäº† <code>host: saythx.moelove.info</code> è¡¨ç¤ºæˆ‘ä»¬æƒ³è¦ä»¥ <code>saythx.moelove.info</code> è¿™ä¸ªåŸŸåæ¥è®¿é—®å®ƒã€‚<code>path</code> ç›´æ¥å†™ <code>/</code> è¡¨ç¤ºæ‰€æœ‰çš„è¯·æ±‚éƒ½è½¬å‘è‡³åä¸º <code>saythx-frontend</code> çš„æœåŠ¡ã€‚</p>
<p>ä¸æˆ‘ä»¬å¹³æ—¶ä½¿ç”¨ NGINX åŸºæœ¬ä¸€è‡´ã€‚ ç°åœ¨ç¼–è¾‘æœ¬åœ°çš„ HOSTS æ–‡ä»¶ç»‘å®š Node çš„IP ä¸ <code>saythx.moelove.info</code> è¿™ä¸ªåŸŸåã€‚ä½¿ç”¨æµè§ˆå™¨è¿›è¡Œè®¿é—® <code>saythx.moelove.info:åˆšæ‰ Controller ä½¿ç”¨ NodePort æš´éœ²æœåŠ¡æ—¶çš„ç«¯å£</code>ï¼š</p>
</li>
</ul>
<p><img src="/images/7b275630d18306fde29a5b7078277e9a0423c79b2e3b3865239bdcd22f856f65.png" alt="picture 16"></p>
<pre tabindex="0"><code>å¯ä»¥çœ‹åˆ°å·²ç»æˆåŠŸè®¿é—®ã€‚
</code></pre><h2 id="æ€»ç»“">æ€»ç»“</h2>
<p>åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº† <code>Ingress</code> çš„åŸºæœ¬æƒ…å†µï¼Œäº†è§£äº†å®ƒæ˜¯ K8S ä¸­çš„ä¸€ç§èµ„æºå¯¹è±¡ï¼Œä¸»è¦è´Ÿè´£å°†é›†ç¾¤å¤–éƒ¨æµé‡ä¸é›†ç¾¤å†…æœåŠ¡çš„é€šä¿¡ã€‚ä½†å®ƒçš„æ­£å¸¸å·¥ä½œç¦»ä¸å¼€ <code>Ingress Controller</code> ï¼Œå½“å‰å®˜æ–¹å›¢é˜Ÿç»´æŠ¤çš„ä¸»è¦æœ‰ä¸¤ä¸ª GLBC å’Œ NGINX Ingress Controllerã€‚</p>
<p>æˆ‘ä»¬å¤§è‡´ä»‹ç»äº†ç°æœ‰çš„ Controller å®ç°ï¼Œä¹Ÿå®è·µäº†å¦‚ä½•éƒ¨ç½² NGINX Ingress Controller ä»¥åŠå¦‚ä½•ä½¿ç”¨ Ingress å°†æˆ‘ä»¬çš„ç¤ºä¾‹é¡¹ç›®æš´éœ²è‡³é›†ç¾¤å¤–ã€‚</p>
<p>NGINX Ingress Controller çš„ä½¿ç”¨ï¼Œæ¯”è¾ƒç¬¦åˆæˆ‘ä»¬å¹³æ—¶ä½¿ç”¨ NGINX çš„ä¹ æƒ¯ï¼Œç›¸å¯¹æ¥è¯´ä¹Ÿæ¯”è¾ƒçµæ´»ï¼Œåç»­å¯çœ‹å®é™…æƒ…å†µå†è¿›è¡Œæ›´å¤šçš„å®è·µã€‚</p>
<p>è‡³æ­¤ï¼ŒK8S é›†ç¾¤çš„ç®¡ç†ï¼Œç›¸å…³åŸç†ä»¥åŠæœåŠ¡çš„éƒ¨ç½²ç­‰å†…å®¹å°±åŸºæœ¬ä»‹ç»å®Œæ¯•ã€‚ä¸‹èŠ‚ï¼Œæˆ‘ä»¬å°†ä»‹ç»ç”Ÿäº§å®è·µä¸­è‡³å…³é‡è¦çš„ä¸€ç¯ <strong>ç›‘æ§</strong> ç›¸å…³çš„å®è·µã€‚</p>

        </div>
    </article>
</div>

    </main>
    <footer>
        <div id="pagination">
            
<div class="paginator">
    <div class="prev">
        
        <a href="/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/21-%E6%89%A9%E5%B1%95%E5%A2%9E%E5%BC%BAcoredns/"><span>21 æ‰©å±•å¢å¼ºï¼šCoreDNS</span></a>
    </div>
    <div class="next">
        
        <a href="/documents/columns/kubernetes/kubernetes%E4%BB%8E%E4%B8%8A%E6%89%8B%E5%88%B0%E5%AE%9E%E8%B7%B5/23-%E7%9B%91%E6%8E%A7%E5%AE%9E%E8%B7%B5%E5%AF%B9-k8s-%E9%9B%86%E7%BE%A4%E8%BF%9B%E8%A1%8C%E7%9B%91%E6%8E%A7/"><span>23 ç›‘æ§å®è·µï¼šå¯¹ K8S é›†ç¾¤è¿›è¡Œç›‘æ§</span></a>
    </div>
</div>

        </div>
        <div class="toggler" onclick="toggleLight(this);">ğŸ’¡</div>
        <div id="copyright" style="display: none;">
    
    
    <p>&copy; 28280 <a href="/"></a>, powered by Hugo and Qiao</p>
</div>
    </footer>
    
<script>
    function toggleLight() {
        document.getElementById('page').classList.toggle('night');
    }
</script>
</body>

</html>