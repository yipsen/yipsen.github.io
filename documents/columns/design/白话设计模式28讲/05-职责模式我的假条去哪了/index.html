<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
<meta name="X-UA-Compatible" , content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<link rel="icon" type="image/png" href="/%20/favicon.png">

<title>05 职责模式：我的假条去哪了 | Yipsen Ye</title>
<meta name="description" content="【故事剧情】
 周五了，Tony 因为家里有一些重要的事需要回家一趟，于是向他的领导 Eren 请假，填写完假条便交给了 Eren。得到的回答却是：“这个假条我签不了，你得等部门总监同意！” Tony 一脸疑惑：“上次去参加 SDCC 开发者大会请了一天假不就是您签的吗？” Eren：“上次你只请了一天，我可以直接签。现在你是请五天，我要提交给部门总监，等他同意才可以。”
Tony：“您怎么不早说啊？” Eren：“你也没问啊！下次请假要提前一点……”
Tony 哪管这些啊！对他来说，每次请假只要把假条交给 Eren，其他的事情都交给领导去处理吧！
事实却是，整个请假的过程要走一套复杂的流程：
 小于等于2天，直属领导签字，提交行政部门； 大于2天，小于等于5天，直属领导签字，部门总监签字，提交行政部门； 大于5天，小于等于1月，直属领导签字，部门总监签字，CEO 签字，提交行政部门。   用程序来模拟生活 对于 Tony 来说，他只需要每次把假条交给直属领导，其他的繁琐流程他都可以不用管，所以他并不知道请假流程的具体细节。但请假会影响项目的进展和产品的交互，所以请假其实是一种责任担当的过程：你请假了，必然会给团队或部门增加工作压力，所以领导肯定会控制风险。请假的时间越长，风险越大，领导的压力和责任也越大，责任人也就越多，责任人的链条也就越长。
程序来源于生活，我们可以用程序来模拟这一个有趣的场景。
源码示例：
class Person:&amp;quot;请假申请人&amp;quot;def __init__(self, name, dayoff, reason):self.__name = nameself.__dayoff = dayoffself.__reason = reasonself.__leader = Nonedef getName(self):return self.__namedef getDayOff(self):return self.__dayoffdef getReason(self):return self.__reasondef setLeader(self, leader):self.__leader = leaderdef reuqest(self):print(self.">
<meta name="author" content="">

<link rel="stylesheet" type="text/css" href="/styles/main.css">

</head>

<body id="page">
    <header>
        <div class="logo-link" style="width: 60px; color: #CA6924;">
    <a href="http://yipsen.github.io/">
        <img style="margin-bottom: -1rem;" src="/images/deer.svg" alt="logo">
        <span style="font-size: 0.5rem; color: #CA6924;">Yipsen Ye</span>
    </a>
</div>
<nav class="navbar justify-content-end">
    <ul class="nav-list">
        
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/posts/">札记</a>
        </li>
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/collections/">附表</a>
        </li>
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/about/">关于</a>
        </li>
        
    </ul>
</nav>
    </header>
    <main id="content">
        
<div class="container"><aside>
    <div>
        
        
            
            
            <div class="post-category-icon"></div>
            <a href="/categories/%e7%99%bd%e8%af%9d%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f28%e8%ae%b2/">白话设计模式28讲</a>
            <ul>
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/design/%E7%99%BD%E8%AF%9D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F28%E8%AE%B2/00-%E7%94%9F%E6%B4%BB%E4%B8%AD%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%90%AF%E7%A8%8B%E4%B9%8B%E5%89%8D%E8%AF%B7%E4%B8%8D%E8%A6%81%E9%94%99%E8%BF%87%E6%88%91/">00 生活中的设计模式：启程之前，请不要错过我</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/design/%E7%99%BD%E8%AF%9D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F28%E8%AE%B2/01-%E7%9B%91%E5%90%AC%E6%A8%A1%E5%BC%8F%E5%9D%91%E7%88%B9%E7%9A%84%E7%83%AD%E6%B0%B4%E5%99%A8/">01 监听模式：坑爹的热水器</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/design/%E7%99%BD%E8%AF%9D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F28%E8%AE%B2/02-%E9%80%82%E9%85%8D%E6%A8%A1%E5%BC%8F%E8%BA%AB%E9%AB%98%E4%B8%8D%E5%A4%9F%E9%9E%8B%E6%9D%A5%E5%87%91/">02 适配模式：身高不够鞋来凑</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/design/%E7%99%BD%E8%AF%9D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F28%E8%AE%B2/03-%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F%E4%BA%BA%E4%B8%8E%E6%B0%B4%E7%9A%84%E4%B8%89%E6%80%81/">03 状态模式：人与水的三态</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/design/%E7%99%BD%E8%AF%9D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F28%E8%AE%B2/04-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%E4%BD%A0%E6%98%AF%E6%88%91%E7%94%9F%E5%91%BD%E7%9A%84%E5%94%AF%E4%B8%80/">04 单例模式：你是我生命的唯一</a></li>
                
                
                
                    <li>05 职责模式：我的假条去哪了</li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/design/%E7%99%BD%E8%AF%9D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F28%E8%AE%B2/06-%E4%B8%AD%E4%BB%8B%E6%A8%A1%E5%BC%8F%E6%89%BE%E6%88%BF%E5%AD%90%E9%97%AE%E4%B8%AD%E4%BB%8B/">06 中介模式：找房子问中介</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/design/%E7%99%BD%E8%AF%9D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F28%E8%AE%B2/07-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%E5%B8%AE%E6%88%91%E6%8B%BF%E4%B8%80%E4%B8%8B%E5%BF%AB%E9%80%92/">07 代理模式：帮我拿一下快递</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/design/%E7%99%BD%E8%AF%9D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F28%E8%AE%B2/08-%E8%A3%85%E9%A5%B0%E6%A8%A1%E5%BC%8F%E4%BD%A0%E6%83%B3%E6%80%8E%E4%B9%88%E7%A9%BF%E5%B0%B1%E6%80%8E%E4%B9%88%E7%A9%BF/">08 装饰模式：你想怎么穿就怎么穿</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/design/%E7%99%BD%E8%AF%9D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F28%E8%AE%B2/09-%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F%E4%BD%A0%E8%A6%81%E6%8B%BF%E9%93%81%E8%BF%98%E6%98%AF%E6%91%A9%E5%8D%A1/">09 工厂模式：你要拿铁还是摩卡</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/design/%E7%99%BD%E8%AF%9D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F28%E8%AE%B2/10-%E8%BF%AD%E4%BB%A3%E6%A8%A1%E5%BC%8F%E4%B8%8B%E4%B8%80%E4%B8%AA%E5%B0%B1%E6%98%AF%E4%BD%A0%E4%BA%86/">10 迭代模式：下一个就是你了</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/design/%E7%99%BD%E8%AF%9D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F28%E8%AE%B2/11-%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F%E8%87%AA%E5%B7%B1%E7%BB%84%E8%A3%85%E7%94%B5%E8%84%91/">11 组合模式：自己组装电脑</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/design/%E7%99%BD%E8%AF%9D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F28%E8%AE%B2/12-%E6%9E%84%E5%BB%BA%E6%A8%A1%E5%BC%8F%E6%83%B3%E8%A6%81%E8%BD%A6%E8%BF%98%E6%98%AF%E5%BA%84%E5%9B%AD/">12 构建模式：想要车还是庄园</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/design/%E7%99%BD%E8%AF%9D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F28%E8%AE%B2/13-%E5%85%8B%E9%9A%86%E6%A8%A1%E5%BC%8F%E7%BB%99%E4%BD%A0%E4%B8%80%E4%B8%AA%E5%88%86%E8%BA%AB%E6%9C%AF/">13 克隆模式：给你一个分身术</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/design/%E7%99%BD%E8%AF%9D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F28%E8%AE%B2/14-%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F%E6%80%8E%E4%B9%88%E6%9D%A5%E4%B8%8D%E9%87%8D%E8%A6%81%E4%BA%BA%E5%88%B0%E5%B0%B1%E8%A1%8C/">14 策略模式：怎么来不重要，人到就行</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/design/%E7%99%BD%E8%AF%9D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F28%E8%AE%B2/15-%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F%E5%A4%A7%E9%97%B8%E8%9F%B9%E8%B5%B0%E8%B5%B7/">15 命令模式：大闸蟹，走起！</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/design/%E7%99%BD%E8%AF%9D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F28%E8%AE%B2/16-%E5%A4%87%E5%BF%98%E6%A8%A1%E5%BC%8F%E5%A5%BD%E8%AE%B0%E6%80%A7%E4%B8%8D%E5%A6%82%E7%83%82%E7%AC%94%E5%A4%B4/">16 备忘模式：好记性不如烂笔头</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/design/%E7%99%BD%E8%AF%9D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F28%E8%AE%B2/17-%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F%E9%A2%9C%E6%96%99%E5%BE%88%E8%B4%B5%E5%BF%85%E9%A1%BB%E5%85%85%E5%88%86%E5%88%A9%E7%94%A8/">17 享元模式：颜料很贵必须充分利用</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/design/%E7%99%BD%E8%AF%9D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F28%E8%AE%B2/18-%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F%E5%AD%A6%E5%A6%B9%E5%88%AB%E6%85%8C%E5%AD%A6%E9%95%BF%E5%B8%AE%E4%BD%A0/">18 外观模式：学妹别慌，学长帮你</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/design/%E7%99%BD%E8%AF%9D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F28%E8%AE%B2/19-%E8%AE%BF%E9%97%AE%E6%A8%A1%E5%BC%8F%E4%B8%80%E5%8D%83%E4%B8%AA%E8%AF%BB%E8%80%85%E4%B8%80%E5%8D%83%E4%B8%AA%E5%93%88%E5%A7%86%E9%9B%B7%E7%89%B9/">19 访问模式：一千个读者一千个哈姆雷特</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/design/%E7%99%BD%E8%AF%9D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F28%E8%AE%B2/20-%E7%94%9F%E6%B4%BB%E4%B8%AD%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B8%8E%E7%BB%8F%E5%85%B8%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%9A%84%E4%B8%8D%E8%A7%A3%E6%B8%8A%E6%BA%90/">20 生活中的设计模式：与经典设计模式的不解渊源</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/design/%E7%99%BD%E8%AF%9D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F28%E8%AE%B2/21-%E7%94%9F%E6%B4%BB%E4%B8%AD%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E9%82%A3%E4%BA%9B%E6%9C%AA%E5%AE%8C%E5%BE%85%E7%BB%AD%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">21 生活中的设计模式：那些未完待续的设计模式</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/design/%E7%99%BD%E8%AF%9D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F28%E8%AE%B2/22-%E6%B7%B1%E5%85%A5%E8%A7%A3%E8%AF%BB%E8%BF%87%E6%BB%A4%E5%99%A8%E6%A8%A1%E5%BC%8F%E5%88%B6%E4%BD%9C%E4%B8%80%E6%9D%AF%E9%B2%9C%E7%BA%AF%E7%BB%86%E8%85%BB%E7%9A%84%E8%B1%86%E6%B5%86/">22 深入解读过滤器模式：制作一杯鲜纯细腻的豆浆</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/design/%E7%99%BD%E8%AF%9D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F28%E8%AE%B2/23-%E6%B7%B1%E5%85%A5%E8%A7%A3%E8%AF%BB%E5%AF%B9%E8%B1%A1%E6%B1%A0%E6%8A%80%E6%9C%AF%E5%85%B1%E4%BA%AB%E8%AE%A9%E7%94%9F%E6%B4%BB%E6%9B%B4%E4%BE%BF%E6%8D%B7/">23 深入解读对象池技术：共享让生活更便捷</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/design/%E7%99%BD%E8%AF%9D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F28%E8%AE%B2/24-%E6%B7%B1%E5%85%A5%E8%A7%A3%E8%AF%BB%E5%9B%9E%E8%B0%83%E6%9C%BA%E5%88%B6%E6%8A%8A%E4%BD%A0%E6%8A%80%E8%83%BD%E4%BA%AE%E5%87%BA%E6%9D%A5/">24 深入解读回调机制：把你技能亮出来</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/design/%E7%99%BD%E8%AF%9D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F28%E8%AE%B2/25-%E8%B0%88%E8%B0%88%E6%88%91%E5%AF%B9%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%9A%84%E7%90%86%E8%A7%A3/">25 谈谈我对设计模式的理解</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/design/%E7%99%BD%E8%AF%9D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F28%E8%AE%B2/26-%E8%B0%88%E8%B0%88%E6%88%91%E5%AF%B9%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99%E7%9A%84%E6%80%9D%E8%80%83/">26 谈谈我对设计原则的思考</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/design/%E7%99%BD%E8%AF%9D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F28%E8%AE%B2/27-%E8%B0%88%E8%B0%88%E6%88%91%E5%AF%B9%E9%A1%B9%E7%9B%AE%E9%87%8D%E6%9E%84%E7%9A%84%E7%9C%8B%E6%B3%95/">27 谈谈我对项目重构的看法</a></li>
                
                
            </ul>
        
    </div>
</aside>

<style>
    aside {
        position: fixed;
        left: 20px;
        background: #ffdee3;
        border-radius: 6px;
        padding: 20px;
        padding-top: 60px;
        box-shadow: 5px 10px #888;
        list-style-type: none;
        display: none;
    }

    .post-category-icon {
        position: absolute;
        width: 80px;
        height: 80px;
        top: -40px;
        left: 50%;
        margin-left: -40px;
        text-align: center;
        font-size: 36px;
        content: 'J';
        background: #ffdee3;
        border-radius: 100%;
        border: 10px solid #fff;
        box-shadow: 5px 10px #888;
    }
</style><article class="post-block">
        <h1 class="post-title">05 职责模式：我的假条去哪了</h1>
        <div class="post-info">
            <div> 
                <span class="post-date">📅&nbsp;2021-12-22 01:36:54</span>🏷️&nbsp;<a class="post-tag" href="/tags/design/">design</a></div><div class="post-category">
                
                📚&nbsp;<a href="/categories/%E7%99%BD%E8%AF%9D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F28%E8%AE%B2/">白话设计模式28讲</a>
                
            </div></div>
        <div class="post-content">
            <p>【故事剧情】</p>
<blockquote>
<p>周五了，Tony 因为家里有一些重要的事需要回家一趟，于是向他的领导 Eren 请假，填写完假条便交给了 Eren。得到的回答却是：“这个假条我签不了，你得等部门总监同意！” Tony 一脸疑惑：“上次去参加 SDCC 开发者大会请了一天假不就是您签的吗？” Eren：“上次你只请了一天，我可以直接签。现在你是请五天，我要提交给部门总监，等他同意才可以。”</p>
<p>Tony：“您怎么不早说啊？” Eren：“你也没问啊！下次请假要提前一点……”</p>
<p>Tony 哪管这些啊！对他来说，每次请假只要把假条交给 Eren，其他的事情都交给领导去处理吧！</p>
<p>事实却是，整个请假的过程要走一套复杂的流程：</p>
<ol>
<li>小于等于2天，直属领导签字，提交行政部门；</li>
<li>大于2天，小于等于5天，直属领导签字，部门总监签字，提交行政部门；</li>
<li>大于5天，小于等于1月，直属领导签字，部门总监签字，CEO 签字，提交行政部门。</li>
</ol>
</blockquote>
<p><img src="http://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/%E7%99%BD%E8%AF%9D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%2028%20%E8%AE%B2%EF%BC%88%E5%AE%8C%EF%BC%89/assets/0d80f9d0-d5b6-11e7-ba8d-675556ef95d9.jpg" alt="enter image description here"></p>
<h3 id="用程序来模拟生活">用程序来模拟生活</h3>
<p>对于 Tony 来说，他只需要每次把假条交给直属领导，其他的繁琐流程他都可以不用管，所以他并不知道请假流程的具体细节。但请假会影响项目的进展和产品的交互，所以请假其实是一种责任担当的过程：你请假了，必然会给团队或部门增加工作压力，所以领导肯定会控制风险。请假的时间越长，风险越大，领导的压力和责任也越大，责任人也就越多，责任人的链条也就越长。</p>
<p>程序来源于生活，我们可以用程序来模拟这一个有趣的场景。</p>
<p>源码示例：</p>
<pre tabindex="0"><code>class Person:
    &quot;请假申请人&quot;
    def __init__(self, name, dayoff, reason):
        self.__name = name
        self.__dayoff = dayoff
        self.__reason = reason
        self.__leader = None

    def getName(self):
        return self.__name

    def getDayOff(self):
        return self.__dayoff

    def getReason(self):
        return self.__reason

    def setLeader(self, leader):
        self.__leader = leader

    def reuqest(self):
        print(self.__name, &quot;申请请假&quot;, self.__dayoff, &quot;天。请假事由：&quot;, self.__reason)
        if( self.__leader is not None):
            self.__leader.handleRequest(self)

class Manager:
    &quot;公司管理人员&quot;

    def __init__(self, name, title):
        self.__name = name
        self.__title = title
        self.__nextHandler = None

    def getName(self):
        return self.__name

    def getTitle(self):
        return self.__title

    def setNextHandler(self, nextHandler):
        self.__nextHandler = nextHandler

    def getNextHandler(self):
        return self.__nextHandler

    def handleRequest(self, person):
        pass

class Supervisor(Manager):
    &quot;主管&quot;

    def __init__(self, name, title):
        super().__init__(name, title)

    def handleRequest(self, person):
        if(person.getDayOff() &lt;= 2):
            print(&quot;同意&quot;, person.getName(), &quot;请假，签字人：&quot;, self.getName(), &quot;(&quot;, self.getTitle(), &quot;)&quot;)
        nextHander = self.getNextHandler()
        if(nextHander is not None):
            nextHander.handleRequest(person)

class DepartmentManager(Manager):
    &quot;部门总监&quot;
    def __init__(self, name, title):
        super().__init__(name, title)

    def handleRequest(self, person):
        if(person.getDayOff() &gt;2 and person.getDayOff() &lt;= 5):
            print(&quot;同意&quot;, person.getName(), &quot;请假，签字人：&quot;, self.getName(), &quot;(&quot;, self.getTitle(), &quot;)&quot;)
        nextHander = self.getNextHandler()
        if(nextHander is not None):
            nextHander.handleRequest(person)

class CEO(Manager):
    &quot;CEO&quot;

    def __init__(self, name, title):
        super().__init__(name, title)

    def handleRequest(self, person):
        if (person.getDayOff() &gt; 5 and person.getDayOff() &lt;= 22):
            print(&quot;同意&quot;, person.getName(), &quot;请假，签字人：&quot;, self.getName(), &quot;(&quot;, self.getTitle(), &quot;)&quot;)
        nextHander = self.getNextHandler()
        if (nextHander is not None):
            nextHander.handleRequest(person)

class Administrator(Manager):
    &quot;行政人员&quot;

    def __init__(self, name, title):
        super().__init__(name, title)

    def handleRequest(self, person):
        print(person.getName(), &quot;的请假申请已审核，情况属实！已备案处理。处理人：&quot;, self.getName(), &quot;(&quot;, self.getTitle(), &quot;)\n&quot;)
        nextHander = self.getNextHandler()

</code></pre><p>测试代码：</p>
<pre tabindex="0"><code>def testChainOfResponsibility():
    directLeader = Supervisor(&quot;Eren&quot;, &quot;客户端研发部经理&quot;)
    departmentLeader = DepartmentManager(&quot;Eric&quot;, &quot;技术研发中心总监&quot;)
    ceo = CEO(&quot;Helen&quot;, &quot;创新文化公司CEO&quot;)
    administrator = Administrator(&quot;Nina&quot;, &quot;行政中心总监&quot;)
    directLeader.setNextHandler(departmentLeader)
    departmentLeader.setNextHandler(ceo)
    ceo.setNextHandler(administrator)

    sunny = Person(&quot;Sunny&quot;, 1, &quot;参加MDCC大会。&quot;)
    sunny.setLeader(directLeader)
    sunny.reuqest()
    tony = Person(&quot;Tony&quot;, 5, &quot;家里有紧急事情！&quot;)
    tony.setLeader(directLeader)
    tony.reuqest()
    pony = Person(&quot;Pony&quot;, 15, &quot;出国深造。&quot;)
    pony.setLeader(directLeader)
    pony.reuqest()

</code></pre><p>输出结果：</p>
<pre tabindex="0"><code>Sunny 申请请假 1 天。请假事由： 参加MDCC大会。
同意 Sunny 请假，签字人： Eren ( 客户端研发部经理 )
Sunny 的请假申请已审核，情况属实！已备案处理。处理人： Nina ( 行政中心总监 )

Tony 申请请假 5 天。请假事由： 家里有紧急事情！
同意 Tony 请假，签字人： Eric ( 技术研发中心总监 )
Tony 的请假申请已审核，情况属实！已备案处理。处理人： Nina ( 行政中心总监 )

Pony 申请请假 15 天。请假事由： 出国深造。
同意 Pony 请假，签字人： Helen ( 创新文化公司CEO )
Pony 的请假申请已审核，情况属实！已备案处理。处理人： Nina ( 行政中心总监 )

</code></pre><h3 id="从剧情中思考职责模式">从剧情中思考职责模式</h3>
<p>从请假这个示例中我们发现，对于 Tony 来说，他并不需要知道假条处理的具体细节，甚至不需要知道假条去哪儿了，他只需要知道假条有人会处理。而假条的处理流程是一手接一手的责任传递，处理假条的所有人构成了一条<strong>责任的链条</strong>。链条上的每一个人只处理自己职责范围内的请求，对于自己处理不了请求，直接交给下一个责任人。这就是程序设计中职责模式的核心思想。</p>
<p><img src="http://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/%E7%99%BD%E8%AF%9D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%2028%20%E8%AE%B2%EF%BC%88%E5%AE%8C%EF%BC%89/assets/43e959e0-d5b6-11e7-ba8d-675556ef95d9.jpg" alt="enter image description here"></p>
<p><strong>职责模式</strong>： 避免请求发送者与接收者耦合在一起，让多个对象都有可能接收请求，将这些对象连接成一条链，并且沿着这条链传递请求，直到有对象处理它为止。职责模式也称为责任链模式，它是一种对象行为型模式。</p>
<p>职责链模式将请求的发送者和接受者解耦了。客户端不需要知道请求处理者的明确信息和处理的具体逻辑，甚至不需要知道链的结构，它只需要将请求进行发送即可。</p>
<p>在职责链模式中我们可以随时随地的增加或者更改一个责任人，甚至可以更改责任人的顺序，增加了系统的灵活性。但是有时候可能会导致一个请求无论如何也得不到处理，它会被放置在链末端。</p>
<h3 id="职责模式的模型抽象">职责模式的模型抽象</h3>
<h4 id="代码框架">代码框架</h4>
<p>上面的示例代码还是相对比较粗糙，我们可以对它进行进一步的重构和优化，抽象出职责模式的框架模型。</p>
<pre tabindex="0"><code>class Request:
    &quot;请求(内容)&quot;

    def __init__(self, name, dayoff, reason):
        self.__name = name
        self.__dayoff = dayoff
        self.__reason = reason
        self.__leader = None

    def getName(self):
        return self.__name

    def getDayOff(self):
        return self.__dayoff

    def getReason(self):
        return self.__reason

class Responsible:
    &quot;责任人的抽象类&quot;

    def __init__(self, name, title):
        self.__name = name
        self.__title = title
        self.__nextHandler = None

    def getName(self):
        return self.__name

    def getTitle(self):
        return self.__title

    def setNextHandler(self, nextHandler):
        self.__nextHandler = nextHandler

    def getNextHandler(self):
        return self.__nextHandler

    def handleRequest(self, request):
        pass

</code></pre><h4 id="类图">类图</h4>
<p>上面的代码框架可用类图表示如下：</p>
<p><img src="http://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/%E7%99%BD%E8%AF%9D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%2028%20%E8%AE%B2%EF%BC%88%E5%AE%8C%EF%BC%89/assets/7c356e10-d5b6-11e7-8257-812093f8cef1.jpg" alt="enter image description here"></p>
<h4 id="基于框架的实现">基于框架的实现</h4>
<p>有了上面的代码框架之后，我们要实现示例代码的功能就会更简单了，代码也会更加优雅。最开始的示例代码我们假设它为 version 1.0，那么再看看基于框架的 version 2.0 吧。</p>
<pre tabindex="0"><code>class Person:
    &quot;请求者&quot;

    def __init__(self, name):
        self.__name = name
        self.__leader = None

    def setName(self, name):
        self.__name = name

    def getName(self):
        return self.__name

    def setLeader(self, leader):
        self.__leader = leader

    def getLeader(self):
        return self.__leader

    def sendReuqest(self, request):
        print(self.__name, &quot;申请请假&quot;, request.getDayOff(), &quot;天。请假事由：&quot;, request.getReason())
        if (self.__leader is not None):
            self.__leader.handleRequest(request)

class Supervisor(Responsible):
    &quot;主管&quot;

    def __init__(self, name, title):
        super().__init__(name, title)

    def handleRequest(self, request):
        if (request.getDayOff() &lt;= 2):
            print(&quot;同意&quot;, request.getName(), &quot;请假，签字人：&quot;, self.getName(), &quot;(&quot;, self.getTitle(), &quot;)&quot;)
        nextHander = self.getNextHandler()
        if (nextHander is not None):
            nextHander.handleRequest(request)

class DepartmentManager(Responsible):
    &quot;部门总监&quot;

    def __init__(self, name, title):
        super().__init__(name, title)

    def handleRequest(self, request):
        if (request.getDayOff() &gt; 2 and request.getDayOff() &lt;= 5):
            print(&quot;同意&quot;, request.getName(), &quot;请假，签字人：&quot;, self.getName(), &quot;(&quot;, self.getTitle(), &quot;)&quot;)
        nextHander = self.getNextHandler()
        if (nextHander is not None):
            nextHander.handleRequest(request)

class CEO(Responsible):
    &quot;CEO&quot;

    def __init__(self, name, title):
        super().__init__(name, title)

    def handleRequest(self, request):
        if (request.getDayOff() &gt; 5 and request.getDayOff() &lt;= 22):
            print(&quot;同意&quot;, request.getName(), &quot;请假，签字人：&quot;, self.getName(), &quot;(&quot;, self.getTitle(), &quot;)&quot;)
        nextHander = self.getNextHandler()
        if (nextHander is not None):
            nextHander.handleRequest(request)

class Administrator(Responsible):
    &quot;行政人员&quot;

    def __init__(self, name, title):
        super().__init__(name, title)

    def handleRequest(self, request):
        print(request.getName(), &quot;的请假申请已审核，情况属实！已备案处理。处理人：&quot;, self.getName(), &quot;(&quot;, self.getTitle(), &quot;)\n&quot;)
        nextHander = self.getNextHandler()

</code></pre><p>测试代码需要稍微修改一下：</p>
<pre tabindex="0"><code>def testChainOfResponsibility1():
    directLeader = Supervisor(&quot;Eren&quot;, &quot;客户端研发部经理&quot;)
    departmentLeader = DepartmentManager(&quot;Eric&quot;, &quot;技术研发中心总监&quot;)
    ceo = CEO(&quot;Helen&quot;, &quot;创新文化公司CEO&quot;)
    administrator = Administrator(&quot;Nina&quot;, &quot;行政中心总监&quot;)
    directLeader.setNextHandler(departmentLeader)
    departmentLeader.setNextHandler(ceo)
    ceo.setNextHandler(administrator)

    sunny = Person(&quot;Sunny&quot;)
    sunny.setLeader(directLeader)
    sunny.sendReuqest(Request(sunny.getName(), 1, &quot;参加MDCC大会。&quot;))
    tony = Person(&quot;Tony&quot;)
    tony.setLeader(directLeader)
    tony.sendReuqest(Request(tony.getName(), 5, &quot;家里有紧急事情！&quot;))
    pony = Person(&quot;Pony&quot;)
    pony.setLeader(directLeader)
    pony.sendReuqest(Request(pony.getName(), 15, &quot;出国深造。&quot;))

</code></pre><p>自己跑一下，会发现输出结果和之前的是一样的。</p>
<h4 id="模型说明">模型说明</h4>
<ul>
<li>设计要点</li>
</ul>
<p>在设计职责模式的程序时要注意以下几点：</p>
<ol>
<li><strong>请求者与请求内容</strong>：谁要发送请求？发送请求的对象称为请求者。请求的内容通过发送请求时的参数进行传递。</li>
<li><strong>有哪些责任人</strong>：责任人是构成责任链的关键要素。请求的流动方向是链条中的线，而责任人则是链条上的结点，线和结点才构成了一条链条。</li>
<li><strong>对责任人进行抽象</strong>：真实世界中的责任人会多种多样，纷繁复杂，会有不同的职责和功能；但他们也有一个共同的特征——都可以处理请求。所以需要对责任人进行抽象，使他们具有责任的可传递性。</li>
<li><strong>责任人可自由组合</strong>：责任链上的责任人可以根据业务的具体逻辑进行自由的组合和排序。</li>
</ol>
<h4 id="优缺点">优缺点</h4>
<ul>
<li>优点：</li>
</ul>
<ol>
<li>降低耦合度。它将请求的发送者和接受者解耦。</li>
<li>简化了对象。使得对象不需要知道链的结构。</li>
<li>增强给对象指派职责的灵活性。通过改变链内的成员或者调动它们的次序，允许动态地新增或者删除责任人。</li>
<li>增加新的处理类很方便。</li>
</ol>
<ul>
<li>职责模式的缺点：</li>
</ul>
<ol>
<li>不能保证请求一定被接收。</li>
<li>系统性能将受到一定影响，而且在进行代码调试时不太方便，可能会造成循环调用。</li>
</ol>
<h3 id="应用场景">应用场景</h3>
<ol>
<li>有多个对象可以处理同一个请求，具体哪个对象处理该请求由运行时刻自动确定。</li>
<li>请求的处理具有明显的一层层传递关系。</li>
<li>请求的处理流程和顺序需要程序运行时动态确定。</li>
</ol>

        </div>
    </article>
</div>

    </main>
    <footer>
        <div id="pagination">
            
<div class="paginator">
    <div class="prev">
        
        <a href="/documents/columns/design/%E7%99%BD%E8%AF%9D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F28%E8%AE%B2/04-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%E4%BD%A0%E6%98%AF%E6%88%91%E7%94%9F%E5%91%BD%E7%9A%84%E5%94%AF%E4%B8%80/"><span>04 单例模式：你是我生命的唯一</span></a>
    </div>
    <div class="next">
        
        <a href="/documents/columns/design/%E7%99%BD%E8%AF%9D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F28%E8%AE%B2/06-%E4%B8%AD%E4%BB%8B%E6%A8%A1%E5%BC%8F%E6%89%BE%E6%88%BF%E5%AD%90%E9%97%AE%E4%B8%AD%E4%BB%8B/"><span>06 中介模式：找房子问中介</span></a>
    </div>
</div>

        </div>
        <div class="toggler" onclick="toggleLight(this);">💡</div>
        <div id="copyright" style="display: none;">
    
    
    <p>&copy; 28280 <a href="/"></a>, powered by Hugo and Qiao</p>
</div>
    </footer>
    
<script>
    function toggleLight() {
        document.getElementById('page').classList.toggle('night');
    }
</script>
</body>

</html>