<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
<meta name="X-UA-Compatible" , content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<link rel="icon" type="image/png" href="/%20/favicon.png">

<title> | Yipsen Ye</title>
<meta name="description" content="RediSearch æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„å…¨æ–‡æœç´¢å¼•æ“ï¼Œå®ƒå¯ä»¥ä½œä¸ºä¸€ä¸ª Redis Moduleï¼ˆæ‰©å±•æ¨¡å—ï¼‰è¿è¡Œåœ¨ Redis æœåŠ¡å™¨ä¸Šã€‚
RediSearch ä¸»è¦ç‰¹æ€§å¦‚ä¸‹ï¼š
 åŸºäºæ–‡æ¡£çš„å¤šä¸ªå­—æ®µå…¨æ–‡ç´¢å¼• é«˜æ€§èƒ½å¢é‡ç´¢å¼• æ–‡æ¡£æ’åºï¼ˆç”±ç”¨æˆ·åœ¨ç´¢å¼•æ—¶æ‰‹åŠ¨æä¾›ï¼‰ åœ¨å­æŸ¥è¯¢ä¹‹é—´ä½¿ç”¨ AND æˆ– NOT æ“ä½œç¬¦çš„å¤æ‚å¸ƒå°”æŸ¥è¯¢ å¯é€‰çš„æŸ¥è¯¢å­å¥ åŸºäºå‰ç¼€çš„æœç´¢ æ”¯æŒå­—æ®µæƒé‡è®¾ç½® è‡ªåŠ¨å®Œæˆå»ºè®®ï¼ˆå¸¦æœ‰æ¨¡ç³Šå‰ç¼€å»ºè®®ï¼‰ ç²¾ç¡®çš„çŸ­è¯­æœç´¢ åœ¨è®¸å¤šè¯­è¨€ä¸­åŸºäºè¯å¹²åˆ†æçš„æŸ¥è¯¢æ‰©å±• æ”¯æŒç”¨äºæŸ¥è¯¢æ‰©å±•å’Œè¯„åˆ†çš„è‡ªå®šä¹‰å‡½æ•° å°†æœç´¢é™åˆ¶åˆ°ç‰¹å®šçš„æ–‡æ¡£å­—æ®µ æ•°å­—è¿‡æ»¤å™¨å’ŒèŒƒå›´ ä½¿ç”¨ Redis è‡ªå·±çš„åœ°ç†å‘½ä»¤è¿›è¡Œåœ°ç†è¿‡æ»¤ Unicode æ”¯æŒï¼ˆéœ€è¦ UTF-8 å­—ç¬¦é›†ï¼‰ æ£€ç´¢å®Œæ•´çš„æ–‡æ¡£å†…å®¹æˆ–åªæ˜¯ ID çš„æ£€ç´¢ æ”¯æŒæ–‡æ¡£åˆ é™¤å’Œæ›´æ–°ä¸ç´¢å¼•åƒåœ¾æ”¶é›† æ”¯æŒéƒ¨åˆ†æ›´æ–°å’Œæ¡ä»¶æ–‡æ¡£æ›´æ–°  å®‰è£… å’Œå‰é¢è®²åˆ°å¸ƒéš†è¿‡æ»¤å™¨çš„å¼•å…¥æ–¹å¼ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ RediSearch å®˜æ–¹æ¨èçš„ Docker æ–¹å¼æ¥å®‰è£…å¹¶å¯åŠ¨ RediSearch åŠŸèƒ½ï¼Œæ“ä½œå‘½ä»¤å¦‚ä¸‹ï¼š
docker run -p 6379:6379 redislabs/redisearch:latest å®‰è£…å¹¶å¯åŠ¨æˆåŠŸï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
å®‰è£…å®Œæˆä¹‹åä½¿ç”¨ redis-cli æ¥æ£€æŸ¥ RediSearch æ¨¡å—æ˜¯å¦åŠ è½½æˆåŠŸï¼Œä½¿ç”¨ Docker å¯åŠ¨ redis-cliï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š
docker exec -it myredis redis-cli å…¶ä¸­â€œmyredisâ€ä¸º Redis æœåŠ¡å™¨çš„åç§°ï¼Œæ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š
127.0.0.1:6379&amp;gt; module list 1) 1) &amp;quot;name&amp;quot; 2) &amp;quot;ft&amp;quot; 3) &amp;quot;ver&amp;quot; 4) (integer) 10610 è¿”å›æ•°ç»„å­˜åœ¨â€œftâ€ï¼Œè¡¨æ˜ RediSearch æ¨¡å—å·²ç»æˆåŠŸåŠ è½½ã€‚">
<meta name="author" content="">

<link rel="stylesheet" type="text/css" href="/styles/main.css">

</head>

<body id="page">
    <header>
        <div class="logo-link" style="width: 60px; color: #CA6924;">
    <a href="http://yipsen.github.io/">
        <img style="margin-bottom: -1rem;" src="/images/deer.svg" alt="logo">
        <span style="font-size: 0.5rem; color: #CA6924;">Yipsen Ye</span>
    </a>
</div>
<nav class="navbar justify-content-end">
    <ul class="nav-list">
        
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/posts/">æœ­è®°</a>
        </li>
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/collections/">é™„è¡¨</a>
        </li>
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/about/">å…³äº</a>
        </li>
        
    </ul>
</nav>
    </header>
    <main id="content">
        
<div class="container"><article class="post-block">
        <h1 class="post-title"></h1>
        <div class="post-info">
            <div> 
                <span class="post-date">ğŸ“…&nbsp;0001-01-01 00:00:00</span></div></div>
        <div class="post-content">
            <p>RediSearch æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„å…¨æ–‡æœç´¢å¼•æ“ï¼Œå®ƒå¯ä»¥ä½œä¸ºä¸€ä¸ª Redis Moduleï¼ˆæ‰©å±•æ¨¡å—ï¼‰è¿è¡Œåœ¨ Redis æœåŠ¡å™¨ä¸Šã€‚</p>
<p>RediSearch ä¸»è¦ç‰¹æ€§å¦‚ä¸‹ï¼š</p>
<ul>
<li>åŸºäºæ–‡æ¡£çš„å¤šä¸ªå­—æ®µå…¨æ–‡ç´¢å¼•</li>
<li>é«˜æ€§èƒ½å¢é‡ç´¢å¼•</li>
<li>æ–‡æ¡£æ’åºï¼ˆç”±ç”¨æˆ·åœ¨ç´¢å¼•æ—¶æ‰‹åŠ¨æä¾›ï¼‰</li>
<li>åœ¨å­æŸ¥è¯¢ä¹‹é—´ä½¿ç”¨ AND æˆ– NOT æ“ä½œç¬¦çš„å¤æ‚å¸ƒå°”æŸ¥è¯¢</li>
<li>å¯é€‰çš„æŸ¥è¯¢å­å¥</li>
<li>åŸºäºå‰ç¼€çš„æœç´¢</li>
<li>æ”¯æŒå­—æ®µæƒé‡è®¾ç½®</li>
<li>è‡ªåŠ¨å®Œæˆå»ºè®®ï¼ˆå¸¦æœ‰æ¨¡ç³Šå‰ç¼€å»ºè®®ï¼‰</li>
<li>ç²¾ç¡®çš„çŸ­è¯­æœç´¢</li>
<li>åœ¨è®¸å¤šè¯­è¨€ä¸­åŸºäºè¯å¹²åˆ†æçš„æŸ¥è¯¢æ‰©å±•</li>
<li>æ”¯æŒç”¨äºæŸ¥è¯¢æ‰©å±•å’Œè¯„åˆ†çš„è‡ªå®šä¹‰å‡½æ•°</li>
<li>å°†æœç´¢é™åˆ¶åˆ°ç‰¹å®šçš„æ–‡æ¡£å­—æ®µ</li>
<li>æ•°å­—è¿‡æ»¤å™¨å’ŒèŒƒå›´</li>
<li>ä½¿ç”¨ Redis è‡ªå·±çš„åœ°ç†å‘½ä»¤è¿›è¡Œåœ°ç†è¿‡æ»¤</li>
<li>Unicode æ”¯æŒï¼ˆéœ€è¦ UTF-8 å­—ç¬¦é›†ï¼‰</li>
<li>æ£€ç´¢å®Œæ•´çš„æ–‡æ¡£å†…å®¹æˆ–åªæ˜¯ ID çš„æ£€ç´¢</li>
<li>æ”¯æŒæ–‡æ¡£åˆ é™¤å’Œæ›´æ–°ä¸ç´¢å¼•åƒåœ¾æ”¶é›†</li>
<li>æ”¯æŒéƒ¨åˆ†æ›´æ–°å’Œæ¡ä»¶æ–‡æ¡£æ›´æ–°</li>
</ul>
<h3 id="å®‰è£…">å®‰è£…</h3>
<p>å’Œå‰é¢è®²åˆ°å¸ƒéš†è¿‡æ»¤å™¨çš„å¼•å…¥æ–¹å¼ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ RediSearch å®˜æ–¹æ¨èçš„ Docker æ–¹å¼æ¥å®‰è£…å¹¶å¯åŠ¨ RediSearch åŠŸèƒ½ï¼Œæ“ä½œå‘½ä»¤å¦‚ä¸‹ï¼š</p>
<pre tabindex="0"><code>docker run -p 6379:6379 redislabs/redisearch:latest

</code></pre><p>å®‰è£…å¹¶å¯åŠ¨æˆåŠŸï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="http://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/Redis%20%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E6%88%98/assets/29f9b8e0-7b3b-11ea-8940-6df1558f5aa2" alt="RediSearchå®‰è£…æˆåŠŸ.png"></p>
<p>å®‰è£…å®Œæˆä¹‹å<strong>ä½¿ç”¨ redis-cli æ¥æ£€æŸ¥ RediSearch æ¨¡å—æ˜¯å¦åŠ è½½æˆåŠŸ</strong>ï¼Œä½¿ç”¨ Docker å¯åŠ¨ redis-cliï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p>
<pre tabindex="0"><code>docker exec -it myredis redis-cli

</code></pre><p>å…¶ä¸­â€œmyredisâ€ä¸º Redis æœåŠ¡å™¨çš„åç§°ï¼Œæ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<pre tabindex="0"><code>127.0.0.1:6379&gt; module list
1) 1) &quot;name&quot;
   2) &quot;ft&quot;
   3) &quot;ver&quot;
   4) (integer) 10610

</code></pre><p>è¿”å›æ•°ç»„å­˜åœ¨â€œftâ€ï¼Œè¡¨æ˜ RediSearch æ¨¡å—å·²ç»æˆåŠŸåŠ è½½ã€‚</p>
<h4 id="æºç æ–¹å¼å®‰è£…"><strong>æºç æ–¹å¼å®‰è£…</strong></h4>
<p>å¦‚æœä¸æƒ³ä½¿ç”¨ Dockerï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨æºç çš„æ–¹å¼è¿›è¡Œå®‰è£…ï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<pre tabindex="0"><code>git clone https://github.com/RedisLabsModules/RediSearch.git
cd RediSearch # è¿›å…¥æ¨¡å—ç›®å½•
make all

</code></pre><p>å®‰è£…å®Œæˆä¹‹åï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å¯åŠ¨ Redis å¹¶åŠ è½½ RediSearch æ¨¡å—ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p>
<pre tabindex="0"><code>src/redis-server redis.conf --loadmodule ../RediSearch/src/redisearch.so

</code></pre><h3 id="ä½¿ç”¨">ä½¿ç”¨</h3>
<p>æˆ‘ä»¬å…ˆä½¿ç”¨ redis-cli æ¥å¯¹ RediSearch è¿›è¡Œç›¸å…³çš„æ“ä½œã€‚</p>
<h4 id="åˆ›å»ºç´¢å¼•å’Œå­—æ®µ"><strong>åˆ›å»ºç´¢å¼•å’Œå­—æ®µ</strong></h4>
<pre tabindex="0"><code>127.0.0.1:6379&gt; ft.create myidx schema title text weight 5.0 desc text
OK

</code></pre><p>å…¶ä¸­â€œmyidxâ€ä¸ºç´¢å¼•çš„IDï¼Œæ­¤ç´¢å¼•åŒ…å«äº†ä¸¤ä¸ªå­—æ®µâ€œtitleâ€å’Œâ€œdescâ€ï¼Œâ€œweightâ€ä¸ºæƒé‡ï¼Œé»˜è®¤å€¼ä¸º 1.0ã€‚</p>
<h4 id="å°†å†…å®¹æ·»åŠ åˆ°ç´¢å¼•"><strong>å°†å†…å®¹æ·»åŠ åˆ°ç´¢å¼•</strong></h4>
<pre tabindex="0"><code>127.0.0.1:6379&gt; ft.add myidx doc1 1.0 fields title &quot;He urged her to study English&quot; desc &quot;good idea&quot;
OK

</code></pre><p>å…¶ä¸­â€œdoc1â€ä¸ºæ–‡æ¡£ IDï¼ˆdocidï¼‰ï¼Œâ€œ1.0â€ä¸ºè¯„åˆ†ï¼ˆscoreï¼‰ã€‚</p>
<h4 id="æ ¹æ®å…³é”®æŸ¥è¯¢"><strong>æ ¹æ®å…³é”®æŸ¥è¯¢</strong></h4>
<pre tabindex="0"><code>127.0.0.1:6379&gt; ft.search myidx &quot;english&quot; limit 0 10
1) (integer) 1
2) &quot;doc1&quot;
3) 1) &quot;title&quot;
   2) &quot;He urged her to study English&quot;
   3) &quot;desc&quot;
   4) &quot;good idea&quot;

</code></pre><p>å¯ä»¥çœ‹å‡ºæˆ‘ä»¬ä½¿ç”¨ title å­—æ®µä¸­çš„å…³é”®å­—â€œenglishâ€æŸ¥è¯¢å‡ºäº†ä¸€æ¡æ»¡è¶³æŸ¥è¯¢æ¡ä»¶çš„æ•°æ®ã€‚</p>
<h4 id="ä¸­æ–‡æœç´¢"><strong>ä¸­æ–‡æœç´¢</strong></h4>
<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦å…ˆç»™ç´¢å¼•ä¸­ï¼Œæ·»åŠ ä¸€æ¡ä¸­æ–‡æ•°æ®ï¼Œæ‰§è¡Œå‘½ä»¤å¦‚ä¸‹ï¼š</p>
<pre tabindex="0"><code>127.0.0.1:6379&gt; ft.add myidx doc2 1.0 language &quot;chinese&quot; fields title &quot;Java 14 å‘å¸ƒäº†ï¼æ–°åŠŸèƒ½é€Ÿè§ˆ&quot; desc &quot;Java 14 åœ¨ 2020.3.17 æ—¥å‘å¸ƒæ­£å¼ç‰ˆäº†ï¼Œä½†ç°åœ¨å¾ˆå¤šå…¬å¸è¿˜åœ¨ä½¿ç”¨ Java 7 æˆ– Java 8&quot;
OK

</code></pre><p>æ³¨æ„ï¼š<strong>è¿™é‡Œå¿…é¡»è¦è®¾ç½®è¯­è¨€ç¼–ç ä¸ºä¸­æ–‡ï¼Œä¹Ÿå°±æ˜¯â€œlanguage &ldquo;chinese&rdquo;â€</strong>ï¼Œé»˜è®¤æ˜¯è‹±æ–‡ç¼–ç ï¼Œå¦‚æœä¸è®¾ç½®åˆ™æ— æ³•æ”¯æŒä¸­æ–‡æŸ¥è¯¢ï¼ˆæ— æ³•æŸ¥å‡ºç»“æœï¼‰ã€‚</p>
<p>æˆ‘ä»¬ä½¿ç”¨ä¹‹å‰çš„æŸ¥è¯¢æ–¹å¼ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p>
<pre tabindex="0"><code>127.0.0.1:6379&gt; ft.search myidx &quot;æ­£å¼ç‰ˆ&quot;
1) (integer) 0

</code></pre><p>æˆ‘ä»¬å‘ç°å¹¶æ²¡æœ‰æŸ¥åˆ°ä»»ä½•ä¿¡æ¯ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬æ²¡æœ‰æŒ‡å®šæœç´¢çš„è¯­è¨€ï¼Œä¸ä½†ä¿å­˜æ—¶å€™è¦æŒ‡å®šç¼–ç ï¼ŒæŸ¥è¯¢æ—¶ä¹Ÿéœ€è¦æŒ‡å®šï¼ŒæŸ¥è¯¢å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<pre tabindex="0"><code>127.0.0.1:6379&gt; ft.search myidx &quot;å‘å¸ƒäº†&quot; language &quot;chinese&quot;
1) (integer) 1
2) &quot;doc2&quot;
3) 1) &quot;desc&quot;
   2) &quot;Java 14 \xe5\x9c\xa8 2020.3.17 \xe6\x97\xa5\xe5\x8f\x91\xe5\xb8\x83\xe6\xad\xa3\xe5\xbc\x8f\xe7\x89\x88\xe4\xba\x86\xef\xbc\x8c\xe4\xbd\x86\xe7\x8e\xb0\xe5\x9c\xa8\xe5\xbe\x88\xe5\xa4\x9a\xe5\x85\xac\xe5\x8f\xb8\xe8\xbf\x98\xe5\x9c\xa8\xe4\xbd\xbf\xe7\x94\xa8 Java 7 \xe6\x88\x96 Java 8&quot;
   3) &quot;title&quot;
   4) &quot;Java 14 \xe5\x8f\x91\xe5\xb8\x83\xe4\xba\x86\xef\xbc\x81\xe6\x96\xb0\xe5\x8a\x9f\xe8\x83\xbd\xe9\x80\x9f\xe8\xa7\x88&quot;

</code></pre><p>ä»ç»“æœå¯ä»¥çœ‹å‡ºä¸­æ–‡ä¿¡æ¯å·²ç»è¢«é¡ºåˆ©çš„æŸ¥è¯¢å‡ºæ¥äº†ã€‚</p>
<h4 id="åˆ é™¤ç´¢å¼•çš„æ•°æ®"><strong>åˆ é™¤ç´¢å¼•çš„æ•°æ®</strong></h4>
<pre tabindex="0"><code>127.0.0.1:6379&gt; ft.del myidx doc1
(integer) 1

</code></pre><p>æˆ‘ä»¬ä½¿ç”¨ç´¢å¼•åŠ æ–‡æ¡£ ID å°±å¯ä»¥å®ç°åˆ é™¤æ•°æ®çš„åŠŸèƒ½ã€‚</p>
<h4 id="åˆ é™¤ç´¢å¼•"><strong>åˆ é™¤ç´¢å¼•</strong></h4>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨â€œft.dropâ€å…³é”®å­—åˆ é™¤æ•´ä¸ªç´¢å¼•ï¼Œæ‰§è¡Œå‘½ä»¤å¦‚ä¸‹ï¼š</p>
<pre tabindex="0"><code>127.0.0.1:6379&gt; ft.drop myidx
OK

</code></pre><h4 id="æŸ¥è¯¢ç´¢å¼•è¯¦ç»†ä¿¡æ¯"><strong>æŸ¥è¯¢ç´¢å¼•è¯¦ç»†ä¿¡æ¯</strong></h4>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨â€œft.infoâ€å…³é”®æŸ¥è¯¢ç´¢å¼•ç›¸å…³ä¿¡æ¯ï¼Œæ‰§è¡Œå‘½ä»¤å¦‚ä¸‹ï¼š</p>
<pre tabindex="0"><code>127.0.0.1:6379&gt; ft.info myidx
 1) index_name
 2) myidx
 3) index_options
 4) (empty list or set)
 5) fields
 6) 1) 1) title
       2) type
       3) TEXT
       4) WEIGHT
       5) &quot;5&quot;
    2) 1) desc
       2) type
       3) TEXT
       4) WEIGHT
       5) &quot;1&quot;
 7) num_docs
 8) &quot;2&quot;
 9) max_doc_id
10) &quot;2&quot;
11) num_terms
12) &quot;9&quot;
13) num_records
14) &quot;18&quot;
15) inverted_sz_mb
16) &quot;0.000102996826171875&quot;
17) total_inverted_index_blocks
18) &quot;29&quot;
19) offset_vectors_sz_mb
20) &quot;1.71661376953125e-05&quot;
21) doc_table_size_mb
22) &quot;0.000164031982421875&quot;
23) sortable_values_size_mb
24) &quot;0&quot;
25) key_table_size_mb
26) &quot;8.0108642578125e-05&quot;
27) records_per_doc_avg
28) &quot;9&quot;
29) bytes_per_record_avg
30) &quot;6&quot;
31) offsets_per_term_avg
32) &quot;1&quot;
33) offset_bits_per_record_avg
34) &quot;8&quot;
35) gc_stats
36)  1) bytes_collected
     2) &quot;0&quot;
     3) total_ms_run
     4) &quot;16&quot;
     5) total_cycles
     6) &quot;14&quot;
     7) avarage_cycle_time_ms
     8) &quot;1.1428571428571428&quot;
     9) last_run_time_ms
    10) &quot;2&quot;
    11) gc_numeric_trees_missed
    12) &quot;0&quot;
    13) gc_blocks_denied
    14) &quot;0&quot;
37) cursor_stats
38) 1) global_idle
    2) (integer) 0
    3) global_total
    4) (integer) 0
    5) index_capacity
    6) (integer) 128
    7) index_total
    8) (integer) 0

</code></pre><p>å…¶ä¸­â€œnum_docsâ€è¡¨ç¤ºå­˜å‚¨çš„æ•°æ®æ•°é‡ã€‚</p>
<h3 id="ä»£ç å®æˆ˜">ä»£ç å®æˆ˜</h3>
<p>RediSearch æ”¯æŒçš„å®¢æˆ·ç«¯æœ‰ä»¥ä¸‹è¿™äº›ã€‚</p>
<p><img src="http://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/Redis%20%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E6%88%98/assets/4fb832a0-7b3b-11ea-b348-9df247d9e896" alt="image.png"></p>
<p>æœ¬æ–‡æˆ‘ä»¬ä½¿ç”¨ JRediSearch æ¥å®ç°å…¨æ–‡æœç´¢çš„åŠŸèƒ½ï¼Œé¦–å…ˆåœ¨ pom.xml æ·»åŠ  JRediSearch å¼•ç”¨ï¼š</p>
<pre tabindex="0"><code>&lt;!-- https://mvnrepository.com/artifact/com.redislabs/jredisearch --&gt;
&lt;dependency&gt;
  &lt;groupId&gt;com.redislabs&lt;/groupId&gt;
  &lt;artifactId&gt;jredisearch&lt;/artifactId&gt;
  &lt;version&gt;1.3.0&lt;/version&gt;
&lt;/dependency&gt;

</code></pre><p>å®Œæ•´çš„æ“ä½œä»£ç å¦‚ä¸‹ï¼š</p>
<pre tabindex="0"><code>import io.redisearch.client.AddOptions;
import io.redisearch.client.Client;
import io.redisearch.Document;
import io.redisearch.SearchResult;
import io.redisearch.Query;
import io.redisearch.Schema;

public class RediSearchExample {
    public static void main(String[] args) {
        // è¿æ¥ Redis æœåŠ¡å™¨å’ŒæŒ‡å®šç´¢å¼•
        Client client = new Client(&quot;myidx&quot;, &quot;127.0.0.1&quot;, 6379);
        // å®šä¹‰ç´¢å¼•
        Schema schema = new Schema().addTextField(&quot;title&quot;,
                5.0).addTextField(&quot;desc&quot;, 1.0);
        // åˆ é™¤ç´¢å¼•
        client.dropIndex();
        // åˆ›å»ºç´¢å¼•
        client.createIndex(schema, Client.IndexOptions.Default());
        // è®¾ç½®ä¸­æ–‡ç¼–ç 
        AddOptions addOptions = new AddOptions();
        addOptions.setLanguage(&quot;chinese&quot;);
        // æ·»åŠ æ•°æ®
        Document document = new Document(&quot;doc1&quot;);
        document.set(&quot;title&quot;, &quot;å¤©æ°”é¢„æŠ¥&quot;);
        document.set(&quot;desc&quot;, &quot;ä»Šå¤©çš„å¤©æ°”å¾ˆå¥½ï¼Œæ˜¯ä¸ªé˜³å…‰æ˜åªšçš„å¤§æ™´å¤©ï¼Œæœ‰è“è“çš„å¤©ç©ºå’Œç™½ç™½çš„äº‘æœµã€‚&quot;);
        // å‘ç´¢å¼•ä¸­æ·»åŠ æ–‡æ¡£
        client.addDocument(document,addOptions);
        // æŸ¥è¯¢
        Query q = new Query(&quot;å¤©æ°”&quot;) // è®¾ç½®æŸ¥è¯¢æ¡ä»¶
                .setLanguage(&quot;chinese&quot;) // è®¾ç½®ä¸ºä¸­æ–‡ç¼–ç 
                .limit(0,5);
        // è¿”å›æŸ¥è¯¢ç»“æœ
        SearchResult res = client.search(q);
        // è¾“å‡ºæŸ¥è¯¢ç»“æœ
        System.out.println(res.docs);
    }
}

</code></pre><p>ä»¥ä¸Šç¨‹åºæ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<pre tabindex="0"><code>[{&quot;id&quot;:&quot;doc1&quot;,&quot;score&quot;:1.0,&quot;properties&quot;:{&quot;title&quot;:&quot;å¤©æ°”é¢„æŠ¥&quot;,&quot;desc&quot;:&quot;ä»Šå¤©çš„å¤©æ°”å¾ˆå¥½ï¼Œæ˜¯ä¸ªé˜³å…‰æ˜åªšçš„å¤§æ™´å¤©ï¼Œæœ‰è“è“çš„å¤©ç©ºå’Œç™½ç™½çš„äº‘æœµã€‚&quot;}}]

</code></pre><p>å¯ä»¥çœ‹å‡ºæ·»åŠ çš„ä¸­æ–‡æ•°æ®ï¼Œè¢«æ­£ç¡®çš„æŸ¥è¯¢å‡ºæ¥äº†ã€‚</p>
<h3 id="å°ç»“">å°ç»“</h3>
<p>æœ¬æ–‡æˆ‘ä»¬ä½¿ç”¨ Docker å’Œ æºç ç¼–è¯‘çš„æ–¹å¼æˆåŠŸçš„å¯åŠ¨äº† RediSearch åŠŸèƒ½ï¼Œè¦ä½¿ç”¨ RediSearch çš„å…¨æ–‡æœç´¢åŠŸèƒ½ï¼Œå¿…é¡»å…ˆè¦åˆ›å»ºä¸€ä¸ªç´¢å¼•ï¼Œç„¶åå†ç´¢å¼•ä¸­æ·»åŠ æ•°æ®ï¼Œå†ä½¿ç”¨ ft.search å‘½ä»¤è¿›è¡Œå…¨æ–‡æœç´¢ï¼Œå¦‚æœè¦æŸ¥è¯¢ä¸­æ–‡å†…å®¹çš„è¯ï¼Œéœ€è¦åœ¨æ·»åŠ æ•°æ®æ—¶è®¾ç½®ä¸­æ–‡ç¼–ç ï¼Œå¹¶ä¸”åœ¨æŸ¥è¯¢æ—¶ä¹Ÿè¦è®¾ç½®ä¸­æ–‡ç¼–ç ï¼ŒæŒ‡å®šâ€œlanguage &ldquo;chinese&rdquo;â€ã€‚</p>
<p><strong>å‚è€ƒ &amp; é¸£è°¢</strong></p>
<p>å®˜ç½‘åœ°å€ï¼š</p>
<blockquote>
<p><a href="http://redisearch.io/">http://redisearch.io</a></p>
</blockquote>
<p>é¡¹ç›®åœ°å€ï¼š</p>
<blockquote>
<p><a href="https://github.com/RediSearch/RediSearch">https://github.com/RediSearch/RediSearch</a></p>
</blockquote>

        </div>
    </article>
</div>

    </main>
    <footer>
        <div id="pagination">
            
<div class="paginator">
    <div class="prev">
        
        <a href="/documents/columns/redis/redis-%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E6%88%98/33-%E5%AE%9E%E6%88%98redis-%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95.md/"><span></span></a>
    </div>
    <div class="next">
        
        <a href="/documents/columns/redis/redis-%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E6%88%98/31-%E5%AE%9E%E6%88%98%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E6%A1%88%E4%BE%8B.md/"><span></span></a>
    </div>
</div>

        </div>
        <div class="toggler" onclick="toggleLight(this);">ğŸ’¡</div>
        <div id="copyright" style="display: none;">
    
    
    <p>&copy; 28280 <a href="/"></a>, powered by Hugo and Qiao</p>
</div>
    </footer>
    
<script>
    function toggleLight() {
        document.getElementById('page').classList.toggle('night');
    }
</script>
</body>

</html>