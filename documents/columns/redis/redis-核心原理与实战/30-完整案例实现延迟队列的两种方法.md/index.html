<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
<meta name="X-UA-Compatible" , content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<link rel="icon" type="image/png" href="/%20/favicon.png">

<title> | Yipsen Ye</title>
<meta name="description" content="å»¶è¿Ÿé˜Ÿåˆ—æ˜¯æŒ‡æŠŠå½“å‰è¦åšçš„äº‹æƒ…ï¼Œå¾€åæ¨è¿Ÿä¸€æ®µæ—¶é—´å†åšã€‚
å»¶è¿Ÿé˜Ÿåˆ—åœ¨å®é™…å·¥ä½œä¸­å’Œé¢è¯•ä¸­éƒ½æ¯”è¾ƒå¸¸è§ï¼Œå®ƒçš„å®ç°æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œç„¶è€Œæ¯ç§å®ç°æ–¹å¼ä¹Ÿéƒ½æœ‰å®ƒçš„ä¼˜ç¼ºç‚¹ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹ã€‚
å»¶è¿Ÿé˜Ÿåˆ—çš„ä½¿ç”¨åœºæ™¯ å»¶è¿Ÿé˜Ÿåˆ—çš„å¸¸è§ä½¿ç”¨åœºæ™¯æœ‰ä»¥ä¸‹å‡ ç§ï¼š
 è¶…è¿‡ 30 åˆ†é’Ÿæœªæ”¯ä»˜çš„è®¢å•ï¼Œå°†ä¼šè¢«å–æ¶ˆ å¤–å–å•†å®¶è¶…è¿‡ 5 åˆ†é’Ÿæœªæ¥å•çš„è®¢å•ï¼Œå°†ä¼šè¢«å–æ¶ˆ åœ¨å¹³å°æ³¨å†Œä½† 30 å¤©å†…æœªç™»å½•çš„ç”¨æˆ·ï¼Œå‘çŸ­ä¿¡æé†’  ç­‰ç±»ä¼¼çš„åº”ç”¨åœºæ™¯ï¼Œéƒ½å¯ä»¥ä½¿ç”¨å»¶è¿Ÿé˜Ÿåˆ—æ¥å®ç°ã€‚
å¸¸è§å®ç°æ–¹å¼ Redis å»¶è¿Ÿé˜Ÿåˆ—å®ç°çš„æ€è·¯ã€ä¼˜ç‚¹ï¼šç›®å‰å¸‚é¢ä¸Šå»¶è¿Ÿé˜Ÿåˆ—çš„å®ç°æ–¹å¼åŸºæœ¬åˆ†ä¸ºä¸‰ç±»ï¼Œç¬¬ä¸€ç±»æ˜¯é€šè¿‡ç¨‹åºçš„æ–¹å¼å®ç°ï¼Œä¾‹å¦‚ JDK è‡ªå¸¦çš„å»¶è¿Ÿé˜Ÿåˆ— DelayQueueï¼Œç¬¬äºŒç±»æ˜¯é€šè¿‡ MQ æ¡†æ¶æ¥å®ç°ï¼Œä¾‹å¦‚ RabbitMQ å¯ä»¥é€šè¿‡ rabbitmq-delayed-message-exchange æ’ä»¶æ¥å®ç°å»¶è¿Ÿé˜Ÿåˆ—ï¼Œç¬¬ä¸‰ç±»å°±æ˜¯é€šè¿‡ Redis çš„æ–¹å¼æ¥å®ç°å»¶è¿Ÿé˜Ÿåˆ—ã€‚
ç¨‹åºå®ç°æ–¹å¼ JDK è‡ªå¸¦çš„ DelayQueue å®ç°å»¶è¿Ÿé˜Ÿåˆ—ï¼Œä»£ç å¦‚ä¸‹ï¼š
public class DelayTest { public static void main(String[] args) throws InterruptedException { DelayQueue delayQueue = new DelayQueue(); delayQueue.put(new DelayElement(1000)); delayQueue.put(new DelayElement(3000)); delayQueue.put(new DelayElement(5000)); System.out.println(&amp;quot;å¼€å§‹æ—¶é—´ï¼š&amp;quot; &#43; DateFormat.getDateTimeInstance().format(new Date())); while (!delayQueue.isEmpty()){ System.out.println(delayQueue.take()); } System.out.println(&amp;quot;ç»“æŸæ—¶é—´ï¼š&amp;quot; &#43; DateFormat.getDateTimeInstance().format(new Date())); } static class DelayElement implements Delayed { // å»¶è¿Ÿæˆªæ­¢æ—¶é—´ï¼ˆå•é¢ï¼šæ¯«ç§’ï¼‰ long delayTime = System.">
<meta name="author" content="">

<link rel="stylesheet" type="text/css" href="/styles/main.css">

</head>

<body id="page">
    <header>
        <div class="logo-link" style="width: 60px; color: #CA6924;">
    <a href="http://yipsen.github.io/">
        <img style="margin-bottom: -1rem;" src="/images/deer.svg" alt="logo">
        <span style="font-size: 0.5rem; color: #CA6924;">Yipsen Ye</span>
    </a>
</div>
<nav class="navbar justify-content-end">
    <ul class="nav-list">
        
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/posts/">æœ­è®°</a>
        </li>
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/collections/">é™„è¡¨</a>
        </li>
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/about/">å…³äº</a>
        </li>
        
    </ul>
</nav>
    </header>
    <main id="content">
        
<div class="container"><article class="post-block">
        <h1 class="post-title"></h1>
        <div class="post-info">
            <div> 
                <span class="post-date">ğŸ“…&nbsp;0001-01-01 00:00:00</span></div></div>
        <div class="post-content">
            <p>å»¶è¿Ÿé˜Ÿåˆ—æ˜¯æŒ‡æŠŠå½“å‰è¦åšçš„äº‹æƒ…ï¼Œå¾€åæ¨è¿Ÿä¸€æ®µæ—¶é—´å†åšã€‚</p>
<p>å»¶è¿Ÿé˜Ÿåˆ—åœ¨å®é™…å·¥ä½œä¸­å’Œé¢è¯•ä¸­éƒ½æ¯”è¾ƒå¸¸è§ï¼Œå®ƒçš„å®ç°æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œç„¶è€Œæ¯ç§å®ç°æ–¹å¼ä¹Ÿéƒ½æœ‰å®ƒçš„ä¼˜ç¼ºç‚¹ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹ã€‚</p>
<h3 id="å»¶è¿Ÿé˜Ÿåˆ—çš„ä½¿ç”¨åœºæ™¯">å»¶è¿Ÿé˜Ÿåˆ—çš„ä½¿ç”¨åœºæ™¯</h3>
<p>å»¶è¿Ÿé˜Ÿåˆ—çš„å¸¸è§ä½¿ç”¨åœºæ™¯æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p>
<ol>
<li>è¶…è¿‡ 30 åˆ†é’Ÿæœªæ”¯ä»˜çš„è®¢å•ï¼Œå°†ä¼šè¢«å–æ¶ˆ</li>
<li>å¤–å–å•†å®¶è¶…è¿‡ 5 åˆ†é’Ÿæœªæ¥å•çš„è®¢å•ï¼Œå°†ä¼šè¢«å–æ¶ˆ</li>
<li>åœ¨å¹³å°æ³¨å†Œä½† 30 å¤©å†…æœªç™»å½•çš„ç”¨æˆ·ï¼Œå‘çŸ­ä¿¡æé†’</li>
</ol>
<p>ç­‰ç±»ä¼¼çš„åº”ç”¨åœºæ™¯ï¼Œéƒ½å¯ä»¥ä½¿ç”¨å»¶è¿Ÿé˜Ÿåˆ—æ¥å®ç°ã€‚</p>
<h3 id="å¸¸è§å®ç°æ–¹å¼">å¸¸è§å®ç°æ–¹å¼</h3>
<p>Redis å»¶è¿Ÿé˜Ÿåˆ—å®ç°çš„æ€è·¯ã€ä¼˜ç‚¹ï¼šç›®å‰å¸‚é¢ä¸Šå»¶è¿Ÿé˜Ÿåˆ—çš„å®ç°æ–¹å¼åŸºæœ¬åˆ†ä¸ºä¸‰ç±»ï¼Œç¬¬ä¸€ç±»æ˜¯é€šè¿‡ç¨‹åºçš„æ–¹å¼å®ç°ï¼Œä¾‹å¦‚ JDK è‡ªå¸¦çš„å»¶è¿Ÿé˜Ÿåˆ— DelayQueueï¼Œç¬¬äºŒç±»æ˜¯é€šè¿‡ MQ æ¡†æ¶æ¥å®ç°ï¼Œä¾‹å¦‚ RabbitMQ å¯ä»¥é€šè¿‡ rabbitmq-delayed-message-exchange æ’ä»¶æ¥å®ç°å»¶è¿Ÿé˜Ÿåˆ—ï¼Œç¬¬ä¸‰ç±»å°±æ˜¯é€šè¿‡ Redis çš„æ–¹å¼æ¥å®ç°å»¶è¿Ÿé˜Ÿåˆ—ã€‚</p>
<h4 id="ç¨‹åºå®ç°æ–¹å¼"><strong>ç¨‹åºå®ç°æ–¹å¼</strong></h4>
<p>JDK è‡ªå¸¦çš„ DelayQueue å®ç°å»¶è¿Ÿé˜Ÿåˆ—ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre tabindex="0"><code>public class DelayTest {
    public static void main(String[] args) throws InterruptedException {
        DelayQueue delayQueue = new DelayQueue();
        delayQueue.put(new DelayElement(1000));
        delayQueue.put(new DelayElement(3000));
        delayQueue.put(new DelayElement(5000));
        System.out.println(&quot;å¼€å§‹æ—¶é—´ï¼š&quot; +  DateFormat.getDateTimeInstance().format(new Date()));
        while (!delayQueue.isEmpty()){
            System.out.println(delayQueue.take());
        }
        System.out.println(&quot;ç»“æŸæ—¶é—´ï¼š&quot; +  DateFormat.getDateTimeInstance().format(new Date()));
    }

    static class DelayElement implements Delayed {
        // å»¶è¿Ÿæˆªæ­¢æ—¶é—´ï¼ˆå•é¢ï¼šæ¯«ç§’ï¼‰
        long delayTime = System.currentTimeMillis();
        public DelayElement(long delayTime) {
            this.delayTime = (this.delayTime + delayTime);
        }
        @Override
        // è·å–å‰©ä½™æ—¶é—´
        public long getDelay(TimeUnit unit) {
            return unit.convert(delayTime - System.currentTimeMillis(), TimeUnit.MILLISECONDS);
        }
        @Override
        // é˜Ÿåˆ—é‡Œå…ƒç´ çš„æ’åºä¾æ®
        public int compareTo(Delayed o) {
            if (this.getDelay(TimeUnit.MILLISECONDS) &gt; o.getDelay(TimeUnit.MILLISECONDS)) {
                return 1;
            } else if (this.getDelay(TimeUnit.MILLISECONDS) &lt; o.getDelay(TimeUnit.MILLISECONDS)) {
                return -1;
            } else {
                return 0;
            }
        }
        @Override
        public String toString() {
            return DateFormat.getDateTimeInstance().format(new Date(delayTime));
        }
    }
}

</code></pre><p>ç¨‹åºæ‰§è¡Œç»“æœï¼š</p>
<pre tabindex="0"><code>å¼€å§‹æ—¶é—´ï¼š2019-6-13 20:40:38
2019-6-13 20:40:39
2019-6-13 20:40:41
2019-6-13 20:40:43
ç»“æŸæ—¶é—´ï¼š2019-6-13 20:40:43

</code></pre><p><strong>ä¼˜ç‚¹</strong></p>
<ol>
<li>å¼€å‘æ¯”è¾ƒæ–¹ä¾¿ï¼Œå¯ä»¥ç›´æ¥åœ¨ä»£ç ä¸­ä½¿ç”¨</li>
<li>ä»£ç å®ç°æ¯”è¾ƒç®€å•</li>
</ol>
<p><strong>ç¼ºç‚¹</strong></p>
<ol>
<li>ä¸æ”¯æŒæŒä¹…åŒ–ä¿å­˜</li>
<li>ä¸æ”¯æŒåˆ†å¸ƒå¼ç³»ç»Ÿ</li>
</ol>
<h4 id="mq-å®ç°æ–¹å¼"><strong>MQ å®ç°æ–¹å¼</strong></h4>
<p>RabbitMQ æœ¬èº«å¹¶ä¸æ”¯æŒå»¶è¿Ÿé˜Ÿåˆ—ï¼Œä½†å¯ä»¥é€šè¿‡æ·»åŠ æ’ä»¶ rabbitmq-delayed-message-exchange æ¥å®ç°å»¶è¿Ÿé˜Ÿåˆ—ã€‚</p>
<p><strong>ä¼˜ç‚¹</strong></p>
<ol>
<li>æ”¯æŒåˆ†å¸ƒå¼</li>
<li>æ”¯æŒæŒä¹…åŒ–</li>
</ol>
<p><strong>ç¼ºç‚¹</strong></p>
<p>æ¡†æ¶æ¯”è¾ƒé‡ï¼Œéœ€è¦æ­å»ºå’Œé…ç½® MQã€‚</p>
<h4 id="redis-å®ç°æ–¹å¼"><strong>Redis å®ç°æ–¹å¼</strong></h4>
<p>Redis æ˜¯é€šè¿‡æœ‰åºé›†åˆï¼ˆZSetï¼‰çš„æ–¹å¼æ¥å®ç°å»¶è¿Ÿæ¶ˆæ¯é˜Ÿåˆ—çš„ï¼ŒZSet æœ‰ä¸€ä¸ª Score å±æ€§å¯ä»¥ç”¨æ¥å­˜å‚¨å»¶è¿Ÿæ‰§è¡Œçš„æ—¶é—´ã€‚</p>
<p><strong>ä¼˜ç‚¹</strong></p>
<ol>
<li>çµæ´»æ–¹ä¾¿ï¼ŒRedis æ˜¯äº’è”ç½‘å…¬å¸çš„æ ‡é…ï¼Œæ— åºé¢å¤–æ­å»ºç›¸å…³ç¯å¢ƒï¼›</li>
<li>å¯è¿›è¡Œæ¶ˆæ¯æŒä¹…åŒ–ï¼Œå¤§å¤§æé«˜äº†å»¶è¿Ÿé˜Ÿåˆ—çš„å¯é æ€§ï¼›</li>
<li>åˆ†å¸ƒå¼æ”¯æŒï¼Œä¸åƒ JDK è‡ªèº«çš„ DelayQueueï¼›</li>
<li>é«˜å¯ç”¨æ€§ï¼Œåˆ©ç”¨ Redis æœ¬èº«é«˜å¯ç”¨æ–¹æ¡ˆï¼Œå¢åŠ äº†ç³»ç»Ÿå¥å£®æ€§ã€‚</li>
</ol>
<p><strong>ç¼ºç‚¹</strong></p>
<p>éœ€è¦ä½¿ç”¨æ— é™å¾ªç¯çš„æ–¹å¼æ¥æ‰§è¡Œä»»åŠ¡æ£€æŸ¥ï¼Œä¼šæ¶ˆè€—å°‘é‡çš„ç³»ç»Ÿèµ„æºã€‚</p>
<p>ç»“åˆä»¥ä¸Šä¼˜ç¼ºç‚¹ï¼Œæˆ‘ä»¬å†³å®šä½¿ç”¨ Redis æ¥å®ç°å»¶è¿Ÿé˜Ÿåˆ—ï¼Œå…·ä½“å®ç°ä»£ç å¦‚ä¸‹ã€‚</p>
<h3 id="ä»£ç å®æˆ˜">ä»£ç å®æˆ˜</h3>
<p>æœ¬æ–‡æˆ‘ä»¬ä½¿ç”¨ Java è¯­è¨€æ¥å®ç°å»¶è¿Ÿé˜Ÿåˆ—ï¼Œå»¶è¿Ÿé˜Ÿåˆ—çš„å®ç°æœ‰ä¸¤ç§æ–¹å¼ï¼šç¬¬ä¸€ç§æ˜¯åˆ©ç”¨ zrangebyscore æŸ¥è¯¢ç¬¦åˆæ¡ä»¶çš„æ‰€æœ‰å¾…å¤„ç†ä»»åŠ¡ï¼Œå¾ªç¯æ‰§è¡Œé˜Ÿåˆ—ä»»åŠ¡ã€‚ç¬¬äºŒç§å®ç°æ–¹å¼æ˜¯æ¯æ¬¡æŸ¥è¯¢æœ€æ—©çš„ä¸€æ¡æ¶ˆæ¯ï¼Œåˆ¤æ–­è¿™æ¡ä¿¡æ¯çš„æ‰§è¡Œæ—¶é—´æ˜¯å¦å°äºç­‰äºæ­¤åˆ»çš„æ—¶é—´ï¼Œå¦‚æœæ˜¯åˆ™æ‰§è¡Œæ­¤ä»»åŠ¡ï¼Œå¦åˆ™ç»§ç»­å¾ªç¯æ£€æµ‹ã€‚</p>
<h4 id="æ–¹å¼ä¸€"><strong>æ–¹å¼ä¸€</strong></h4>
<p>ä¸€æ¬¡æ€§æŸ¥è¯¢æ‰€æœ‰æ»¡è¶³æ¡ä»¶çš„ä»»åŠ¡ï¼Œå¾ªç¯æ‰§è¡Œï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre tabindex="0"><code>import redis.clients.jedis.Jedis;
import utils.JedisUtils;

import java.time.Instant;
import java.util.Set;

/**
 * å»¶è¿Ÿé˜Ÿåˆ—
 */
public class DelayQueueExample {
    // zset key
    private static final String _KEY = &quot;myDelayQueue&quot;;

    public static void main(String[] args) throws InterruptedException {
        Jedis jedis = JedisUtils.getJedis();
        // å»¶è¿Ÿ 30s æ‰§è¡Œï¼ˆ30s åçš„æ—¶é—´ï¼‰
        long delayTime = Instant.now().plusSeconds(30).getEpochSecond();
        jedis.zadd(_KEY, delayTime, &quot;order_1&quot;);
        // ç»§ç»­æ·»åŠ æµ‹è¯•æ•°æ®
        jedis.zadd(_KEY, Instant.now().plusSeconds(2).getEpochSecond(), &quot;order_2&quot;);
        jedis.zadd(_KEY, Instant.now().plusSeconds(2).getEpochSecond(), &quot;order_3&quot;);
        jedis.zadd(_KEY, Instant.now().plusSeconds(7).getEpochSecond(), &quot;order_4&quot;);
        jedis.zadd(_KEY, Instant.now().plusSeconds(10).getEpochSecond(), &quot;order_5&quot;);
        // å¼€å¯å»¶è¿Ÿé˜Ÿåˆ—
        doDelayQueue(jedis);
    }

    /**
     * å»¶è¿Ÿé˜Ÿåˆ—æ¶ˆè´¹
     * @param jedis Redis å®¢æˆ·ç«¯
     */
    public static void doDelayQueue(Jedis jedis) throws InterruptedException {
        while (true) {
            // å½“å‰æ—¶é—´
            Instant nowInstant = Instant.now();
            long lastSecond = nowInstant.plusSeconds(-1).getEpochSecond(); // ä¸Šä¸€ç§’æ—¶é—´
            long nowSecond = nowInstant.getEpochSecond();
            // æŸ¥è¯¢å½“å‰æ—¶é—´çš„æ‰€æœ‰ä»»åŠ¡
            Set&lt;String&gt; data = jedis.zrangeByScore(_KEY, lastSecond, nowSecond);
            for (String item : data) {
                // æ¶ˆè´¹ä»»åŠ¡
                System.out.println(&quot;æ¶ˆè´¹ï¼š&quot; + item);
            }
            // åˆ é™¤å·²ç»æ‰§è¡Œçš„ä»»åŠ¡
            jedis.zremrangeByScore(_KEY, lastSecond, nowSecond);
            Thread.sleep(1000); // æ¯ç§’è½®è¯¢ä¸€æ¬¡
        }
    }
}

</code></pre><p>ä»¥ä¸Šç¨‹åºæ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<pre tabindex="0"><code>æ¶ˆè´¹ï¼šorder_2
æ¶ˆè´¹ï¼šorder_3
æ¶ˆè´¹ï¼šorder_4
æ¶ˆè´¹ï¼šorder_5
æ¶ˆè´¹ï¼šorder_1

</code></pre><h4 id="æ–¹å¼äºŒ"><strong>æ–¹å¼äºŒ</strong></h4>
<p>æ¯æ¬¡æŸ¥è¯¢æœ€æ—©çš„ä¸€æ¡ä»»åŠ¡ï¼Œä¸å½“å‰æ—¶é—´åˆ¤æ–­ï¼Œå†³å®šæ˜¯å¦éœ€è¦æ‰§è¡Œï¼Œå®ç°ä»£ç å¦‚ä¸‹ï¼š</p>
<pre tabindex="0"><code>import redis.clients.jedis.Jedis;
import utils.JedisUtils;

import java.time.Instant;
import java.util.Set;

/**
 * å»¶è¿Ÿé˜Ÿåˆ—
 */
public class DelayQueueExample {
    // zset key
    private static final String _KEY = &quot;myDelayQueue&quot;;

    public static void main(String[] args) throws InterruptedException {
        Jedis jedis = JedisUtils.getJedis();
        // å»¶è¿Ÿ 30s æ‰§è¡Œï¼ˆ30s åçš„æ—¶é—´ï¼‰
        long delayTime = Instant.now().plusSeconds(30).getEpochSecond();
        jedis.zadd(_KEY, delayTime, &quot;order_1&quot;);
        // ç»§ç»­æ·»åŠ æµ‹è¯•æ•°æ®
        jedis.zadd(_KEY, Instant.now().plusSeconds(2).getEpochSecond(), &quot;order_2&quot;);
        jedis.zadd(_KEY, Instant.now().plusSeconds(2).getEpochSecond(), &quot;order_3&quot;);
        jedis.zadd(_KEY, Instant.now().plusSeconds(7).getEpochSecond(), &quot;order_4&quot;);
        jedis.zadd(_KEY, Instant.now().plusSeconds(10).getEpochSecond(), &quot;order_5&quot;);
        // å¼€å¯å»¶è¿Ÿé˜Ÿåˆ—
        doDelayQueue2(jedis);
    }

    /**
     * å»¶è¿Ÿé˜Ÿåˆ—æ¶ˆè´¹ï¼ˆæ–¹å¼2ï¼‰
     * @param jedis Redis å®¢æˆ·ç«¯
     */
    public static void doDelayQueue2(Jedis jedis) throws InterruptedException {
        while (true) {
            // å½“å‰æ—¶é—´
            long nowSecond = Instant.now().getEpochSecond();
            // æ¯æ¬¡æŸ¥è¯¢ä¸€æ¡æ¶ˆæ¯ï¼Œåˆ¤æ–­æ­¤æ¶ˆæ¯çš„æ‰§è¡Œæ—¶é—´
            Set&lt;String&gt; data = jedis.zrange(_KEY, 0, 0);
            if (data.size() == 1) {
                String firstValue = data.iterator().next();
                // æ¶ˆæ¯æ‰§è¡Œæ—¶é—´
                Double score = jedis.zscore(_KEY, firstValue);
                if (nowSecond &gt;= score) {
                    // æ¶ˆè´¹æ¶ˆæ¯ï¼ˆä¸šåŠ¡åŠŸèƒ½å¤„ç†ï¼‰
                    System.out.println(&quot;æ¶ˆè´¹æ¶ˆæ¯ï¼š&quot; + firstValue);
                    // åˆ é™¤å·²ç»æ‰§è¡Œçš„ä»»åŠ¡
                    jedis.zrem(_KEY, firstValue);
                }
            }
            Thread.sleep(100); // æ‰§è¡Œé—´éš”
        }
    }
}

</code></pre><p>ä»¥ä¸Šç¨‹åºæ‰§è¡Œç»“æœå’Œå®ç°æ–¹å¼ä¸€ç›¸åŒï¼Œç»“æœå¦‚ä¸‹ï¼š</p>
<pre tabindex="0"><code>æ¶ˆè´¹ï¼šorder_2
æ¶ˆè´¹ï¼šorder_3
æ¶ˆè´¹ï¼šorder_4
æ¶ˆè´¹ï¼šorder_5
æ¶ˆè´¹ï¼šorder_1

</code></pre><p>å…¶ä¸­ï¼Œæ‰§è¡Œé—´éš”ä»£ç  <code>Thread.sleep(100)</code> å¯æ ¹æ®å®é™…çš„ä¸šåŠ¡æƒ…å†µåˆ å‡æˆ–é…ç½®ã€‚</p>
<h3 id="å°ç»“">å°ç»“</h3>
<p>æœ¬æ–‡æˆ‘ä»¬ä»‹ç»äº†å»¶è¿Ÿé˜Ÿåˆ—çš„ä½¿ç”¨åœºæ™¯ä»¥åŠå„ç§å®ç°æ–¹æ¡ˆï¼Œå…¶ä¸­ Redis çš„æ–¹å¼æ˜¯æœ€ç¬¦åˆæˆ‘ä»¬éœ€æ±‚çš„ï¼Œå®ƒä¸»è¦æ˜¯åˆ©ç”¨æœ‰åºé›†åˆçš„ score å±æ€§æ¥å­˜å‚¨å»¶è¿Ÿæ‰§è¡Œæ—¶é—´ï¼Œå†å¼€å¯ä¸€ä¸ªæ— é™å¾ªç¯æ¥åˆ¤æ–­æ˜¯å¦æœ‰ç¬¦åˆè¦æ±‚çš„ä»»åŠ¡ï¼Œå¦‚æœæœ‰çš„è¯æ‰§è¡Œç›¸å…³é€»è¾‘ï¼Œæ²¡æœ‰çš„è¯ç»§ç»­å¾ªç¯æ£€æµ‹ã€‚</p>

        </div>
    </article>
</div>

    </main>
    <footer>
        <div id="pagination">
            
<div class="paginator">
    <div class="prev">
        
        <a href="/documents/columns/redis/redis-%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E6%88%98/31-%E5%AE%9E%E6%88%98%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E6%A1%88%E4%BE%8B.md/"><span></span></a>
    </div>
    <div class="next">
        
        <a href="/documents/columns/redis/redis-%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E6%88%98/29-%E5%AE%9E%E6%88%98%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8%E5%8F%8A%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90.md/"><span></span></a>
    </div>
</div>

        </div>
        <div class="toggler" onclick="toggleLight(this);">ğŸ’¡</div>
        <div id="copyright" style="display: none;">
    
    
    <p>&copy; 28280 <a href="/"></a>, powered by Hugo and Qiao</p>
</div>
    </footer>
    
<script>
    function toggleLight() {
        document.getElementById('page').classList.toggle('night');
    }
</script>
</body>

</html>