<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
<meta name="X-UA-Compatible" , content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<link rel="icon" type="image/png" href="/%20/favicon.png">

<title>21 æ¸¸æ ‡è¿­ä»£å™¨ï¼ˆè¿‡æ»¤å™¨ï¼‰â€”â€”Scan | Yipsen Ye</title>
<meta name="description" content="ä¸€ä¸ªé—®é¢˜å¼•å‘çš„ã€Œè¡€æ¡ˆã€ æ›¾ç»å‘ç”Ÿè¿‡è¿™æ ·ä¸€ä»¶äº‹ï¼Œæˆ‘ä»¬çš„ Redis æœåŠ¡å™¨å­˜å‚¨äº†æµ·é‡çš„æ•°æ®ï¼Œå…¶ä¸­ç™»å½•ç”¨æˆ·ä¿¡æ¯æ˜¯ä»¥ user_token_id çš„å½¢å¼å­˜å‚¨çš„ã€‚è¿è¥äººå‘˜æƒ³è¦å½“å‰æ‰€æœ‰çš„ç”¨æˆ·ç™»å½•ä¿¡æ¯ï¼Œç„¶åæ‚²å‰§å°±å‘ç”Ÿäº†ï¼šå› ä¸ºæˆ‘ä»¬çš„å·¥ç¨‹å¸ˆä½¿ç”¨äº† keys user_token_* æ¥æŸ¥è¯¢å¯¹åº”çš„ç”¨æˆ·ï¼Œç»“æœå¯¼è‡´ Redis å‡æ­»ä¸å¯ç”¨ï¼Œä»¥è‡³äºå½±å“åˆ°çº¿ä¸Šçš„å…¶ä»–ä¸šåŠ¡æ¥è¿å‘ç”Ÿé—®é¢˜ï¼Œç„¶åå°±æ”¶åˆ°äº†ä¸€å †çš„ç³»ç»Ÿé¢„è­¦çŸ­ä¿¡ã€‚å¹¶ä¸”è¿™ä¸ªå‡æ­»çš„æ—¶é—´æ˜¯å’Œå­˜å‚¨çš„æ•°æ®æˆæ­£æ¯”çš„ï¼Œæ•°æ®é‡è¶Šå¤§å‡æ­»çš„æ—¶é—´å°±è¶Šé•¿ï¼Œå¯¼è‡´çš„æ•…éšœæ—¶é—´ä¹Ÿè¶Šé•¿ã€‚
é‚£å¦‚ä½•é¿å…è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ
é—®é¢˜çš„è§£å†³æ–¹æ¡ˆ åœ¨ Redis 2.8 ä¹‹å‰ï¼Œæˆ‘ä»¬åªèƒ½ä½¿ç”¨ keys å‘½ä»¤æ¥æŸ¥è¯¢æˆ‘ä»¬æƒ³è¦çš„æ•°æ®ï¼Œä½†è¿™ä¸ªå‘½ä»¤å­˜åœ¨ä¸¤ä¸ªç¼ºç‚¹ï¼š
 æ­¤å‘½ä»¤æ²¡æœ‰åˆ†é¡µåŠŸèƒ½ï¼Œæˆ‘ä»¬åªèƒ½ä¸€æ¬¡æ€§æŸ¥è¯¢å‡ºæ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„ key å€¼ï¼Œå¦‚æœæŸ¥è¯¢ç»“æœéå¸¸å·¨å¤§ï¼Œé‚£ä¹ˆå¾—åˆ°çš„è¾“å‡ºä¿¡æ¯ä¹Ÿä¼šéå¸¸å¤šï¼› keys å‘½ä»¤æ˜¯éå†æŸ¥è¯¢ï¼Œå› æ­¤å®ƒçš„æŸ¥è¯¢æ—¶é—´å¤æ‚åº¦æ˜¯ o(n)ï¼Œæ‰€ä»¥æ•°æ®é‡è¶Šå¤§æŸ¥è¯¢æ—¶é—´å°±è¶Šé•¿ã€‚  ç„¶è€Œï¼Œæ¯”è¾ƒå¹¸è¿çš„æ˜¯åœ¨ Redis 2.8 æ—¶æ¨å‡ºäº† Scanï¼Œè§£å†³äº†æˆ‘ä»¬è¿™äº›é—®é¢˜ï¼Œä¸‹é¢æ¥çœ‹ Scan çš„å…·ä½“ä½¿ç”¨ã€‚
Scan å‘½ä»¤ä½¿ç”¨ æˆ‘ä»¬å…ˆæ¥æ¨¡æ‹Ÿæµ·é‡æ•°æ®ï¼Œä½¿ç”¨ Pipeline æ·»åŠ  10w æ¡æ•°æ®ï¼ŒJava ä»£ç å®ç°å¦‚ä¸‹ï¼š
import redis.clients.jedis.Jedis;import redis.clients.jedis.Pipeline;import utils.JedisUtils;public class ScanExample {public static void main(String[] args) {// æ·»åŠ  10w æ¡æ•°æ®initData();}public static void initData(){Jedis jedis = JedisUtils.">
<meta name="author" content="">

<link rel="stylesheet" type="text/css" href="/styles/main.css">

</head>

<body id="page">
    <header>
        <div class="nav-logo">
    <a href="http://yipsen.github.io/">
        
        <span class="nav-title">Yipsen Ye</span>
    </a>
</div>
<nav class="navbar justify-content-end">
    <ul class="nav-list">
        
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/posts/">æ–‡ç« </a>
        </li>
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/collections/">é™„è¡¨</a>
        </li>
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/about/">å…³äº</a>
        </li>
        
    </ul>
</nav>
    </header>
    <main id="content">
        
<div class="container"><aside>
    <div>
        
        
            
            
            <div class="post-category-icon"></div>
            <a href="/categories/redis%20%e6%a0%b8%e5%bf%83%e5%8e%9f%e7%90%86%e4%b8%8e%e5%ae%9e%e6%88%98/">Redis æ ¸å¿ƒåŸç†ä¸å®æˆ˜</a>
            <ul>
                
            </ul>
        
    </div>
</aside>

<style>
    aside {
        position: fixed;
        left: 20px;
        background: #ffdee3;
        border-radius: 6px;
        padding: 20px;
        padding-top: 60px;
        box-shadow: 5px 10px #888;
        list-style-type: none;
        display: none;
    }

    .post-category-icon {
        position: absolute;
        width: 80px;
        height: 80px;
        top: -40px;
        left: 50%;
        margin-left: -40px;
        text-align: center;
        font-size: 36px;
        content: 'J';
        background: #ffdee3;
        border-radius: 100%;
        border: 10px solid #fff;
        box-shadow: 5px 10px #888;
    }
</style><article class="post-block">
        <h1 class="post-title">21 æ¸¸æ ‡è¿­ä»£å™¨ï¼ˆè¿‡æ»¤å™¨ï¼‰â€”â€”Scan</h1>
        <div class="post-info">
            <div class="post-date"> 
                <span>2022-09-28 19:38:14</span>
            </div>
        </div>
        <div class="post-content">
            <h3 id="ä¸€ä¸ªé—®é¢˜å¼•å‘çš„è¡€æ¡ˆ">ä¸€ä¸ªé—®é¢˜å¼•å‘çš„ã€Œè¡€æ¡ˆã€</h3>
<p>æ›¾ç»å‘ç”Ÿè¿‡è¿™æ ·ä¸€ä»¶äº‹ï¼Œæˆ‘ä»¬çš„ Redis æœåŠ¡å™¨å­˜å‚¨äº†æµ·é‡çš„æ•°æ®ï¼Œå…¶ä¸­ç™»å½•ç”¨æˆ·ä¿¡æ¯æ˜¯ä»¥ user_token_id çš„å½¢å¼å­˜å‚¨çš„ã€‚è¿è¥äººå‘˜æƒ³è¦å½“å‰æ‰€æœ‰çš„ç”¨æˆ·ç™»å½•ä¿¡æ¯ï¼Œç„¶åæ‚²å‰§å°±å‘ç”Ÿäº†ï¼šå› ä¸ºæˆ‘ä»¬çš„å·¥ç¨‹å¸ˆä½¿ç”¨äº† <code>keys user_token_*</code> æ¥æŸ¥è¯¢å¯¹åº”çš„ç”¨æˆ·ï¼Œç»“æœå¯¼è‡´ Redis å‡æ­»ä¸å¯ç”¨ï¼Œä»¥è‡³äºå½±å“åˆ°çº¿ä¸Šçš„å…¶ä»–ä¸šåŠ¡æ¥è¿å‘ç”Ÿé—®é¢˜ï¼Œç„¶åå°±æ”¶åˆ°äº†ä¸€å †çš„ç³»ç»Ÿé¢„è­¦çŸ­ä¿¡ã€‚å¹¶ä¸”è¿™ä¸ªå‡æ­»çš„æ—¶é—´æ˜¯å’Œå­˜å‚¨çš„æ•°æ®æˆæ­£æ¯”çš„ï¼Œæ•°æ®é‡è¶Šå¤§å‡æ­»çš„æ—¶é—´å°±è¶Šé•¿ï¼Œå¯¼è‡´çš„æ•…éšœæ—¶é—´ä¹Ÿè¶Šé•¿ã€‚</p>
<p>é‚£å¦‚ä½•é¿å…è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ</p>
<h3 id="é—®é¢˜çš„è§£å†³æ–¹æ¡ˆ">é—®é¢˜çš„è§£å†³æ–¹æ¡ˆ</h3>
<p>åœ¨ Redis 2.8 ä¹‹å‰ï¼Œæˆ‘ä»¬åªèƒ½ä½¿ç”¨ keys å‘½ä»¤æ¥æŸ¥è¯¢æˆ‘ä»¬æƒ³è¦çš„æ•°æ®ï¼Œä½†è¿™ä¸ªå‘½ä»¤å­˜åœ¨ä¸¤ä¸ªç¼ºç‚¹ï¼š</p>
<ol>
<li>æ­¤å‘½ä»¤æ²¡æœ‰åˆ†é¡µåŠŸèƒ½ï¼Œæˆ‘ä»¬åªèƒ½ä¸€æ¬¡æ€§æŸ¥è¯¢å‡ºæ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„ key å€¼ï¼Œå¦‚æœæŸ¥è¯¢ç»“æœéå¸¸å·¨å¤§ï¼Œé‚£ä¹ˆå¾—åˆ°çš„è¾“å‡ºä¿¡æ¯ä¹Ÿä¼šéå¸¸å¤šï¼›</li>
<li>keys å‘½ä»¤æ˜¯éå†æŸ¥è¯¢ï¼Œå› æ­¤å®ƒçš„æŸ¥è¯¢æ—¶é—´å¤æ‚åº¦æ˜¯ o(n)ï¼Œæ‰€ä»¥æ•°æ®é‡è¶Šå¤§æŸ¥è¯¢æ—¶é—´å°±è¶Šé•¿ã€‚</li>
</ol>
<p>ç„¶è€Œï¼Œæ¯”è¾ƒå¹¸è¿çš„æ˜¯åœ¨ Redis 2.8 æ—¶æ¨å‡ºäº† Scanï¼Œè§£å†³äº†æˆ‘ä»¬è¿™äº›é—®é¢˜ï¼Œä¸‹é¢æ¥çœ‹ Scan çš„å…·ä½“ä½¿ç”¨ã€‚</p>
<h3 id="scan-å‘½ä»¤ä½¿ç”¨">Scan å‘½ä»¤ä½¿ç”¨</h3>
<p>æˆ‘ä»¬å…ˆæ¥æ¨¡æ‹Ÿæµ·é‡æ•°æ®ï¼Œä½¿ç”¨ Pipeline æ·»åŠ  10w æ¡æ•°æ®ï¼ŒJava ä»£ç å®ç°å¦‚ä¸‹ï¼š</p>
<pre tabindex="0"><code>import redis.clients.jedis.Jedis;
import redis.clients.jedis.Pipeline;
import utils.JedisUtils;

public class ScanExample {
    public static void main(String[] args) {
        // æ·»åŠ  10w æ¡æ•°æ®
        initData();
    }
    public static void initData(){
        Jedis jedis = JedisUtils.getJedis();
        Pipeline pipe = jedis.pipelined();
        for (int i = 1; i &lt; 100001; i++) {
            pipe.set(&quot;user_token_&quot; + i, &quot;id&quot; + i);
        }
        // æ‰§è¡Œå‘½ä»¤
        pipe.sync();
        System.out.println(&quot;æ•°æ®æ’å…¥å®Œæˆ&quot;);
    }
}

</code></pre><p>æˆ‘ä»¬æ¥æŸ¥è¯¢ç”¨æˆ· id ä¸º 9999* çš„æ•°æ®ï¼ŒScan å‘½ä»¤ä½¿ç”¨å¦‚ä¸‹ï¼š</p>
<pre tabindex="0"><code>127.0.0.1:6379&gt; scan 0 match user_token_9999* count 10000
1) &quot;127064&quot;
2) 1) &quot;user_token_99997&quot;
127.0.0.1:6379&gt; scan 127064 match user_token_9999* count 10000
1) &quot;1740&quot;
2) 1) &quot;user_token_9999&quot;
127.0.0.1:6379&gt; scan 1740 match user_token_9999* count 10000
1) &quot;21298&quot;
2) 1) &quot;user_token_99996&quot;
127.0.0.1:6379&gt; scan 21298 match user_token_9999* count 10000
1) &quot;65382&quot;
2) (empty list or set)
127.0.0.1:6379&gt; scan 65382 match user_token_9999* count 10000
1) &quot;78081&quot;
2) 1) &quot;user_token_99998&quot;
   2) &quot;user_token_99992&quot;
127.0.0.1:6379&gt; scan 78081 match user_token_9999* count 10000
1) &quot;3993&quot;
2) 1) &quot;user_token_99994&quot;
   2) &quot;user_token_99993&quot;
127.0.0.1:6379&gt; scan 3993 match user_token_9999* count 10000
1) &quot;13773&quot;
2) 1) &quot;user_token_99995&quot;
127.0.0.1:6379&gt; scan 13773 match user_token_9999* count 10000
1) &quot;47923&quot;
2) (empty list or set)
127.0.0.1:6379&gt; scan 47923 match user_token_9999* count 10000
1) &quot;59751&quot;
2) 1) &quot;user_token_99990&quot;
   2) &quot;user_token_99991&quot;
   3) &quot;user_token_99999&quot;
127.0.0.1:6379&gt; scan 59751 match user_token_9999* count 10000
1) &quot;0&quot;
2) (empty list or set)

</code></pre><p>ä»ä»¥ä¸Šçš„æ‰§è¡Œç»“æœï¼Œæˆ‘ä»¬çœ‹å‡ºä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ol>
<li>æŸ¥è¯¢çš„ç»“æœä¸ºç©ºï¼Œä½†æ¸¸æ ‡å€¼ä¸ä¸º 0ï¼Œè¡¨ç¤ºéå†è¿˜æ²¡ç»“æŸï¼›</li>
<li>è®¾ç½®çš„æ˜¯ count 10000ï¼Œä½†æ¯æ¬¡è¿”å›çš„æ•°é‡éƒ½ä¸æ˜¯ 10000ï¼Œä¸”ä¸å›ºå®šï¼Œè¿™æ˜¯å› ä¸º count åªæ˜¯é™å®šæœåŠ¡å™¨å•æ¬¡éå†çš„å­—å…¸æ§½ä½æ•°é‡ï¼ˆçº¦ç­‰äºï¼‰ï¼Œè€Œä¸æ˜¯è§„å®šè¿”å›ç»“æœçš„ count å€¼ã€‚</li>
</ol>
<p>ç›¸å…³è¯­æ³•ï¼š</p>
<pre tabindex="0"><code>scan cursor [MATCH pattern] [COUNT count]

</code></pre><p>å…¶ä¸­ï¼š</p>
<ul>
<li>cursorï¼šå…‰æ ‡ä½ç½®ï¼Œæ•´æ•°å€¼ï¼Œä» 0 å¼€å§‹ï¼Œåˆ° 0 ç»“æŸï¼ŒæŸ¥è¯¢ç»“æœæ˜¯ç©ºï¼Œä½†æ¸¸æ ‡å€¼ä¸ä¸º 0ï¼Œè¡¨ç¤ºéå†è¿˜æ²¡ç»“æŸï¼›</li>
<li>match patternï¼šæ­£åˆ™åŒ¹é…å­—æ®µï¼›</li>
<li>countï¼šé™å®šæœåŠ¡å™¨å•æ¬¡éå†çš„å­—å…¸æ§½ä½æ•°é‡ï¼ˆçº¦ç­‰äºï¼‰ï¼Œåªæ˜¯å¯¹å¢é‡å¼è¿­ä»£å‘½ä»¤çš„ä¸€ç§æç¤ºï¼ˆhintï¼‰ï¼Œå¹¶ä¸æ˜¯æŸ¥è¯¢ç»“æœè¿”å›çš„æœ€å¤§æ•°é‡ï¼Œå®ƒçš„é»˜è®¤å€¼æ˜¯ 10ã€‚</li>
</ul>
<h3 id="ä»£ç å®æˆ˜">ä»£ç å®æˆ˜</h3>
<p>æœ¬æ–‡æˆ‘ä»¬ä½¿ç”¨ Java ä»£ç æ¥å®ç° Scan çš„æŸ¥è¯¢åŠŸèƒ½ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre tabindex="0"><code>import redis.clients.jedis.Jedis;
import redis.clients.jedis.Pipeline;
import redis.clients.jedis.ScanParams;
import redis.clients.jedis.ScanResult;
import utils.JedisUtils;

public class ScanExample {
    public static void main(String[] args) {
        Jedis jedis = JedisUtils.getJedis();
        // å®šä¹‰ match å’Œ count å‚æ•°
        ScanParams params = new ScanParams();
        params.count(10000);
        params.match(&quot;user_token_9999*&quot;);
        // æ¸¸æ ‡
        String cursor = &quot;0&quot;;
        while (true) {
            ScanResult&lt;String&gt; res = jedis.scan(cursor, params);
            if (res.getCursor().equals(&quot;0&quot;)) {
                // è¡¨ç¤ºæœ€åä¸€æ¡
                break;
            }
            cursor = res.getCursor(); // è®¾ç½®æ¸¸æ ‡
            for (String item : res.getResult()) {
                // æ‰“å°æŸ¥è¯¢ç»“æœ
                System.out.println(&quot;æŸ¥è¯¢ç»“æœï¼š&quot; + item);
            }
        }
    }
}

</code></pre><p>ä»¥ä¸Šç¨‹åºæ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<pre tabindex="0"><code>æŸ¥è¯¢ç»“æœï¼šuser_token_99997
æŸ¥è¯¢ç»“æœï¼šuser_token_9999
æŸ¥è¯¢ç»“æœï¼šuser_token_99996
æŸ¥è¯¢ç»“æœï¼šuser_token_99998
æŸ¥è¯¢ç»“æœï¼šuser_token_99992
æŸ¥è¯¢ç»“æœï¼šuser_token_99994
æŸ¥è¯¢ç»“æœï¼šuser_token_99993
æŸ¥è¯¢ç»“æœï¼šuser_token_99995
æŸ¥è¯¢ç»“æœï¼šuser_token_99990
æŸ¥è¯¢ç»“æœï¼šuser_token_99991
æŸ¥è¯¢ç»“æœï¼šuser_token_99999

</code></pre><h3 id="scan-ç›¸å…³å‘½ä»¤">Scan ç›¸å…³å‘½ä»¤</h3>
<p>Scan æ˜¯ä¸€ä¸ªç³»åˆ—æŒ‡ä»¤ï¼Œé™¤äº† Scan ä¹‹å¤–ï¼Œè¿˜æœ‰ä»¥ä¸‹ 3 ä¸ªå‘½ä»¤ï¼š</p>
<ol>
<li>HScan éå†å­—å…¸æ¸¸æ ‡è¿­ä»£å™¨</li>
<li>SScan éå†é›†åˆçš„æ¸¸æ ‡è¿­ä»£å™¨</li>
<li>ZScan éå†æœ‰åºé›†åˆçš„æ¸¸æ ‡è¿­ä»£å™¨</li>
</ol>
<p>æ¥çœ‹è¿™äº›å‘½ä»¤çš„å…·ä½“ä½¿ç”¨ã€‚</p>
<h4 id="hscan-ä½¿ç”¨"><strong>HScan ä½¿ç”¨</strong></h4>
<pre tabindex="0"><code>127.0.0.1:6379&gt; hscan myhash 0 match k2* count 10
1) &quot;0&quot;
2) 1) &quot;k2&quot;
   2) &quot;v2&quot;

</code></pre><p>ç›¸å…³è¯­æ³•ï¼š</p>
<pre tabindex="0"><code>hscan key cursor [MATCH pattern] [COUNT count]

</code></pre><h4 id="sscan-ä½¿ç”¨"><strong>SScan ä½¿ç”¨</strong></h4>
<pre tabindex="0"><code>127.0.0.1:6379&gt; sscan myset 0 match v2* count 20
1) &quot;0&quot;
2) 1) &quot;v2&quot;

</code></pre><p>ç›¸å…³è¯­æ³•ï¼š</p>
<pre tabindex="0"><code>sscan key cursor [MATCH pattern] [COUNT count]

</code></pre><h4 id="zscan-ä½¿ç”¨"><strong>ZScan ä½¿ç”¨</strong></h4>
<pre tabindex="0"><code>127.0.0.1:6379&gt; zscan zset 0 match red* count 20
1) &quot;0&quot;
2) 1) &quot;redis&quot;
   2) &quot;10&quot;

</code></pre><p>ç›¸å…³è¯­æ³•ï¼š</p>
<pre tabindex="0"><code>zscan key cursor [MATCH pattern] [COUNT count]

</code></pre><h3 id="scan-è¯´æ˜">Scan è¯´æ˜</h3>
<p>å®˜æ–¹å¯¹ Scan å‘½ä»¤çš„æè¿°ä¿¡æ¯å¦‚ä¸‹ã€‚</p>
<h4 id="scan-guarantees"><strong>Scan guarantees</strong></h4>
<blockquote>
<p>The SCAN command, and the other commands in the SCAN family, are able to provide to the user a set of guarantees associated to full iterations.</p>
<ul>
<li>A full iteration always retrieves all the elements that were present in the collection from the start to the end of a full iteration. This means that if a given element is inside the collection when an iteration is started, and is still there when an iteration terminates, then at some point SCANreturned it to the user.</li>
<li>A full iteration never returns any element that was NOT present in the collection from the start to the end of a full iteration. So if an element was removed before the start of an iteration, and is never added back to the collection for all the time an iteration lasts, SCAN ensures that this element will never be returned.</li>
</ul>
<p>However because SCAN has very little state associated (just the cursor) it has the following drawbacks:</p>
<ul>
<li>A given element may be returned multiple times. It is up to the application to handle the case of duplicated elements, for example only using the returned elements in order to perform operations that are safe when re-applied multiple times.</li>
<li>Elements that were not constantly present in the collection during a full iteration, may be returned or not: it is undefined.</li>
</ul>
</blockquote>
<p>å®˜æ–¹æ–‡æ¡£åœ°å€ï¼š</p>
<blockquote>
<p><a href="https://redis.io/commands/scan">https://redis.io/commands/scan</a></p>
</blockquote>
<p>ç¿»è¯‘ä¸ºä¸­æ–‡çš„å«ä¹‰æ˜¯ï¼šScan åŠå®ƒçš„ç›¸å…³å‘½ä»¤å¯ä»¥ä¿è¯ä»¥ä¸‹æŸ¥è¯¢è§„åˆ™ã€‚</p>
<ul>
<li>å®ƒå¯ä»¥å®Œæ•´è¿”å›å¼€å§‹åˆ°ç»“æŸæ£€ç´¢é›†åˆä¸­å‡ºç°çš„æ‰€æœ‰å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯åœ¨æ•´ä¸ªæŸ¥è¯¢è¿‡ç¨‹ä¸­å¦‚æœè¿™äº›å…ƒç´ æ²¡æœ‰è¢«åˆ é™¤ï¼Œä¸”ç¬¦åˆæ£€ç´¢æ¡ä»¶ï¼Œåˆ™ä¸€å®šä¼šè¢«æŸ¥è¯¢å‡ºæ¥ï¼›</li>
<li>å®ƒå¯ä»¥ä¿è¯ä¸ä¼šæŸ¥è¯¢å‡ºï¼Œåœ¨å¼€å§‹æ£€ç´¢ä¹‹å‰åˆ é™¤çš„é‚£äº›å…ƒç´ ã€‚</li>
</ul>
<p>ç„¶åï¼ŒScan å‘½ä»¤åŒ…å«ä»¥ä¸‹ç¼ºç‚¹ï¼š</p>
<ul>
<li>ä¸€ä¸ªå…ƒç´ å¯èƒ½è¢«è¿”å›å¤šæ¬¡ï¼Œéœ€è¦å®¢æˆ·ç«¯æ¥å®ç°å»é‡ï¼›</li>
<li>åœ¨è¿­ä»£è¿‡ç¨‹ä¸­å¦‚æœæœ‰å…ƒç´ è¢«ä¿®æ”¹ï¼Œé‚£ä¹ˆä¿®æ”¹çš„å…ƒç´ èƒ½ä¸èƒ½è¢«éå†åˆ°ä¸ç¡®å®šã€‚</li>
</ul>
<h3 id="å°ç»“">å°ç»“</h3>
<p>é€šè¿‡æœ¬æ–‡æˆ‘ä»¬å¯ä»¥çŸ¥é“ Scan åŒ…å«ä»¥ä¸‹å››ä¸ªæŒ‡ä»¤ï¼š</p>
<ol>
<li>Scanï¼šç”¨äºæ£€ç´¢å½“å‰æ•°æ®åº“ä¸­æ‰€æœ‰æ•°æ®ï¼›</li>
<li>HScanï¼šç”¨äºæ£€ç´¢å“ˆå¸Œç±»å‹çš„æ•°æ®ï¼›</li>
<li>SScanï¼šç”¨äºæ£€ç´¢é›†åˆç±»å‹ä¸­çš„æ•°æ®ï¼›</li>
<li>ZScanï¼šç”±äºæ£€ç´¢æœ‰åºé›†åˆä¸­çš„æ•°æ®ã€‚</li>
</ol>
<p>Scan å…·å¤‡ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼š</p>
<ol>
<li>Scan å¯ä»¥å®ç° keys çš„åŒ¹é…åŠŸèƒ½ï¼›</li>
<li>Scan æ˜¯é€šè¿‡æ¸¸æ ‡è¿›è¡ŒæŸ¥è¯¢çš„ä¸ä¼šå¯¼è‡´ Redis å‡æ­»ï¼›</li>
<li>Scan æä¾›äº† count å‚æ•°ï¼Œå¯ä»¥è§„å®šéå†çš„æ•°é‡ï¼›</li>
<li>Scan ä¼šæŠŠæ¸¸æ ‡è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œç”¨æˆ·å®¢æˆ·ç«¯ç»§ç»­éå†æŸ¥è¯¢ï¼›</li>
<li>Scan è¿”å›çš„ç»“æœå¯èƒ½ä¼šæœ‰é‡å¤æ•°æ®ï¼Œéœ€è¦å®¢æˆ·ç«¯å»é‡ï¼›</li>
<li>å•æ¬¡è¿”å›ç©ºå€¼ä¸”æ¸¸æ ‡ä¸ä¸º 0ï¼Œè¯´æ˜éå†è¿˜æ²¡ç»“æŸï¼›</li>
<li>Scan å¯ä»¥ä¿è¯åœ¨å¼€å§‹æ£€ç´¢ä¹‹å‰ï¼Œè¢«åˆ é™¤çš„å…ƒç´ ä¸€å®šä¸ä¼šè¢«æŸ¥è¯¢å‡ºæ¥ï¼›</li>
<li>åœ¨è¿­ä»£è¿‡ç¨‹ä¸­å¦‚æœæœ‰å…ƒç´ è¢«ä¿®æ”¹ï¼Œ Scan ä¸ä¿è¯èƒ½æŸ¥è¯¢å‡ºç›¸å…³çš„å…ƒç´ ã€‚</li>
</ol>

        </div>
    </article>
</div>
<div class="division-line"></div>
<div class="others">
    <div>æ ‡ç­¾ï¼šğŸ·ï¸<a class="post-tag" href="/tags/redis/">redis</a>&nbsp;</div>
    <div>åˆ†ç±»ï¼š ğŸ“’<a class="post-category" href="/categories/redis-%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E6%88%98/">Redis æ ¸å¿ƒåŸç†ä¸å®æˆ˜</a>&nbsp; </div>
</div>

    </main>
    <footer>
        <div id="pagination">
            
<div class="paginator">
    <div class="prev">
        
        <a href="http://yipsen.github.io/documents/columns/redis/redis-%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E6%88%98/20-%E6%9F%A5%E8%AF%A2%E9%99%84%E8%BF%91%E7%9A%84%E4%BA%BAgeo/"><span>20 æŸ¥è¯¢é™„è¿‘çš„äººâ€”â€”GEO</span></a>
    </div>
    <div class="next">
        
        <a href="http://yipsen.github.io/documents/columns/redis/redis-%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E6%88%98/22-%E4%BC%98%E7%A7%80%E7%9A%84%E5%9F%BA%E6%95%B0%E7%BB%9F%E8%AE%A1%E7%AE%97%E6%B3%95hyperloglog/"><span>22 ä¼˜ç§€çš„åŸºæ•°ç»Ÿè®¡ç®—æ³•â€”â€”HyperLogLog</span></a>
    </div>
</div>

        </div>
        <div id="float">
            <ul class="float-button-bar">
    <li>
        <button class="float-button top" onclick="scrollToTop(this);">UP</button>
    </li>
    <li>
        <button class="float-button toggler" onclick="changeSkin(this);">DARK</button>
    </li>
</ul>
        </div>
        <div id="copyright" style="display: none;">
    
    
    <p>&copy; 2020 <a href="/"></a>, powered by Hugo and Qiao</p>
</div>
    </footer>
    
<script>
    const changeSkin = () => {
        document.getElementById('page').classList.toggle('night');
    }
    const scrollToTop = () => {
        window.scrollTo(0, 0);
    }
</script>
</body>

</html>