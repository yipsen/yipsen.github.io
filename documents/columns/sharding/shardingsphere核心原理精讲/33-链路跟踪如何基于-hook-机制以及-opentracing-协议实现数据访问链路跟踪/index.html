<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
<meta name="X-UA-Compatible" , content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<link rel="icon" type="image/png" href="/%20/favicon.png">

<title>33 é“¾è·¯è·Ÿè¸ªï¼šå¦‚ä½•åŸºäº Hook æœºåˆ¶ä»¥åŠ OpenTracing åè®®å®ç°æ•°æ®è®¿é—®é“¾è·¯è·Ÿè¸ªï¼Ÿ | Yipsen Ye</title>
<meta name="description" content="ä»Šå¤©æˆ‘ä»¬æ¥è®¨è®º ShardingSphere ä¸­å…³äºç¼–æ’æ²»ç†çš„å¦ä¸€ä¸ªä¸»é¢˜ï¼Œå³é“¾è·¯è·Ÿè¸ªã€‚åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿå¼€å‘è¿‡ç¨‹ä¸­ï¼Œé“¾è·¯è·Ÿè¸ªæ˜¯ä¸€é¡¹åŸºç¡€è®¾æ–½ç±»çš„åŠŸèƒ½ã€‚ä½œä¸ºä¸€æ¬¾åˆ†å¸ƒå¼æ•°æ®åº“ä¸­é—´ä»¶ï¼ŒShardingSphere ä¸­ä¹Ÿå†…ç½®äº†ç®€å•è€Œå®Œæ•´çš„é“¾è·¯è·Ÿè¸ªæœºåˆ¶ã€‚
é“¾è·¯è·Ÿè¸ªåŸºæœ¬åŸç†å’Œå·¥å…· åœ¨ä»‹ç»å…·ä½“çš„å®ç°è¿‡ç¨‹ä¹‹å‰ï¼Œæˆ‘ä»¬æœ‰å¿…è¦å…ˆæ¥äº†è§£ä¸€äº›å…³äºé“¾è·¯è·Ÿè¸ªçš„ç†è®ºçŸ¥è¯†ã€‚
1.é“¾è·¯è·Ÿè¸ªåŸºæœ¬åŸç† åˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„æœåŠ¡è·Ÿè¸ªåŸç†ä¸Šå®é™…ä¸Šå¹¶ä¸å¤æ‚ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦å¼•å…¥ä¸¤ä¸ªåŸºæœ¬æ¦‚å¿µï¼Œå³ TraceId å’Œ SpanIdã€‚
 TraceId  TraceId å³è·Ÿè¸ª Idã€‚åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œæ¯ä¸ªè¯·æ±‚ç”Ÿæˆä¸€ä¸ªå…¨å±€çš„å”¯ä¸€æ€§ Idï¼Œé€šè¿‡è¿™ä¸ª Id å¯ä»¥ä¸²è”èµ·æ•´ä¸ªè°ƒç”¨é“¾ï¼Œä¹Ÿå°±æ˜¯è¯´è¯·æ±‚åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿå†…éƒ¨æµè½¬æ—¶ï¼Œç³»ç»Ÿéœ€è¦å§‹ç»ˆä¿æŒä¼ é€’å…¶å”¯ä¸€æ€§ Idï¼Œç›´åˆ°è¯·æ±‚è¿”å›ï¼Œè¿™ä¸ªå”¯ä¸€æ€§ Id å°±æ˜¯ TraceIdã€‚
 SpanId  é™¤äº† TraceId å¤–ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ SpanIdï¼ŒSpanId ä¸€èˆ¬è¢«ç§°ä¸ºè·¨åº¦ Idã€‚å½“è¯·æ±‚åˆ°è¾¾å„ä¸ªæœåŠ¡ç»„ä»¶æ—¶ï¼Œé€šè¿‡ SpanId æ¥æ ‡è¯†å®ƒçš„å¼€å§‹ã€å…·ä½“æ‰§è¡Œè¿‡ç¨‹å’Œç»“æŸã€‚å¯¹äºæ¯ä¸ª Span è€Œè¨€ï¼Œå®ƒå¿…é¡»æœ‰å¼€å§‹å’Œç»“æŸä¸¤ä¸ªèŠ‚ç‚¹ï¼Œé€šè¿‡è®°å½•å¼€å§‹ Span å’Œç»“æŸ Span çš„æ—¶é—´æˆ³ç»Ÿè®¡å…¶ Span çš„æ—¶é—´å»¶è¿Ÿã€‚
æ•´ä¸ªè°ƒç”¨è¿‡ç¨‹ä¸­æ¯ä¸ªè¯·æ±‚éƒ½è¦é€ä¼  TraceId å’Œ SpanIdã€‚æ¯ä¸ªæœåŠ¡å°†è¯¥æ¬¡è¯·æ±‚é™„å¸¦çš„ SpanId ä½œä¸ºçˆ¶ SpanId è¿›è¡Œè®°å½•ï¼Œå¹¶ä¸”ç”Ÿæˆè‡ªå·±çš„ SpanIdã€‚ä¸€ä¸ªæ²¡æœ‰çˆ¶ SpanId çš„ Span å³ä¸ºæ ¹ Spanï¼Œå¯ä»¥çœ‹æˆè°ƒç”¨é“¾å…¥å£ã€‚æ‰€ä»¥è¦æŸ¥çœ‹æŸæ¬¡å®Œæ•´çš„è°ƒç”¨åªéœ€æ ¹æ® TraceId æŸ¥å‡ºæ‰€æœ‰è°ƒç”¨è®°å½•ï¼Œç„¶åé€šè¿‡çˆ¶ SpanId å’Œ SpanId ç»„ç»‡èµ·æ•´ä¸ªè°ƒç”¨çˆ¶å­å…³ç³»ã€‚äº‹å®ä¸Šï¼Œå›´ç»•å¦‚ä½•æ„å»º Trace å’Œ Span ä¹‹é—´ç»Ÿä¸€çš„å…³è”å…³ç³»ï¼Œä¸šç•Œä¹Ÿå­˜åœ¨ä¸€ä¸ªé€šç”¨çš„é“¾æ¥è·Ÿè¸ªåè®®ï¼Œè¿™å°±æ˜¯ OpenTracing åè®®ã€‚
2.OpenTracing åè®®å’Œåº”ç”¨æ–¹å¼ OpenTracing æ˜¯ä¸€ç§åè®®ï¼Œä¹Ÿä½¿ç”¨ä¸ä¸Šé¢ä»‹ç»çš„ç±»ä¼¼çš„æœ¯è¯­æ¥è¡¨ç¤ºé“¾è·¯è·Ÿè¸ªçš„è¿‡ç¨‹ã€‚é€šè¿‡æä¾›å¹³å°æ— å…³ã€å‚å•†æ— å…³çš„ APIï¼ŒOpenTracing ä½¿å¾—å¼€å‘äººå‘˜èƒ½å¤Ÿæ–¹ä¾¿çš„æ·»åŠ æˆ–æ›´æ¢é“¾è·¯è·Ÿè¸ªç³»ç»Ÿçš„å®ç°ã€‚ç›®å‰ï¼Œè¯¸å¦‚ Javaã€Goã€Python ç­‰ä¸»æµå¼€å‘è¯­è¨€éƒ½æä¾›äº†å¯¹ OpenTracing åè®®çš„æ”¯æŒã€‚">
<meta name="author" content="">

<link rel="stylesheet" type="text/css" href="/styles/main.css">

</head>

<body id="page">
    <header>
        <div class="nav-logo">
    <a href="http://yipsen.github.io/">
        
        <span class="nav-title">Yipsen Ye</span>
    </a>
</div>
<nav class="navbar justify-content-end">
    <ul class="nav-list">
        
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/posts/">æ–‡ç« </a>
        </li>
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/collections/">é™„è¡¨</a>
        </li>
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/about/">å…³äº</a>
        </li>
        
    </ul>
</nav>
    </header>
    <main id="content">
        
<div class="container"><aside>
    <div>
        
        
            
            
            <div class="post-category-icon"></div>
            <a href="/categories/shardingsphere%e6%a0%b8%e5%bf%83%e5%8e%9f%e7%90%86%e7%b2%be%e8%ae%b2/">ShardingSphereæ ¸å¿ƒåŸç†ç²¾è®²</a>
            <ul>
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/00-%E5%A6%82%E4%BD%95%E6%AD%A3%E7%A1%AE%E5%AD%A6%E4%B9%A0%E4%B8%80%E6%AC%BE%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8%E5%BC%80%E6%BA%90%E6%A1%86%E6%9E%B6/">00 å¦‚ä½•æ­£ç¡®å­¦ä¹ ä¸€æ¬¾åˆ†åº“åˆ†è¡¨å¼€æºæ¡†æ¶ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/01-%E4%BB%8E%E7%90%86%E8%AE%BA%E5%88%B0%E5%AE%9E%E8%B7%B5%E5%A6%82%E4%BD%95%E8%AE%A9%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8%E7%9C%9F%E6%AD%A3%E8%90%BD%E5%9C%B0/">01 ä»ç†è®ºåˆ°å®è·µï¼šå¦‚ä½•è®©åˆ†åº“åˆ†è¡¨çœŸæ­£è½åœ°ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/02-%E9%A1%B6%E7%BA%A7%E9%A1%B9%E7%9B%AEshardingsphere-%E6%98%AF%E4%B8%80%E6%AC%BE%E4%BB%80%E4%B9%88%E6%A0%B7%E7%9A%84-apache-%E5%BC%80%E6%BA%90%E8%BD%AF%E4%BB%B6/">02 é¡¶çº§é¡¹ç›®ï¼šShardingSphere æ˜¯ä¸€æ¬¾ä»€ä¹ˆæ ·çš„ Apache å¼€æºè½¯ä»¶ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/03-%E8%A7%84%E8%8C%83%E5%85%BC%E5%AE%B9jdbc-%E8%A7%84%E8%8C%83%E4%B8%8E-shardingsphere-%E6%98%AF%E4%BB%80%E4%B9%88%E5%85%B3%E7%B3%BB/">03 è§„èŒƒå…¼å®¹ï¼šJDBC è§„èŒƒä¸ ShardingSphere æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/04-%E5%BA%94%E7%94%A8%E9%9B%86%E6%88%90%E5%9C%A8%E4%B8%9A%E5%8A%A1%E7%B3%BB%E7%BB%9F%E4%B8%AD%E4%BD%BF%E7%94%A8-shardingsphere-%E7%9A%84%E6%96%B9%E5%BC%8F%E6%9C%89%E5%93%AA%E4%BA%9B/">04 åº”ç”¨é›†æˆï¼šåœ¨ä¸šåŠ¡ç³»ç»Ÿä¸­ä½¿ç”¨ ShardingSphere çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/05-%E9%85%8D%E7%BD%AE%E9%A9%B1%E5%8A%A8shardingsphere-%E4%B8%AD%E7%9A%84%E9%85%8D%E7%BD%AE%E4%BD%93%E7%B3%BB%E6%98%AF%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E7%9A%84/">05 é…ç½®é©±åŠ¨ï¼šShardingSphere ä¸­çš„é…ç½®ä½“ç³»æ˜¯å¦‚ä½•è®¾è®¡çš„ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/09-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%E5%BC%BA%E4%B8%80%E8%87%B4%E6%80%A7%E4%BA%8B%E5%8A%A1%E4%B8%8E%E6%9F%94%E6%80%A7%E4%BA%8B%E5%8A%A1/">09 åˆ†å¸ƒå¼äº‹åŠ¡ï¼šå¦‚ä½•ä½¿ç”¨å¼ºä¸€è‡´æ€§äº‹åŠ¡ä¸æŸ”æ€§äº‹åŠ¡ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/10-%E6%95%B0%E6%8D%AE%E8%84%B1%E6%95%8F%E5%A6%82%E4%BD%95%E7%A1%AE%E4%BF%9D%E6%95%8F%E6%84%9F%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AE%89%E5%85%A8%E8%AE%BF%E9%97%AE/">10 æ•°æ®è„±æ•ï¼šå¦‚ä½•ç¡®ä¿æ•æ„Ÿæ•°æ®çš„å®‰å…¨è®¿é—®ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/11-%E7%BC%96%E6%8E%92%E6%B2%BB%E7%90%86%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E5%88%86%E5%B8%83%E5%BC%8F%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84%E5%8A%A8%E6%80%81%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86/">11 ç¼–æ’æ²»ç†ï¼šå¦‚ä½•å®ç°åˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„åŠ¨æ€é…ç½®ç®¡ç†ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/12-%E4%BB%8E%E5%BA%94%E7%94%A8%E5%88%B0%E5%8E%9F%E7%90%86%E5%A6%82%E4%BD%95%E9%AB%98%E6%95%88%E9%98%85%E8%AF%BB-shardingsphere-%E6%BA%90%E7%A0%81/">12 ä»åº”ç”¨åˆ°åŸç†ï¼šå¦‚ä½•é«˜æ•ˆé˜…è¯» ShardingSphere æºç ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/13-%E5%BE%AE%E5%86%85%E6%A0%B8%E6%9E%B6%E6%9E%84shardingsphere-%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%89%A9%E5%B1%95%E6%80%A7/">13 å¾®å†…æ ¸æ¶æ„ï¼šShardingSphere å¦‚ä½•å®ç°ç³»ç»Ÿçš„æ‰©å±•æ€§ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/14-%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%BB%E9%94%AEshardingsphere-%E4%B8%AD%E6%9C%89%E5%93%AA%E4%BA%9B%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%BB%E9%94%AE%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F/">14 åˆ†å¸ƒå¼ä¸»é”®ï¼šShardingSphere ä¸­æœ‰å“ªäº›åˆ†å¸ƒå¼ä¸»é”®å®ç°æ–¹å¼ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/15-%E8%A7%A3%E6%9E%90%E5%BC%95%E6%93%8Esql-%E8%A7%A3%E6%9E%90%E6%B5%81%E7%A8%8B%E5%BA%94%E8%AF%A5%E5%8C%85%E6%8B%AC%E5%93%AA%E4%BA%9B%E6%A0%B8%E5%BF%83%E9%98%B6%E6%AE%B5%E4%B8%8A/">15 è§£æå¼•æ“ï¼šSQL è§£ææµç¨‹åº”è¯¥åŒ…æ‹¬å“ªäº›æ ¸å¿ƒé˜¶æ®µï¼Ÿï¼ˆä¸Šï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/16-%E8%A7%A3%E6%9E%90%E5%BC%95%E6%93%8Esql-%E8%A7%A3%E6%9E%90%E6%B5%81%E7%A8%8B%E5%BA%94%E8%AF%A5%E5%8C%85%E6%8B%AC%E5%93%AA%E4%BA%9B%E6%A0%B8%E5%BF%83%E9%98%B6%E6%AE%B5%E4%B8%8B/">16 è§£æå¼•æ“ï¼šSQL è§£ææµç¨‹åº”è¯¥åŒ…æ‹¬å“ªäº›æ ¸å¿ƒé˜¶æ®µï¼Ÿï¼ˆä¸‹ï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/17-%E8%B7%AF%E7%94%B1%E5%BC%95%E6%93%8E%E5%A6%82%E4%BD%95%E7%90%86%E8%A7%A3%E5%88%86%E7%89%87%E8%B7%AF%E7%94%B1%E6%A0%B8%E5%BF%83%E7%B1%BB-shardingrouter-%E7%9A%84%E8%BF%90%E4%BD%9C%E6%9C%BA%E5%88%B6/">17 è·¯ç”±å¼•æ“ï¼šå¦‚ä½•ç†è§£åˆ†ç‰‡è·¯ç”±æ ¸å¿ƒç±» ShardingRouter çš„è¿ä½œæœºåˆ¶ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/18-%E8%B7%AF%E7%94%B1%E5%BC%95%E6%93%8E%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE%E7%9A%84%E5%88%86%E7%89%87%E8%B7%AF%E7%94%B1%E5%92%8C%E5%B9%BF%E6%92%AD%E8%B7%AF%E7%94%B1/">18 è·¯ç”±å¼•æ“ï¼šå¦‚ä½•å®ç°æ•°æ®è®¿é—®çš„åˆ†ç‰‡è·¯ç”±å’Œå¹¿æ’­è·¯ç”±ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/19-%E8%B7%AF%E7%94%B1%E5%BC%95%E6%93%8E%E5%A6%82%E4%BD%95%E5%9C%A8%E8%B7%AF%E7%94%B1%E8%BF%87%E7%A8%8B%E4%B8%AD%E9%9B%86%E6%88%90%E5%A4%9A%E7%A7%8D%E8%B7%AF%E7%94%B1%E7%AD%96%E7%95%A5%E5%92%8C%E8%B7%AF%E7%94%B1%E7%AE%97%E6%B3%95/">19 è·¯ç”±å¼•æ“ï¼šå¦‚ä½•åœ¨è·¯ç”±è¿‡ç¨‹ä¸­é›†æˆå¤šç§è·¯ç”±ç­–ç•¥å’Œè·¯ç”±ç®—æ³•ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/20-%E6%94%B9%E5%86%99%E5%BC%95%E6%93%8E%E5%A6%82%E4%BD%95%E7%90%86%E8%A7%A3%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F%E4%B8%8B%E7%9A%84-sql-%E6%94%B9%E5%86%99%E5%AE%9E%E7%8E%B0%E6%9C%BA%E5%88%B6/">20 æ”¹å†™å¼•æ“ï¼šå¦‚ä½•ç†è§£è£…é¥°å™¨æ¨¡å¼ä¸‹çš„ SQL æ”¹å†™å®ç°æœºåˆ¶ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/21-%E6%89%A7%E8%A1%8C%E5%BC%95%E6%93%8E%E5%88%86%E7%89%87%E7%8E%AF%E5%A2%83%E4%B8%8B-sql-%E6%89%A7%E8%A1%8C%E7%9A%84%E6%95%B4%E4%BD%93%E6%B5%81%E7%A8%8B%E5%BA%94%E8%AF%A5%E5%A6%82%E4%BD%95%E8%BF%9B%E8%A1%8C%E6%8A%BD%E8%B1%A1/">21 æ‰§è¡Œå¼•æ“ï¼šåˆ†ç‰‡ç¯å¢ƒä¸‹ SQL æ‰§è¡Œçš„æ•´ä½“æµç¨‹åº”è¯¥å¦‚ä½•è¿›è¡ŒæŠ½è±¡ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/22-%E6%89%A7%E8%A1%8C%E5%BC%95%E6%93%8E%E5%A6%82%E4%BD%95%E6%8A%8A%E6%8F%A1-shardingsphere-%E4%B8%AD%E7%9A%84-executor-%E6%89%A7%E8%A1%8C%E6%A8%A1%E5%9E%8B%E4%B8%8A/">22 æ‰§è¡Œå¼•æ“ï¼šå¦‚ä½•æŠŠæ¡ ShardingSphere ä¸­çš„ Executor æ‰§è¡Œæ¨¡å‹ï¼Ÿï¼ˆä¸Šï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/23-%E6%89%A7%E8%A1%8C%E5%BC%95%E6%93%8E%E5%A6%82%E4%BD%95%E6%8A%8A%E6%8F%A1-shardingsphere-%E4%B8%AD%E7%9A%84-executor-%E6%89%A7%E8%A1%8C%E6%A8%A1%E5%9E%8B%E4%B8%8B/">23 æ‰§è¡Œå¼•æ“ï¼šå¦‚ä½•æŠŠæ¡ ShardingSphere ä¸­çš„ Executor æ‰§è¡Œæ¨¡å‹ï¼Ÿï¼ˆä¸‹ï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/24-%E5%BD%92%E5%B9%B6%E5%BC%95%E6%93%8E%E5%A6%82%E4%BD%95%E7%90%86%E8%A7%A3%E6%95%B0%E6%8D%AE%E5%BD%92%E5%B9%B6%E7%9A%84%E7%B1%BB%E5%9E%8B%E4%BB%A5%E5%8F%8A%E7%AE%80%E5%8D%95%E5%BD%92%E5%B9%B6%E7%AD%96%E7%95%A5%E7%9A%84%E5%AE%9E%E7%8E%B0%E8%BF%87%E7%A8%8B/">24 å½’å¹¶å¼•æ“ï¼šå¦‚ä½•ç†è§£æ•°æ®å½’å¹¶çš„ç±»å‹ä»¥åŠç®€å•å½’å¹¶ç­–ç•¥çš„å®ç°è¿‡ç¨‹ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/25-%E5%BD%92%E5%B9%B6%E5%BC%95%E6%93%8E%E5%A6%82%E4%BD%95%E7%90%86%E8%A7%A3%E6%B5%81%E5%BC%8F%E5%BD%92%E5%B9%B6%E5%92%8C%E5%86%85%E5%AD%98%E5%BD%92%E5%B9%B6%E5%9C%A8%E5%A4%8D%E6%9D%82%E5%BD%92%E5%B9%B6%E5%9C%BA%E6%99%AF%E4%B8%8B%E7%9A%84%E5%BA%94%E7%94%A8%E6%96%B9%E5%BC%8F/">25 å½’å¹¶å¼•æ“ï¼šå¦‚ä½•ç†è§£æµå¼å½’å¹¶å’Œå†…å­˜å½’å¹¶åœ¨å¤æ‚å½’å¹¶åœºæ™¯ä¸‹çš„åº”ç”¨æ–¹å¼ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/26-%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB%E6%99%AE%E9%80%9A%E4%B8%BB%E4%BB%8E%E6%9E%B6%E6%9E%84%E5%92%8C%E5%88%86%E7%89%87%E4%B8%BB%E4%BB%8E%E6%9E%B6%E6%9E%84%E5%88%86%E5%88%AB%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84/">26 è¯»å†™åˆ†ç¦»ï¼šæ™®é€šä¸»ä»æ¶æ„å’Œåˆ†ç‰‡ä¸»ä»æ¶æ„åˆ†åˆ«æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/27-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E5%A6%82%E4%BD%95%E7%90%86%E8%A7%A3-shardingsphere-%E4%B8%AD%E5%AF%B9%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E7%9A%84%E6%8A%BD%E8%B1%A1%E8%BF%87%E7%A8%8B/">27 åˆ†å¸ƒå¼äº‹åŠ¡ï¼šå¦‚ä½•ç†è§£ ShardingSphere ä¸­å¯¹åˆ†å¸ƒå¼äº‹åŠ¡çš„æŠ½è±¡è¿‡ç¨‹ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/28-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1shardingsphere-%E4%B8%AD%E5%A6%82%E4%BD%95%E9%9B%86%E6%88%90%E5%BC%BA%E4%B8%80%E8%87%B4%E6%80%A7%E4%BA%8B%E5%8A%A1%E5%92%8C%E6%9F%94%E6%80%A7%E4%BA%8B%E5%8A%A1%E6%94%AF%E6%8C%81%E4%B8%8A/">28 åˆ†å¸ƒå¼äº‹åŠ¡ï¼šShardingSphere ä¸­å¦‚ä½•é›†æˆå¼ºä¸€è‡´æ€§äº‹åŠ¡å’ŒæŸ”æ€§äº‹åŠ¡æ”¯æŒï¼Ÿï¼ˆä¸Šï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/29-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1shardingsphere-%E4%B8%AD%E5%A6%82%E4%BD%95%E9%9B%86%E6%88%90%E5%BC%BA%E4%B8%80%E8%87%B4%E6%80%A7%E4%BA%8B%E5%8A%A1%E5%92%8C%E6%9F%94%E6%80%A7%E4%BA%8B%E5%8A%A1%E6%94%AF%E6%8C%81%E4%B8%8B/">29 åˆ†å¸ƒå¼äº‹åŠ¡ï¼šShardingSphere ä¸­å¦‚ä½•é›†æˆå¼ºä¸€è‡´æ€§äº‹åŠ¡å’ŒæŸ”æ€§äº‹åŠ¡æ”¯æŒï¼Ÿï¼ˆä¸‹ï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/30-%E6%95%B0%E6%8D%AE%E8%84%B1%E6%95%8F%E5%A6%82%E4%BD%95%E5%9F%BA%E4%BA%8E%E6%94%B9%E5%86%99%E5%BC%95%E6%93%8E%E5%AE%9E%E7%8E%B0%E4%BD%8E%E4%BE%B5%E5%85%A5%E6%80%A7%E6%95%B0%E6%8D%AE%E8%84%B1%E6%95%8F%E6%96%B9%E6%A1%88/">30 æ•°æ®è„±æ•ï¼šå¦‚ä½•åŸºäºæ”¹å†™å¼•æ“å®ç°ä½ä¾µå…¥æ€§æ•°æ®è„±æ•æ–¹æ¡ˆï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/31-%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83%E5%A6%82%E4%BD%95%E5%9F%BA%E4%BA%8E%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83%E5%AE%9E%E7%8E%B0%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF%E7%9A%84%E5%8A%A8%E6%80%81%E5%8C%96%E7%AE%A1%E7%90%86/">31 é…ç½®ä¸­å¿ƒï¼šå¦‚ä½•åŸºäºé…ç½®ä¸­å¿ƒå®ç°é…ç½®ä¿¡æ¯çš„åŠ¨æ€åŒ–ç®¡ç†ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/32-%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E5%A6%82%E4%BD%95%E5%9F%BA%E4%BA%8E%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BF%E9%97%AE%E7%86%94%E6%96%AD%E6%9C%BA%E5%88%B6/">32 æ³¨å†Œä¸­å¿ƒï¼šå¦‚ä½•åŸºäºæ³¨å†Œä¸­å¿ƒå®ç°æ•°æ®åº“è®¿é—®ç†”æ–­æœºåˆ¶ï¼Ÿ</a></li>
                
                
                
                    <li>33 é“¾è·¯è·Ÿè¸ªï¼šå¦‚ä½•åŸºäº Hook æœºåˆ¶ä»¥åŠ OpenTracing åè®®å®ç°æ•°æ®è®¿é—®é“¾è·¯è·Ÿè¸ªï¼Ÿ</li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/35-%E7%BB%93%E8%AF%ADshardingsphere-%E6%80%BB%E7%BB%93%E5%8F%8A%E5%B1%95%E6%9C%9B/">35 ç»“è¯­ï¼šShardingSphere æ€»ç»“åŠå±•æœ›</a></li>
                
                
            </ul>
        
    </div>
</aside>

<style>
    aside {
        position: fixed;
        left: 20px;
        background: #ffdee3;
        border-radius: 6px;
        padding: 20px;
        padding-top: 60px;
        box-shadow: 5px 10px #888;
        list-style-type: none;
        display: none;
    }

    .post-category-icon {
        position: absolute;
        width: 80px;
        height: 80px;
        top: -40px;
        left: 50%;
        margin-left: -40px;
        text-align: center;
        font-size: 36px;
        content: 'J';
        background: #ffdee3;
        border-radius: 100%;
        border: 10px solid #fff;
        box-shadow: 5px 10px #888;
    }
</style><article class="post-block">
        <h1 class="post-title">33 é“¾è·¯è·Ÿè¸ªï¼šå¦‚ä½•åŸºäº Hook æœºåˆ¶ä»¥åŠ OpenTracing åè®®å®ç°æ•°æ®è®¿é—®é“¾è·¯è·Ÿè¸ªï¼Ÿ</h1>
        <div class="post-info">
            <div class="post-date"> 
                <span>2021-12-22 01:56:13</span>
            </div>
        </div>
        <div class="post-content">
            <p>ä»Šå¤©æˆ‘ä»¬æ¥è®¨è®º ShardingSphere ä¸­å…³äºç¼–æ’æ²»ç†çš„å¦ä¸€ä¸ªä¸»é¢˜ï¼Œå³é“¾è·¯è·Ÿè¸ªã€‚åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿå¼€å‘è¿‡ç¨‹ä¸­ï¼Œé“¾è·¯è·Ÿè¸ªæ˜¯ä¸€é¡¹åŸºç¡€è®¾æ–½ç±»çš„åŠŸèƒ½ã€‚ä½œä¸ºä¸€æ¬¾åˆ†å¸ƒå¼æ•°æ®åº“ä¸­é—´ä»¶ï¼ŒShardingSphere ä¸­ä¹Ÿå†…ç½®äº†ç®€å•è€Œå®Œæ•´çš„é“¾è·¯è·Ÿè¸ªæœºåˆ¶ã€‚</p>
<h3 id="é“¾è·¯è·Ÿè¸ªåŸºæœ¬åŸç†å’Œå·¥å…·">é“¾è·¯è·Ÿè¸ªåŸºæœ¬åŸç†å’Œå·¥å…·</h3>
<p>åœ¨ä»‹ç»å…·ä½“çš„å®ç°è¿‡ç¨‹ä¹‹å‰ï¼Œæˆ‘ä»¬æœ‰å¿…è¦å…ˆæ¥äº†è§£ä¸€äº›å…³äºé“¾è·¯è·Ÿè¸ªçš„ç†è®ºçŸ¥è¯†ã€‚</p>
<h4 id="1é“¾è·¯è·Ÿè¸ªåŸºæœ¬åŸç†">1.é“¾è·¯è·Ÿè¸ªåŸºæœ¬åŸç†</h4>
<p>åˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„æœåŠ¡è·Ÿè¸ªåŸç†ä¸Šå®é™…ä¸Šå¹¶ä¸å¤æ‚ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦å¼•å…¥ä¸¤ä¸ªåŸºæœ¬æ¦‚å¿µï¼Œå³ TraceId å’Œ SpanIdã€‚</p>
<ul>
<li><strong>TraceId</strong></li>
</ul>
<p>TraceId å³è·Ÿè¸ª Idã€‚åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œæ¯ä¸ªè¯·æ±‚ç”Ÿæˆä¸€ä¸ªå…¨å±€çš„å”¯ä¸€æ€§ Idï¼Œé€šè¿‡è¿™ä¸ª Id å¯ä»¥ä¸²è”èµ·æ•´ä¸ªè°ƒç”¨é“¾ï¼Œä¹Ÿå°±æ˜¯è¯´è¯·æ±‚åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿå†…éƒ¨æµè½¬æ—¶ï¼Œç³»ç»Ÿéœ€è¦å§‹ç»ˆä¿æŒä¼ é€’å…¶å”¯ä¸€æ€§ Idï¼Œç›´åˆ°è¯·æ±‚è¿”å›ï¼Œè¿™ä¸ªå”¯ä¸€æ€§ Id å°±æ˜¯ TraceIdã€‚</p>
<ul>
<li><strong>SpanId</strong></li>
</ul>
<p>é™¤äº† TraceId å¤–ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ SpanIdï¼ŒSpanId ä¸€èˆ¬è¢«ç§°ä¸ºè·¨åº¦ Idã€‚å½“è¯·æ±‚åˆ°è¾¾å„ä¸ªæœåŠ¡ç»„ä»¶æ—¶ï¼Œé€šè¿‡ SpanId æ¥æ ‡è¯†å®ƒçš„å¼€å§‹ã€å…·ä½“æ‰§è¡Œè¿‡ç¨‹å’Œç»“æŸã€‚å¯¹äºæ¯ä¸ª Span è€Œè¨€ï¼Œå®ƒå¿…é¡»æœ‰å¼€å§‹å’Œç»“æŸä¸¤ä¸ªèŠ‚ç‚¹ï¼Œé€šè¿‡è®°å½•å¼€å§‹ Span å’Œç»“æŸ Span çš„æ—¶é—´æˆ³ç»Ÿè®¡å…¶ Span çš„æ—¶é—´å»¶è¿Ÿã€‚</p>
<p>æ•´ä¸ªè°ƒç”¨è¿‡ç¨‹ä¸­æ¯ä¸ªè¯·æ±‚éƒ½è¦é€ä¼  TraceId å’Œ SpanIdã€‚æ¯ä¸ªæœåŠ¡å°†è¯¥æ¬¡è¯·æ±‚é™„å¸¦çš„ SpanId ä½œä¸ºçˆ¶ SpanId è¿›è¡Œè®°å½•ï¼Œå¹¶ä¸”ç”Ÿæˆè‡ªå·±çš„ SpanIdã€‚ä¸€ä¸ªæ²¡æœ‰çˆ¶ SpanId çš„ Span å³ä¸ºæ ¹ Spanï¼Œå¯ä»¥çœ‹æˆè°ƒç”¨é“¾å…¥å£ã€‚æ‰€ä»¥è¦æŸ¥çœ‹æŸæ¬¡å®Œæ•´çš„è°ƒç”¨åªéœ€æ ¹æ® TraceId æŸ¥å‡ºæ‰€æœ‰è°ƒç”¨è®°å½•ï¼Œç„¶åé€šè¿‡çˆ¶ SpanId å’Œ SpanId ç»„ç»‡èµ·æ•´ä¸ªè°ƒç”¨çˆ¶å­å…³ç³»ã€‚äº‹å®ä¸Šï¼Œå›´ç»•å¦‚ä½•æ„å»º Trace å’Œ Span ä¹‹é—´ç»Ÿä¸€çš„å…³è”å…³ç³»ï¼Œä¸šç•Œä¹Ÿå­˜åœ¨ä¸€ä¸ªé€šç”¨çš„é“¾æ¥è·Ÿè¸ªåè®®ï¼Œè¿™å°±æ˜¯ OpenTracing åè®®ã€‚</p>
<h4 id="2opentracing-åè®®å’Œåº”ç”¨æ–¹å¼">2.OpenTracing åè®®å’Œåº”ç”¨æ–¹å¼</h4>
<p>OpenTracing æ˜¯ä¸€ç§åè®®ï¼Œä¹Ÿä½¿ç”¨ä¸ä¸Šé¢ä»‹ç»çš„ç±»ä¼¼çš„æœ¯è¯­æ¥è¡¨ç¤ºé“¾è·¯è·Ÿè¸ªçš„è¿‡ç¨‹ã€‚é€šè¿‡æä¾›å¹³å°æ— å…³ã€å‚å•†æ— å…³çš„ APIï¼ŒOpenTracing ä½¿å¾—å¼€å‘äººå‘˜èƒ½å¤Ÿæ–¹ä¾¿çš„æ·»åŠ æˆ–æ›´æ¢é“¾è·¯è·Ÿè¸ªç³»ç»Ÿçš„å®ç°ã€‚ç›®å‰ï¼Œè¯¸å¦‚ Javaã€Goã€Python ç­‰ä¸»æµå¼€å‘è¯­è¨€éƒ½æä¾›äº†å¯¹ OpenTracing åè®®çš„æ”¯æŒã€‚</p>
<p>æˆ‘ä»¬ä»¥ Java è¯­è¨€ä¸ºä¾‹æ¥ä»‹ç» OpenTracing åè®®çš„åº”ç”¨æ–¹å¼ï¼ŒOpenTracing API ä¸­å­˜åœ¨ç›¸äº’å…³è”çš„æœ€é‡è¦çš„å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯ Tracer å’Œ Span æ¥å£ã€‚</p>
<p>å¯¹äº Tracer æ¥å£è€Œè¨€ï¼Œæœ€é‡è¦å°±æ˜¯å¦‚ä¸‹æ‰€ç¤ºçš„ buildSpan æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ç”¨æ¥æ ¹æ®æŸä¸€ä¸ªæ“ä½œåˆ›å»ºä¸€ä¸ª Span å¯¹è±¡ï¼š</p>
<pre tabindex="0"><code>SpanBuilder buildSpan(String operationName);
</code></pre><p>æˆ‘ä»¬çœ‹åˆ°ä¸Šè¿° buildSpan æ–¹æ³•è¿”å›çš„å®é™…ä¸Šæ˜¯ä¸€ä¸ª SpanBuilder å¯¹è±¡ï¼Œè€Œ SpanBuilder ä¸­åˆ™å­˜åœ¨ä¸€ç»„ withTag é‡è½½æ–¹æ³•ï¼Œç”¨äºä¸ºå½“å‰ Span æ·»åŠ ä¸€ä¸ªæ ‡ç­¾ã€‚æ ‡ç­¾çš„ä½œç”¨æ˜¯ä¾›ç”¨æˆ·è¿›è¡Œè‡ªå®šä¹‰ï¼Œå¯ä»¥ç”¨æ¥æ£€ç´¢æŸ¥è¯¢çš„æ ‡è®°ï¼Œæ˜¯ä¸€ç»„é”®å€¼å¯¹ã€‚withTag æ–¹æ³•çš„å…¶ä¸­ä¸€ç§å®šä¹‰å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre tabindex="0"><code>SpanBuilder withTag(String key, String value);
</code></pre><p>æˆ‘ä»¬å¯ä»¥ä¸ºä¸€ä¸ª Span æ·»åŠ å¤šä¸ª Tagï¼Œå½“æŠŠ Tag æ·»åŠ å®Œæ¯•ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥è°ƒç”¨å¦‚ä¸‹æ‰€ç¤ºçš„ start æ–¹æ³•æ¥å¯åŠ¨è¿™ä¸ª Spanï¼š</p>
<pre tabindex="0"><code>Span start();
</code></pre><p>æ³¨æ„è¿™ä¸ªæ–¹æ³•ä¼šè¿”å›ä¸€ä¸ª Span å¯¹è±¡ï¼Œä¸€æ—¦è·å–äº† Span å¯¹è±¡ï¼Œæˆ‘ä»¬å°±å¯ä»¥è°ƒç”¨è¯¥å¯¹è±¡ä¸­çš„ finish æ–¹æ³•æ¥ç»“æŸè¿™ä¸ª Spanï¼Œè¯¥æ–¹æ³•ä¼šä¸º Span è‡ªåŠ¨å¡«å……ç»“æŸæ—¶é—´ï¼š</p>
<pre tabindex="0"><code>void finish();
</code></pre><p>åŸºäºä»¥ä¸Š OpenTracing API çš„ä»‹ç»ï¼Œåœ¨æ—¥å¸¸å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬åœ¨ä¸šåŠ¡ä»£ç ä¸­åµŒå…¥é“¾è·¯è·Ÿè¸ªçš„å¸¸è§å®ç°æ–¹æ³•å¯ä»¥ç”¨å¦‚ä¸‹æ‰€ç¤ºçš„ä»£ç ç‰‡æ®µè¿›è¡ŒæŠ½è±¡ï¼š</p>
<pre tabindex="0"><code>//ä» OpenTracing è§„èŒƒçš„å®ç°æ¡†æ¶ä¸­è·å– Tracer å¯¹è±¡

Tracer tracer = new XXXTracer();

//åˆ›å»ºä¸€ä¸ª Span å¹¶å¯åŠ¨

Span span = tracer.buildSpan(&quot;test&quot;).start();

//æ·»åŠ æ ‡ç­¾åˆ° Span ä¸­

span.setTag(Tags.COMPONENT, &quot;test -application&quot;);

//æ‰§è¡Œç›¸å…³ä¸šåŠ¡é€»è¾‘

//å®Œæˆ Span

span.finish();

//å¯ä»¥æ ¹æ®éœ€è¦è·å– Span ä¸­çš„ç›¸å…³ä¿¡æ¯

System.out.println(&quot;Operation name = &quot; + span.operationName());

System.out.println(&quot;Start = &quot; + span.startMicros());

System.out.println(&quot;Finish = &quot; + span.finishMicros());
</code></pre><p>äº‹å®ä¸Šï¼ŒShardingSphere é›†æˆ OpenTracing API çš„åšæ³•åŸºæœ¬ä¸ä¸Šè¿°æ–¹æ³•ç±»ä¼¼ï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ¥çœ‹ä¸€ä¸‹ã€‚</p>
<h3 id="shardingsphere-ä¸­çš„é“¾è·¯è·Ÿè¸ª">ShardingSphere ä¸­çš„é“¾è·¯è·Ÿè¸ª</h3>
<p>å¯¹äº ShardingSphere è€Œè¨€ï¼Œæ¡†æ¶æœ¬èº«å¹¶ä¸è´Ÿè´£å¦‚ä½•é‡‡é›†ã€å­˜å‚¨ä»¥åŠå±•ç¤ºåº”ç”¨æ€§èƒ½ç›‘æ§çš„ç›¸å…³æ•°æ®ï¼Œè€Œæ˜¯å°†æ•´ä¸ªæ•°æ®åˆ†ç‰‡å¼•æ“ä¸­æœ€æ ¸å¿ƒçš„ SQL è§£æä¸ SQL æ‰§è¡Œç›¸å…³ä¿¡æ¯å‘é€è‡³åº”ç”¨æ€§èƒ½ç›‘æ§ç³»ç»Ÿï¼Œå¹¶äº¤ç”±å…¶å¤„ç†ã€‚</p>
<p>æ¢å¥è¯è¯´ï¼ŒShardingSphere ä»…è´Ÿè´£äº§ç”Ÿå…·æœ‰ä»·å€¼çš„æ•°æ®ï¼Œå¹¶é€šè¿‡æ ‡å‡†åè®®é€’äº¤è‡³ç¬¬ä¸‰æ–¹ç³»ç»Ÿï¼Œè€Œä¸å¯¹è¿™äº›æ•°æ®åšäºŒæ¬¡å¤„ç†ã€‚</p>
<p>ShardingSphere ä½¿ç”¨ OpenTracing API å‘é€æ€§èƒ½è¿½è¸ªæ•°æ®ã€‚æ”¯æŒ OpenTracing åè®®çš„å…·ä½“äº§å“éƒ½å¯ä»¥å’Œ ShardingSphere è‡ªåŠ¨å¯¹æ¥ï¼Œæ¯”å¦‚å¸¸è§çš„ SkyWalkingã€Zipkin å’ŒJaegerã€‚åœ¨ ShardingSphere ä¸­ï¼Œä½¿ç”¨è¿™äº›å…·ä½“äº§å“çš„æ–¹å¼åªéœ€è¦åœ¨å¯åŠ¨æ—¶é…ç½® OpenTracing åè®®çš„å®ç°è€…å³å¯ã€‚</p>
<h4 id="1é€šè¿‡-shardingtracer-è·å–-tracer-ç±»">1.é€šè¿‡ ShardingTracer è·å– Tracer ç±»</h4>
<p>ShardingSphere ä¸­ï¼Œæ‰€æœ‰å…³äºé“¾è·¯è·Ÿè¸ªçš„ä»£ç éƒ½ä½äº sharding-opentracing å·¥ç¨‹ä¸­ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹ ShardingTracer ç±»ï¼Œè¯¥ç±»çš„ init æ–¹æ³•å®Œæˆäº† OpenTracing åè®®å®ç°ç±»çš„åˆå§‹åŒ–ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre tabindex="0"><code>public static void init() {

         //ä»ç¯å¢ƒå˜é‡ä¸­è·å– OpenTracing åè®®çš„å®ç°ç±»é…ç½®

        String tracerClassName = System.getProperty(OPENTRACING_TRACER_CLASS_NAME);

        Preconditions.checkNotNull(tracerClassName, &quot;Can not find opentracing tracer implementation class via system property `%s`&quot;, OPENTRACING_TRACER_CLASS_NAME);

        try {

             //åˆå§‹åŒ– OpenTracing åè®®çš„å®ç°ç±»

            init((Tracer) Class.forName(tracerClassName).newInstance());

        } catch (final ReflectiveOperationException ex) {

            throw new ShardingException(&quot;Initialize opentracing tracer class failure.&quot;, ex);

        }

}
</code></pre><p>æˆ‘ä»¬é€šè¿‡é…ç½®çš„ OPENTRACING_TRACER_CLASS_NAME è·å– OpenTracing åè®®å®ç°ç±»çš„ç±»åï¼Œç„¶åé€šè¿‡åå°„åˆ›å»ºäº†å®ä¾‹ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥é…ç½®è¯¥ç±»ä¸ºå¦‚ä¸‹æ‰€ç¤ºçš„ Skywalking æ¡†æ¶ä¸­çš„ SkywalkingTracer ç±»ï¼š</p>
<pre tabindex="0"><code>org.apache.shardingsphere.opentracing.tracer.class=org.apache.skywalking.apm.toolkit.opentracing.SkywalkingTracer
</code></pre><p>å½“ç„¶ï¼ŒShardingTracer ç±»ä¹Ÿæä¾›äº†é€šè¿‡ç›´æ¥æ³¨å…¥ OpenTracing åè®®å®ç°ç±»çš„æ–¹æ³•æ¥è¿›è¡Œåˆå§‹åŒ–ã€‚å®é™…ä¸Šä¸Šè¿° init æ–¹æ³•æœ€ç»ˆä¹Ÿæ˜¯è°ƒç”¨äº†å¦‚ä¸‹æ‰€ç¤ºçš„ init é‡è½½æ–¹æ³•ï¼š</p>
<pre tabindex="0"><code>public static void init(final Tracer tracer) {

        if (!GlobalTracer.isRegistered()) {

            GlobalTracer.register(tracer);

        }

}
</code></pre><p>è¯¥æ–¹æ³•æŠŠ Tracer å¯¹è±¡å­˜æ”¾åˆ°å…¨å±€çš„ GlobalTracer ä¸­ã€‚GlobalTracer æ˜¯ OpenTracing API æä¾›çš„ä¸€ä¸ªå·¥å…·ç±»ï¼Œä½¿ç”¨è®¾è®¡æ¨¡å¼ä¸­çš„å•ä¾‹æ¨¡å¼æ¥å­˜å‚¨ä¸€ä¸ªå…¨å±€æ€§çš„ Tracer å¯¹è±¡ã€‚å®ƒçš„å˜é‡å®šä¹‰ã€register æ–¹æ³•ä»¥åŠ get æ–¹æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre tabindex="0"><code>private static final GlobalTracer INSTANCE = new GlobalTracer();

public static synchronized void register(final Tracer tracer) {

        if (tracer == null) {

            throw new NullPointerException(&quot;Cannot register GlobalTracer &lt;null&gt;.&quot;);

        }

        if (tracer instanceof GlobalTracer) {

            LOGGER.log(Level.FINE, &quot;Attempted to register the GlobalTracer as delegate of itself.&quot;);

            return; // no-op

        }

        if (isRegistered() &amp;&amp; !GlobalTracer.tracer.equals(tracer)) {

            throw new IllegalStateException(&quot;There is already a current global Tracer registered.&quot;);

        }

        GlobalTracer.tracer = tracer;

}

 

public static Tracer get() {

        return INSTANCE;

}
</code></pre><p>é‡‡ç”¨è¿™ç§æ–¹å¼ï¼Œåˆå§‹åŒ–å¯ä»¥é‡‡ç”¨å¦‚ä¸‹æ–¹æ³•ï¼š</p>
<pre tabindex="0"><code>ShardingTracer.init(new SkywalkingTracer());
</code></pre><p>è€Œè·å–å…·ä½“ Tracer å¯¹è±¡çš„æ–¹æ³•åˆ™ç›´æ¥è°ƒç”¨ GlobalTracer çš„åŒåæ–¹æ³•å³å¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre tabindex="0"><code>public static Tracer get() {

        return GlobalTracer.get();

}
</code></pre><h4 id="2åŸºäº-hook-æœºåˆ¶å¡«å……-span">2.åŸºäº Hook æœºåˆ¶å¡«å…… Span</h4>
<p>ä¸€æ—¦è·å– Tracer å¯¹è±¡ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨è¯¥å¯¹è±¡æ¥æ„å»ºå„ç§ Spanã€‚ShardingSphere é‡‡ç”¨äº†Hook æœºåˆ¶æ¥å¡«å…… Spanã€‚è¯´é“ Hook æœºåˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥å›æƒ³ã€Š15 | è§£æå¼•æ“ï¼šSQL è§£ææµç¨‹åº”è¯¥åŒ…æ‹¬å“ªäº›æ ¸å¿ƒé˜¶æ®µï¼ˆä¸Šï¼‰ï¼Ÿã€‹ä¸­çš„ç›¸å…³å†…å®¹ï¼Œåœ¨å¦‚ä¸‹æ‰€ç¤ºçš„ SQLParseEngine ç±»çš„ parse æ–¹æ³•ä¸­ç”¨åˆ°äº† ParseHookï¼š</p>
<pre tabindex="0"><code>public SQLStatement parse(final String sql, final boolean useCache) {

    //åŸºäº Hook æœºåˆ¶è¿›è¡Œç›‘æ§å’Œè·Ÿè¸ª

        ParsingHook parsingHook = new SPIParsingHook();

        parsingHook.start(sql);

        try {

           //å®Œæˆ SQL çš„è§£æï¼Œå¹¶è¿”å›ä¸€ä¸ª SQLStatement å¯¹è±¡

            SQLStatement result = parse0(sql, useCache);

            parsingHook.finishSuccess(result);

            return result;

        } catch (final Exception ex) {

            parsingHook.finishFailure(ex);

            throw ex;

        }

}
</code></pre><p>æ³¨æ„åˆ°ä¸Šè¿°ä»£ç ä¸­åˆ›å»ºäº†ä¸€ä¸ª SPIParsingHookï¼Œå¹¶å®ç°äº† ParsingHook æ¥å£ï¼Œè¯¥æ¥å£çš„å®šä¹‰å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre tabindex="0"><code>public interface ParsingHook {

    

    //å¼€å§‹ Parse æ—¶è¿›è¡Œ Hook

    void start(String sql);

    

    //æˆåŠŸå®Œæˆ Parse æ—¶è¿›è¡Œ Hook

    void finishSuccess(SQLStatement sqlStatement);

    

    //Parse å¤±è´¥æ—¶è¿›è¡Œ Hook

    void finishFailure(Exception cause);

}
</code></pre><p>SPIParsingHook å®é™…ä¸Šæ˜¯ä¸€ç§å®¹å™¨ç±»ï¼Œå°†æ‰€æœ‰åŒç±»å‹çš„ Hook é€šè¿‡ SPI æœºåˆ¶è¿›è¡Œå®ä¾‹åŒ–å¹¶ç»Ÿä¸€è°ƒç”¨ï¼ŒSPIParsingHook çš„å®ç°æ–¹å¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre tabindex="0"><code>public final class SPIParsingHook implements ParsingHook {

    

    private final Collection&lt;ParsingHook&gt; parsingHooks = NewInstanceServiceLoader.newServiceInstances(ParsingHook.class);

    

    static {

        NewInstanceServiceLoader.register(ParsingHook.class);

    }

    

    @Override

    public void start(final String sql) {

        for (ParsingHook each : parsingHooks) {

            each.start(sql);

        }

    }

    

    @Override

    public void finishSuccess(final SQLStatement sqlStatement, final ShardingTableMetaData shardingTableMetaData) {

        for (ParsingHook each : parsingHooks) {

            each.finishSuccess(sqlStatement, shardingTableMetaData);

        }

    }

    

    @Override

    public void finishFailure(final Exception cause) {

        for (ParsingHook each : parsingHooks) {

            each.finishFailure(cause);

        }

    }

}
</code></pre><p>è¿™é‡Œï¼Œæˆ‘ä»¬çœ‹åˆ°äº†ç†Ÿæ‚‰çš„ NewInstanceServiceLoader å·¥å…·ç±»ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬ä¸€æ—¦å®ç°äº† ParsingHookï¼Œå°±ä¼šåœ¨æ‰§è¡Œ SQLParseEngine ç±»çš„ parse æ–¹æ³•æ—¶å°† Hook ç›¸å…³çš„åŠŸèƒ½åµŒå…¥åˆ°ç³»ç»Ÿçš„æ‰§è¡Œæµç¨‹ä¸­ã€‚</p>
<p>å¦å¤–ï¼ŒOpenTracingParsingHook åŒæ ·å®ç°äº† ParsingHook æ¥å£ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre tabindex="0"><code>public final class OpenTracingParsingHook implements ParsingHook {

    

    private static final String OPERATION_NAME = &quot;/&quot; + ShardingTags.COMPONENT_NAME + &quot;/parseSQL/&quot;;

    

    private Span span;

    

    @Override

    public void start(final String sql) {

         //åˆ›å»º Span å¹¶è®¾ç½® Tag

        span = ShardingTracer.get().buildSpan(OPERATION_NAME)

                .withTag(Tags.COMPONENT.getKey(), ShardingTags.COMPONENT_NAME)

                .withTag(Tags.SPAN_KIND.getKey(), Tags.SPAN_KIND_CLIENT)

                .withTag(Tags.DB_STATEMENT.getKey(), sql).startManual();

    }

    

    @Override

    public void finishSuccess(final SQLStatement sqlStatement) {

         //æˆåŠŸæ—¶å®Œæˆ Span

        span.finish();

    }

    

    @Override

    public void finishFailure(final Exception cause) {

         //å¤±è´¥æ—¶å®Œæˆ Spanï¼ˆ

        ShardingErrorSpan.setError(span, cause);

        span.finish();

    }

}
</code></pre><p>æˆ‘ä»¬çŸ¥é“ Tracer ç±»æä¾›äº† buildSpan æ–¹æ³•åˆ›å»ºè‡ªå®šä¹‰çš„ Span å¹¶å¯ä»¥é€šè¿‡ withTag æ–¹æ³•æ·»åŠ è‡ªå®šä¹‰çš„æ ‡ç­¾ã€‚æœ€åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ finish æ–¹æ³•ç±»å…³é—­è¿™ä¸ª Spanã€‚åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†è¿™äº›æ–¹æ³•çš„å…·ä½“åº”ç”¨åœºæ™¯ã€‚</p>
<p>åŒæ ·ï¼Œåœ¨ã€Š21 | æ‰§è¡Œå¼•æ“ï¼šåˆ†ç‰‡ç¯å¢ƒä¸‹ SQL æ‰§è¡Œçš„æ•´ä½“æµç¨‹åº”è¯¥å¦‚ä½•è¿›è¡ŒæŠ½è±¡ï¼Ÿã€‹ä¸­ï¼Œæˆ‘ä»¬åœ¨çš„ SQLExecuteCallback æŠ½è±¡ç±»çš„ execute0 æ–¹æ³•ä¸­ä¹Ÿçœ‹åˆ°äº† SQLExecutionHook çš„åº”ç”¨åœºæ™¯ï¼ŒSQLExecutionHook æ¥å£çš„å®šä¹‰å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre tabindex="0"><code>public interface SQLExecutionHook {

    

    //å¼€å§‹æ‰§è¡Œ SQL æ—¶è¿›è¡Œ Hook

    void start(String dataSourceName, String sql, List&lt;Object&gt; parameters, DataSourceMetaData dataSourceMetaData, boolean isTrunkThread, Map&lt;String, Object&gt; shardingExecuteDataMap);

    

    //æˆåŠŸå®Œæˆ SQL æ‰§è¡Œæ—¶è¿›è¡Œ Hook

    void finishSuccess();

    

    //SQL æ‰§è¡Œå¤±è´¥æ—¶è¿›è¡Œ Hook

    void finishFailure(Exception cause);

}
</code></pre><p>åœ¨ ShardingSphere ä¸­ï¼ŒåŒæ ·å­˜åœ¨ä¸€å¥—å®Œæ•´çš„ä½“ç³»æ¥å®Œæˆå¯¹è¿™ä¸ªæ¥å£çš„å®ç°ï¼ŒåŒ…æ‹¬ä¸ SPIParsingHook åŒæ ·å……å½“å®¹å™¨ç±»çš„ SPISQLExecutionHookï¼Œä»¥åŠåŸºäº OpenTracing åè®®çš„ OpenTracingSQLExecutionHookï¼Œå…¶å®ç°è¿‡ç¨‹ä¸ OpenTracingParsingHook ä¸€è‡´ï¼Œè¿™é‡Œä¸å†åšå…·ä½“å±•å¼€ã€‚</p>
<h3 id="ä»æºç è§£æåˆ°æ—¥å¸¸å¼€å‘">ä»æºç è§£æåˆ°æ—¥å¸¸å¼€å‘</h3>
<p>åœ¨ä»Šå¤©çš„å†…å®¹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä» ShardingSphere çš„æºç ä¸­æç‚¼ä¸¤ä¸ªå¯ä»¥ç”¨äºæ—¥å¸¸å¼€å‘è¿‡ç¨‹çš„å¼€å‘æŠ€å·§ã€‚å¦‚æœæˆ‘ä»¬éœ€è¦è‡ªå·±å®ç°ä¸€ä¸ªç”¨äºåˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„é“¾è·¯ç›‘æ§å’Œåˆ†æç³»ç»Ÿï¼Œé‚£ä¹ˆ OpenTracing è§„èŒƒä»¥åŠå¯¹åº”çš„å®ç°ç±»æ˜¯ä½ çš„é¦–é€‰ã€‚</p>
<p>åŸºäº OpenTracing è§„èŒƒï¼Œä¸šç•Œå­˜åœ¨ä¸€å¤§æ‰¹ä¼˜ç§€çš„å·¥å…·ï¼Œä¾‹å¦‚ SkyWalkingã€Zipkin å’Œ Jaeger ç­‰ï¼Œè¿™äº›å·¥å…·éƒ½å¯ä»¥å¾ˆå®¹æ˜“çš„é›†æˆåˆ°ä½ çš„ä¸šåŠ¡ç³»ç»Ÿä¸­ã€‚</p>
<p>å¦ä¸€æ–¹é¢ï¼Œæˆ‘ä»¬ä¹Ÿçœ‹åˆ°äº† Hook æœºåˆ¶çš„åº”ç”¨åœºæ™¯å’Œæ–¹å¼ã€‚Hook æœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ç§å›è°ƒæœºåˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€è¦æç‚¼å‡ºè‡ªèº«æ‰€éœ€çš„å„ç§ Hookï¼Œå¹¶é€šè¿‡ SPI çš„æ–¹å¼åŠ¨æ€åŠ è½½åˆ°ç³»ç»Ÿä¸­ï¼Œä»¥æ»¡è¶³ä¸åŒåœºæ™¯ä¸‹çš„éœ€è¦ï¼ŒShardingSphere ä¸ºæˆ‘ä»¬å¦‚ä½•å®ç°å’Œç®¡ç†ç³»ç»Ÿä¸­çš„ Hook å®ç°ç±»æä¾›äº†å¾ˆå¥½çš„å®ç°å‚è€ƒã€‚</p>
<h3 id="å°ç»“ä¸é¢„å‘Š">å°ç»“ä¸é¢„å‘Š</h3>
<p>ä»Šå¤©çš„å†…å®¹å›´ç»• ShardingSphere ä¸­çš„é“¾è·¯è·Ÿè¸ªå®ç°è¿‡ç¨‹è¿›è¡Œäº†è¯¦ç»†å±•å¼€ã€‚æˆ‘ä»¬å‘ç°åœ¨ ShardingSphere ä¸­å…³äºé“¾è·¯è·Ÿè¸ªçš„ä»£ç å¹¶ä¸å¤šï¼Œæ‰€ä»¥ä¸ºäº†æ›´å¥½åœ°ç†è§£é“¾è·¯è·Ÿè¸ªçš„å®ç°æœºåˆ¶ï¼Œæˆ‘ä»¬ä¹ŸèŠ±äº†ä¸€äº›ç¯‡å¹…ä»‹ç»äº†é“¾è·¯è·Ÿè¸ªçš„åŸºæœ¬åŸç†ï¼Œä»¥åŠèƒŒåçš„ OpenTracing è§„èŒƒçš„æ ¸å¿ƒç±»ã€‚</p>
<p>ç„¶åï¼Œæˆ‘ä»¬å‘ç° ShardingSphere åœ¨ä¸šåŠ¡æµç¨‹çš„æ‰§è¡Œè¿‡ç¨‹ä¸­å†…ç½®äº†ä¸€æ‰¹ Hookï¼Œè¿™äº› Hook èƒ½å¤Ÿå¸®åŠ©ç³»ç»Ÿæ”¶é›†å„ç§ç›‘æ§ä¿¡æ¯ï¼Œå¹¶é€šè¿‡ OpenTracing è§„èŒƒçš„å„ç§å®ç°ç±»è¿›è¡Œç»Ÿä¸€ç®¡ç†ã€‚</p>
<p>è¿™é‡Œç»™ä½ ç•™ä¸€é“æ€è€ƒé¢˜ï¼šShardingSphere ä¸­å¦‚ä½•å®Œæˆä¸ OpenTracing åè®®çš„é›†æˆï¼Ÿ</p>
<p>åœ¨ä¸‹ä¸€ä¸ªè¯¾æ—¶ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç» ShardingSphere æºç è§£æéƒ¨åˆ†çš„æœ€åä¸€ä¸ªä¸»é¢˜ï¼Œå³ ShardingSphere çš„å†…æ ¸å¦‚ä½•ä¸ Spring æ¡†æ¶è¿›è¡Œæ— ç¼é›†æˆä»¥é™ä½å¼€å‘äººå‘˜çš„å­¦ä¹ æˆæœ¬ã€‚</p>

        </div>
    </article>
</div>
<div class="division-line"></div>
<div class="others">
    <div>æ ‡ç­¾ï¼šğŸ·ï¸<a class="post-tag" href="/tags/sharding/">sharding</a>&nbsp;</div>
    <div>åˆ†ç±»ï¼š ğŸ“’<a class="post-category" href="/categories/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/">ShardingSphereæ ¸å¿ƒåŸç†ç²¾è®²</a>&nbsp; </div>
</div>

    </main>
    <footer>
        <div id="pagination">
            
<div class="paginator">
    <div class="prev">
        
        <a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/32-%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E5%A6%82%E4%BD%95%E5%9F%BA%E4%BA%8E%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BF%E9%97%AE%E7%86%94%E6%96%AD%E6%9C%BA%E5%88%B6/"><span>32 æ³¨å†Œä¸­å¿ƒï¼šå¦‚ä½•åŸºäºæ³¨å†Œä¸­å¿ƒå®ç°æ•°æ®åº“è®¿é—®ç†”æ–­æœºåˆ¶ï¼Ÿ</span></a>
    </div>
    <div class="next">
        
        <a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/35-%E7%BB%93%E8%AF%ADshardingsphere-%E6%80%BB%E7%BB%93%E5%8F%8A%E5%B1%95%E6%9C%9B/"><span>35 ç»“è¯­ï¼šShardingSphere æ€»ç»“åŠå±•æœ›</span></a>
    </div>
</div>

        </div>
        <div id="float">
            <ul class="float-button-bar">
    <li>
        <button class="float-button top" onclick="scrollToTop(this);">UP</button>
    </li>
    <li>
        <button class="float-button toggler" onclick="changeSkin(this);">DARK</button>
    </li>
</ul>
        </div>
        <div id="copyright" style="display: none;">
    
    
    <p>&copy; 2020 <a href="/"></a>, powered by Hugo and Qiao</p>
</div>
    </footer>
    
<script>
    const changeSkin = () => {
        document.getElementById('page').classList.toggle('night');
    }
    const scrollToTop = () => {
        window.scrollTo(0, 0);
    }
</script>
</body>

</html>