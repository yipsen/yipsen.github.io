<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
<meta name="X-UA-Compatible" , content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<link rel="icon" type="image/png" href="/%20/favicon.png">

<title>11 ç¼–æ’æ²»ç†ï¼šå¦‚ä½•å®ç°åˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„åŠ¨æ€é…ç½®ç®¡ç†ï¼Ÿ | Yipsen Ye</title>
<meta name="description" content="éšç€åˆ†å¸ƒå¼ç³»ç»Ÿå’Œå¾®æœåŠ¡æ¶æ„çš„æŒç»­å‘å±•ï¼Œå¯¹ç³»ç»Ÿä¸­å­˜åœ¨çš„å„ç§æœåŠ¡å’Œèµ„æºè¿›è¡Œç»Ÿä¸€æ²»ç†å·²ç»æˆä¸ºç³»ç»Ÿæ¶æ„è®¾è®¡è¿‡ç¨‹ä¸­çš„ä¸€ä¸ªåŸºç¡€è¦ç‚¹ã€‚ShardingSphere ä½œä¸ºä¸€æ¬¾åˆ†å¸ƒå¼æ•°æ®åº“ä¸­é—´ä»¶ï¼ŒåŒæ ·é›†æˆäº†ç¼–åˆ¶æ²»ç†æ–¹é¢çš„åŠŸèƒ½ã€‚
ä»Šå¤©çš„å†…å®¹å›´ç»•å¦‚ä½•ä½¿ç”¨ ShardingSphere æ‰€æä¾›çš„ç¼–æ’æ²»ç†åŠŸèƒ½è¿›è¡Œå±•å¼€ï¼Œè¯¾æ—¶æ€è·¯ä¸ä¸Šä¸€è¯¾æ—¶çš„é£æ ¼ä¸€è‡´ï¼Œå³å…ˆè®¨è®º ShardingSphere å¯¹ç¼–æ’æ²»ç†çš„æŠ½è±¡è¿‡ç¨‹ï¼Œç„¶åç»™å‡ºåœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼ŒåŸºäºé…ç½®ä¸­å¿ƒä»‹ç»é›†æˆç¼–æ’æ²»ç†åŠŸèƒ½çš„ç³»ç»Ÿæ”¹é€ æ–¹æ¡ˆã€‚
ShardingSphere å¦‚ä½•æŠ½è±¡ç¼–æ’æ²»ç†ï¼Ÿ ShardingSphere çš„ç¼–æ’æ²»ç†åŠŸèƒ½éå¸¸ä¸°å¯Œï¼Œä¸æ—¥å¸¸å¼€å‘ç´§å¯†ç›¸å…³çš„æ˜¯å®ƒçš„é…ç½®ä¸­å¿ƒå’Œæ³¨å†Œä¸­å¿ƒåŠŸèƒ½ã€‚ShardingSphere å¯¹è¿™ä¸¤ä¸ªåŠŸèƒ½æä¾›äº†è‡ªå·±çš„æŠ½è±¡å’Œå®ç°æ–¹æ¡ˆã€‚
ShardingSphere ä¸­çš„é…ç½®ä¸­å¿ƒ å…³äºé…ç½®ä¿¡æ¯çš„ç®¡ç†ï¼Œå¸¸è§çš„åšæ³•æ˜¯æŠŠå®ƒä»¬å­˜æ”¾åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åŸºäº YAML æ ¼å¼æˆ– XML æ ¼å¼çš„é…ç½®æ–‡ä»¶å®Œæˆé…ç½®ä¿¡æ¯çš„ç»´æŠ¤ï¼Œè¿™åœ¨ ShardingSphere ä¸­ä¹Ÿéƒ½å¾—åˆ°äº†æ”¯æŒã€‚åœ¨å•å—ç³»ç»Ÿä¸­ï¼Œé…ç½®æ–‡ä»¶èƒ½å¤Ÿæ»¡è¶³éœ€æ±‚ï¼Œå›´ç»•é…ç½®æ–‡ä»¶å±•å¼€çš„é…ç½®ç®¡ç†å·¥ä½œé€šå¸¸ä¸ä¼šæœ‰å¤ªå¤§æŒ‘æˆ˜ã€‚ä½†åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œè¶Šæ¥è¶Šå¤šçš„è¿è¡Œæ—¶å®ä¾‹ä½¿å¾—æ•£è½çš„é…ç½®éš¾äºç®¡ç†ï¼Œå¹¶ä¸”ï¼Œé…ç½®ä¸åŒæ­¥å¯¼è‡´çš„é—®é¢˜ååˆ†ä¸¥é‡ã€‚å°†é…ç½®é›†ä¸­äºé…ç½®ä¸­å¿ƒï¼Œå¯ä»¥æ›´åŠ æœ‰æ•ˆåœ°è¿›è¡Œç®¡ç†ã€‚
é‡‡ç”¨é…ç½®ä¸­å¿ƒä¹Ÿå°±æ„å‘³ç€é‡‡ç”¨é›†ä¸­å¼é…ç½®ç®¡ç†çš„è®¾è®¡æ€æƒ³ã€‚åœ¨é›†ä¸­å¼é…ç½®ä¸­å¿ƒå†…ï¼Œå¼€å‘ã€æµ‹è¯•å’Œç”Ÿäº§ç­‰ä¸åŒçš„ç¯å¢ƒé…ç½®ä¿¡æ¯ç»Ÿä¸€ä¿å­˜åœ¨é…ç½®ä¸­å¿ƒå†…ï¼Œè¿™æ˜¯ä¸€ä¸ªç»´åº¦ã€‚å¦ä¸€ä¸ªç»´åº¦å°±æ˜¯éœ€è¦ç¡®ä¿åˆ†å¸ƒå¼é›†ç¾¤ä¸­åŒä¸€ç±»æœåŠ¡çš„æ‰€æœ‰æœåŠ¡å®ä¾‹ä¿å­˜åŒä¸€ä»½é…ç½®æ–‡ä»¶å¹¶ä¸”èƒ½å¤ŸåŒæ­¥æ›´æ–°ã€‚é…ç½®ä¸­å¿ƒçš„ç¤ºæ„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š
é›†ä¸­å¼é…ç½®ç®¡ç†çš„è®¾è®¡æ€æƒ³
åœ¨ ShardingSphere ä¸­ï¼Œæä¾›äº†å¤šç§é…ç½®ä¸­å¿ƒçš„å®ç°æ–¹æ¡ˆï¼ŒåŒ…æ‹¬ä¸»æµçš„ ZooKeeeperã€Etcdã€Apollo å’Œ Nacosã€‚å¼€å‘äººå‘˜ä¹Ÿå¯ä»¥æ ¹æ®éœ€è¦å®ç°è‡ªå·±çš„é…ç½®ä¸­å¿ƒå¹¶é€šè¿‡ SPI æœºåˆ¶åŠ è½½åˆ° ShardingSphere è¿è¡Œæ—¶ç¯å¢ƒä¸­ã€‚
å¦ä¸€æ–¹é¢ï¼Œé…ç½®ä¿¡æ¯ä¸æ˜¯ä¸€æˆä¸å˜çš„ã€‚å¯¹ä¿®æ”¹åçš„é…ç½®ä¿¡æ¯çš„ç»Ÿä¸€åˆ†å‘ï¼Œæ˜¯é…ç½®ä¸­å¿ƒå¯ä»¥æä¾›çš„å¦ä¸€ä¸ªé‡è¦èƒ½åŠ›ã€‚é…ç½®ä¸­å¿ƒä¸­é…ç½®ä¿¡æ¯çš„ä»»ä½•å˜åŒ–éƒ½å¯ä»¥å®æ—¶åŒæ­¥åˆ°å„ä¸ªæœåŠ¡å®ä¾‹ä¸­ã€‚åœ¨ ShardingSphere ä¸­ï¼Œé€šè¿‡é…ç½®ä¸­å¿ƒå¯ä»¥æ”¯æŒæ•°æ®æºã€æ•°æ®è¡¨ã€åˆ†ç‰‡ä»¥åŠè¯»å†™åˆ†ç¦»ç­–ç•¥çš„åŠ¨æ€åˆ‡æ¢ã€‚
åŒæ—¶ï¼Œåœ¨é›†ä¸­å¼é…ç½®ä¿¡æ¯ç®¡ç†æ–¹æ¡ˆçš„åŸºç¡€ä¸Šï¼ŒShardingSphere ä¹Ÿæ”¯æŒä»æœ¬åœ°åŠ è½½é…ç½®ä¿¡æ¯çš„å®ç°æ–¹æ¡ˆã€‚å¦‚æœæˆ‘ä»¬å¸Œæœ›ä»¥æœ¬åœ°çš„é…ç½®ä¿¡æ¯ä¸ºå‡†ï¼Œå¹¶å°†æœ¬åœ°é…ç½®è¦†ç›–é…ç½®ä¸­å¿ƒçš„é…ç½®ï¼Œé€šè¿‡ä¸€ä¸ªå¼€å…³å°±å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ã€‚
ShardingSphere ä¸­çš„æ³¨å†Œä¸­å¿ƒ åœ¨å®ç°æ–¹å¼ä¸Šï¼Œæ³¨å†Œä¸­å¿ƒä¸é…ç½®ä¸­å¿ƒéå¸¸ç±»ä¼¼ï¼ŒShardingSphere ä¹Ÿæä¾›äº†åŸºäº ZooKeeeper å’Œ Etcd è¿™ä¸¤æ¬¾ç¬¬ä¸‰æ–¹å·¥å…·çš„æ³¨å†Œä¸­å¿ƒå®ç°æ–¹æ¡ˆï¼Œè€Œ ZooKeeeper å’Œ Etcd åŒæ ·ä¹Ÿå¯ä»¥è¢«ç”¨ä½œé…ç½®ä¸­å¿ƒã€‚
æ³¨å†Œä¸­å¿ƒä¸é…ç½®ä¸­å¿ƒçš„ä¸åŒä¹‹å¤„åœ¨äºä¸¤è€…ä¿å­˜çš„æ•°æ®ç±»å‹ã€‚é…ç½®ä¸­å¿ƒç®¡ç†çš„æ˜¾ç„¶æ˜¯é…ç½®æ•°æ®ï¼Œä½†æ³¨å†Œä¸­å¿ƒå­˜æ”¾çš„æ˜¯ ShardingSphere è¿è¡Œæ—¶çš„å„ç§åŠ¨æ€/ä¸´æ—¶çŠ¶æ€æ•°æ®ï¼Œæœ€å…¸å‹çš„è¿è¡Œæ—¶çŠ¶æ€æ•°æ®å°±æ˜¯å½“å‰çš„ Datasource å®ä¾‹ã€‚é‚£ä¹ˆï¼Œä¿å­˜è¿™äº›åŠ¨æ€å’Œä¸´æ—¶çŠ¶æ€æ•°æ®æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è¿™å¼ å›¾ï¼š
æ³¨å†Œä¸­å¿ƒçš„æ•°æ®å­˜å‚¨å’Œç›‘å¬æœºåˆ¶ç¤ºæ„å›¾
æ³¨å†Œä¸­å¿ƒä¸€èˆ¬éƒ½æä¾›äº†åˆ†å¸ƒå¼åè°ƒæœºåˆ¶ã€‚åœ¨æ³¨å†Œä¸­å¿ƒä¸­ï¼Œæ‰€æœ‰ DataSource åœ¨æŒ‡å®šè·¯å¾„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸´æ—¶èŠ‚ç‚¹ï¼Œæ‰€æœ‰è®¿é—®è¿™äº› DataSource çš„ä¸šåŠ¡æœåŠ¡éƒ½ä¼šç›‘å¬è¯¥ç›®å½•ã€‚å½“æœ‰æ–° DataSource åŠ å…¥æ—¶ï¼Œæ³¨å†Œä¸­å¿ƒå®æ—¶é€šçŸ¥åˆ°æ‰€æœ‰ä¸šåŠ¡æœåŠ¡ï¼Œç”±ä¸šåŠ¡æœåŠ¡åšç›¸åº”è·¯ç”±ä¿¡æ¯ç»´æŠ¤ï¼›è€Œå½“æŸä¸ª DataSource å®•æœºæ—¶ï¼Œä¸šåŠ¡æœåŠ¡é€šè¿‡ç›‘å¬æœºåˆ¶åŒæ ·ä¼šæ”¶åˆ°é€šçŸ¥ã€‚
åŸºäºè¿™ç§æœºåˆ¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥æä¾›é’ˆå¯¹ DataSource çš„æ²»ç†èƒ½åŠ›ï¼ŒåŒ…æ‹¬ç†”æ–­å¯¹æŸä¸€ä¸ª DataSource çš„æ•°æ®è®¿é—®ï¼Œæˆ–ç¦ç”¨å¯¹ä»åº“ DataSource çš„è®¿é—®ç­‰ã€‚">
<meta name="author" content="">

<link rel="stylesheet" type="text/css" href="/styles/main.css">

</head>

<body id="page">
    <header>
        <div class="logo-link" style="width: 60px; color: #CA6924;">
    <a href="http://yipsen.github.io/">
        <img style="margin-bottom: -1rem;" src="/images/deer.svg" alt="logo">
        <span style="font-size: 0.5rem; color: #CA6924;">Yipsen Ye</span>
    </a>
</div>
<nav class="navbar justify-content-end">
    <ul class="nav-list">
        
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/posts/">æœ­è®°</a>
        </li>
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/collections/">é™„è¡¨</a>
        </li>
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/about/">å…³äº</a>
        </li>
        
    </ul>
</nav>
    </header>
    <main id="content">
        
<div class="container"><aside>
    <div>
        
        
            
            
            <div class="post-category-icon"></div>
            <a href="/categories/shardingsphere%e6%a0%b8%e5%bf%83%e5%8e%9f%e7%90%86%e7%b2%be%e8%ae%b2/">ShardingSphereæ ¸å¿ƒåŸç†ç²¾è®²</a>
            <ul>
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/00-%E5%A6%82%E4%BD%95%E6%AD%A3%E7%A1%AE%E5%AD%A6%E4%B9%A0%E4%B8%80%E6%AC%BE%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8%E5%BC%80%E6%BA%90%E6%A1%86%E6%9E%B6/">00 å¦‚ä½•æ­£ç¡®å­¦ä¹ ä¸€æ¬¾åˆ†åº“åˆ†è¡¨å¼€æºæ¡†æ¶ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/01-%E4%BB%8E%E7%90%86%E8%AE%BA%E5%88%B0%E5%AE%9E%E8%B7%B5%E5%A6%82%E4%BD%95%E8%AE%A9%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8%E7%9C%9F%E6%AD%A3%E8%90%BD%E5%9C%B0/">01 ä»ç†è®ºåˆ°å®è·µï¼šå¦‚ä½•è®©åˆ†åº“åˆ†è¡¨çœŸæ­£è½åœ°ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/02-%E9%A1%B6%E7%BA%A7%E9%A1%B9%E7%9B%AEshardingsphere-%E6%98%AF%E4%B8%80%E6%AC%BE%E4%BB%80%E4%B9%88%E6%A0%B7%E7%9A%84-apache-%E5%BC%80%E6%BA%90%E8%BD%AF%E4%BB%B6/">02 é¡¶çº§é¡¹ç›®ï¼šShardingSphere æ˜¯ä¸€æ¬¾ä»€ä¹ˆæ ·çš„ Apache å¼€æºè½¯ä»¶ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/03-%E8%A7%84%E8%8C%83%E5%85%BC%E5%AE%B9jdbc-%E8%A7%84%E8%8C%83%E4%B8%8E-shardingsphere-%E6%98%AF%E4%BB%80%E4%B9%88%E5%85%B3%E7%B3%BB/">03 è§„èŒƒå…¼å®¹ï¼šJDBC è§„èŒƒä¸ ShardingSphere æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/04-%E5%BA%94%E7%94%A8%E9%9B%86%E6%88%90%E5%9C%A8%E4%B8%9A%E5%8A%A1%E7%B3%BB%E7%BB%9F%E4%B8%AD%E4%BD%BF%E7%94%A8-shardingsphere-%E7%9A%84%E6%96%B9%E5%BC%8F%E6%9C%89%E5%93%AA%E4%BA%9B/">04 åº”ç”¨é›†æˆï¼šåœ¨ä¸šåŠ¡ç³»ç»Ÿä¸­ä½¿ç”¨ ShardingSphere çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/05-%E9%85%8D%E7%BD%AE%E9%A9%B1%E5%8A%A8shardingsphere-%E4%B8%AD%E7%9A%84%E9%85%8D%E7%BD%AE%E4%BD%93%E7%B3%BB%E6%98%AF%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E7%9A%84/">05 é…ç½®é©±åŠ¨ï¼šShardingSphere ä¸­çš„é…ç½®ä½“ç³»æ˜¯å¦‚ä½•è®¾è®¡çš„ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/09-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%E5%BC%BA%E4%B8%80%E8%87%B4%E6%80%A7%E4%BA%8B%E5%8A%A1%E4%B8%8E%E6%9F%94%E6%80%A7%E4%BA%8B%E5%8A%A1/">09 åˆ†å¸ƒå¼äº‹åŠ¡ï¼šå¦‚ä½•ä½¿ç”¨å¼ºä¸€è‡´æ€§äº‹åŠ¡ä¸æŸ”æ€§äº‹åŠ¡ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/10-%E6%95%B0%E6%8D%AE%E8%84%B1%E6%95%8F%E5%A6%82%E4%BD%95%E7%A1%AE%E4%BF%9D%E6%95%8F%E6%84%9F%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AE%89%E5%85%A8%E8%AE%BF%E9%97%AE/">10 æ•°æ®è„±æ•ï¼šå¦‚ä½•ç¡®ä¿æ•æ„Ÿæ•°æ®çš„å®‰å…¨è®¿é—®ï¼Ÿ</a></li>
                
                
                
                    <li>11 ç¼–æ’æ²»ç†ï¼šå¦‚ä½•å®ç°åˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„åŠ¨æ€é…ç½®ç®¡ç†ï¼Ÿ</li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/12-%E4%BB%8E%E5%BA%94%E7%94%A8%E5%88%B0%E5%8E%9F%E7%90%86%E5%A6%82%E4%BD%95%E9%AB%98%E6%95%88%E9%98%85%E8%AF%BB-shardingsphere-%E6%BA%90%E7%A0%81/">12 ä»åº”ç”¨åˆ°åŸç†ï¼šå¦‚ä½•é«˜æ•ˆé˜…è¯» ShardingSphere æºç ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/13-%E5%BE%AE%E5%86%85%E6%A0%B8%E6%9E%B6%E6%9E%84shardingsphere-%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%89%A9%E5%B1%95%E6%80%A7/">13 å¾®å†…æ ¸æ¶æ„ï¼šShardingSphere å¦‚ä½•å®ç°ç³»ç»Ÿçš„æ‰©å±•æ€§ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/14-%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%BB%E9%94%AEshardingsphere-%E4%B8%AD%E6%9C%89%E5%93%AA%E4%BA%9B%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%BB%E9%94%AE%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F/">14 åˆ†å¸ƒå¼ä¸»é”®ï¼šShardingSphere ä¸­æœ‰å“ªäº›åˆ†å¸ƒå¼ä¸»é”®å®ç°æ–¹å¼ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/15-%E8%A7%A3%E6%9E%90%E5%BC%95%E6%93%8Esql-%E8%A7%A3%E6%9E%90%E6%B5%81%E7%A8%8B%E5%BA%94%E8%AF%A5%E5%8C%85%E6%8B%AC%E5%93%AA%E4%BA%9B%E6%A0%B8%E5%BF%83%E9%98%B6%E6%AE%B5%E4%B8%8A/">15 è§£æå¼•æ“ï¼šSQL è§£ææµç¨‹åº”è¯¥åŒ…æ‹¬å“ªäº›æ ¸å¿ƒé˜¶æ®µï¼Ÿï¼ˆä¸Šï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/16-%E8%A7%A3%E6%9E%90%E5%BC%95%E6%93%8Esql-%E8%A7%A3%E6%9E%90%E6%B5%81%E7%A8%8B%E5%BA%94%E8%AF%A5%E5%8C%85%E6%8B%AC%E5%93%AA%E4%BA%9B%E6%A0%B8%E5%BF%83%E9%98%B6%E6%AE%B5%E4%B8%8B/">16 è§£æå¼•æ“ï¼šSQL è§£ææµç¨‹åº”è¯¥åŒ…æ‹¬å“ªäº›æ ¸å¿ƒé˜¶æ®µï¼Ÿï¼ˆä¸‹ï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/17-%E8%B7%AF%E7%94%B1%E5%BC%95%E6%93%8E%E5%A6%82%E4%BD%95%E7%90%86%E8%A7%A3%E5%88%86%E7%89%87%E8%B7%AF%E7%94%B1%E6%A0%B8%E5%BF%83%E7%B1%BB-shardingrouter-%E7%9A%84%E8%BF%90%E4%BD%9C%E6%9C%BA%E5%88%B6/">17 è·¯ç”±å¼•æ“ï¼šå¦‚ä½•ç†è§£åˆ†ç‰‡è·¯ç”±æ ¸å¿ƒç±» ShardingRouter çš„è¿ä½œæœºåˆ¶ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/18-%E8%B7%AF%E7%94%B1%E5%BC%95%E6%93%8E%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE%E7%9A%84%E5%88%86%E7%89%87%E8%B7%AF%E7%94%B1%E5%92%8C%E5%B9%BF%E6%92%AD%E8%B7%AF%E7%94%B1/">18 è·¯ç”±å¼•æ“ï¼šå¦‚ä½•å®ç°æ•°æ®è®¿é—®çš„åˆ†ç‰‡è·¯ç”±å’Œå¹¿æ’­è·¯ç”±ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/19-%E8%B7%AF%E7%94%B1%E5%BC%95%E6%93%8E%E5%A6%82%E4%BD%95%E5%9C%A8%E8%B7%AF%E7%94%B1%E8%BF%87%E7%A8%8B%E4%B8%AD%E9%9B%86%E6%88%90%E5%A4%9A%E7%A7%8D%E8%B7%AF%E7%94%B1%E7%AD%96%E7%95%A5%E5%92%8C%E8%B7%AF%E7%94%B1%E7%AE%97%E6%B3%95/">19 è·¯ç”±å¼•æ“ï¼šå¦‚ä½•åœ¨è·¯ç”±è¿‡ç¨‹ä¸­é›†æˆå¤šç§è·¯ç”±ç­–ç•¥å’Œè·¯ç”±ç®—æ³•ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/20-%E6%94%B9%E5%86%99%E5%BC%95%E6%93%8E%E5%A6%82%E4%BD%95%E7%90%86%E8%A7%A3%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F%E4%B8%8B%E7%9A%84-sql-%E6%94%B9%E5%86%99%E5%AE%9E%E7%8E%B0%E6%9C%BA%E5%88%B6/">20 æ”¹å†™å¼•æ“ï¼šå¦‚ä½•ç†è§£è£…é¥°å™¨æ¨¡å¼ä¸‹çš„ SQL æ”¹å†™å®ç°æœºåˆ¶ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/21-%E6%89%A7%E8%A1%8C%E5%BC%95%E6%93%8E%E5%88%86%E7%89%87%E7%8E%AF%E5%A2%83%E4%B8%8B-sql-%E6%89%A7%E8%A1%8C%E7%9A%84%E6%95%B4%E4%BD%93%E6%B5%81%E7%A8%8B%E5%BA%94%E8%AF%A5%E5%A6%82%E4%BD%95%E8%BF%9B%E8%A1%8C%E6%8A%BD%E8%B1%A1/">21 æ‰§è¡Œå¼•æ“ï¼šåˆ†ç‰‡ç¯å¢ƒä¸‹ SQL æ‰§è¡Œçš„æ•´ä½“æµç¨‹åº”è¯¥å¦‚ä½•è¿›è¡ŒæŠ½è±¡ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/22-%E6%89%A7%E8%A1%8C%E5%BC%95%E6%93%8E%E5%A6%82%E4%BD%95%E6%8A%8A%E6%8F%A1-shardingsphere-%E4%B8%AD%E7%9A%84-executor-%E6%89%A7%E8%A1%8C%E6%A8%A1%E5%9E%8B%E4%B8%8A/">22 æ‰§è¡Œå¼•æ“ï¼šå¦‚ä½•æŠŠæ¡ ShardingSphere ä¸­çš„ Executor æ‰§è¡Œæ¨¡å‹ï¼Ÿï¼ˆä¸Šï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/23-%E6%89%A7%E8%A1%8C%E5%BC%95%E6%93%8E%E5%A6%82%E4%BD%95%E6%8A%8A%E6%8F%A1-shardingsphere-%E4%B8%AD%E7%9A%84-executor-%E6%89%A7%E8%A1%8C%E6%A8%A1%E5%9E%8B%E4%B8%8B/">23 æ‰§è¡Œå¼•æ“ï¼šå¦‚ä½•æŠŠæ¡ ShardingSphere ä¸­çš„ Executor æ‰§è¡Œæ¨¡å‹ï¼Ÿï¼ˆä¸‹ï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/24-%E5%BD%92%E5%B9%B6%E5%BC%95%E6%93%8E%E5%A6%82%E4%BD%95%E7%90%86%E8%A7%A3%E6%95%B0%E6%8D%AE%E5%BD%92%E5%B9%B6%E7%9A%84%E7%B1%BB%E5%9E%8B%E4%BB%A5%E5%8F%8A%E7%AE%80%E5%8D%95%E5%BD%92%E5%B9%B6%E7%AD%96%E7%95%A5%E7%9A%84%E5%AE%9E%E7%8E%B0%E8%BF%87%E7%A8%8B/">24 å½’å¹¶å¼•æ“ï¼šå¦‚ä½•ç†è§£æ•°æ®å½’å¹¶çš„ç±»å‹ä»¥åŠç®€å•å½’å¹¶ç­–ç•¥çš„å®ç°è¿‡ç¨‹ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/25-%E5%BD%92%E5%B9%B6%E5%BC%95%E6%93%8E%E5%A6%82%E4%BD%95%E7%90%86%E8%A7%A3%E6%B5%81%E5%BC%8F%E5%BD%92%E5%B9%B6%E5%92%8C%E5%86%85%E5%AD%98%E5%BD%92%E5%B9%B6%E5%9C%A8%E5%A4%8D%E6%9D%82%E5%BD%92%E5%B9%B6%E5%9C%BA%E6%99%AF%E4%B8%8B%E7%9A%84%E5%BA%94%E7%94%A8%E6%96%B9%E5%BC%8F/">25 å½’å¹¶å¼•æ“ï¼šå¦‚ä½•ç†è§£æµå¼å½’å¹¶å’Œå†…å­˜å½’å¹¶åœ¨å¤æ‚å½’å¹¶åœºæ™¯ä¸‹çš„åº”ç”¨æ–¹å¼ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/26-%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB%E6%99%AE%E9%80%9A%E4%B8%BB%E4%BB%8E%E6%9E%B6%E6%9E%84%E5%92%8C%E5%88%86%E7%89%87%E4%B8%BB%E4%BB%8E%E6%9E%B6%E6%9E%84%E5%88%86%E5%88%AB%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84/">26 è¯»å†™åˆ†ç¦»ï¼šæ™®é€šä¸»ä»æ¶æ„å’Œåˆ†ç‰‡ä¸»ä»æ¶æ„åˆ†åˆ«æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/27-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E5%A6%82%E4%BD%95%E7%90%86%E8%A7%A3-shardingsphere-%E4%B8%AD%E5%AF%B9%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E7%9A%84%E6%8A%BD%E8%B1%A1%E8%BF%87%E7%A8%8B/">27 åˆ†å¸ƒå¼äº‹åŠ¡ï¼šå¦‚ä½•ç†è§£ ShardingSphere ä¸­å¯¹åˆ†å¸ƒå¼äº‹åŠ¡çš„æŠ½è±¡è¿‡ç¨‹ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/28-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1shardingsphere-%E4%B8%AD%E5%A6%82%E4%BD%95%E9%9B%86%E6%88%90%E5%BC%BA%E4%B8%80%E8%87%B4%E6%80%A7%E4%BA%8B%E5%8A%A1%E5%92%8C%E6%9F%94%E6%80%A7%E4%BA%8B%E5%8A%A1%E6%94%AF%E6%8C%81%E4%B8%8A/">28 åˆ†å¸ƒå¼äº‹åŠ¡ï¼šShardingSphere ä¸­å¦‚ä½•é›†æˆå¼ºä¸€è‡´æ€§äº‹åŠ¡å’ŒæŸ”æ€§äº‹åŠ¡æ”¯æŒï¼Ÿï¼ˆä¸Šï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/29-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1shardingsphere-%E4%B8%AD%E5%A6%82%E4%BD%95%E9%9B%86%E6%88%90%E5%BC%BA%E4%B8%80%E8%87%B4%E6%80%A7%E4%BA%8B%E5%8A%A1%E5%92%8C%E6%9F%94%E6%80%A7%E4%BA%8B%E5%8A%A1%E6%94%AF%E6%8C%81%E4%B8%8B/">29 åˆ†å¸ƒå¼äº‹åŠ¡ï¼šShardingSphere ä¸­å¦‚ä½•é›†æˆå¼ºä¸€è‡´æ€§äº‹åŠ¡å’ŒæŸ”æ€§äº‹åŠ¡æ”¯æŒï¼Ÿï¼ˆä¸‹ï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/30-%E6%95%B0%E6%8D%AE%E8%84%B1%E6%95%8F%E5%A6%82%E4%BD%95%E5%9F%BA%E4%BA%8E%E6%94%B9%E5%86%99%E5%BC%95%E6%93%8E%E5%AE%9E%E7%8E%B0%E4%BD%8E%E4%BE%B5%E5%85%A5%E6%80%A7%E6%95%B0%E6%8D%AE%E8%84%B1%E6%95%8F%E6%96%B9%E6%A1%88/">30 æ•°æ®è„±æ•ï¼šå¦‚ä½•åŸºäºæ”¹å†™å¼•æ“å®ç°ä½ä¾µå…¥æ€§æ•°æ®è„±æ•æ–¹æ¡ˆï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/31-%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83%E5%A6%82%E4%BD%95%E5%9F%BA%E4%BA%8E%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83%E5%AE%9E%E7%8E%B0%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF%E7%9A%84%E5%8A%A8%E6%80%81%E5%8C%96%E7%AE%A1%E7%90%86/">31 é…ç½®ä¸­å¿ƒï¼šå¦‚ä½•åŸºäºé…ç½®ä¸­å¿ƒå®ç°é…ç½®ä¿¡æ¯çš„åŠ¨æ€åŒ–ç®¡ç†ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/32-%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E5%A6%82%E4%BD%95%E5%9F%BA%E4%BA%8E%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BF%E9%97%AE%E7%86%94%E6%96%AD%E6%9C%BA%E5%88%B6/">32 æ³¨å†Œä¸­å¿ƒï¼šå¦‚ä½•åŸºäºæ³¨å†Œä¸­å¿ƒå®ç°æ•°æ®åº“è®¿é—®ç†”æ–­æœºåˆ¶ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/33-%E9%93%BE%E8%B7%AF%E8%B7%9F%E8%B8%AA%E5%A6%82%E4%BD%95%E5%9F%BA%E4%BA%8E-hook-%E6%9C%BA%E5%88%B6%E4%BB%A5%E5%8F%8A-opentracing-%E5%8D%8F%E8%AE%AE%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE%E9%93%BE%E8%B7%AF%E8%B7%9F%E8%B8%AA/">33 é“¾è·¯è·Ÿè¸ªï¼šå¦‚ä½•åŸºäº Hook æœºåˆ¶ä»¥åŠ OpenTracing åè®®å®ç°æ•°æ®è®¿é—®é“¾è·¯è·Ÿè¸ªï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/35-%E7%BB%93%E8%AF%ADshardingsphere-%E6%80%BB%E7%BB%93%E5%8F%8A%E5%B1%95%E6%9C%9B/">35 ç»“è¯­ï¼šShardingSphere æ€»ç»“åŠå±•æœ›</a></li>
                
                
            </ul>
        
    </div>
</aside>

<style>
    aside {
        position: fixed;
        left: 20px;
        background: #ffdee3;
        border-radius: 6px;
        padding: 20px;
        padding-top: 60px;
        box-shadow: 5px 10px #888;
        list-style-type: none;
        display: none;
    }

    .post-category-icon {
        position: absolute;
        width: 80px;
        height: 80px;
        top: -40px;
        left: 50%;
        margin-left: -40px;
        text-align: center;
        font-size: 36px;
        content: 'J';
        background: #ffdee3;
        border-radius: 100%;
        border: 10px solid #fff;
        box-shadow: 5px 10px #888;
    }
</style><article class="post-block">
        <h1 class="post-title">11 ç¼–æ’æ²»ç†ï¼šå¦‚ä½•å®ç°åˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„åŠ¨æ€é…ç½®ç®¡ç†ï¼Ÿ</h1>
        <div class="post-info">
            <div> 
                <span class="post-date">ğŸ“…&nbsp;2021-12-22 01:55:50</span>ğŸ·ï¸&nbsp;<a class="post-tag" href="/tags/sharding/">sharding</a></div><div class="post-category">
                
                ğŸ“š&nbsp;<a href="/categories/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/">ShardingSphereæ ¸å¿ƒåŸç†ç²¾è®²</a>
                
            </div></div>
        <div class="post-content">
            <p>éšç€åˆ†å¸ƒå¼ç³»ç»Ÿå’Œå¾®æœåŠ¡æ¶æ„çš„æŒç»­å‘å±•ï¼Œå¯¹ç³»ç»Ÿä¸­å­˜åœ¨çš„å„ç§æœåŠ¡å’Œèµ„æºè¿›è¡Œç»Ÿä¸€æ²»ç†å·²ç»æˆä¸ºç³»ç»Ÿæ¶æ„è®¾è®¡è¿‡ç¨‹ä¸­çš„ä¸€ä¸ªåŸºç¡€è¦ç‚¹ã€‚ShardingSphere ä½œä¸ºä¸€æ¬¾åˆ†å¸ƒå¼æ•°æ®åº“ä¸­é—´ä»¶ï¼ŒåŒæ ·é›†æˆäº†ç¼–åˆ¶æ²»ç†æ–¹é¢çš„åŠŸèƒ½ã€‚</p>
<p>ä»Šå¤©çš„å†…å®¹å›´ç»•å¦‚ä½•ä½¿ç”¨ ShardingSphere æ‰€æä¾›çš„ç¼–æ’æ²»ç†åŠŸèƒ½è¿›è¡Œå±•å¼€ï¼Œè¯¾æ—¶æ€è·¯ä¸ä¸Šä¸€è¯¾æ—¶çš„é£æ ¼ä¸€è‡´ï¼Œå³å…ˆè®¨è®º ShardingSphere å¯¹ç¼–æ’æ²»ç†çš„æŠ½è±¡è¿‡ç¨‹ï¼Œç„¶åç»™å‡ºåœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼ŒåŸºäºé…ç½®ä¸­å¿ƒä»‹ç»é›†æˆç¼–æ’æ²»ç†åŠŸèƒ½çš„ç³»ç»Ÿæ”¹é€ æ–¹æ¡ˆã€‚</p>
<h3 id="shardingsphere-å¦‚ä½•æŠ½è±¡ç¼–æ’æ²»ç†">ShardingSphere å¦‚ä½•æŠ½è±¡ç¼–æ’æ²»ç†ï¼Ÿ</h3>
<p>ShardingSphere çš„ç¼–æ’æ²»ç†åŠŸèƒ½éå¸¸ä¸°å¯Œï¼Œä¸æ—¥å¸¸å¼€å‘ç´§å¯†ç›¸å…³çš„æ˜¯å®ƒçš„é…ç½®ä¸­å¿ƒå’Œæ³¨å†Œä¸­å¿ƒåŠŸèƒ½ã€‚ShardingSphere å¯¹è¿™ä¸¤ä¸ªåŠŸèƒ½æä¾›äº†è‡ªå·±çš„æŠ½è±¡å’Œå®ç°æ–¹æ¡ˆã€‚</p>
<h4 id="shardingsphere-ä¸­çš„é…ç½®ä¸­å¿ƒ">ShardingSphere ä¸­çš„é…ç½®ä¸­å¿ƒ</h4>
<p>å…³äºé…ç½®ä¿¡æ¯çš„ç®¡ç†ï¼Œå¸¸è§çš„åšæ³•æ˜¯æŠŠå®ƒä»¬å­˜æ”¾åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åŸºäº YAML æ ¼å¼æˆ– XML æ ¼å¼çš„é…ç½®æ–‡ä»¶å®Œæˆé…ç½®ä¿¡æ¯çš„ç»´æŠ¤ï¼Œè¿™åœ¨ ShardingSphere ä¸­ä¹Ÿéƒ½å¾—åˆ°äº†æ”¯æŒã€‚åœ¨å•å—ç³»ç»Ÿä¸­ï¼Œé…ç½®æ–‡ä»¶èƒ½å¤Ÿæ»¡è¶³éœ€æ±‚ï¼Œå›´ç»•é…ç½®æ–‡ä»¶å±•å¼€çš„é…ç½®ç®¡ç†å·¥ä½œé€šå¸¸ä¸ä¼šæœ‰å¤ªå¤§æŒ‘æˆ˜ã€‚ä½†åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œè¶Šæ¥è¶Šå¤šçš„è¿è¡Œæ—¶å®ä¾‹ä½¿å¾—æ•£è½çš„é…ç½®éš¾äºç®¡ç†ï¼Œå¹¶ä¸”ï¼Œé…ç½®ä¸åŒæ­¥å¯¼è‡´çš„é—®é¢˜ååˆ†ä¸¥é‡ã€‚å°†é…ç½®é›†ä¸­äºé…ç½®ä¸­å¿ƒï¼Œå¯ä»¥æ›´åŠ æœ‰æ•ˆåœ°è¿›è¡Œç®¡ç†ã€‚</p>
<p><strong>é‡‡ç”¨é…ç½®ä¸­å¿ƒä¹Ÿå°±æ„å‘³ç€é‡‡ç”¨é›†ä¸­å¼é…ç½®ç®¡ç†çš„è®¾è®¡æ€æƒ³</strong>ã€‚åœ¨é›†ä¸­å¼é…ç½®ä¸­å¿ƒå†…ï¼Œå¼€å‘ã€æµ‹è¯•å’Œç”Ÿäº§ç­‰ä¸åŒçš„ç¯å¢ƒé…ç½®ä¿¡æ¯ç»Ÿä¸€ä¿å­˜åœ¨é…ç½®ä¸­å¿ƒå†…ï¼Œè¿™æ˜¯ä¸€ä¸ªç»´åº¦ã€‚å¦ä¸€ä¸ªç»´åº¦å°±æ˜¯éœ€è¦ç¡®ä¿åˆ†å¸ƒå¼é›†ç¾¤ä¸­åŒä¸€ç±»æœåŠ¡çš„æ‰€æœ‰æœåŠ¡å®ä¾‹ä¿å­˜åŒä¸€ä»½é…ç½®æ–‡ä»¶å¹¶ä¸”èƒ½å¤ŸåŒæ­¥æ›´æ–°ã€‚é…ç½®ä¸­å¿ƒçš„ç¤ºæ„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="http://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/ShardingSphere%20%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2-%E5%AE%8C/assets/CgqCHl8VVZeAej3eAABEQzB6x7o265.png" alt="1.png"> é›†ä¸­å¼é…ç½®ç®¡ç†çš„è®¾è®¡æ€æƒ³</p>
<p>åœ¨ ShardingSphere ä¸­ï¼Œæä¾›äº†å¤šç§é…ç½®ä¸­å¿ƒçš„å®ç°æ–¹æ¡ˆï¼ŒåŒ…æ‹¬ä¸»æµçš„ ZooKeeeperã€Etcdã€Apollo å’Œ Nacosã€‚å¼€å‘äººå‘˜ä¹Ÿå¯ä»¥æ ¹æ®éœ€è¦å®ç°è‡ªå·±çš„é…ç½®ä¸­å¿ƒå¹¶é€šè¿‡ SPI æœºåˆ¶åŠ è½½åˆ° ShardingSphere è¿è¡Œæ—¶ç¯å¢ƒä¸­ã€‚</p>
<p>å¦ä¸€æ–¹é¢ï¼Œé…ç½®ä¿¡æ¯ä¸æ˜¯ä¸€æˆä¸å˜çš„ã€‚<strong>å¯¹ä¿®æ”¹åçš„é…ç½®ä¿¡æ¯çš„ç»Ÿä¸€åˆ†å‘ï¼Œæ˜¯é…ç½®ä¸­å¿ƒå¯ä»¥æä¾›çš„å¦ä¸€ä¸ªé‡è¦èƒ½åŠ›</strong>ã€‚é…ç½®ä¸­å¿ƒä¸­é…ç½®ä¿¡æ¯çš„ä»»ä½•å˜åŒ–éƒ½å¯ä»¥å®æ—¶åŒæ­¥åˆ°å„ä¸ªæœåŠ¡å®ä¾‹ä¸­ã€‚åœ¨ ShardingSphere ä¸­ï¼Œé€šè¿‡é…ç½®ä¸­å¿ƒå¯ä»¥æ”¯æŒæ•°æ®æºã€æ•°æ®è¡¨ã€åˆ†ç‰‡ä»¥åŠè¯»å†™åˆ†ç¦»ç­–ç•¥çš„åŠ¨æ€åˆ‡æ¢ã€‚</p>
<p>åŒæ—¶ï¼Œåœ¨é›†ä¸­å¼é…ç½®ä¿¡æ¯ç®¡ç†æ–¹æ¡ˆçš„åŸºç¡€ä¸Šï¼ŒShardingSphere ä¹Ÿæ”¯æŒä»æœ¬åœ°åŠ è½½é…ç½®ä¿¡æ¯çš„å®ç°æ–¹æ¡ˆã€‚å¦‚æœæˆ‘ä»¬å¸Œæœ›ä»¥æœ¬åœ°çš„é…ç½®ä¿¡æ¯ä¸ºå‡†ï¼Œå¹¶å°†æœ¬åœ°é…ç½®è¦†ç›–é…ç½®ä¸­å¿ƒçš„é…ç½®ï¼Œé€šè¿‡ä¸€ä¸ªå¼€å…³å°±å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ã€‚</p>
<h4 id="shardingsphere-ä¸­çš„æ³¨å†Œä¸­å¿ƒ">ShardingSphere ä¸­çš„æ³¨å†Œä¸­å¿ƒ</h4>
<p>åœ¨å®ç°æ–¹å¼ä¸Šï¼Œæ³¨å†Œä¸­å¿ƒä¸é…ç½®ä¸­å¿ƒéå¸¸ç±»ä¼¼ï¼ŒShardingSphere ä¹Ÿæä¾›äº†åŸºäº ZooKeeeper å’Œ Etcd è¿™ä¸¤æ¬¾ç¬¬ä¸‰æ–¹å·¥å…·çš„æ³¨å†Œä¸­å¿ƒå®ç°æ–¹æ¡ˆï¼Œè€Œ ZooKeeeper å’Œ Etcd åŒæ ·ä¹Ÿå¯ä»¥è¢«ç”¨ä½œé…ç½®ä¸­å¿ƒã€‚</p>
<p>æ³¨å†Œä¸­å¿ƒä¸é…ç½®ä¸­å¿ƒçš„ä¸åŒä¹‹å¤„åœ¨äºä¸¤è€…ä¿å­˜çš„æ•°æ®ç±»å‹ã€‚é…ç½®ä¸­å¿ƒç®¡ç†çš„æ˜¾ç„¶æ˜¯é…ç½®æ•°æ®ï¼Œä½†æ³¨å†Œä¸­å¿ƒå­˜æ”¾çš„æ˜¯ ShardingSphere è¿è¡Œæ—¶çš„å„ç§åŠ¨æ€/ä¸´æ—¶çŠ¶æ€æ•°æ®ï¼Œæœ€å…¸å‹çš„è¿è¡Œæ—¶çŠ¶æ€æ•°æ®å°±æ˜¯å½“å‰çš„ Datasource å®ä¾‹ã€‚é‚£ä¹ˆï¼Œä¿å­˜è¿™äº›åŠ¨æ€å’Œä¸´æ—¶çŠ¶æ€æ•°æ®æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è¿™å¼ å›¾ï¼š</p>
<p><img src="http://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/ShardingSphere%20%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2-%E5%AE%8C/assets/Ciqc1F8VVaeARWcwAABcQXkFH-E790.png" alt="2.png"> æ³¨å†Œä¸­å¿ƒçš„æ•°æ®å­˜å‚¨å’Œç›‘å¬æœºåˆ¶ç¤ºæ„å›¾</p>
<p>æ³¨å†Œä¸­å¿ƒä¸€èˆ¬éƒ½æä¾›äº†åˆ†å¸ƒå¼åè°ƒæœºåˆ¶ã€‚åœ¨æ³¨å†Œä¸­å¿ƒä¸­ï¼Œæ‰€æœ‰ DataSource åœ¨æŒ‡å®šè·¯å¾„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸´æ—¶èŠ‚ç‚¹ï¼Œæ‰€æœ‰è®¿é—®è¿™äº› DataSource çš„ä¸šåŠ¡æœåŠ¡éƒ½ä¼šç›‘å¬è¯¥ç›®å½•ã€‚å½“æœ‰æ–° DataSource åŠ å…¥æ—¶ï¼Œæ³¨å†Œä¸­å¿ƒå®æ—¶é€šçŸ¥åˆ°æ‰€æœ‰ä¸šåŠ¡æœåŠ¡ï¼Œç”±ä¸šåŠ¡æœåŠ¡åšç›¸åº”è·¯ç”±ä¿¡æ¯ç»´æŠ¤ï¼›è€Œå½“æŸä¸ª DataSource å®•æœºæ—¶ï¼Œä¸šåŠ¡æœåŠ¡é€šè¿‡ç›‘å¬æœºåˆ¶åŒæ ·ä¼šæ”¶åˆ°é€šçŸ¥ã€‚</p>
<p>åŸºäºè¿™ç§æœºåˆ¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥æä¾›é’ˆå¯¹ DataSource çš„æ²»ç†èƒ½åŠ›ï¼ŒåŒ…æ‹¬ç†”æ–­å¯¹æŸä¸€ä¸ª DataSource çš„æ•°æ®è®¿é—®ï¼Œæˆ–ç¦ç”¨å¯¹ä»åº“ DataSource çš„è®¿é—®ç­‰ã€‚</p>
<p>åœ¨ ShardingSphere ä¸­ï¼Œæ³¨å†Œä¸­å¿ƒæ›´å¤šåœ°é¢å‘æ¡†æ¶å†…éƒ¨ä½¿ç”¨ï¼Œæ™®é€šåœºæ™¯ä¸‹ä¸éœ€è¦è¿‡å¤šäº†è§£æ³¨å†Œä¸­å¿ƒçš„ä½¿ç”¨æ–¹æ³•ã€‚ç›®å‰ï¼ŒShardingSphere é’ˆå¯¹æ³¨å†Œä¸­å¿ƒæ‰€æ‰“é€ çš„é¢å‘å¼€å‘äººå‘˜çš„åŠŸèƒ½ä¹Ÿè¿˜æ¯”è¾ƒæœ‰é™ã€‚å› æ­¤ï¼Œä»Šå¤©æˆ‘ä»¬é‡ç‚¹å…³æ³¨é…ç½®ä¸­å¿ƒçš„ä½¿ç”¨æ–¹å¼ï¼Œå…³äºæ³¨å†Œä¸­å¿ƒçš„è®¨è®ºï¼Œæˆ‘ä»¬æ”¾åœ¨æºç è§£æéƒ¨åˆ†è¿›è¡Œå±•å¼€ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘å°†å¸¦é¢†ä½ å®Œæˆé›†æˆé…ç½®ä¸­å¿ƒçš„ç³»ç»Ÿæ”¹é€ å·¥ä½œã€‚</p>
<h3 id="ç³»ç»Ÿæ”¹é€ å¦‚ä½•é›†æˆé…ç½®ä¸­å¿ƒ">ç³»ç»Ÿæ”¹é€ ï¼šå¦‚ä½•é›†æˆé…ç½®ä¸­å¿ƒï¼Ÿ</h3>
<p>ç”±äºé…ç½®ä¸­å¿ƒçš„åˆ›å»ºéœ€è¦ä¾èµ–ç¬¬ä¸‰æ–¹å·¥å…·ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å…ˆå®Œæˆå¼€å‘ç¯å¢ƒçš„å‡†å¤‡å·¥ä½œã€‚</p>
<h4 id="å‡†å¤‡å¼€å‘ç¯å¢ƒ">å‡†å¤‡å¼€å‘ç¯å¢ƒ</h4>
<p>ä¸ºäº†é›†æˆé…ç½®ä¸­å¿ƒï¼Œç¬¬ä¸€æ­¥éœ€è¦å¼•å…¥ ShardingSphere ä¸­ä¸ç¼–æ’æ²»ç†ç›¸å…³çš„ä¾èµ–åŒ…ã€‚åœ¨ Spring Boot ç¯å¢ƒä¸­ï¼Œè¿™ä¸ªä¾èµ–åŒ…æ˜¯ sharding-jdbc-orchestration-spring-boot-starterï¼š</p>
<pre tabindex="0"><code>&lt;dependency&gt;
    &lt;groupId&gt;org.apache.shardingsphere&lt;/groupId&gt;         
    &lt;artifactId&gt;sharding-jdbc-orchestration-spring-boot-starter&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre><p>åœ¨æ¥ä¸‹æ¥çš„å†…å®¹ä¸­ï¼Œæˆ‘ä»¬å°†æ¼”ç¤ºå¦‚ä½•åŸºäº ZooKeeeper è¿™æ¬¾åˆ†å¸ƒå¼åè°ƒå·¥å…·æ¥å®ç°é…ç½®ä¸­å¿ƒã€‚è€Œåœ¨ ShardingSphere ä¸­ï¼Œé›†æˆçš„ ZooKeeeper å®¢æˆ·ç«¯ç»„ä»¶æ˜¯ Curatorï¼Œæ‰€ä»¥ä¹Ÿéœ€è¦å¼•å…¥ sharding-orchestration-reg-zookeeper-curator ç»„ä»¶ï¼š</p>
<pre tabindex="0"><code>&lt;dependency&gt;
    &lt;groupId&gt;org.apache.shardingsphere&lt;/groupId&gt;         
    &lt;artifactId&gt;sharding-orchestration-reg-zookeeper-curator&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre><p>å½“ç„¶ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ Nacosï¼Œé‚£ä¹ˆä¹Ÿéœ€è¦æ·»åŠ ç›¸å…³çš„ä¾èµ–åŒ…ï¼š</p>
<pre tabindex="0"><code>&lt;dependency&gt;
    &lt;groupId&gt;org.apache.shardingsphere&lt;/groupId&gt;
    &lt;artifactId&gt;sharding-orchestration-reg-nacos&lt;/artifactId&gt;
&lt;/dependency&gt; 
&lt;dependency&gt;
    &lt;groupId&gt;com.alibaba.nacos&lt;/groupId&gt;
    &lt;artifactId&gt;nacos-client&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre><p>é…ç½®å¥½è¿™äº›ä¹‹åï¼Œå¼€å‘ç¯å¢ƒå·²ç»å°±ç»ªï¼Œå¯¹äºé…ç½®ä¸­å¿ƒè€Œè¨€ï¼Œå¼€å‘äººå‘˜ä¸»è¦çš„å·¥ä½œè¿˜æ˜¯é…ç½®ï¼Œæˆ‘ä»¬ä¸€èµ·æ¥çœ‹ä¸€ä¸‹æœ‰å“ªäº›é’ˆå¯¹é…ç½®ä¸­å¿ƒçš„é…ç½®é¡¹ã€‚</p>
<h4 id="æŒæ¡é…ç½®é¡¹">æŒæ¡é…ç½®é¡¹</h4>
<p>é’ˆå¯¹é…ç½®ä¸­å¿ƒï¼ŒShardingSphere æä¾›äº†ä¸€ç³»åˆ—çš„ DataSourceï¼ŒåŒ…æ‹¬ç”¨äºæ•°æ®åˆ†ç‰‡çš„ OrchestrationShardingDataSourceã€ç”¨äºè¯»å†™åˆ†ç¦»çš„ OrchestrationMasterSlaveDataSource ä»¥åŠç”¨äºæ•°æ®è„±æ•çš„ OrchestrationEncryptDataSourceã€‚å›´ç»•è¿™äº› DataSourceï¼Œä¹Ÿå­˜åœ¨å¯¹åº”çš„ DataSourceFactory å·¥å‚ç±»ã€‚è¿™é‡Œä»¥ OrchestrationMasterSlaveDataSourceFactory ä¸ºä¾‹æ¥çœ‹åˆ›å»º DataSource æ‰€éœ€è¦çš„é…ç½®ç±»ï¼š</p>
<pre tabindex="0"><code>public final class OrchestrationMasterSlaveDataSourceFactory {
    
    public static DataSource createDataSource(final Map&lt;String, DataSource&gt; dataSourceMap, final MasterSlaveRuleConfiguration masterSlaveRuleConfig, 
                                              final Properties props, final OrchestrationConfiguration orchestrationConfig) throws SQLException {
        if (null == masterSlaveRuleConfig || null == masterSlaveRuleConfig.getMasterDataSourceName()) {
            return createDataSource(orchestrationConfig);
        }
        MasterSlaveDataSource masterSlaveDataSource = new MasterSlaveDataSource(dataSourceMap, new MasterSlaveRule(masterSlaveRuleConfig), props);
        return new OrchestrationMasterSlaveDataSource(masterSlaveDataSource, orchestrationConfig);
    }
     â€¦
}
</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œå­˜åœ¨ä¸€ä¸ªæ²»ç†è§„åˆ™é…ç½®ç±» OrchestrationConfigurationï¼Œè€Œåœ¨å…¶ä»–çš„ DataSourceFactory ä¸­æ‰€ä½¿ç”¨çš„ä¹Ÿæ˜¯è¿™ä¸ªé…ç½®ç±»ï¼š</p>
<pre tabindex="0"><code>public final class OrchestrationConfiguration {
    //æ²»ç†è§„åˆ™åç§°
    private final String name;
    //æ³¨å†Œï¼ˆé…ç½®ï¼‰ä¸­å¿ƒé…ç½®ç±»
    private final RegistryCenterConfiguration regCenterConfig;
    //æœ¬åœ°é…ç½®æ˜¯å¦è¦†å†™æœåŠ¡å™¨é…ç½®æ ‡å¿—ä½
    private final boolean overwrite;
}
</code></pre><p>åœ¨ OrchestrationConfiguration ä¸­æˆ‘ä»¬çœ‹åˆ°äº†ç”¨äºæŒ‡å®šæœ¬åœ°é…ç½®æ˜¯å¦è¦†å†™æœåŠ¡å™¨é…ç½®çš„ overwrite æ ‡å¿—ä½ï¼Œä¹Ÿçœ‹åˆ°äº†ä¸€ä¸ªæ³¨å†Œä¸­å¿ƒçš„é…ç½®å­ç±» RegistryCenterConfigurationã€‚RegistryCenterConfiguration åŒ…çš„å«å†…å®¹æ¯”è¾ƒå¤šï¼Œæˆ‘ä»¬æˆªå–æœ€å¸¸è§æœ€é€šç”¨çš„éƒ¨åˆ†é…ç½®é¡¹ï¼š</p>
<pre tabindex="0"><code>public final class RegistryCenterConfiguration extends TypeBasedSPIConfiguration {
  
    //é…ç½®ä¸­å¿ƒæœåŠ¡å™¨åˆ—è¡¨
    private String serverLists;   
    //å‘½åç©ºé—´
    private String namespace;
       â€¦
}
</code></pre><p>è¿™é‡ŒåŒ…å«äº†é…ç½®ä¸­å¿ƒæœåŠ¡å™¨åˆ—è¡¨ serverLists ä»¥åŠç”¨äºæ ‡è¯†å”¯ä¸€æ€§çš„å‘½åç©ºé—´ namespaceã€‚å› ä¸º RegistryCenterConfiguration ç»§æ‰¿äº† TypeBasedSPIConfigurationï¼Œæ‰€ä»¥ä¹Ÿå°±è‡ªåŠ¨å¸¦æœ‰ type å’Œ properties è¿™ä¸¤ä¸ªé…ç½®é¡¹ã€‚</p>
<h4 id="å®ç°é…ç½®ä¸­å¿ƒ">å®ç°é…ç½®ä¸­å¿ƒ</h4>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬æ¥å®ç°åŸºäº ZooKeeper çš„é…ç½®ä¸­å¿ƒã€‚é¦–å…ˆéœ€è¦ä¸‹è½½ ZooKeeper æœåŠ¡å™¨ç»„ä»¶ï¼Œå¹¶ç¡®ä¿å¯åŠ¨æˆåŠŸã€‚å¦‚æœé‡‡ç”¨é»˜è®¤é…ç½®ï¼Œé‚£ä¹ˆ ZooKeeper ä¼šåœ¨ 2181 ç«¯å£å¯åŠ¨è¯·æ±‚ç›‘å¬ã€‚</p>
<p>ç„¶ååˆ›å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶å¹¶è¾“å…¥é…ç½®é¡¹ï¼Œç”±äºè¿˜æ˜¯ä»¥è¯»å†™åˆ†ç¦»ä¸ºä¾‹è¿›è¡Œæ¼”ç¤ºï¼Œå› æ­¤ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬è®¾ç½®äº†ä¸€ä¸»ä¸¤ä»ä¸€å…±ä¸‰ä¸ªæ•°æ®æºï¼Œè¿™éƒ¨åˆ†é…ç½®é¡¹åœ¨ä»‹ç»è¯»å†™åˆ†ç¦»æœºåˆ¶æ—¶å·²ç»ä»‹ç»è¿‡ï¼Œè¿™é‡Œä¸å†å±•å¼€ï¼š</p>
<pre tabindex="0"><code>spring.shardingsphere.datasource.names=dsmaster,dsslave0,dsslave1 
spring.shardingsphere.datasource.dsmaster.type=com.zaxxer.hikari.HikariDataSource
spring.shardingsphere.datasource.dsmaster.driver-class-name=com.mysql.jdbc.Driver
spring.shardingsphere.datasource.dsmaster.jdbc-url=jdbc:mysql://localhost:3306/dsmaster
spring.shardingsphere.datasource.dsmaster.username=root
spring.shardingsphere.datasource.dsmaster.password=root 
spring.shardingsphere.datasource.dsslave0.type=com.zaxxer.hikari.HikariDataSource
spring.shardingsphere.datasource.dsslave0.driver-class-name=com.mysql.jdbc.Driver
spring.shardingsphere.datasource.dsslave0.jdbc-url=jdbc:mysql://localhost:3306/dsslave0
spring.shardingsphere.datasource.dsslave0.username=root
spring.shardingsphere.datasource.dsslave0.password=root 
spring.shardingsphere.datasource.dsslave1.type=com.zaxxer.hikari.HikariDataSource
spring.shardingsphere.datasource.dsslave1.driver-class-name=com.mysql.jdbc.Driver
spring.shardingsphere.datasource.dsslave1.jdbc-url=jdbc:mysql://localhost:3306/dsslave1
spring.shardingsphere.datasource.dsslave1.username=root
spring.shardingsphere.datasource.dsslave1.password=root 
spring.shardingsphere.masterslave.load-balance-algorithm-type=random
spring.shardingsphere.masterslave.name=health_ms
spring.shardingsphere.masterslave.master-data-source-name=dsmaster
spring.shardingsphere.masterslave.slave-data-source-names=dsslave0,dsslave1 
spring.shardingsphere.props.sql.show=true
</code></pre><p>æ¥ä¸‹æ¥æŒ‡å®šé…ç½®ä¸­å¿ƒï¼Œæˆ‘ä»¬å°† overwrite è®¾ç½®ä¸º trueï¼Œ<strong>è¿™æ„å‘³ç€å‰é¢çš„è¿™äº›æœ¬åœ°é…ç½®é¡¹ä¼šè¦†ç›–ä¿å­˜åœ¨ ZooKeeper æœåŠ¡å™¨ä¸Šçš„é…ç½®é¡¹ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬é‡‡ç”¨çš„æ˜¯æœ¬åœ°é…ç½®æ¨¡å¼</strong>ã€‚ç„¶åæˆ‘ä»¬è®¾ç½®é…ç½®ä¸­å¿ƒç±»å‹ä¸º zookeeperï¼ŒæœåŠ¡å™¨åˆ—è¡¨ä¸º localhost:2181ï¼Œå¹¶å°†å‘½åç©ºé—´è®¾ç½®ä¸º orchestration-health_msã€‚</p>
<pre tabindex="0"><code>spring.shardingsphere.orchestration.name=health_ms
spring.shardingsphere.orchestration.overwrite=true
spring.shardingsphere.orchestration.registry.type=zookeeper
spring.shardingsphere.orchestration.registry.server-lists=localhost:2181
spring.shardingsphere.orchestration.registry.namespace=orchestration-health_ms
</code></pre><p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬å¯åŠ¨æœåŠ¡ï¼Œæ§åˆ¶å°ä¼šå‡ºç°ä¸ ZooKeeper è¿›è¡Œé€šä¿¡çš„ç›¸å…³æ—¥å¿—ä¿¡æ¯ï¼š</p>
<pre tabindex="0"><code>2020-05-30 18:13:45.954  INFO 20272 --- [           main] org.apache.zookeeper.ZooKeeper           : Initiating client connection, connectString=localhost:2181 sessionTimeout=60000 watcher=org.apache.curator.ConnectionState@585ac855
2020-05-30 18:13:46.011  INFO 20272 --- [0:0:0:0:1:2181)] org.apache.zookeeper.ClientCnxn          : Opening socket connection to server 0:0:0:0:0:0:0:1/0:0:0:0:0:0:0:1:2181. Will not attempt to authenticate using SASL (unknown error)
2020-05-30 18:13:46.012  INFO 20272 --- [0:0:0:0:1:2181)] org.apache.zookeeper.ClientCnxn          : Socket connection established to 0:0:0:0:0:0:0:1/0:0:0:0:0:0:0:1:2181, initiating session
2020-05-30 18:13:46.029  INFO 20272 --- [0:0:0:0:1:2181)] org.apache.zookeeper.ClientCnxn          : Session establishment complete on server 0:0:0:0:0:0:0:1/0:0:0:0:0:0:0:1:2181, sessionid = 0x10022dd7e680001, negotiated timeout = 40000
2020-05-30 18:13:46.034  INFO 20272 --- [ain-EventThread] o.a.c.f.state.ConnectionStateManager     : State change: CONNECTED
</code></pre><p>åŒæ—¶ï¼ŒZooKeeper æœåŠ¡å™¨ç«¯ä¹Ÿå¯¹æ¥è‡ªåº”ç”¨ç¨‹åºçš„è¯·æ±‚ä½œå‡ºå“åº”ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€äº› ZooKeeper å¯è§†åŒ–å®¢æˆ·ç«¯å·¥å…·æ¥è§‚å¯Ÿç›®å‰æœåŠ¡å™¨ä¸Šçš„æ•°æ®ã€‚è¿™é‡Œï¼Œæˆ‘ä½¿ç”¨äº† ZooInspector è¿™æ¬¾å·¥å…·ï¼Œç”±äº ZooKeeper æœ¬è´¨ä¸Šå°±æ˜¯æ ‘çŠ¶ç»“æ„ï¼Œ<del>ç°åœ¨</del>æ‰€ä»¥åœ¨æ ¹èŠ‚ç‚¹ä¸­å°±æ–°å¢äº†é…ç½®ä¿¡æ¯ï¼š</p>
<p><img src="http://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/ShardingSphere%20%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2-%E5%AE%8C/assets/CgqCHl8VVf2AWu6mAAAPpWnlsUo874.png" alt="3.png"> ZooKeeper ä¸­çš„é…ç½®èŠ‚ç‚¹å›¾</p>
<p>æˆ‘ä»¬å…³æ³¨â€œconfigâ€æ®µå†…å®¹ï¼Œå…¶ä¸­â€œruleâ€èŠ‚ç‚¹åŒ…å«äº†è¯»å†™åˆ†ç¦»çš„è§„åˆ™è®¾ç½®ï¼š</p>
<p><img src="http://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/ShardingSphere%20%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2-%E5%AE%8C/assets/CgqCHl8VVgWAXXOKAAAuZGtB8EQ493.png" alt="4.png"> ZooKeeper ä¸­çš„â€œruleâ€é…ç½®é¡¹</p>
<p>è€Œâ€œdatasourceâ€èŠ‚ç‚¹åŒ…å«çš„æ˜¾ç„¶æ˜¯å‰é¢æ‰€æŒ‡å®šçš„å„ä¸ªæ•°æ®æºä¿¡æ¯ã€‚</p>
<p>ç”±äºæˆ‘ä»¬åœ¨æœ¬åœ°é…ç½®æ–‡ä»¶ä¸­å°† spring.shardingsphere.orchestration.overwrite é…ç½®é¡¹è®¾ç½®ä¸º trueï¼Œæœ¬åœ°é…ç½®çš„å˜åŒ–å°±ä¼šå½±å“åˆ°æœåŠ¡å™¨ç«¯é…ç½®ï¼Œè¿›è€Œå½±å“åˆ°æ‰€æœ‰ä½¿ç”¨è¿™äº›é…ç½®çš„åº”ç”¨ç¨‹åºã€‚å¦‚æœä¸å¸Œæœ›äº§ç”Ÿè¿™ç§å½±å“ï¼Œè€Œæ˜¯ç»Ÿä¸€ä½¿ç”¨ä½äºé…ç½®ä¸­å¿ƒä¸Šçš„é…ç½®ï¼Œåº”è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ</p>
<p>å¾ˆç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦å°† spring.shardingsphere.orchestration.overwrite è®¾ç½®ä¸º false å³å¯ã€‚<strong>å°†è¿™ä¸ªé…ç½®å¼€å…³è¿›è¡Œå…³é—­ï¼Œæ„å‘³ç€æˆ‘ä»¬å°†åªä»é…ç½®ä¸­å¿ƒè¯»å–é…ç½®ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæœ¬åœ°ä¸éœ€è¦ä¿å­˜ä»»ä½•é…ç½®ä¿¡æ¯</strong>ï¼ŒåªåŒ…å«æŒ‡å®šé…ç½®ä¸­å¿ƒçš„ç›¸å…³å†…å®¹äº†ï¼š</p>
<pre tabindex="0"><code>spring.shardingsphere.orchestration.name=health_ms
spring.shardingsphere.orchestration.overwrite=false
spring.shardingsphere.orchestration.registry.type=zookeeper
spring.shardingsphere.orchestration.registry.server-lists=localhost:2181
spring.shardingsphere.orchestration.registry.namespace=orchestration-health_ms
</code></pre><p>æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹åï¼Œä¼šå‘ç°è¯»å†™åˆ†ç¦»è§„åˆ™åŒæ ·ç”Ÿæ•ˆã€‚</p>
<p>å¦‚æœä½ é€‰æ‹©ä½¿ç”¨å…¶ä»–çš„æ¡†æ¶æ¥æ„å»ºé…ç½®ä¸­å¿ƒæœåŠ¡å™¨ï¼Œæ¯”å¦‚é˜¿é‡Œå·´å·´çš„ Nacosï¼Œé‚£ä¹ˆä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦å°† spring.shardingsphere.orchestration.registry.type è®¾ç½®æˆ nacos å¹¶æä¾›å¯¹åº”çš„ server-lists å°±å¯ä»¥äº†ï¼š</p>
<pre tabindex="0"><code>spring.shardingsphere.orchestration.name=health_ms
spring.shardingsphere.orchestration.overwrite=true
spring.shardingsphere.orchestration.registry.type=nacos
spring.shardingsphere.orchestration.registry.server-lists=localhost:8848
spring.shardingsphere.orchestration.registry.namespace=
</code></pre><h3 id="æ€»ç»“">æ€»ç»“</h3>
<p>æœ¬è¯¾æ—¶æˆ‘ä»¬è®¨è®ºäº†åœ¨ ShardingSphere ä¸­ä¸ç¼–æ’æ²»ç†ç›¸å…³çš„åŠŸèƒ½æ”¯æŒã€‚ShardingSphere æä¾›äº†é…ç½®ä¸­å¿ƒå’Œæ³¨å†Œä¸­å¿ƒä¸¤ç§æ²»ç†æœºåˆ¶ï¼Œè¿™ä¸¤ç§æœºåˆ¶é‡‡ç”¨äº†ç±»ä¼¼çš„åº•å±‚è®¾è®¡ï¼Œä½†é¢å‘ä¸åŒçš„åº”ç”¨åœºæ™¯ã€‚æˆ‘ä»¬ç»“åˆæ¡ˆä¾‹ï¼ŒåŸºäºé…ç½®ä¸­å¿ƒç»™å‡ºäº†å…·ä½“çš„å¼€å‘è¿‡ç¨‹ã€‚å¯¹äºé…ç½®ä¸­å¿ƒè€Œè¨€ï¼Œé‡ç‚¹æ˜¯éœ€è¦ç†è§£<strong>å¦‚ä½•åŸºäº Zookeeper è¿™ä¸ªåˆ†å¸ƒå¼åè°ƒå·¥å…·æ¥å®Œæˆæœ¬åœ°å’Œè¿œç¨‹é…ç½®ä¿¡æ¯ä¹‹å‰çš„åŠ¨æ€æ›´æ–°å’ŒåŒæ­¥</strong>ã€‚</p>
<p>è¿™é‡Œç»™ä½ ç•™ä¸€é“æ€è€ƒé¢˜ï¼šShardingSphere ä¸­é…ç½®ä¸­å¿ƒå’Œæ³¨å†Œä¸­å¿ƒåœ¨è®¾è®¡ä¸Šæœ‰å“ªäº›ç›¸åŒç‚¹å’Œä¸åŒç‚¹ï¼Ÿ</p>
<p>æœ¬è¯¾æ—¶æ˜¯ä¸“æ ä¸­å…³äº ShardingSphere æ ¸å¿ƒåŠŸèƒ½çš„æœ€åä¸€ä¸ªä¸»é¢˜ï¼Œä»ä¸‹ä¸€ä¸ªè¯¾æ—¶å¼€å§‹ï¼Œæˆ‘ä»¬å°†è¿›å…¥ ShardingSphere æºç è§£æçš„ç›¸å…³å†…å®¹ï¼Œæˆ‘å°†ä¸ºä½ æ¢³ç†å¦‚ä½•é«˜æ•ˆåœ°é˜…è¯» ShardingSphere æºç ï¼Œè®°å¾—æŒ‰æ—¶æ¥å¬è¯¾ã€‚</p>

        </div>
    </article>
</div>

    </main>
    <footer>
        <div id="pagination">
            
<div class="paginator">
    <div class="prev">
        
        <a href="/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/10-%E6%95%B0%E6%8D%AE%E8%84%B1%E6%95%8F%E5%A6%82%E4%BD%95%E7%A1%AE%E4%BF%9D%E6%95%8F%E6%84%9F%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AE%89%E5%85%A8%E8%AE%BF%E9%97%AE/"><span>10 æ•°æ®è„±æ•ï¼šå¦‚ä½•ç¡®ä¿æ•æ„Ÿæ•°æ®çš„å®‰å…¨è®¿é—®ï¼Ÿ</span></a>
    </div>
    <div class="next">
        
        <a href="/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/12-%E4%BB%8E%E5%BA%94%E7%94%A8%E5%88%B0%E5%8E%9F%E7%90%86%E5%A6%82%E4%BD%95%E9%AB%98%E6%95%88%E9%98%85%E8%AF%BB-shardingsphere-%E6%BA%90%E7%A0%81/"><span>12 ä»åº”ç”¨åˆ°åŸç†ï¼šå¦‚ä½•é«˜æ•ˆé˜…è¯» ShardingSphere æºç ï¼Ÿ</span></a>
    </div>
</div>

        </div>
        <div class="toggler" onclick="toggleLight(this);">ğŸ’¡</div>
        <div id="copyright" style="display: none;">
    
    
    <p>&copy; 27270 <a href="/"></a>, powered by Hugo and Qiao</p>
</div>
    </footer>
    
<script>
    function toggleLight() {
        document.getElementById('page').classList.toggle('night');
    }
</script>
</body>

</html>