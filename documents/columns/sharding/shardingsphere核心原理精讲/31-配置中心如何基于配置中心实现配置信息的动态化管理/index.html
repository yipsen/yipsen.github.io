<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
<meta name="X-UA-Compatible" , content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<link rel="icon" type="image/png" href="/%20/favicon.png">

<title>31 é…ç½®ä¸­å¿ƒï¼šå¦‚ä½•åŸºäºé…ç½®ä¸­å¿ƒå®ç°é…ç½®ä¿¡æ¯çš„åŠ¨æ€åŒ–ç®¡ç†ï¼Ÿ | Yipsen Ye</title>
<meta name="description" content="ShardingSphere åœ¨ç¼–æ’æ²»ç†æ–¹é¢åŒ…æ‹¬é…ç½®åŠ¨æ€åŒ–ã€æ³¨å†Œä¸­å¿ƒã€æ•°æ®åº“ç†”æ–­ç¦ç”¨ã€è°ƒç”¨é“¾è·¯ç­‰æ²»ç†èƒ½åŠ›ã€‚
ä»Šå¤©æˆ‘ä»¬å…ˆæ¥ä»‹ç»æœ€ç®€å•çš„é…ç½®ä¸­å¿ƒï¼Œå³å¦‚ä½•åŸºäºé…ç½®ä¸­å¿ƒä»è€Œå®ç°é…ç½®ä¿¡æ¯çš„åŠ¨æ€åŒ–ç®¡ç†ã€‚
ShardingSphere ä¸­å¯¹é…ç½®ä¸­å¿ƒçš„æŠ½è±¡è¿‡ç¨‹ é…ç½®ä¸­å¿ƒçš„æ ¸å¿ƒæ¥å£ ConfigCenter ä½äº sharding-orchestration-config-api å·¥ç¨‹ä¸­ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š
public interface ConfigCenter extends TypeBasedSPI {//åˆå§‹åŒ–é…ç½®ä¸­å¿ƒvoid init(ConfigCenterConfiguration config);//è·å–é…ç½®é¡¹æ•°æ®String get(String key);//ç›´æ¥è·å–é…ç½®é¡¹æ•°æ®String getDirectly(String key);//æ˜¯å¦å­˜åœ¨é…ç½®é¡¹boolean isExisted(String key);//è·å–å­é…ç½®é¡¹åˆ—è¡¨List&amp;lt;String&amp;gt; getChildrenKeys(String key);//æŒä¹…åŒ–é…ç½®é¡¹void persist(String key, String value);//æ›´æ–°é…ç½®é¡¹void update(String key, String value);//æŒä¹…åŒ–ä¸´æ—¶æ•°æ®void persistEphemeral(String key, String value);//å¯¹é…ç½®é¡¹æˆ–è·¯å¾„è¿›è¡Œç›‘å¬void watch(String key, DataChangedEventListener dataChangedEventListener);//å…³é—­é…ç½®ä¸­å¿ƒvoid close();}ä¸Šè¿°æ–¹æ³•ä¸­ï¼Œå”¯ä¸€å€¼å¾—å±•å¼€çš„å°±æ˜¯ watch æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼ å…¥äº†ä¸€ä¸ªä»£è¡¨äº‹ä»¶ç›‘å¬å™¨çš„ DataChangedEventListener æ¥å£ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š
public interface DataChangedEventListener {//å½“æ•°æ®å˜åŠ¨æ—¶è¿›è¡Œè§¦å‘void onChange(DataChangedEvent dataChangedEvent);}è¿™é‡Œç”¨åˆ°çš„ DataChangedEvent ç±»å®šä¹‰å¦‚ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°äº‹ä»¶çš„ç±»å‹æœ‰ä¸‰ç§ï¼Œåˆ†åˆ«æ˜¯ UPDATEDã€DELETED å’Œ IGNOREDï¼š">
<meta name="author" content="">

<link rel="stylesheet" type="text/css" href="/styles/main.css">

</head>

<body id="page">
    <header>
        <div class="logo-link" style="width: 60px; color: #CA6924;">
    <a href="http://yipsen.github.io/">
        <img style="margin-bottom: -1rem;" src="/images/deer.svg" alt="logo">
        <span style="font-size: 0.5rem; color: #CA6924;">Yipsen Ye</span>
    </a>
</div>
<nav class="navbar justify-content-end">
    <ul class="nav-list">
        
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/posts/">æœ­è®°</a>
        </li>
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/collections/">é™„è¡¨</a>
        </li>
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/about/">å…³äº</a>
        </li>
        
    </ul>
</nav>
    </header>
    <main id="content">
        
<div class="container"><aside>
    <div>
        
        
            
            
            <div class="post-category-icon"></div>
            <a href="/categories/shardingsphere%e6%a0%b8%e5%bf%83%e5%8e%9f%e7%90%86%e7%b2%be%e8%ae%b2/">ShardingSphereæ ¸å¿ƒåŸç†ç²¾è®²</a>
            <ul>
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/00-%E5%A6%82%E4%BD%95%E6%AD%A3%E7%A1%AE%E5%AD%A6%E4%B9%A0%E4%B8%80%E6%AC%BE%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8%E5%BC%80%E6%BA%90%E6%A1%86%E6%9E%B6/">00 å¦‚ä½•æ­£ç¡®å­¦ä¹ ä¸€æ¬¾åˆ†åº“åˆ†è¡¨å¼€æºæ¡†æ¶ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/01-%E4%BB%8E%E7%90%86%E8%AE%BA%E5%88%B0%E5%AE%9E%E8%B7%B5%E5%A6%82%E4%BD%95%E8%AE%A9%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8%E7%9C%9F%E6%AD%A3%E8%90%BD%E5%9C%B0/">01 ä»ç†è®ºåˆ°å®è·µï¼šå¦‚ä½•è®©åˆ†åº“åˆ†è¡¨çœŸæ­£è½åœ°ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/02-%E9%A1%B6%E7%BA%A7%E9%A1%B9%E7%9B%AEshardingsphere-%E6%98%AF%E4%B8%80%E6%AC%BE%E4%BB%80%E4%B9%88%E6%A0%B7%E7%9A%84-apache-%E5%BC%80%E6%BA%90%E8%BD%AF%E4%BB%B6/">02 é¡¶çº§é¡¹ç›®ï¼šShardingSphere æ˜¯ä¸€æ¬¾ä»€ä¹ˆæ ·çš„ Apache å¼€æºè½¯ä»¶ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/03-%E8%A7%84%E8%8C%83%E5%85%BC%E5%AE%B9jdbc-%E8%A7%84%E8%8C%83%E4%B8%8E-shardingsphere-%E6%98%AF%E4%BB%80%E4%B9%88%E5%85%B3%E7%B3%BB/">03 è§„èŒƒå…¼å®¹ï¼šJDBC è§„èŒƒä¸ ShardingSphere æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/04-%E5%BA%94%E7%94%A8%E9%9B%86%E6%88%90%E5%9C%A8%E4%B8%9A%E5%8A%A1%E7%B3%BB%E7%BB%9F%E4%B8%AD%E4%BD%BF%E7%94%A8-shardingsphere-%E7%9A%84%E6%96%B9%E5%BC%8F%E6%9C%89%E5%93%AA%E4%BA%9B/">04 åº”ç”¨é›†æˆï¼šåœ¨ä¸šåŠ¡ç³»ç»Ÿä¸­ä½¿ç”¨ ShardingSphere çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/05-%E9%85%8D%E7%BD%AE%E9%A9%B1%E5%8A%A8shardingsphere-%E4%B8%AD%E7%9A%84%E9%85%8D%E7%BD%AE%E4%BD%93%E7%B3%BB%E6%98%AF%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E7%9A%84/">05 é…ç½®é©±åŠ¨ï¼šShardingSphere ä¸­çš„é…ç½®ä½“ç³»æ˜¯å¦‚ä½•è®¾è®¡çš„ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/09-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%E5%BC%BA%E4%B8%80%E8%87%B4%E6%80%A7%E4%BA%8B%E5%8A%A1%E4%B8%8E%E6%9F%94%E6%80%A7%E4%BA%8B%E5%8A%A1/">09 åˆ†å¸ƒå¼äº‹åŠ¡ï¼šå¦‚ä½•ä½¿ç”¨å¼ºä¸€è‡´æ€§äº‹åŠ¡ä¸æŸ”æ€§äº‹åŠ¡ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/10-%E6%95%B0%E6%8D%AE%E8%84%B1%E6%95%8F%E5%A6%82%E4%BD%95%E7%A1%AE%E4%BF%9D%E6%95%8F%E6%84%9F%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AE%89%E5%85%A8%E8%AE%BF%E9%97%AE/">10 æ•°æ®è„±æ•ï¼šå¦‚ä½•ç¡®ä¿æ•æ„Ÿæ•°æ®çš„å®‰å…¨è®¿é—®ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/11-%E7%BC%96%E6%8E%92%E6%B2%BB%E7%90%86%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E5%88%86%E5%B8%83%E5%BC%8F%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84%E5%8A%A8%E6%80%81%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86/">11 ç¼–æ’æ²»ç†ï¼šå¦‚ä½•å®ç°åˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„åŠ¨æ€é…ç½®ç®¡ç†ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/12-%E4%BB%8E%E5%BA%94%E7%94%A8%E5%88%B0%E5%8E%9F%E7%90%86%E5%A6%82%E4%BD%95%E9%AB%98%E6%95%88%E9%98%85%E8%AF%BB-shardingsphere-%E6%BA%90%E7%A0%81/">12 ä»åº”ç”¨åˆ°åŸç†ï¼šå¦‚ä½•é«˜æ•ˆé˜…è¯» ShardingSphere æºç ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/13-%E5%BE%AE%E5%86%85%E6%A0%B8%E6%9E%B6%E6%9E%84shardingsphere-%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%89%A9%E5%B1%95%E6%80%A7/">13 å¾®å†…æ ¸æ¶æ„ï¼šShardingSphere å¦‚ä½•å®ç°ç³»ç»Ÿçš„æ‰©å±•æ€§ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/14-%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%BB%E9%94%AEshardingsphere-%E4%B8%AD%E6%9C%89%E5%93%AA%E4%BA%9B%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%BB%E9%94%AE%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F/">14 åˆ†å¸ƒå¼ä¸»é”®ï¼šShardingSphere ä¸­æœ‰å“ªäº›åˆ†å¸ƒå¼ä¸»é”®å®ç°æ–¹å¼ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/15-%E8%A7%A3%E6%9E%90%E5%BC%95%E6%93%8Esql-%E8%A7%A3%E6%9E%90%E6%B5%81%E7%A8%8B%E5%BA%94%E8%AF%A5%E5%8C%85%E6%8B%AC%E5%93%AA%E4%BA%9B%E6%A0%B8%E5%BF%83%E9%98%B6%E6%AE%B5%E4%B8%8A/">15 è§£æå¼•æ“ï¼šSQL è§£ææµç¨‹åº”è¯¥åŒ…æ‹¬å“ªäº›æ ¸å¿ƒé˜¶æ®µï¼Ÿï¼ˆä¸Šï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/16-%E8%A7%A3%E6%9E%90%E5%BC%95%E6%93%8Esql-%E8%A7%A3%E6%9E%90%E6%B5%81%E7%A8%8B%E5%BA%94%E8%AF%A5%E5%8C%85%E6%8B%AC%E5%93%AA%E4%BA%9B%E6%A0%B8%E5%BF%83%E9%98%B6%E6%AE%B5%E4%B8%8B/">16 è§£æå¼•æ“ï¼šSQL è§£ææµç¨‹åº”è¯¥åŒ…æ‹¬å“ªäº›æ ¸å¿ƒé˜¶æ®µï¼Ÿï¼ˆä¸‹ï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/17-%E8%B7%AF%E7%94%B1%E5%BC%95%E6%93%8E%E5%A6%82%E4%BD%95%E7%90%86%E8%A7%A3%E5%88%86%E7%89%87%E8%B7%AF%E7%94%B1%E6%A0%B8%E5%BF%83%E7%B1%BB-shardingrouter-%E7%9A%84%E8%BF%90%E4%BD%9C%E6%9C%BA%E5%88%B6/">17 è·¯ç”±å¼•æ“ï¼šå¦‚ä½•ç†è§£åˆ†ç‰‡è·¯ç”±æ ¸å¿ƒç±» ShardingRouter çš„è¿ä½œæœºåˆ¶ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/18-%E8%B7%AF%E7%94%B1%E5%BC%95%E6%93%8E%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE%E7%9A%84%E5%88%86%E7%89%87%E8%B7%AF%E7%94%B1%E5%92%8C%E5%B9%BF%E6%92%AD%E8%B7%AF%E7%94%B1/">18 è·¯ç”±å¼•æ“ï¼šå¦‚ä½•å®ç°æ•°æ®è®¿é—®çš„åˆ†ç‰‡è·¯ç”±å’Œå¹¿æ’­è·¯ç”±ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/19-%E8%B7%AF%E7%94%B1%E5%BC%95%E6%93%8E%E5%A6%82%E4%BD%95%E5%9C%A8%E8%B7%AF%E7%94%B1%E8%BF%87%E7%A8%8B%E4%B8%AD%E9%9B%86%E6%88%90%E5%A4%9A%E7%A7%8D%E8%B7%AF%E7%94%B1%E7%AD%96%E7%95%A5%E5%92%8C%E8%B7%AF%E7%94%B1%E7%AE%97%E6%B3%95/">19 è·¯ç”±å¼•æ“ï¼šå¦‚ä½•åœ¨è·¯ç”±è¿‡ç¨‹ä¸­é›†æˆå¤šç§è·¯ç”±ç­–ç•¥å’Œè·¯ç”±ç®—æ³•ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/20-%E6%94%B9%E5%86%99%E5%BC%95%E6%93%8E%E5%A6%82%E4%BD%95%E7%90%86%E8%A7%A3%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F%E4%B8%8B%E7%9A%84-sql-%E6%94%B9%E5%86%99%E5%AE%9E%E7%8E%B0%E6%9C%BA%E5%88%B6/">20 æ”¹å†™å¼•æ“ï¼šå¦‚ä½•ç†è§£è£…é¥°å™¨æ¨¡å¼ä¸‹çš„ SQL æ”¹å†™å®ç°æœºåˆ¶ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/21-%E6%89%A7%E8%A1%8C%E5%BC%95%E6%93%8E%E5%88%86%E7%89%87%E7%8E%AF%E5%A2%83%E4%B8%8B-sql-%E6%89%A7%E8%A1%8C%E7%9A%84%E6%95%B4%E4%BD%93%E6%B5%81%E7%A8%8B%E5%BA%94%E8%AF%A5%E5%A6%82%E4%BD%95%E8%BF%9B%E8%A1%8C%E6%8A%BD%E8%B1%A1/">21 æ‰§è¡Œå¼•æ“ï¼šåˆ†ç‰‡ç¯å¢ƒä¸‹ SQL æ‰§è¡Œçš„æ•´ä½“æµç¨‹åº”è¯¥å¦‚ä½•è¿›è¡ŒæŠ½è±¡ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/22-%E6%89%A7%E8%A1%8C%E5%BC%95%E6%93%8E%E5%A6%82%E4%BD%95%E6%8A%8A%E6%8F%A1-shardingsphere-%E4%B8%AD%E7%9A%84-executor-%E6%89%A7%E8%A1%8C%E6%A8%A1%E5%9E%8B%E4%B8%8A/">22 æ‰§è¡Œå¼•æ“ï¼šå¦‚ä½•æŠŠæ¡ ShardingSphere ä¸­çš„ Executor æ‰§è¡Œæ¨¡å‹ï¼Ÿï¼ˆä¸Šï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/23-%E6%89%A7%E8%A1%8C%E5%BC%95%E6%93%8E%E5%A6%82%E4%BD%95%E6%8A%8A%E6%8F%A1-shardingsphere-%E4%B8%AD%E7%9A%84-executor-%E6%89%A7%E8%A1%8C%E6%A8%A1%E5%9E%8B%E4%B8%8B/">23 æ‰§è¡Œå¼•æ“ï¼šå¦‚ä½•æŠŠæ¡ ShardingSphere ä¸­çš„ Executor æ‰§è¡Œæ¨¡å‹ï¼Ÿï¼ˆä¸‹ï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/24-%E5%BD%92%E5%B9%B6%E5%BC%95%E6%93%8E%E5%A6%82%E4%BD%95%E7%90%86%E8%A7%A3%E6%95%B0%E6%8D%AE%E5%BD%92%E5%B9%B6%E7%9A%84%E7%B1%BB%E5%9E%8B%E4%BB%A5%E5%8F%8A%E7%AE%80%E5%8D%95%E5%BD%92%E5%B9%B6%E7%AD%96%E7%95%A5%E7%9A%84%E5%AE%9E%E7%8E%B0%E8%BF%87%E7%A8%8B/">24 å½’å¹¶å¼•æ“ï¼šå¦‚ä½•ç†è§£æ•°æ®å½’å¹¶çš„ç±»å‹ä»¥åŠç®€å•å½’å¹¶ç­–ç•¥çš„å®ç°è¿‡ç¨‹ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/25-%E5%BD%92%E5%B9%B6%E5%BC%95%E6%93%8E%E5%A6%82%E4%BD%95%E7%90%86%E8%A7%A3%E6%B5%81%E5%BC%8F%E5%BD%92%E5%B9%B6%E5%92%8C%E5%86%85%E5%AD%98%E5%BD%92%E5%B9%B6%E5%9C%A8%E5%A4%8D%E6%9D%82%E5%BD%92%E5%B9%B6%E5%9C%BA%E6%99%AF%E4%B8%8B%E7%9A%84%E5%BA%94%E7%94%A8%E6%96%B9%E5%BC%8F/">25 å½’å¹¶å¼•æ“ï¼šå¦‚ä½•ç†è§£æµå¼å½’å¹¶å’Œå†…å­˜å½’å¹¶åœ¨å¤æ‚å½’å¹¶åœºæ™¯ä¸‹çš„åº”ç”¨æ–¹å¼ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/26-%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB%E6%99%AE%E9%80%9A%E4%B8%BB%E4%BB%8E%E6%9E%B6%E6%9E%84%E5%92%8C%E5%88%86%E7%89%87%E4%B8%BB%E4%BB%8E%E6%9E%B6%E6%9E%84%E5%88%86%E5%88%AB%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84/">26 è¯»å†™åˆ†ç¦»ï¼šæ™®é€šä¸»ä»æ¶æ„å’Œåˆ†ç‰‡ä¸»ä»æ¶æ„åˆ†åˆ«æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/27-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E5%A6%82%E4%BD%95%E7%90%86%E8%A7%A3-shardingsphere-%E4%B8%AD%E5%AF%B9%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E7%9A%84%E6%8A%BD%E8%B1%A1%E8%BF%87%E7%A8%8B/">27 åˆ†å¸ƒå¼äº‹åŠ¡ï¼šå¦‚ä½•ç†è§£ ShardingSphere ä¸­å¯¹åˆ†å¸ƒå¼äº‹åŠ¡çš„æŠ½è±¡è¿‡ç¨‹ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/28-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1shardingsphere-%E4%B8%AD%E5%A6%82%E4%BD%95%E9%9B%86%E6%88%90%E5%BC%BA%E4%B8%80%E8%87%B4%E6%80%A7%E4%BA%8B%E5%8A%A1%E5%92%8C%E6%9F%94%E6%80%A7%E4%BA%8B%E5%8A%A1%E6%94%AF%E6%8C%81%E4%B8%8A/">28 åˆ†å¸ƒå¼äº‹åŠ¡ï¼šShardingSphere ä¸­å¦‚ä½•é›†æˆå¼ºä¸€è‡´æ€§äº‹åŠ¡å’ŒæŸ”æ€§äº‹åŠ¡æ”¯æŒï¼Ÿï¼ˆä¸Šï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/29-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1shardingsphere-%E4%B8%AD%E5%A6%82%E4%BD%95%E9%9B%86%E6%88%90%E5%BC%BA%E4%B8%80%E8%87%B4%E6%80%A7%E4%BA%8B%E5%8A%A1%E5%92%8C%E6%9F%94%E6%80%A7%E4%BA%8B%E5%8A%A1%E6%94%AF%E6%8C%81%E4%B8%8B/">29 åˆ†å¸ƒå¼äº‹åŠ¡ï¼šShardingSphere ä¸­å¦‚ä½•é›†æˆå¼ºä¸€è‡´æ€§äº‹åŠ¡å’ŒæŸ”æ€§äº‹åŠ¡æ”¯æŒï¼Ÿï¼ˆä¸‹ï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/30-%E6%95%B0%E6%8D%AE%E8%84%B1%E6%95%8F%E5%A6%82%E4%BD%95%E5%9F%BA%E4%BA%8E%E6%94%B9%E5%86%99%E5%BC%95%E6%93%8E%E5%AE%9E%E7%8E%B0%E4%BD%8E%E4%BE%B5%E5%85%A5%E6%80%A7%E6%95%B0%E6%8D%AE%E8%84%B1%E6%95%8F%E6%96%B9%E6%A1%88/">30 æ•°æ®è„±æ•ï¼šå¦‚ä½•åŸºäºæ”¹å†™å¼•æ“å®ç°ä½ä¾µå…¥æ€§æ•°æ®è„±æ•æ–¹æ¡ˆï¼Ÿ</a></li>
                
                
                
                    <li>31 é…ç½®ä¸­å¿ƒï¼šå¦‚ä½•åŸºäºé…ç½®ä¸­å¿ƒå®ç°é…ç½®ä¿¡æ¯çš„åŠ¨æ€åŒ–ç®¡ç†ï¼Ÿ</li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/32-%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E5%A6%82%E4%BD%95%E5%9F%BA%E4%BA%8E%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BF%E9%97%AE%E7%86%94%E6%96%AD%E6%9C%BA%E5%88%B6/">32 æ³¨å†Œä¸­å¿ƒï¼šå¦‚ä½•åŸºäºæ³¨å†Œä¸­å¿ƒå®ç°æ•°æ®åº“è®¿é—®ç†”æ–­æœºåˆ¶ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/33-%E9%93%BE%E8%B7%AF%E8%B7%9F%E8%B8%AA%E5%A6%82%E4%BD%95%E5%9F%BA%E4%BA%8E-hook-%E6%9C%BA%E5%88%B6%E4%BB%A5%E5%8F%8A-opentracing-%E5%8D%8F%E8%AE%AE%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE%E9%93%BE%E8%B7%AF%E8%B7%9F%E8%B8%AA/">33 é“¾è·¯è·Ÿè¸ªï¼šå¦‚ä½•åŸºäº Hook æœºåˆ¶ä»¥åŠ OpenTracing åè®®å®ç°æ•°æ®è®¿é—®é“¾è·¯è·Ÿè¸ªï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/35-%E7%BB%93%E8%AF%ADshardingsphere-%E6%80%BB%E7%BB%93%E5%8F%8A%E5%B1%95%E6%9C%9B/">35 ç»“è¯­ï¼šShardingSphere æ€»ç»“åŠå±•æœ›</a></li>
                
                
            </ul>
        
    </div>
</aside>

<style>
    aside {
        position: fixed;
        left: 20px;
        background: #ffdee3;
        border-radius: 6px;
        padding: 20px;
        padding-top: 60px;
        box-shadow: 5px 10px #888;
        list-style-type: none;
        display: none;
    }

    .post-category-icon {
        position: absolute;
        width: 80px;
        height: 80px;
        top: -40px;
        left: 50%;
        margin-left: -40px;
        text-align: center;
        font-size: 36px;
        content: 'J';
        background: #ffdee3;
        border-radius: 100%;
        border: 10px solid #fff;
        box-shadow: 5px 10px #888;
    }
</style><article class="post-block">
        <h1 class="post-title">31 é…ç½®ä¸­å¿ƒï¼šå¦‚ä½•åŸºäºé…ç½®ä¸­å¿ƒå®ç°é…ç½®ä¿¡æ¯çš„åŠ¨æ€åŒ–ç®¡ç†ï¼Ÿ</h1>
        <div class="post-info">
            <div> 
                <span class="post-date">ğŸ“…&nbsp;2021-12-22 01:56:11</span>ğŸ·ï¸&nbsp;<a class="post-tag" href="/tags/sharding/">sharding</a></div><div class="post-category">
                
                ğŸ“š&nbsp;<a href="/categories/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/">ShardingSphereæ ¸å¿ƒåŸç†ç²¾è®²</a>
                
            </div></div>
        <div class="post-content">
            <p>ShardingSphere åœ¨ç¼–æ’æ²»ç†æ–¹é¢åŒ…æ‹¬é…ç½®åŠ¨æ€åŒ–ã€æ³¨å†Œä¸­å¿ƒã€æ•°æ®åº“ç†”æ–­ç¦ç”¨ã€è°ƒç”¨é“¾è·¯ç­‰æ²»ç†èƒ½åŠ›ã€‚</p>
<p>ä»Šå¤©æˆ‘ä»¬å…ˆæ¥ä»‹ç»æœ€ç®€å•çš„é…ç½®ä¸­å¿ƒï¼Œå³å¦‚ä½•åŸºäºé…ç½®ä¸­å¿ƒä»è€Œå®ç°é…ç½®ä¿¡æ¯çš„åŠ¨æ€åŒ–ç®¡ç†ã€‚</p>
<h3 id="shardingsphere-ä¸­å¯¹é…ç½®ä¸­å¿ƒçš„æŠ½è±¡è¿‡ç¨‹">ShardingSphere ä¸­å¯¹é…ç½®ä¸­å¿ƒçš„æŠ½è±¡è¿‡ç¨‹</h3>
<p>é…ç½®ä¸­å¿ƒçš„æ ¸å¿ƒæ¥å£ ConfigCenter ä½äº sharding-orchestration-config-api å·¥ç¨‹ä¸­ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š</p>
<pre tabindex="0"><code>public interface ConfigCenter extends TypeBasedSPI {

    //åˆå§‹åŒ–é…ç½®ä¸­å¿ƒ

    void init(ConfigCenterConfiguration config);

    //è·å–é…ç½®é¡¹æ•°æ®

    String get(String key);

    //ç›´æ¥è·å–é…ç½®é¡¹æ•°æ®

    String getDirectly(String key);

    //æ˜¯å¦å­˜åœ¨é…ç½®é¡¹

    boolean isExisted(String key);

    //è·å–å­é…ç½®é¡¹åˆ—è¡¨

    List&lt;String&gt; getChildrenKeys(String key);

    //æŒä¹…åŒ–é…ç½®é¡¹

    void persist(String key, String value);

    //æ›´æ–°é…ç½®é¡¹

    void update(String key, String value);

    //æŒä¹…åŒ–ä¸´æ—¶æ•°æ®

    void persistEphemeral(String key, String value);

    //å¯¹é…ç½®é¡¹æˆ–è·¯å¾„è¿›è¡Œç›‘å¬

    void watch(String key, DataChangedEventListener dataChangedEventListener);

    //å…³é—­é…ç½®ä¸­å¿ƒ

    void close();

}
</code></pre><p>ä¸Šè¿°æ–¹æ³•ä¸­ï¼Œå”¯ä¸€å€¼å¾—å±•å¼€çš„å°±æ˜¯ watch æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼ å…¥äº†ä¸€ä¸ªä»£è¡¨äº‹ä»¶ç›‘å¬å™¨çš„ DataChangedEventListener æ¥å£ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre tabindex="0"><code>public interface DataChangedEventListener {

    //å½“æ•°æ®å˜åŠ¨æ—¶è¿›è¡Œè§¦å‘

    void onChange(DataChangedEvent dataChangedEvent);

}
</code></pre><p>è¿™é‡Œç”¨åˆ°çš„ DataChangedEvent ç±»å®šä¹‰å¦‚ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°äº‹ä»¶çš„ç±»å‹æœ‰ä¸‰ç§ï¼Œåˆ†åˆ«æ˜¯ UPDATEDã€DELETED å’Œ IGNOREDï¼š</p>
<pre tabindex="0"><code>public final class DataChangedEvent {

    private final String key;

    private final String value;

    private final ChangedType changedType;

    public enum ChangedType {

        UPDATED, DELETED, IGNORED

    }

}
</code></pre><p>æˆ‘ä»¬åŒæ ·æ³¨æ„åˆ° ConfigCenter æ¥å£ç»§æ‰¿äº† TypeBasedSPI æ¥å£ï¼Œæ‰€ä»¥é›†æˆäº† SPI æœºåˆ¶ã€‚åœ¨ ShardingSphere ä¸­ï¼ŒConfigCenter æ¥å£æœ‰ä¸¤ä¸ªå®ç°ç±»ï¼Œåˆ†åˆ«åŸºäº Apollo çš„ ApolloConfigCenter å’ŒåŸºäº Zookeeper çš„ CuratorZookeeperConfigCenterã€‚</p>
<p>æˆ‘ä»¬åˆ†åˆ«å±•å¼€è®²è§£ä¸€ä¸‹ã€‚</p>
<h3 id="apolloconfigcenter">ApolloConfigCenter</h3>
<h4 id="1apolloconfigcenter-çš„å®ç°è¿‡ç¨‹">1.ApolloConfigCenter çš„å®ç°è¿‡ç¨‹</h4>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹åŸºäº Apollo çš„ ApolloConfigCenterï¼Œå®ƒçš„ init æ–¹æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre tabindex="0"><code>@Override

public void init(final ConfigCenterConfiguration config) {

         //ä»é…ç½®å¯¹è±¡ä¸­è·å–é…ç½®ä¿¡æ¯å¹¶è®¾ç½®ç³»ç»Ÿå±æ€§

        System.getProperties().setProperty(&quot;app.id&quot;, properties.getProperty(&quot;appId&quot;, &quot;APOLLO_SHARDING_SPHERE&quot;));

        System.getProperties().setProperty(&quot;env&quot;, properties.getProperty(&quot;env&quot;, &quot;DEV&quot;));

        System.getProperties().setProperty(ConfigConsts.APOLLO_CLUSTER_KEY, properties.getProperty(&quot;clusterName&quot;, ConfigConsts.CLUSTER_NAME_DEFAULT));

        System.getProperties().setProperty(ConfigConsts.APOLLO_META_KEY, config.getServerLists());

        //é€šè¿‡é…ç½®å¯¹è±¡æ„å»º ApolloConfig

        apolloConfig = ConfigService.getConfig(config.getNamespace());

}
</code></pre><p>ä¸Šè¿° init æ–¹æ³•çš„ä½œç”¨æ˜¯åœ¨è®¾ç½®ç³»ç»Ÿå±æ€§çš„åŒæ—¶ï¼Œæ„å»ºä¸€ä¸ª Config å¯¹è±¡ã€‚åœ¨ Apollo ä¸­ï¼ŒåŸºäºè¿™ä¸ª Config å¯¹è±¡å°±å¯ä»¥å®ç°å¯¹é…ç½®é¡¹çš„æ“ä½œï¼Œä¾‹å¦‚ï¼š</p>
<pre tabindex="0"><code>@Override

public String get(final String key) {

        return apolloConfig.getProperty(key.replace(&quot;/&quot;, &quot;.&quot;), &quot;&quot;);

}

@Override

public String getDirectly(final String key) {

        return get(key);

}

@Override

public boolean isExisted(final String key) {

        return !Strings.isNullOrEmpty(get(key));

}
</code></pre><p>æ³¨æ„è¿™é‡Œçš„ getDirectly æ–¹æ³•å’Œ get æ–¹æ³•çš„å¤„ç†æ–¹å¼å®é™…ä¸Šæ˜¯ä¸€è‡´çš„ã€‚è€Œå¯¹äº Apollo è€Œè¨€ï¼ŒgetChildrenKeysã€persistã€update å’Œ persistEphemeral ç­‰æ–¹æ³•éƒ½æ˜¯æ— æ•ˆçš„ï¼Œå› ä¸ºä¸æ”¯æŒè¿™æ ·çš„æ“ä½œã€‚ä½†æ˜¯å¯¹äºå¸¸è§çš„ç›‘å¬æœºåˆ¶ï¼ŒApollo ä¹Ÿæä¾›äº†å®ƒçš„å®ç°æ–¹æ¡ˆï¼Œå¯ä»¥é€šè¿‡å¯¹ Config å¯¹è±¡æ·»åŠ  ChangeListener æ¥å®ç°ç›‘å¬æ•ˆæœï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre tabindex="0"><code>@Override

public void watch(final String key, final DataChangedEventListener dataChangedEventListener) {

        //æ·»åŠ  Apollo ä¸­çš„ç›‘å¬å™¨

     apolloConfig.addChangeListener(new ConfigChangeListener() {

            @Override

            public void onChange(final ConfigChangeEvent changeEvent) {

                for (String key : changeEvent.changedKeys()) {

                  //è·å– Apollo ç›‘å¬äº‹ä»¶

                    ConfigChange change = changeEvent.getChange(key);

                    DataChangedEvent.ChangedType changedType = getChangedType(change.getChangeType());

                    if (DataChangedEvent.ChangedType.IGNORED != changedType) {

                       //å°† Apollo ä¸­çš„ç›‘å¬äº‹ä»¶è½¬åŒ–ä¸º ShardingSphere ä¸­çš„ç›‘å¬äº‹ä»¶

                       //é€šè¿‡ EventListener è§¦å‘äº‹ä»¶

                        dataChangedEventListener.onChange(new DataChangedEvent(key, change.getNewValue(), changedType));

                    }

                }

            }

        }, Sets.newHashSet(key));

}
</code></pre><p>ä¸Šè¿°ä»£ç çš„é€»è¾‘åœ¨äºå½“äº‹ä»¶è¢« Apollo ç›‘å¬ï¼Œå¹¶è§¦å‘ä¸Šè¿° watch æ–¹æ³•æ—¶ï¼Œæˆ‘ä»¬ä¼šå°† Apollo ä¸­çš„äº‹ä»¶ç±»å‹è½¬åŒ–ä¸º ShardingSphere ä¸­è‡ªèº«çš„äº‹ä»¶ç±»å‹ï¼Œå¹¶é€šè¿‡ DataChangedEventListener è¿›è¡Œä¼ æ’­å’Œå¤„ç†ã€‚</p>
<h4 id="2shardingsphere-ä¸­çš„äº‹ä»¶é©±åŠ¨æ¶æ„">2.ShardingSphere ä¸­çš„äº‹ä»¶é©±åŠ¨æ¶æ„</h4>
<p>è®²åˆ° DataChangedEventListenerï¼Œæˆ‘ä»¬ä¸å¾—ä¸å¯¹ ShardingSphere ä¸­çš„äº‹ä»¶é©±åŠ¨æ¡†æ¶åšä¸€äº›å±•å¼€ã€‚</p>
<p>æ˜¾ç„¶ï¼Œä»å‘½åä¸Šçœ‹ï¼ŒDataChangedEventListener æ˜¯ä¸€ç§äº‹ä»¶ç›‘å¬å™¨ï¼Œç”¨äºç›‘å¬å„ç§ DataChangedEventã€‚</p>
<p>æ³¨æ„åˆ° ShardingSphere å¹¶æ²¡æœ‰æä¾› DataChangedEventListener æ¥å£çš„ä»»ä½•å®ç°ç±»ï¼Œè€Œæ˜¯å¤§é‡é‡‡ç”¨äº†åŒ¿åæ–¹æ³•è¿›è¡Œäº‹ä»¶çš„ç›‘å¬ï¼Œä¸€ç§å…¸å‹çš„å®ç°æ–¹å¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre tabindex="0"><code>new DataChangedEventListener() {

     @Override

     public void onChange(final DataChangedEvent dataChangedEvent) {

     â€¦

//é€šè¿‡ EventBus å‘å¸ƒäº‹ä»¶

                    eventBus.post(createXXXEvent(dataChangedEvent));

            }

      }

});
</code></pre><p>åœ¨é€šè¿‡ DataChangedEventListener ç›‘å¬åˆ°æŸä¸€ä¸ª DataChangedEvent å¹¶è¿›è¡Œä¼ æ’­æ—¶ï¼ŒShardingSphere çš„å¤„ç†è¿‡ç¨‹å°±æ˜¯é€šè¿‡ EventBus ç±»çš„ post æ–¹æ³•å°†äº‹ä»¶è¿›è¡Œè¿›ä¸€æ­¥è½¬å‘ã€‚è¿™é‡Œä½¿ç”¨çš„ EventBus åŒæ ·æ¥è‡ª Google çš„ Guava æ¡†æ¶ï¼Œä»£è¡¨äº†ä¸€ç§äº‹ä»¶æ€»çº¿çš„å®ç°æ–¹å¼ã€‚</p>
<p>ç°åœ¨ï¼Œäº‹ä»¶å·²ç»å¯ä»¥é€šè¿‡ EventBus è¿›è¡Œå‘é€äº†ï¼Œé‚£ä¹ˆè¿™äº›è¢«å‘é€çš„äº‹ä»¶æ˜¯æ€ä¹ˆè¢«æ¶ˆè´¹çš„å‘¢ï¼Ÿåœ¨ ShardingSphere ä¸­ï¼Œå­˜åœ¨ä¸€ä¸ª ShardingOrchestrationEventBus åŒ…è£…ç±»ï¼ŒåŒ…è£…äº†å¯¹ EventBus çš„ä½¿ç”¨è¿‡ç¨‹ã€‚</p>
<p>è¿™ä¸ªåŒ…è£…è¿‡ç¨‹éå¸¸ç®€å•ï¼Œåªæ˜¯ä½¿ç”¨å•ä¾‹æ¨¡å¼æ„å»ºäº†ä¸€ä¸ª EventBus å¯¹è±¡è€Œå·²ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre tabindex="0"><code>public final class ShardingOrchestrationEventBus {

    private static final EventBus INSTANCE = new EventBus();

//ä½¿ç”¨å•ä¾‹æ¨¡å¼æ„å»ºå•ä¾‹å¯¹è±¡

    public static EventBus getInstance() {

        return INSTANCE;

    }

}
</code></pre><p>å¦‚æœæˆ‘ä»¬æƒ³è¦è®¢é˜…é€šè¿‡ EventBus å‘é€çš„äº‹ä»¶ï¼Œåªè¦æŠŠè‡ªèº«æ³¨å†Œåˆ° EventBus ä¸Šå³å¯ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ EventBus æä¾›çš„ register æ–¹æ³•å®ç°è¿™ä¸€ç›®æ ‡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre tabindex="0"><code>ShardingOrchestrationEventBus.getInstance().register(this);
</code></pre><p>å¦ä¸€æ–¹é¢ï¼Œåœ¨ Guava çš„ EventBus æœºåˆ¶ä¸­ï¼Œæä¾›äº† @Subscribe æ³¨è§£ç”¨æ¥æ ‡è¯†å¯¹å…·ä½“æŸä¸€ç§äº‹ä»¶çš„å¤„ç†æ–¹æ³•ã€‚ä¸€æ—¦åœ¨æŸä¸ªæ–¹æ³•ä¸Šæ·»åŠ äº† @Subscribe æ³¨è§£ï¼Œè¿™ä¸ªæ–¹æ³•å°±å¯ä»¥è‡ªåŠ¨ç”¨æ¥å¤„ç†æ‰€ä¼ å…¥çš„äº‹ä»¶ã€‚</p>
<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬è¿›ä¸€æ­¥æ€»ç»“äº‹ä»¶è®¢é˜…è€…çš„ä»£ç ç»“æ„ï¼Œå¯ä»¥å¾—åˆ°å¦‚ä¸‹æ‰€ç¤ºçš„ä¼ªä»£ç ï¼š</p>
<pre tabindex="0"><code>public class Subscriber {

public Subscriber(â€¦) {

    â€¦

    //å°†è‡ªå·±æ³¨å†Œåˆ° EventBus ä¸­

        ShardingOrchestrationEventBus.getInstance().register(this);

}

    @Subscribe

    public void renew(DataSourceChangedEvent dataSourceChangedEvent){

     //æ¶ˆè´¹äº‹ä»¶

    â€¦

    }

}
</code></pre><p>å¯ä»¥æƒ³è±¡ï¼ŒShardingSphere ä¸­åŠ¿å¿…å­˜åœ¨ä¸€æ‰¹ç¬¦åˆä¸Šè¿°ä»£ç ç»“æ„çš„å®ç°ç±»ï¼Œç”¨äºç›‘å¬é…ç½®ä¸­å¿ƒæ‰€äº§ç”Ÿçš„é…ç½®ä¿¡æ¯å˜æ›´äº‹ä»¶ã€‚ä»¥å¦‚ä¸‹æ‰€ç¤ºçš„ LogicSchema ç±»ä¸ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®ƒçš„å®ç°è¿‡ç¨‹å°±æ˜¯å¾ˆå…¸å‹çš„ä¸€ç§äº‹ä»¶è®¢é˜…è€…ï¼š</p>
<pre tabindex="0"><code>@Getter

public abstract class LogicSchema {

public LogicSchema(final String name, final Map&lt;String, YamlDataSourceParameter&gt; dataSources) {

    â€¦

    ShardingOrchestrationEventBus.getInstance().register(this);

    }

    @Subscribe

    public final synchronized void renew(final DataSourceChangedEvent dataSourceChangedEvent) throws Exception {

        if (!name.equals(dataSourceChangedEvent.getShardingSchemaName())) {

            return;

        }

        //æ ¹æ® DataSourceChangedEvent æ›´æ–° DataSource çš„é…ç½®

        backendDataSource.renew(DataSourceConverter.getDataSourceParameterMap(dataSourceChangedEvent.getDataSourceConfigurations()));

} 

}
</code></pre><p>ä¸Šè¿° LogicSchema ç±»ä¼šæ ¹æ® DataSourceChangedEvent ä¸­æºå¸¦çš„é…ç½®ä¿¡æ¯æ¥æ›´æ–°DataSourceçš„é…ç½®ï¼Œä»è€Œå®ç°é…ç½®ä¿¡æ¯çš„åŠ¨æ€åŒ–ç®¡ç†ã€‚</p>
<p>åœ¨ä»‹ç»å®Œ ApolloConfigCenter ä¹‹åï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹ ShardingSphere ä¸­å¦ä¸€ç§é…ç½®ä¸­å¿ƒçš„å®ç°æ–¹å¼ï¼Œå³ CuratorZookeeperConfigCenterã€‚</p>
<h3 id="curatorzookeeperconfigcenter">CuratorZookeeperConfigCenter</h3>
<h4 id="1zookeeper-å’Œ-curator-ç®€ä»‹">1.Zookeeper å’Œ Curator ç®€ä»‹</h4>
<p>CuratorZookeeperConfigCenter ä½¿ç”¨ Zookeeper ä½œä¸ºé…ç½®ä¸­å¿ƒçš„æœåŠ¡ç»„ä»¶ã€‚é’ˆå¯¹å¦‚ä½•ä½¿ç”¨ Zookeeperï¼Œä¸šç•Œä¹Ÿå­˜åœ¨ä¸€äº›å¼€æºçš„å®¢æˆ·ç«¯ï¼Œè€Œåœ¨ShardingSphere é‡‡ç”¨çš„æ˜¯ Curatorã€‚</p>
<p>åœ¨ä»‹ç» CuratorZookeeperConfigCenter ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥å¯¹ Zookeeper å’Œ Curator åšç®€è¦ä»‹ç»ã€‚</p>
<ul>
<li><strong>Zookeeper</strong></li>
</ul>
<p>å¯¹äº Zookeeper è€Œè¨€ï¼Œæˆ‘ä»¬çŸ¥é“å®ƒæœ‰ä¸¤ä¸ªç‰¹æ€§ä¸åˆ†å¸ƒå¼åè°ƒç›´æ¥ç›¸å…³ï¼Œä¸€ä¸ªæ˜¯ä¼šè¯æœºåˆ¶ï¼Œä¸€ä¸ªæ˜¯Watcheræœºåˆ¶ã€‚</p>
<p>ä¼šè¯æ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯çš„ TCP è¿æ¥ï¼Œèƒ½å¤Ÿå‘é€è¯·æ±‚å¹¶æ¥æ”¶ç›‘å¬å™¨ Watcher äº‹ä»¶ï¼Œè€ŒWatcher æœºåˆ¶æœ¬è´¨ä¸Šå°±æ˜¯åˆ†å¸ƒå¼çš„å›è°ƒã€‚å°±ç±»å‹è€Œè¨€ï¼Œä¼šè¯åˆå¯ä»¥åˆ†ä¸º<strong>çŸ­æš‚æ€§ä¼šè¯</strong>å’Œ<strong>æŒä¹…æ€§ä¼šè¯</strong>ä¸¤ç§ï¼Œå‰è€…åœ¨ä¼šè¯æ–­å¼€çš„åŒæ—¶ä¼šè‡ªåŠ¨åˆ é™¤ä¼šè¯å¯¹åº”çš„ ZNodeï¼Œè€Œåè€…åˆ™ä¸ä¼šã€‚ZNode çš„å®¢æˆ·ç«¯å…³æ³¨ ZNode å‘ç”Ÿçš„å˜åŒ–ï¼Œä¸€æ—¦å‘ç”Ÿå˜åŒ–åˆ™å›ä¼ æ¶ˆæ¯åˆ°å®¢æˆ·ç«¯ï¼Œç„¶åå®¢æˆ·ç«¯çš„æ¶ˆæ¯å¤„ç†å‡½æ•°å¾—åˆ°è°ƒç”¨ã€‚åœ¨ Zookeeper ä¸­ï¼Œä»»ä½•è¯»æ“ä½œéƒ½èƒ½å¤Ÿè®¾ç½® Watcherã€‚</p>
<ul>
<li><strong>Curator</strong></li>
</ul>
<p>åœ¨æˆ‘ä»¬ä½¿ç”¨ Zookeeper æ—¶ï¼Œä¸€èˆ¬ä¸ä½¿ç”¨å®ƒåŸç”Ÿçš„ APIï¼Œè€Œæ˜¯å€¾å‘äºé‡‡ç”¨å®¢æˆ·ç«¯é›†æˆæ¡†æ¶ï¼Œè¿™å…¶ä¸­æœ€å…·ä»£è¡¨æ€§çš„å°±æ˜¯ Curatorã€‚Curator è§£å†³äº†å¾ˆå¤š Zookeeper å®¢æˆ·ç«¯éå¸¸åº•å±‚çš„ç»†èŠ‚å¼€å‘å·¥ä½œï¼ŒåŒ…æ‹¬è¿æ¥é‡è¯•ã€åå¤æ³¨å†Œ Watcher å’Œ NodeExistsException å¼‚å¸¸ç­‰ã€‚</p>
<p>Curator åŒ…å«äº†å‡ ä¸ªåŒ…ï¼šå…¶ä¸­ curator-framework åŒ…æä¾›äº†å¯¹ Zookeeper åº•å±‚ API çš„ä¸€å±‚å°è£…ï¼›curator-client åŒ…åˆ™æä¾›ä¸€äº›å®¢æˆ·ç«¯çš„æ“ä½œï¼Œä¾‹å¦‚é‡è¯•ç­–ç•¥ç­‰ï¼›è€Œ curator-recipes åŒ…å°è£…äº†ä¸€äº›é«˜çº§ç‰¹æ€§ï¼Œå¦‚é€‰ä¸¾ã€åˆ†å¸ƒå¼é”ã€åˆ†å¸ƒå¼è®¡æ•°å™¨ç­‰ã€‚</p>
<p>åœ¨ä½¿ç”¨ Curator æ—¶ï¼Œé¦–å…ˆéœ€è¦åˆ›å»ºä¸€ä¸ª CuratorFramework å®¢æˆ·ç«¯å¯¹è±¡ï¼Œè¿™ä¸€è¿‡ç¨‹å¯ä»¥ä½¿ç”¨ CuratorFrameworkFactory å·¥å‚ç±»è¿›è¡Œå®Œæˆã€‚å¯¹äº CuratorFrameworkFactory è€Œè¨€ï¼Œæˆ‘ä»¬ä¸€æ–¹é¢éœ€è¦æŒ‡å®šä¸ Zookeeper çš„é“¾æ¥ URL connectStringã€ä¼šè¯è¶…æ—¶æ—¶é—´ sessionTimeoutMsã€è¿æ¥åˆ›å»ºè¶…æ—¶æ—¶é—´ connectionTimeoutMsï¼Œä»¥åŠé‡è¯•ç­–ç•¥ retryPolicyï¼›å¦ä¸€æ–¹é¢ä¹Ÿå¯ä»¥æ ¹æ®éœ€è¦è®¾ç½®å®‰å…¨è®¤è¯ä¿¡æ¯ã€‚</p>
<p>ä¸€æ—¦æˆ‘ä»¬è·å–äº† CuratorFramework å¯¹è±¡ï¼Œå°±å¯ä»¥è°ƒç”¨å®ƒçš„ start æ–¹æ³•å¯åŠ¨å®¢æˆ·ç«¯ï¼Œç„¶åé€šè¿‡ create/delete æ¥åˆ›å»ºå’Œåˆ é™¤èŠ‚ç‚¹ï¼Œé€šè¿‡ getData/setData æ–¹æ³•è·å–ï¼Œä»¥åŠè®¾ç½®å¯¹åº”èŠ‚ç‚¹ä¸­çš„æ•°æ®ã€‚å½“ç„¶ï¼Œæœ€ä¸ºé‡è¦çš„æ˜¯æˆ‘ä»¬å¯ä»¥åœ¨èŠ‚ç‚¹ä¸Šæ·»åŠ ç›‘å¬å™¨ã€‚</p>
<p>æ¥ä¸‹æ¥å°±è®©æˆ‘ä»¬ä¸€èµ·çœ‹ä¸€ä¸‹ ShardingSphere ä¸­å¦‚ä½•ä½¿ç”¨ Curator å®Œæˆä¸ Zookeeper çš„é›†æˆæ–¹æ³•ã€‚</p>
<h4 id="2curatorzookeeperconfigcenter-çš„å®ç°è¿‡ç¨‹">2.CuratorZookeeperConfigCenter çš„å®ç°è¿‡ç¨‹</h4>
<p>åœ¨ ShardingSphere ä¸­ï¼Œä½¿ç”¨ CuratorFrameworkFactory åˆ›å»º CuratorFramework å®¢æˆ·ç«¯å¯¹è±¡çš„è¿‡ç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre tabindex="0"><code>private CuratorFramework buildCuratorClient(final ConfigCenterConfiguration config) {

        //æ„å»º CuratorFrameworkFactory å¹¶è®¾ç½®è¿æ¥å±æ€§

     CuratorFrameworkFactory.Builder builder = CuratorFrameworkFactory.builder()

                .connectString(config.getServerLists())

                .retryPolicy(new ExponentialBackoffRetry(config.getRetryIntervalMilliseconds(), config.getMaxRetries(), config.getRetryIntervalMilliseconds() * config.getMaxRetries()))

                .namespace(config.getNamespace());

        if (0 != config.getTimeToLiveSeconds()) {

            builder.sessionTimeoutMs(config.getTimeToLiveSeconds() * 1000);

        }

        if (0 != config.getOperationTimeoutMilliseconds()) {

            builder.connectionTimeoutMs(config.getOperationTimeoutMilliseconds());

        }

        //è®¾ç½®å®‰å…¨æ‘˜è¦ä¿¡æ¯

        if (!Strings.isNullOrEmpty(config.getDigest())) {

            builder.authorization(&quot;digest&quot;, config.getDigest().getBytes(Charsets.UTF_8))

                    .aclProvider(new ACLProvider() {

                        @Override

                        public List&lt;ACL&gt; getDefaultAcl() {

                            return ZooDefs.Ids.CREATOR_ALL_ACL;

                        }

                        @Override

                        public List&lt;ACL&gt; getAclForPath(final String path) {

                            return ZooDefs.Ids.CREATOR_ALL_ACL;

                        }

                    });

        }

        return builder.build();

}
</code></pre><p>ä¸Šè¿°ä»£ç ç›¸å¯¹æ¯”è¾ƒå›ºåŒ–ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨è‡ªå·±çš„åº”ç”¨ç¨‹åºä¸­è¿›è¡Œå€Ÿé‰´å’Œå‚è€ƒã€‚</p>
<p>ç„¶åæˆ‘ä»¬æ¥çœ‹å®ƒçš„ persist æ–¹æ³•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre tabindex="0"><code>@Override

public void persist(final String key, final String value) {

        try {

            if (!isExisted(key)) {

              //åˆ›å»ºæŒä¹…åŒ–èŠ‚ç‚¹

                client.create().creatingParentsIfNeeded().withMode(CreateMode.PERSISTENT).forPath(key, value.getBytes(Charsets.UTF_8));

            } else {

                update(key, value);

            }

        } catch (final Exception ex) {

            CuratorZookeeperExceptionHandler.handleException(ex);

        }

}
</code></pre><p>è¿™é‡Œä½¿ç”¨äº† CreateMode.PERSISTENT æ¨¡å¼æ¥åˆ›å»ºæ¥å£ï¼Œä¹Ÿå°±æ˜¯è¯´åˆ›å»ºçš„æ˜¯ä¸€ç§æŒä¹…åŒ–èŠ‚ç‚¹ã€‚è€Œå¦ä¸€ä¸ª persistEphemeral æ–¹æ³•ä¸­ï¼Œåˆ™é€šè¿‡è®¾ç½® CreateMode.EPHEMERAL æ¥åˆ›å»ºä¸´æ—¶èŠ‚ç‚¹ã€‚</p>
<p>å¦‚ä¸‹æ‰€ç¤ºçš„ update æ–¹æ³•ä¹Ÿå€¼å¾—ä¸€çœ‹ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†å¦‚ä½•åŸºäº Curator å®ç°åœ¨äº‹åŠ¡ä¸­æ›´æ–°æ•°æ®çš„å…·ä½“å®ç°æ–¹æ³•ï¼š</p>
<pre tabindex="0"><code>@Override

public void update(final String key, final String value) {

        try {

         //åœ¨äº‹åŠ¡ä¸­æ›´æ–°æ•°æ®

            client.inTransaction().check().forPath(key).and().setData().forPath(key, value.getBytes(Charsets.UTF_8)).and().commit();

        } catch (final Exception ex) {

            CuratorZookeeperExceptionHandler.handleException(ex);

        }

}
</code></pre><p>ç„¶åï¼Œæˆ‘ä»¬æ¥åˆ°è·å–æ•°æ®çš„ get æ–¹æ³•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre tabindex="0"><code>@Override

public String get(final String key) {

     //å…ˆé€šè¿‡ç¼“å­˜è·å–æ•°æ®ï¼Œå¦‚æœæ²¡æœ‰åˆ™é€šè¿‡ getDirectly ç›´æ¥è·å–æ•°æ®

        TreeCache cache = findTreeCache(key);

        if (null == cache) {

            return getDirectly(key);

        }

        ChildData resultInCache = cache.getCurrentData(key);

        if (null != resultInCache) {

            return null == resultInCache.getData() ? null : new String(resultInCache.getData(), Charsets.UTF_8);

        }

        return getDirectly(key);

}
</code></pre><p>æ³¨æ„åˆ°åœ¨è¿™ä¸ª get æ–¹æ³•ä¸­ï¼ŒShardingSphere ä½¿ç”¨äº†ç¼“å­˜æœºåˆ¶æ¥æå‡æ•°æ®è·å–çš„æ•ˆç‡ã€‚å¦‚æœç¼“å­˜æ²¡æœ‰å‘½ä¸­ï¼Œæ‰ä¼šè°ƒç”¨ getDirectly æ–¹æ³•æ¥ç›´æ¥ä» Zookeeper ä¸­è·å–æ•°æ®ã€‚</p>
<p>æœ€åï¼Œè®©æˆ‘ä»¬æ¥åˆ°æœ€ä¸ºå…³é”®çš„ watch æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre tabindex="0"><code>@Override

public void watch(final String key, final DataChangedEventListener dataChangedEventListener) {

        final String path = key + &quot;/&quot;;

        if (!caches.containsKey(path)) {

            addCacheData(key);

        }

        TreeCache cache = caches.get(path);

        //æ·»åŠ  Zookeeper ç›‘å¬å™¨

        cache.getListenable().addListener(new TreeCacheListener() {

            @Override

            public void childEvent(final CuratorFramework client, final TreeCacheEvent event) throws UnsupportedEncodingException {

              //è·å– Zookeeper ç›‘å¬äº‹ä»¶

              ChildData data = event.getData();

                if (null == data || null == data.getPath()) {

                    return;

                }

                //å°† Zookeeper ä¸­çš„ç›‘å¬äº‹ä»¶è½¬åŒ–ä¸º ShardingSphere ä¸­çš„ç›‘å¬äº‹ä»¶

              //é€šè¿‡ EventListener è§¦å‘äº‹ä»¶

                DataChangedEvent.ChangedType changedType = getChangedType(event);

                if (DataChangedEvent.ChangedType.IGNORED != changedType) {

                    dataChangedEventListener.onChange(new DataChangedEvent(data.getPath(), null == data.getData() ? null : new String(data.getData(), &quot;UTF-8&quot;), changedType));

                }

            }

        });

}
</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œwatch æ–¹æ³•çš„æœ€ç»ˆå¤„ç†ç»“æœä¹Ÿæ˜¯å°† Zookeeper ä¸­çš„ç›‘å¬äº‹ä»¶è½¬åŒ–ä¸º ShardingSphere ä¸­çš„ç›‘å¬äº‹ä»¶ï¼Œå¹¶é€šè¿‡ EventListener è§¦å‘äº‹ä»¶ã€‚è¿™ä¸ªè¿‡ç¨‹æˆ‘ä»¬å·²ç»åœ¨ä»‹ç» ApolloConfigCenter æ—¶åšäº†å±•å¼€ã€‚</p>
<h3 id="ä»æºç è§£æåˆ°æ—¥å¸¸å¼€å‘">ä»æºç è§£æåˆ°æ—¥å¸¸å¼€å‘</h3>
<p>ä»Šå¤©æˆ‘ä»¬ä»‹ç»çš„å¾ˆå¤šå†…å®¹å®é™…ä¸Šä¹Ÿå¯ä»¥åº”ç”¨åˆ°æ—¥å¸¸å¼€å‘è¿‡ç¨‹ä¸­ï¼ŒåŒ…æ‹¬å¦‚ä½•åŸºäº Apollo ä»¥åŠ Zookeeper è¿™ä¸¤æ¬¾å…¸å‹çš„é…ç½®ä¸­å¿ƒå®ç°å·¥å…·ï¼Œæ¥è¿›è¡Œé…ç½®ä¿¡æ¯çš„å­˜å‚¨å’Œç›‘å¬ã€‚æˆ‘ä»¬å®Œå…¨å¯ä»¥æ ¹æ®è‡ªèº«çš„éœ€æ±‚ï¼Œå°†åº”ç”¨åœºæ™¯å’ŒèŒƒå›´ä»é…ç½®ä¸­å¿ƒæ‰©å¤§åˆ°å„ç§éœ€è¦è¿›è¡ŒåŠ¨æ€åŒ–ç®¡ç†çš„ä¸šåŠ¡æ•°æ®ï¼Œè€ŒåŸºäºè¿™ä¸¤æ¬¾å·¥å…·å®ç°è¿™ä¸€ç›®æ ‡çš„å®ç°ç»†èŠ‚ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥ç›´æ¥è¿›è¡Œå‚è€ƒå’Œå€Ÿé‰´ã€‚</p>
<h3 id="å°ç»“ä¸é¢„å‘Š">å°ç»“ä¸é¢„å‘Š</h3>
<p>æœ¬è¯¾æ—¶å…³æ³¨äº ShardingSphere ä¸­å¯¹é…ç½®ä¸­å¿ƒçš„æŠ½è±¡å’Œå®ç°è¿‡ç¨‹ã€‚é…ç½®ä¸­å¿ƒçš„æ ¸å¿ƒæœºåˆ¶æ˜¯éœ€è¦å®ç°é…ç½®ä¿¡æ¯çš„åŠ¨æ€åŒ–åŠ è½½ï¼Œè€Œ Apollo å’Œ Zookeeper éƒ½æä¾›äº†ç›‘å¬æœºåˆ¶æ¥å®ç°è¿™ä¸€ç›®æ ‡ã€‚ShardingSphere é€šè¿‡é›†æˆè¿™ä¸¤æ¬¾ä¸»æµçš„å¼€æºå·¥å…·ï¼Œä»¥åŠ Guava æ¡†æ¶ä¸­çš„ EventBus å·¥å…·ç±»å®ç°äº†ä»äº‹ä»¶ç›‘å¬åˆ°è®¢é˜…æ¶ˆè´¹çš„æ•´ä¸ªäº‹ä»¶é©±åŠ¨æ¶æ„ã€‚</p>
<p>è¿™é‡Œç»™ä½ ç•™ä¸€é“æ€è€ƒé¢˜ï¼šShardingSphere æ˜¯å¦‚ä½•å°† Apollo ä»¥åŠ Zookeeper ä¸­çš„äº‹ä»¶ç”Ÿæˆå’Œç›‘å¬æœºåˆ¶æŠ½è±¡æˆä¸€å¥—ç»Ÿä¸€çš„äº‹ä»¶é©±åŠ¨æ¶æ„çš„ï¼Ÿæ¬¢è¿ä½ åœ¨ç•™è¨€åŒºä¸å¤§å®¶è®¨è®ºï¼Œæˆ‘å°†é€ä¸€ç‚¹è¯„è§£ç­”ã€‚</p>
<p>é…ç½®ä¸­å¿ƒå’Œæ³¨å†Œä¸­å¿ƒåœ¨å®ç°ä¸Šå­˜åœ¨ä¸€å®šçš„ç›¸ä¼¼æ€§ï¼Œä½†åˆé¢å‘ä¸åŒçš„åº”ç”¨åœºæ™¯ã€‚ä¸‹ä¸€è¯¾æ—¶ï¼Œæˆ‘ä»¬å°†ä»‹ç» ShardingSphere ä¸­çš„æ³¨å†Œä¸­å¿ƒçš„å®ç°æœºåˆ¶å’Œåº”ç”¨åœºæ™¯ã€‚</p>

        </div>
    </article>
</div>

    </main>
    <footer>
        <div id="pagination">
            
<div class="paginator">
    <div class="prev">
        
        <a href="/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/30-%E6%95%B0%E6%8D%AE%E8%84%B1%E6%95%8F%E5%A6%82%E4%BD%95%E5%9F%BA%E4%BA%8E%E6%94%B9%E5%86%99%E5%BC%95%E6%93%8E%E5%AE%9E%E7%8E%B0%E4%BD%8E%E4%BE%B5%E5%85%A5%E6%80%A7%E6%95%B0%E6%8D%AE%E8%84%B1%E6%95%8F%E6%96%B9%E6%A1%88/"><span>30 æ•°æ®è„±æ•ï¼šå¦‚ä½•åŸºäºæ”¹å†™å¼•æ“å®ç°ä½ä¾µå…¥æ€§æ•°æ®è„±æ•æ–¹æ¡ˆï¼Ÿ</span></a>
    </div>
    <div class="next">
        
        <a href="/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/32-%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E5%A6%82%E4%BD%95%E5%9F%BA%E4%BA%8E%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BF%E9%97%AE%E7%86%94%E6%96%AD%E6%9C%BA%E5%88%B6/"><span>32 æ³¨å†Œä¸­å¿ƒï¼šå¦‚ä½•åŸºäºæ³¨å†Œä¸­å¿ƒå®ç°æ•°æ®åº“è®¿é—®ç†”æ–­æœºåˆ¶ï¼Ÿ</span></a>
    </div>
</div>

        </div>
        <div class="toggler" onclick="toggleLight(this);">ğŸ’¡</div>
        <div id="copyright" style="display: none;">
    
    
    <p>&copy; 27270 <a href="/"></a>, powered by Hugo and Qiao</p>
</div>
    </footer>
    
<script>
    function toggleLight() {
        document.getElementById('page').classList.toggle('night');
    }
</script>
</body>

</html>