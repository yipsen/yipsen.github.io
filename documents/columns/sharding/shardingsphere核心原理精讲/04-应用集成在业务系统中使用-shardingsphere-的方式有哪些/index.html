<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
<meta name="X-UA-Compatible" , content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<link rel="icon" type="image/png" href="/%20/favicon.png">

<title>04 åº”ç”¨é›†æˆï¼šåœ¨ä¸šåŠ¡ç³»ç»Ÿä¸­ä½¿ç”¨ ShardingSphere çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ | Yipsen Ye</title>
<meta name="description" content="åœ¨ä¸Šä¸€è¯¾æ—¶ä¸­ï¼Œæˆ‘è¯¦ç»†ä»‹ç»äº† ShardingSphere ä¸ JDBC è§„èŒƒä¹‹é—´çš„å…¼å®¹æ€§å…³ç³»ï¼Œæˆ‘ä»¬çŸ¥é“ ShardingSphere å¯¹ JDBC è§„èŒƒè¿›è¡Œäº†é‡å†™ï¼Œå¹¶åµŒå…¥äº†åˆ†ç‰‡æœºåˆ¶ã€‚åŸºäºè¿™ç§å…¼å®¹æ€§ï¼Œå¼€å‘äººå‘˜ä½¿ç”¨ ShardingSphere æ—¶å°±åƒåœ¨ä½¿ç”¨ JDBC è§„èŒƒæ‰€æš´éœ²çš„å„ä¸ªæ¥å£ä¸€æ ·ã€‚è¿™ä¸€è¯¾æ—¶ï¼Œæˆ‘ä»¬å°†è®¨è®ºå¦‚ä½•åœ¨ä¸šåŠ¡ç³»ç»Ÿä¸­ä½¿ç”¨ ShardingSphere çš„å…·ä½“æ–¹å¼ã€‚
å¦‚ä½•æŠ½è±¡å¼€æºæ¡†æ¶çš„åº”ç”¨æ–¹å¼ï¼Ÿ å½“æˆ‘ä»¬è‡ªå·±åœ¨è®¾è®¡å’Œå®ç°ä¸€æ¬¾å¼€æºæ¡†æ¶æ—¶ï¼Œå¦‚ä½•è§„åˆ’å®ƒçš„åº”ç”¨æ–¹å¼å‘¢ï¼Ÿä½œä¸ºä¸€æ¬¾ä¸æ•°æ®åº“è®¿é—®ç›¸å…³çš„å¼€æºæ¡†æ¶ï¼ŒShardingSphere æä¾›äº†å¤šä¸ªç»´åº¦çš„åº”ç”¨æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹è¿™äº›åº”ç”¨æ–¹å¼è¿›è¡ŒæŠ½è±¡ï¼Œä»è€Œæç‚¼å‡ºä¸€ç§æ¨¡ç‰ˆã€‚è¿™ä¸ªæ¨¡ç‰ˆç”±å››ä¸ªç»´åº¦ç»„æˆï¼Œåˆ†åˆ«æ˜¯åº•å±‚å·¥å…·ã€åŸºç¡€è§„èŒƒã€å¼€å‘æ¡†æ¶å’Œé¢†åŸŸæ¡†æ¶ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
åº•å±‚å·¥å…· åº•å±‚å·¥å…·æŒ‡çš„æ˜¯è¿™ä¸ªå¼€æºæ¡†æ¶æ‰€é¢å‘çš„ç›®æ ‡å·¥å…·æˆ–æ‰€ä¾èµ–çš„ç¬¬ä¸‰æ–¹å·¥å…·ã€‚è¿™ç§åº•å±‚å·¥å…·å¾€å¾€ä¸æ˜¯æ¡†æ¶æœ¬èº«å¯ä»¥æ§åˆ¶å’Œç®¡ç†çš„ï¼Œæ¡†æ¶çš„ä½œç”¨åªæ˜¯åœ¨å®ƒä¸Šé¢æ·»åŠ ä¸€ä¸ªåº”ç”¨å±‚ï¼Œç”¨äºå°è£…å¯¹è¿™äº›åº•å±‚å·¥å…·çš„ä½¿ç”¨æ–¹å¼ã€‚
å¯¹äº ShardingSphere è€Œè¨€ï¼Œè¿™é‡Œæ‰€è¯´çš„åº•å±‚å·¥å…·å®é™…ä¸ŠæŒ‡çš„æ˜¯å…³ç³»å‹æ•°æ®åº“ã€‚ç›®å‰ï¼ŒShardingSphere æ”¯æŒåŒ…æ‹¬ MySQLã€Oracleã€SQLServerã€PostgreSQL ä»¥åŠä»»ä½•éµå¾ª SQL92 æ ‡å‡†çš„æ•°æ®åº“ã€‚
åŸºç¡€è§„èŒƒ ä½œä¸ºä¸€ä¸ªå¼€æºæ¡†æ¶ï¼Œå¾ˆå¤šæ—¶å€™éœ€è¦å…¼å®¹ä¸šç•Œå·²ç»å½¢æˆæ ‡å‡†çš„åŸºç¡€æ€§è§„èŒƒã€‚æ¢å¥è¯è¯´ï¼Œæƒ³è¦æ¡†æ¶è¢«å…¶ä»–å¼€å‘äººå‘˜æ‰€è®¤å¯ï¼Œå°±å¾—è¦è€ƒè™‘å¼€å‘äººå‘˜ç›®å‰åœ¨ä½¿ç”¨çš„åŸºç¡€è§„èŒƒã€‚ä¾‹å¦‚ï¼Œå¦‚æœè®¾è®¡ä¸€ä¸ªä¸é“¾è·¯è·Ÿè¸ªç›¸å…³çš„å¼€æºæ¡†æ¶ï¼Œä¸€èˆ¬éƒ½éœ€è¦å…¼å®¹ OpenTracing è¿™ä¸€å¼€æ”¾å¼åˆ†å¸ƒå¼è¿½è¸ªè§„èŒƒã€‚
å¯¹äº ShardingSphere è€Œè¨€ï¼Œæ‰€æ¶‰åŠçš„åŸºç¡€è§„èŒƒå¾ˆæ˜ç¡®ï¼Œå°±æ˜¯æˆ‘ä»¬åœ¨ä¸Šä¸€è¯¾æ—¶ä¸­æ‰€è¯¦ç»†é˜è¿°çš„ JDBC è§„èŒƒã€‚
å¼€å‘æ¡†æ¶ å¼€æºæ¡†æ¶æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå¼€å‘æ¡†æ¶ï¼Œä½†æˆ‘ä»¬é€šå¸¸ä¸ä¼šè‡ªå·±è®¾è®¡å’Œå®ç°ä¸€ä¸ªå…¨æ–°çš„å¼€å‘æ¡†æ¶ï¼Œè€Œæ˜¯æ›´å€¾å‘äºä¸ç°æœ‰çš„ä¸»æµå¼€å‘æ¡†æ¶è¿›è¡Œé›†æˆã€‚ç›®å‰ï¼ŒJava ä¸–ç•Œä¸­æœ€ä¸»æµçš„å¼€å‘æ¡†æ¶å°±æ˜¯ Spring å®¶æ—ç³»åˆ—æ¡†æ¶ã€‚
ShardingSphere åŒæ—¶é›†æˆäº† Spring å’Œ Spring Boot è¿™ä¸¤æ¬¾ Spring å®¶æ—çš„ä¸»æµå¼€å‘æ¡†æ¶ã€‚ç†Ÿæ‚‰è¿™ä¸¤æ¬¾æ¡†æ¶çš„å¼€å‘äººå‘˜åœ¨åº”ç”¨ ShardingSphere è¿›è¡Œå¼€å‘æ—¶å°†ä¸éœ€è¦ä»»ä½•å­¦ä¹ æˆæœ¬ã€‚
é¢†åŸŸæ¡†æ¶ å¯¹äºæŸäº›å¼€æºæ¡†æ¶è€Œè¨€ï¼Œä¹Ÿéœ€è¦è€ƒè™‘å’Œé¢†åŸŸæ¡†æ¶è¿›è¡Œé›†æˆï¼Œä»¥ä¾¿æä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒå’Œä½¿ç”¨å‹å¥½æ€§ï¼ŒåŒºåˆ«äºå‰é¢æåˆ°çš„é€‚ç”¨äºä»»ä½•åœºæ™¯çš„å¼€å‘æ¡†æ¶ã€‚æ‰€è°“é¢†åŸŸæ¡†æ¶ï¼Œæ˜¯æŒ‡ä¸æ‰€è®¾è®¡çš„å¼€æºæ¡†æ¶å±äºåŒä¸€ä¸“ä¸šé¢†åŸŸçš„å¼€å‘æ¡†æ¶ã€‚ ä¸šåŠ¡å¼€å‘äººå‘˜å·²ç»ä¹ æƒ¯åœ¨æ—¥å¸¸å¼€å‘è¿‡ç¨‹ä¸­ä½¿ç”¨è¿™äº›ç‰¹å®šäºæŸä¸€é¢†åŸŸçš„å¼€å‘æ¡†æ¶ï¼Œæ‰€ä»¥åœ¨è®¾è®¡è‡ªå·±çš„å¼€æºæ¡†æ¶æ—¶ï¼Œä¹Ÿéœ€è¦å……åˆ†è€ƒè™‘ä¸è¿™äº›æ¡†æ¶çš„æ•´åˆå’Œé›†æˆã€‚
å¯¹äº ShardingSphere è€Œè¨€ï¼Œé¢†åŸŸæ¡†æ¶æŒ‡çš„æ˜¯ MyBatisã€Hibernate ç­‰å¸¸è§çš„ ORM æ¡†æ¶ã€‚ShardingSphere å¯¹è¿™é¢†åŸŸæ¡†æ¶æä¾›äº†æ— ç¼é›†æˆçš„å®ç°æ–¹æ¡ˆï¼Œç†Ÿæ‚‰ ORM æ¡†æ¶çš„å¼€å‘äººå‘˜åœ¨åº”ç”¨ ShardingSphere è¿›è¡Œå¼€å‘æ—¶åŒæ ·ä¸éœ€è¦ä»»ä½•å­¦ä¹ æˆæœ¬ã€‚
æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±ç»“åˆå‰é¢æŠ½è±¡çš„å¼€æºæ¡†æ¶åº”ç”¨æ–¹å¼æ¥å…·ä½“åˆ†æ ShardingSphere æ¡†æ¶ä¸ºå¼€å‘äººå‘˜æä¾›äº†å“ªäº›å¼€å‘ä¸Šçš„æ”¯æŒã€‚">
<meta name="author" content="">

<link rel="stylesheet" type="text/css" href="/styles/main.css">

</head>

<body id="page">
    <header>
        <div class="nav-logo">
    <a href="http://yipsen.github.io/">
        
        <span class="nav-title">Yipsen Ye</span>
    </a>
</div>
<nav class="navbar justify-content-end">
    <ul class="nav-list">
        
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/posts/">æ–‡ç« </a>
        </li>
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/collections/">é™„è¡¨</a>
        </li>
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/about/">å…³äº</a>
        </li>
        
    </ul>
</nav>
    </header>
    <main id="content">
        
<div class="container"><aside>
    <div>
        
        
            
            
            <div class="post-category-icon"></div>
            <a href="/categories/shardingsphere%e6%a0%b8%e5%bf%83%e5%8e%9f%e7%90%86%e7%b2%be%e8%ae%b2/">ShardingSphereæ ¸å¿ƒåŸç†ç²¾è®²</a>
            <ul>
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/00-%E5%A6%82%E4%BD%95%E6%AD%A3%E7%A1%AE%E5%AD%A6%E4%B9%A0%E4%B8%80%E6%AC%BE%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8%E5%BC%80%E6%BA%90%E6%A1%86%E6%9E%B6/">00 å¦‚ä½•æ­£ç¡®å­¦ä¹ ä¸€æ¬¾åˆ†åº“åˆ†è¡¨å¼€æºæ¡†æ¶ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/01-%E4%BB%8E%E7%90%86%E8%AE%BA%E5%88%B0%E5%AE%9E%E8%B7%B5%E5%A6%82%E4%BD%95%E8%AE%A9%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8%E7%9C%9F%E6%AD%A3%E8%90%BD%E5%9C%B0/">01 ä»ç†è®ºåˆ°å®è·µï¼šå¦‚ä½•è®©åˆ†åº“åˆ†è¡¨çœŸæ­£è½åœ°ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/02-%E9%A1%B6%E7%BA%A7%E9%A1%B9%E7%9B%AEshardingsphere-%E6%98%AF%E4%B8%80%E6%AC%BE%E4%BB%80%E4%B9%88%E6%A0%B7%E7%9A%84-apache-%E5%BC%80%E6%BA%90%E8%BD%AF%E4%BB%B6/">02 é¡¶çº§é¡¹ç›®ï¼šShardingSphere æ˜¯ä¸€æ¬¾ä»€ä¹ˆæ ·çš„ Apache å¼€æºè½¯ä»¶ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/03-%E8%A7%84%E8%8C%83%E5%85%BC%E5%AE%B9jdbc-%E8%A7%84%E8%8C%83%E4%B8%8E-shardingsphere-%E6%98%AF%E4%BB%80%E4%B9%88%E5%85%B3%E7%B3%BB/">03 è§„èŒƒå…¼å®¹ï¼šJDBC è§„èŒƒä¸ ShardingSphere æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ</a></li>
                
                
                
                    <li>04 åº”ç”¨é›†æˆï¼šåœ¨ä¸šåŠ¡ç³»ç»Ÿä¸­ä½¿ç”¨ ShardingSphere çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ</li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/05-%E9%85%8D%E7%BD%AE%E9%A9%B1%E5%8A%A8shardingsphere-%E4%B8%AD%E7%9A%84%E9%85%8D%E7%BD%AE%E4%BD%93%E7%B3%BB%E6%98%AF%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E7%9A%84/">05 é…ç½®é©±åŠ¨ï¼šShardingSphere ä¸­çš„é…ç½®ä½“ç³»æ˜¯å¦‚ä½•è®¾è®¡çš„ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/09-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%E5%BC%BA%E4%B8%80%E8%87%B4%E6%80%A7%E4%BA%8B%E5%8A%A1%E4%B8%8E%E6%9F%94%E6%80%A7%E4%BA%8B%E5%8A%A1/">09 åˆ†å¸ƒå¼äº‹åŠ¡ï¼šå¦‚ä½•ä½¿ç”¨å¼ºä¸€è‡´æ€§äº‹åŠ¡ä¸æŸ”æ€§äº‹åŠ¡ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/10-%E6%95%B0%E6%8D%AE%E8%84%B1%E6%95%8F%E5%A6%82%E4%BD%95%E7%A1%AE%E4%BF%9D%E6%95%8F%E6%84%9F%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AE%89%E5%85%A8%E8%AE%BF%E9%97%AE/">10 æ•°æ®è„±æ•ï¼šå¦‚ä½•ç¡®ä¿æ•æ„Ÿæ•°æ®çš„å®‰å…¨è®¿é—®ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/11-%E7%BC%96%E6%8E%92%E6%B2%BB%E7%90%86%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E5%88%86%E5%B8%83%E5%BC%8F%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84%E5%8A%A8%E6%80%81%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86/">11 ç¼–æ’æ²»ç†ï¼šå¦‚ä½•å®ç°åˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„åŠ¨æ€é…ç½®ç®¡ç†ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/12-%E4%BB%8E%E5%BA%94%E7%94%A8%E5%88%B0%E5%8E%9F%E7%90%86%E5%A6%82%E4%BD%95%E9%AB%98%E6%95%88%E9%98%85%E8%AF%BB-shardingsphere-%E6%BA%90%E7%A0%81/">12 ä»åº”ç”¨åˆ°åŸç†ï¼šå¦‚ä½•é«˜æ•ˆé˜…è¯» ShardingSphere æºç ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/13-%E5%BE%AE%E5%86%85%E6%A0%B8%E6%9E%B6%E6%9E%84shardingsphere-%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%89%A9%E5%B1%95%E6%80%A7/">13 å¾®å†…æ ¸æ¶æ„ï¼šShardingSphere å¦‚ä½•å®ç°ç³»ç»Ÿçš„æ‰©å±•æ€§ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/14-%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%BB%E9%94%AEshardingsphere-%E4%B8%AD%E6%9C%89%E5%93%AA%E4%BA%9B%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%BB%E9%94%AE%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F/">14 åˆ†å¸ƒå¼ä¸»é”®ï¼šShardingSphere ä¸­æœ‰å“ªäº›åˆ†å¸ƒå¼ä¸»é”®å®ç°æ–¹å¼ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/15-%E8%A7%A3%E6%9E%90%E5%BC%95%E6%93%8Esql-%E8%A7%A3%E6%9E%90%E6%B5%81%E7%A8%8B%E5%BA%94%E8%AF%A5%E5%8C%85%E6%8B%AC%E5%93%AA%E4%BA%9B%E6%A0%B8%E5%BF%83%E9%98%B6%E6%AE%B5%E4%B8%8A/">15 è§£æå¼•æ“ï¼šSQL è§£ææµç¨‹åº”è¯¥åŒ…æ‹¬å“ªäº›æ ¸å¿ƒé˜¶æ®µï¼Ÿï¼ˆä¸Šï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/16-%E8%A7%A3%E6%9E%90%E5%BC%95%E6%93%8Esql-%E8%A7%A3%E6%9E%90%E6%B5%81%E7%A8%8B%E5%BA%94%E8%AF%A5%E5%8C%85%E6%8B%AC%E5%93%AA%E4%BA%9B%E6%A0%B8%E5%BF%83%E9%98%B6%E6%AE%B5%E4%B8%8B/">16 è§£æå¼•æ“ï¼šSQL è§£ææµç¨‹åº”è¯¥åŒ…æ‹¬å“ªäº›æ ¸å¿ƒé˜¶æ®µï¼Ÿï¼ˆä¸‹ï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/17-%E8%B7%AF%E7%94%B1%E5%BC%95%E6%93%8E%E5%A6%82%E4%BD%95%E7%90%86%E8%A7%A3%E5%88%86%E7%89%87%E8%B7%AF%E7%94%B1%E6%A0%B8%E5%BF%83%E7%B1%BB-shardingrouter-%E7%9A%84%E8%BF%90%E4%BD%9C%E6%9C%BA%E5%88%B6/">17 è·¯ç”±å¼•æ“ï¼šå¦‚ä½•ç†è§£åˆ†ç‰‡è·¯ç”±æ ¸å¿ƒç±» ShardingRouter çš„è¿ä½œæœºåˆ¶ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/18-%E8%B7%AF%E7%94%B1%E5%BC%95%E6%93%8E%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE%E7%9A%84%E5%88%86%E7%89%87%E8%B7%AF%E7%94%B1%E5%92%8C%E5%B9%BF%E6%92%AD%E8%B7%AF%E7%94%B1/">18 è·¯ç”±å¼•æ“ï¼šå¦‚ä½•å®ç°æ•°æ®è®¿é—®çš„åˆ†ç‰‡è·¯ç”±å’Œå¹¿æ’­è·¯ç”±ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/19-%E8%B7%AF%E7%94%B1%E5%BC%95%E6%93%8E%E5%A6%82%E4%BD%95%E5%9C%A8%E8%B7%AF%E7%94%B1%E8%BF%87%E7%A8%8B%E4%B8%AD%E9%9B%86%E6%88%90%E5%A4%9A%E7%A7%8D%E8%B7%AF%E7%94%B1%E7%AD%96%E7%95%A5%E5%92%8C%E8%B7%AF%E7%94%B1%E7%AE%97%E6%B3%95/">19 è·¯ç”±å¼•æ“ï¼šå¦‚ä½•åœ¨è·¯ç”±è¿‡ç¨‹ä¸­é›†æˆå¤šç§è·¯ç”±ç­–ç•¥å’Œè·¯ç”±ç®—æ³•ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/20-%E6%94%B9%E5%86%99%E5%BC%95%E6%93%8E%E5%A6%82%E4%BD%95%E7%90%86%E8%A7%A3%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F%E4%B8%8B%E7%9A%84-sql-%E6%94%B9%E5%86%99%E5%AE%9E%E7%8E%B0%E6%9C%BA%E5%88%B6/">20 æ”¹å†™å¼•æ“ï¼šå¦‚ä½•ç†è§£è£…é¥°å™¨æ¨¡å¼ä¸‹çš„ SQL æ”¹å†™å®ç°æœºåˆ¶ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/21-%E6%89%A7%E8%A1%8C%E5%BC%95%E6%93%8E%E5%88%86%E7%89%87%E7%8E%AF%E5%A2%83%E4%B8%8B-sql-%E6%89%A7%E8%A1%8C%E7%9A%84%E6%95%B4%E4%BD%93%E6%B5%81%E7%A8%8B%E5%BA%94%E8%AF%A5%E5%A6%82%E4%BD%95%E8%BF%9B%E8%A1%8C%E6%8A%BD%E8%B1%A1/">21 æ‰§è¡Œå¼•æ“ï¼šåˆ†ç‰‡ç¯å¢ƒä¸‹ SQL æ‰§è¡Œçš„æ•´ä½“æµç¨‹åº”è¯¥å¦‚ä½•è¿›è¡ŒæŠ½è±¡ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/22-%E6%89%A7%E8%A1%8C%E5%BC%95%E6%93%8E%E5%A6%82%E4%BD%95%E6%8A%8A%E6%8F%A1-shardingsphere-%E4%B8%AD%E7%9A%84-executor-%E6%89%A7%E8%A1%8C%E6%A8%A1%E5%9E%8B%E4%B8%8A/">22 æ‰§è¡Œå¼•æ“ï¼šå¦‚ä½•æŠŠæ¡ ShardingSphere ä¸­çš„ Executor æ‰§è¡Œæ¨¡å‹ï¼Ÿï¼ˆä¸Šï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/23-%E6%89%A7%E8%A1%8C%E5%BC%95%E6%93%8E%E5%A6%82%E4%BD%95%E6%8A%8A%E6%8F%A1-shardingsphere-%E4%B8%AD%E7%9A%84-executor-%E6%89%A7%E8%A1%8C%E6%A8%A1%E5%9E%8B%E4%B8%8B/">23 æ‰§è¡Œå¼•æ“ï¼šå¦‚ä½•æŠŠæ¡ ShardingSphere ä¸­çš„ Executor æ‰§è¡Œæ¨¡å‹ï¼Ÿï¼ˆä¸‹ï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/24-%E5%BD%92%E5%B9%B6%E5%BC%95%E6%93%8E%E5%A6%82%E4%BD%95%E7%90%86%E8%A7%A3%E6%95%B0%E6%8D%AE%E5%BD%92%E5%B9%B6%E7%9A%84%E7%B1%BB%E5%9E%8B%E4%BB%A5%E5%8F%8A%E7%AE%80%E5%8D%95%E5%BD%92%E5%B9%B6%E7%AD%96%E7%95%A5%E7%9A%84%E5%AE%9E%E7%8E%B0%E8%BF%87%E7%A8%8B/">24 å½’å¹¶å¼•æ“ï¼šå¦‚ä½•ç†è§£æ•°æ®å½’å¹¶çš„ç±»å‹ä»¥åŠç®€å•å½’å¹¶ç­–ç•¥çš„å®ç°è¿‡ç¨‹ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/25-%E5%BD%92%E5%B9%B6%E5%BC%95%E6%93%8E%E5%A6%82%E4%BD%95%E7%90%86%E8%A7%A3%E6%B5%81%E5%BC%8F%E5%BD%92%E5%B9%B6%E5%92%8C%E5%86%85%E5%AD%98%E5%BD%92%E5%B9%B6%E5%9C%A8%E5%A4%8D%E6%9D%82%E5%BD%92%E5%B9%B6%E5%9C%BA%E6%99%AF%E4%B8%8B%E7%9A%84%E5%BA%94%E7%94%A8%E6%96%B9%E5%BC%8F/">25 å½’å¹¶å¼•æ“ï¼šå¦‚ä½•ç†è§£æµå¼å½’å¹¶å’Œå†…å­˜å½’å¹¶åœ¨å¤æ‚å½’å¹¶åœºæ™¯ä¸‹çš„åº”ç”¨æ–¹å¼ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/26-%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB%E6%99%AE%E9%80%9A%E4%B8%BB%E4%BB%8E%E6%9E%B6%E6%9E%84%E5%92%8C%E5%88%86%E7%89%87%E4%B8%BB%E4%BB%8E%E6%9E%B6%E6%9E%84%E5%88%86%E5%88%AB%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84/">26 è¯»å†™åˆ†ç¦»ï¼šæ™®é€šä¸»ä»æ¶æ„å’Œåˆ†ç‰‡ä¸»ä»æ¶æ„åˆ†åˆ«æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/27-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E5%A6%82%E4%BD%95%E7%90%86%E8%A7%A3-shardingsphere-%E4%B8%AD%E5%AF%B9%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E7%9A%84%E6%8A%BD%E8%B1%A1%E8%BF%87%E7%A8%8B/">27 åˆ†å¸ƒå¼äº‹åŠ¡ï¼šå¦‚ä½•ç†è§£ ShardingSphere ä¸­å¯¹åˆ†å¸ƒå¼äº‹åŠ¡çš„æŠ½è±¡è¿‡ç¨‹ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/28-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1shardingsphere-%E4%B8%AD%E5%A6%82%E4%BD%95%E9%9B%86%E6%88%90%E5%BC%BA%E4%B8%80%E8%87%B4%E6%80%A7%E4%BA%8B%E5%8A%A1%E5%92%8C%E6%9F%94%E6%80%A7%E4%BA%8B%E5%8A%A1%E6%94%AF%E6%8C%81%E4%B8%8A/">28 åˆ†å¸ƒå¼äº‹åŠ¡ï¼šShardingSphere ä¸­å¦‚ä½•é›†æˆå¼ºä¸€è‡´æ€§äº‹åŠ¡å’ŒæŸ”æ€§äº‹åŠ¡æ”¯æŒï¼Ÿï¼ˆä¸Šï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/29-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1shardingsphere-%E4%B8%AD%E5%A6%82%E4%BD%95%E9%9B%86%E6%88%90%E5%BC%BA%E4%B8%80%E8%87%B4%E6%80%A7%E4%BA%8B%E5%8A%A1%E5%92%8C%E6%9F%94%E6%80%A7%E4%BA%8B%E5%8A%A1%E6%94%AF%E6%8C%81%E4%B8%8B/">29 åˆ†å¸ƒå¼äº‹åŠ¡ï¼šShardingSphere ä¸­å¦‚ä½•é›†æˆå¼ºä¸€è‡´æ€§äº‹åŠ¡å’ŒæŸ”æ€§äº‹åŠ¡æ”¯æŒï¼Ÿï¼ˆä¸‹ï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/30-%E6%95%B0%E6%8D%AE%E8%84%B1%E6%95%8F%E5%A6%82%E4%BD%95%E5%9F%BA%E4%BA%8E%E6%94%B9%E5%86%99%E5%BC%95%E6%93%8E%E5%AE%9E%E7%8E%B0%E4%BD%8E%E4%BE%B5%E5%85%A5%E6%80%A7%E6%95%B0%E6%8D%AE%E8%84%B1%E6%95%8F%E6%96%B9%E6%A1%88/">30 æ•°æ®è„±æ•ï¼šå¦‚ä½•åŸºäºæ”¹å†™å¼•æ“å®ç°ä½ä¾µå…¥æ€§æ•°æ®è„±æ•æ–¹æ¡ˆï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/31-%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83%E5%A6%82%E4%BD%95%E5%9F%BA%E4%BA%8E%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83%E5%AE%9E%E7%8E%B0%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF%E7%9A%84%E5%8A%A8%E6%80%81%E5%8C%96%E7%AE%A1%E7%90%86/">31 é…ç½®ä¸­å¿ƒï¼šå¦‚ä½•åŸºäºé…ç½®ä¸­å¿ƒå®ç°é…ç½®ä¿¡æ¯çš„åŠ¨æ€åŒ–ç®¡ç†ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/32-%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E5%A6%82%E4%BD%95%E5%9F%BA%E4%BA%8E%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BF%E9%97%AE%E7%86%94%E6%96%AD%E6%9C%BA%E5%88%B6/">32 æ³¨å†Œä¸­å¿ƒï¼šå¦‚ä½•åŸºäºæ³¨å†Œä¸­å¿ƒå®ç°æ•°æ®åº“è®¿é—®ç†”æ–­æœºåˆ¶ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/33-%E9%93%BE%E8%B7%AF%E8%B7%9F%E8%B8%AA%E5%A6%82%E4%BD%95%E5%9F%BA%E4%BA%8E-hook-%E6%9C%BA%E5%88%B6%E4%BB%A5%E5%8F%8A-opentracing-%E5%8D%8F%E8%AE%AE%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE%E9%93%BE%E8%B7%AF%E8%B7%9F%E8%B8%AA/">33 é“¾è·¯è·Ÿè¸ªï¼šå¦‚ä½•åŸºäº Hook æœºåˆ¶ä»¥åŠ OpenTracing åè®®å®ç°æ•°æ®è®¿é—®é“¾è·¯è·Ÿè¸ªï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/35-%E7%BB%93%E8%AF%ADshardingsphere-%E6%80%BB%E7%BB%93%E5%8F%8A%E5%B1%95%E6%9C%9B/">35 ç»“è¯­ï¼šShardingSphere æ€»ç»“åŠå±•æœ›</a></li>
                
                
            </ul>
        
    </div>
</aside>

<style>
    aside {
        position: fixed;
        left: 20px;
        background: #ffdee3;
        border-radius: 6px;
        padding: 20px;
        padding-top: 60px;
        box-shadow: 5px 10px #888;
        list-style-type: none;
        display: none;
    }

    .post-category-icon {
        position: absolute;
        width: 80px;
        height: 80px;
        top: -40px;
        left: 50%;
        margin-left: -40px;
        text-align: center;
        font-size: 36px;
        content: 'J';
        background: #ffdee3;
        border-radius: 100%;
        border: 10px solid #fff;
        box-shadow: 5px 10px #888;
    }
</style><article class="post-block">
        <h1 class="post-title">04 åº”ç”¨é›†æˆï¼šåœ¨ä¸šåŠ¡ç³»ç»Ÿä¸­ä½¿ç”¨ ShardingSphere çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ</h1>
        <div class="post-info">
            <div class="post-date"> 
                <span>2021-12-22 01:55:46</span>
            </div>
        </div>
        <div class="post-content">
            <p>åœ¨ä¸Šä¸€è¯¾æ—¶ä¸­ï¼Œæˆ‘è¯¦ç»†ä»‹ç»äº† ShardingSphere ä¸ JDBC è§„èŒƒä¹‹é—´çš„å…¼å®¹æ€§å…³ç³»ï¼Œæˆ‘ä»¬çŸ¥é“ ShardingSphere å¯¹ JDBC è§„èŒƒè¿›è¡Œäº†é‡å†™ï¼Œå¹¶åµŒå…¥äº†åˆ†ç‰‡æœºåˆ¶ã€‚åŸºäºè¿™ç§å…¼å®¹æ€§ï¼Œå¼€å‘äººå‘˜ä½¿ç”¨ ShardingSphere æ—¶å°±åƒåœ¨ä½¿ç”¨ JDBC è§„èŒƒæ‰€æš´éœ²çš„å„ä¸ªæ¥å£ä¸€æ ·ã€‚è¿™ä¸€è¯¾æ—¶ï¼Œæˆ‘ä»¬å°†è®¨è®ºå¦‚ä½•åœ¨ä¸šåŠ¡ç³»ç»Ÿä¸­ä½¿ç”¨ ShardingSphere çš„å…·ä½“æ–¹å¼ã€‚</p>
<h3 id="å¦‚ä½•æŠ½è±¡å¼€æºæ¡†æ¶çš„åº”ç”¨æ–¹å¼">å¦‚ä½•æŠ½è±¡å¼€æºæ¡†æ¶çš„åº”ç”¨æ–¹å¼ï¼Ÿ</h3>
<p>å½“æˆ‘ä»¬è‡ªå·±åœ¨è®¾è®¡å’Œå®ç°ä¸€æ¬¾å¼€æºæ¡†æ¶æ—¶ï¼Œå¦‚ä½•è§„åˆ’å®ƒçš„åº”ç”¨æ–¹å¼å‘¢ï¼Ÿä½œä¸ºä¸€æ¬¾ä¸æ•°æ®åº“è®¿é—®ç›¸å…³çš„å¼€æºæ¡†æ¶ï¼ŒShardingSphere æä¾›äº†å¤šä¸ªç»´åº¦çš„åº”ç”¨æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹è¿™äº›åº”ç”¨æ–¹å¼è¿›è¡ŒæŠ½è±¡ï¼Œä»è€Œæç‚¼å‡ºä¸€ç§æ¨¡ç‰ˆã€‚è¿™ä¸ªæ¨¡ç‰ˆç”±å››ä¸ªç»´åº¦ç»„æˆï¼Œåˆ†åˆ«æ˜¯<strong>åº•å±‚å·¥å…·ã€åŸºç¡€è§„èŒƒã€å¼€å‘æ¡†æ¶å’Œé¢†åŸŸæ¡†æ¶</strong>ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="http://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/ShardingSphere%20%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2-%E5%AE%8C/assets/CgqCHl75qv-AFbZvAACz7F_yXRM280.png" alt="2.png"></p>
<h4 id="åº•å±‚å·¥å…·">åº•å±‚å·¥å…·</h4>
<p>åº•å±‚å·¥å…·æŒ‡çš„æ˜¯è¿™ä¸ªå¼€æºæ¡†æ¶æ‰€é¢å‘çš„ç›®æ ‡å·¥å…·æˆ–æ‰€ä¾èµ–çš„ç¬¬ä¸‰æ–¹å·¥å…·ã€‚è¿™ç§åº•å±‚å·¥å…·å¾€å¾€ä¸æ˜¯æ¡†æ¶æœ¬èº«å¯ä»¥æ§åˆ¶å’Œç®¡ç†çš„ï¼Œæ¡†æ¶çš„ä½œç”¨åªæ˜¯åœ¨å®ƒä¸Šé¢æ·»åŠ ä¸€ä¸ªåº”ç”¨å±‚ï¼Œç”¨äºå°è£…å¯¹è¿™äº›åº•å±‚å·¥å…·çš„ä½¿ç”¨æ–¹å¼ã€‚</p>
<p>å¯¹äº ShardingSphere è€Œè¨€ï¼Œ<strong>è¿™é‡Œæ‰€è¯´çš„åº•å±‚å·¥å…·å®é™…ä¸ŠæŒ‡çš„æ˜¯å…³ç³»å‹æ•°æ®åº“</strong>ã€‚ç›®å‰ï¼ŒShardingSphere æ”¯æŒåŒ…æ‹¬ MySQLã€Oracleã€SQLServerã€PostgreSQL ä»¥åŠä»»ä½•éµå¾ª SQL92 æ ‡å‡†çš„æ•°æ®åº“ã€‚</p>
<h4 id="åŸºç¡€è§„èŒƒ">åŸºç¡€è§„èŒƒ</h4>
<p>ä½œä¸ºä¸€ä¸ªå¼€æºæ¡†æ¶ï¼Œå¾ˆå¤šæ—¶å€™éœ€è¦å…¼å®¹ä¸šç•Œå·²ç»å½¢æˆæ ‡å‡†çš„åŸºç¡€æ€§è§„èŒƒã€‚æ¢å¥è¯è¯´ï¼Œæƒ³è¦æ¡†æ¶è¢«å…¶ä»–å¼€å‘äººå‘˜æ‰€è®¤å¯ï¼Œå°±å¾—è¦è€ƒè™‘å¼€å‘äººå‘˜ç›®å‰åœ¨ä½¿ç”¨çš„åŸºç¡€è§„èŒƒã€‚ä¾‹å¦‚ï¼Œå¦‚æœè®¾è®¡ä¸€ä¸ªä¸é“¾è·¯è·Ÿè¸ªç›¸å…³çš„å¼€æºæ¡†æ¶ï¼Œä¸€èˆ¬éƒ½éœ€è¦å…¼å®¹ OpenTracing è¿™ä¸€å¼€æ”¾å¼åˆ†å¸ƒå¼è¿½è¸ªè§„èŒƒã€‚</p>
<p>å¯¹äº ShardingSphere è€Œè¨€ï¼Œæ‰€æ¶‰åŠçš„åŸºç¡€è§„èŒƒå¾ˆæ˜ç¡®ï¼Œå°±æ˜¯æˆ‘ä»¬åœ¨ä¸Šä¸€è¯¾æ—¶ä¸­æ‰€è¯¦ç»†é˜è¿°çš„ JDBC è§„èŒƒã€‚</p>
<h4 id="å¼€å‘æ¡†æ¶">å¼€å‘æ¡†æ¶</h4>
<p>å¼€æºæ¡†æ¶æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå¼€å‘æ¡†æ¶ï¼Œä½†æˆ‘ä»¬é€šå¸¸ä¸ä¼šè‡ªå·±è®¾è®¡å’Œå®ç°ä¸€ä¸ªå…¨æ–°çš„å¼€å‘æ¡†æ¶ï¼Œè€Œæ˜¯æ›´å€¾å‘äºä¸ç°æœ‰çš„ä¸»æµå¼€å‘æ¡†æ¶è¿›è¡Œé›†æˆã€‚ç›®å‰ï¼ŒJava ä¸–ç•Œä¸­æœ€ä¸»æµçš„å¼€å‘æ¡†æ¶å°±æ˜¯ Spring å®¶æ—ç³»åˆ—æ¡†æ¶ã€‚</p>
<p>ShardingSphere åŒæ—¶é›†æˆäº† Spring å’Œ Spring Boot è¿™ä¸¤æ¬¾ Spring å®¶æ—çš„ä¸»æµå¼€å‘æ¡†æ¶ã€‚<strong>ç†Ÿæ‚‰è¿™ä¸¤æ¬¾æ¡†æ¶çš„å¼€å‘äººå‘˜åœ¨åº”ç”¨ ShardingSphere è¿›è¡Œå¼€å‘æ—¶å°†ä¸éœ€è¦ä»»ä½•å­¦ä¹ æˆæœ¬</strong>ã€‚</p>
<h4 id="é¢†åŸŸæ¡†æ¶">é¢†åŸŸæ¡†æ¶</h4>
<p>å¯¹äºæŸäº›å¼€æºæ¡†æ¶è€Œè¨€ï¼Œä¹Ÿéœ€è¦è€ƒè™‘å’Œé¢†åŸŸæ¡†æ¶è¿›è¡Œé›†æˆï¼Œä»¥ä¾¿æä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒå’Œä½¿ç”¨å‹å¥½æ€§ï¼ŒåŒºåˆ«äºå‰é¢æåˆ°çš„é€‚ç”¨äºä»»ä½•åœºæ™¯çš„å¼€å‘æ¡†æ¶ã€‚<strong>æ‰€è°“é¢†åŸŸæ¡†æ¶ï¼Œæ˜¯æŒ‡ä¸æ‰€è®¾è®¡çš„å¼€æºæ¡†æ¶å±äºåŒä¸€ä¸“ä¸šé¢†åŸŸçš„å¼€å‘æ¡†æ¶ã€‚</strong> ä¸šåŠ¡å¼€å‘äººå‘˜å·²ç»ä¹ æƒ¯åœ¨æ—¥å¸¸å¼€å‘è¿‡ç¨‹ä¸­ä½¿ç”¨è¿™äº›ç‰¹å®šäºæŸä¸€é¢†åŸŸçš„å¼€å‘æ¡†æ¶ï¼Œæ‰€ä»¥åœ¨è®¾è®¡è‡ªå·±çš„å¼€æºæ¡†æ¶æ—¶ï¼Œä¹Ÿéœ€è¦å……åˆ†è€ƒè™‘ä¸è¿™äº›æ¡†æ¶çš„æ•´åˆå’Œé›†æˆã€‚</p>
<p>å¯¹äº ShardingSphere è€Œè¨€ï¼Œé¢†åŸŸæ¡†æ¶æŒ‡çš„æ˜¯ MyBatisã€Hibernate ç­‰å¸¸è§çš„ ORM æ¡†æ¶ã€‚ShardingSphere å¯¹è¿™é¢†åŸŸæ¡†æ¶æä¾›äº†æ— ç¼é›†æˆçš„å®ç°æ–¹æ¡ˆï¼Œç†Ÿæ‚‰ ORM æ¡†æ¶çš„å¼€å‘äººå‘˜åœ¨åº”ç”¨ ShardingSphere è¿›è¡Œå¼€å‘æ—¶åŒæ ·ä¸éœ€è¦ä»»ä½•å­¦ä¹ æˆæœ¬ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±ç»“åˆå‰é¢æŠ½è±¡çš„å¼€æºæ¡†æ¶åº”ç”¨æ–¹å¼æ¥å…·ä½“åˆ†æ ShardingSphere æ¡†æ¶ä¸ºå¼€å‘äººå‘˜æä¾›äº†å“ªäº›å¼€å‘ä¸Šçš„æ”¯æŒã€‚</p>
<h3 id="æ•°æ®åº“å’Œ-jdbc-é›†æˆ">æ•°æ®åº“å’Œ JDBC é›†æˆ</h3>
<p>ç”±äº ShardingSphere æœ€ç»ˆæ“ä½œçš„è¿˜æ˜¯å…³ç³»å‹æ•°æ®åº“ï¼Œå¹¶åŸºäº JDBC è§„èŒƒåšäº†é‡å†™ã€‚æ‰€ä»¥<strong>åœ¨å…·ä½“åº”ç”¨ä¸Šç›¸å¯¹æ¯”è¾ƒç®€å•ï¼Œæˆ‘ä»¬åªè¦æŠŠæ¡ JDBC é©±åŠ¨å’Œæ•°æ®åº“è¿æ¥æ± çš„ä½¿ç”¨æ–¹å¼å³å¯ã€‚</strong></p>
<h4 id="jdbc-é©±åŠ¨">JDBC é©±åŠ¨</h4>
<p>ShardingSphere æ”¯æŒ MySQLã€Oracle ç­‰å®ç° JDBC è§„èŒƒçš„ä¸»æµå…³ç³»å‹æ•°æ®åº“ã€‚æˆ‘ä»¬åœ¨ä½¿ç”¨è¿™äº›æ•°æ®åº“æ—¶ï¼Œå¸¸è§çš„åšæ³•å°±æ˜¯æŒ‡å®šå…·ä½“æ•°æ®åº“å¯¹åº”çš„ JDBC é©±åŠ¨ç±»ã€URL ä»¥åŠç”¨æˆ·åå’Œå¯†ç ã€‚</p>
<p>è¿™é‡Œä»¥ MySQL ä¸ºä¾‹ï¼Œå±•ç¤ºäº†åœ¨ Spring Boot åº”ç”¨ç¨‹åºä¸­é€šè¿‡ .yaml é…ç½®æ–‡ä»¶æŒ‡å®š JDBC é©±åŠ¨çš„ä¸€èˆ¬åšæ³•ï¼š</p>
<pre tabindex="0"><code>driverClassName: com.mysql.jdbc.Driver
url: jdbc:mysql://localhost:3306/test_database
username: root
password: root
</code></pre><h4 id="æ•°æ®åº“è¿æ¥æ± ">æ•°æ®åº“è¿æ¥æ± </h4>
<p>é…ç½® JDBC é©±åŠ¨çš„ç›®çš„æ˜¯è·å–è®¿é—®æ•°æ®åº“æ‰€éœ€çš„ Connectionã€‚ä¸ºäº†æé«˜æ€§èƒ½ï¼Œä¸»æµåšæ³•æ˜¯é‡‡ç”¨æ•°æ®åº“è¿æ¥æ± æ–¹æ¡ˆï¼Œæ•°æ®åº“è¿æ¥æ± å°†åˆ›å»ºçš„ Connection å¯¹è±¡å­˜æ”¾åˆ°è¿æ¥æ± ä¸­ï¼Œç„¶åä»æ± ä¸­æä¾› Connectionã€‚</p>
<p>ShardingSphere æ”¯æŒä¸€æ‰¹ä¸»æµçš„ç¬¬ä¸‰æ–¹æ•°æ®åº“è¿æ¥æ± ï¼ŒåŒ…æ‹¬ DBCPã€C3P0ã€BoneCPã€Druid å’Œ HikariCP ç­‰ã€‚åœ¨åº”ç”¨ ShardingSphere æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ›å»º DataSource æ¥ä½¿ç”¨æ•°æ®åº“è¿æ¥æ± ã€‚ä¾‹å¦‚ï¼Œåœ¨ Spring Boot ä¸­ï¼Œå¯ä»¥åœ¨ .properties é…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨é˜¿é‡Œå·´å·´æä¾›çš„ DruidDataSource ç±»ï¼Œåˆå§‹åŒ–åŸºäº Druid æ•°æ®åº“è¿æ¥æ± çš„ DataSourceï¼š</p>
<pre tabindex="0"><code>spring.shardingsphere.datasource.names= test_datasource
spring.shardingsphere.datasource.test_datasource.type=com.alibaba.druid.pool.DruidDataSource
spring.shardingsphere.datasource.test_datasource.driver-class-name=com.mysql.jdbc.Driver
spring.shardingsphere.datasource.test_datasource.jdbc-url=jdbc:mysql://localhost:3306/test_database
spring.shardingsphere.datasource.test_datasource.username=root
spring.shardingsphere.datasource.test_datasource.password=root
</code></pre><p>è€Œå¯¹äºä½¿ç”¨ Spring æ¡†æ¶çš„å¼€å‘äººå‘˜è€Œè¨€ï¼Œå¯ä»¥ç›´æ¥åœ¨ Spring å®¹å™¨ä¸­æ³¨å…¥ä¸€ä¸ª DruidDataSource çš„ JavaBeanï¼š</p>
<pre tabindex="0"><code>&lt;bean id=&quot;test_datasource&quot; class=&quot;com.alibaba.druid.pool.DruidDataSource&quot; destroy-method=&quot;close&quot;&gt;
    &lt;property name=&quot;driverClassName&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt;
    &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/ test_database&quot;/&gt;
    &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt;
    &lt;property name=&quot;password&quot; value=&quot;root&quot;/&gt;
&lt;/bean&gt;
</code></pre><h3 id="å¼€å‘æ¡†æ¶é›†æˆ">å¼€å‘æ¡†æ¶é›†æˆ</h3>
<p>ä»ä¸Šé¢æ‰€ä»‹ç»çš„é…ç½®ä¿¡æ¯ä¸­ï¼Œä½ å®é™…ä¸Šå·²ç»çœ‹åˆ°äº† ShardingSphere ä¸­é›†æˆçš„ä¸¤æ¬¾ä¸»æµå¼€å‘æ¡†æ¶ï¼Œå³ Spring å’Œ Spring Bootï¼Œå®ƒä»¬éƒ½å¯¹ JDBC è§„èŒƒåšäº†å°è£…ã€‚å½“ç„¶ï¼Œå¯¹äºæ²¡æœ‰ä½¿ç”¨æˆ–æ— æ³•ä½¿ç”¨ Spring å®¶æ—æ¡†æ¶çš„åœºæ™¯ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥åœ¨åŸç”Ÿ Java åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ ShardingSphereã€‚</p>
<p>åœ¨ä»‹ç»å¼€å‘æ¡†æ¶çš„å…·ä½“é›†æˆæ–¹å¼ä¹‹å‰ï¼Œæˆ‘ä»¬æ¥è®¾è®¡ä¸€ä¸ªç®€å•çš„åº”ç”¨åœºæ™¯ã€‚å‡è®¾ç³»ç»Ÿä¸­å­˜åœ¨ä¸€ä¸ªç”¨æˆ·è¡¨ Userï¼Œè¿™å¼ è¡¨çš„æ•°æ®é‡æ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†å®ƒè¿›è¡Œåˆ†åº“åˆ†è¡¨å¤„ç†ï¼Œè®¡åˆ’åˆ†æˆä¸¤ä¸ªæ•°æ®åº“ ds0 å’Œ ds1ï¼Œç„¶åæ¯ä¸ªåº“ä¸­å†åˆ†æˆä¸¤å¼ è¡¨ user0 å’Œ user1ï¼š</p>
<p><img src="http://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/ShardingSphere%20%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2-%E5%AE%8C/assets/Ciqc1F75qxSADY5yAADgZQ5r488284.png" alt="1.png"></p>
<p>æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¦‚ä½•åŸºäº Java åŸç”Ÿã€Spring åŠ Spring Boot å¼€å‘æ¡†æ¶é’ˆå¯¹è¿™ä¸€åœºæ™¯å®ç°åˆ†åº“åˆ†è¡¨ã€‚</p>
<h4 id="java-åŸç”Ÿ">Java åŸç”Ÿ</h4>
<p>å¦‚æœä½¿ç”¨ Java åŸç”Ÿçš„å¼€å‘æ–¹å¼ï¼Œç›¸å½“äºæˆ‘ä»¬éœ€è¦å…¨éƒ¨é€šè¿‡ Java ä»£ç æ¥åˆ›å»ºå’Œç®¡ç† ShardingSphere ä¸­ä¸åˆ†åº“åˆ†è¡¨ç›¸å…³çš„æ‰€æœ‰ç±»ã€‚å¦‚æœä¸åšç‰¹æ®Šè¯´æ˜ï¼Œæœ¬è¯¾ç¨‹å°†é»˜è®¤ä½¿ç”¨ Maven å®ç°åŒ…ä¾èµ–å…³ç³»çš„ç®¡ç†ã€‚æ‰€ä»¥ï¼Œé¦–å…ˆéœ€è¦å¼•å…¥å¯¹ sharding-jdbc-core ç»„ä»¶çš„ Maven å¼•ç”¨ï¼š</p>
<pre tabindex="0"><code>&lt;dependency&gt;
    &lt;groupId&gt;org.apache.shardingsphere&lt;/groupId&gt;
    &lt;artifactId&gt;sharding-jdbc-core&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre><p>ç„¶åï¼ŒæŒ‰ç…§ JDBC çš„ä½¿ç”¨æ–¹æ³•ï¼Œéœ€è¦åˆ›å»º DataSourceã€Connectionã€Statement ç­‰ä¸€ç³»åˆ—æ¥å£çš„å®ç°ç±»ï¼Œå¹¶é€šè¿‡è¿™äº›ç±»æ¥å®Œæˆå…·ä½“çš„æ•°æ®åº“è®¿é—®æ“ä½œã€‚</p>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹åˆ›å»º DataSource çš„ Java ä»£ç ï¼Œè¿™é‡Œæ„å»ºäº†ä¸€ä¸ªå·¥å…·ç±» DataSourceHelperï¼ŒåŸºäº Druid æ¥è·å–ä¸€ä¸ª DruidDataSourceï¼š</p>
<pre tabindex="0"><code>public final class DataSourceHelper{

    private static final String HOST = &quot;localhost&quot;;
    private static final int PORT = 3306;
    private static final String USER_NAME = &quot;root&quot;;
    private static final String PASSWORD = &quot;root&quot;;

    public static DataSource createDataSource(final String dataSourceName) {
        DruidDataSource result = new DruidDataSource();
        result.setDriverClassName(com.mysql.jdbc.Driver.class.getName());
        result.setUrl(String.format(&quot;jdbc:mysql://%s:%s/%s, HOST, PORT, dataSourceName));
        result.setUsername(USER_NAME);
        result.setPassword(PASSWORD);
        return result;
    }
}
</code></pre><p>ç”±äºåœ¨ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸¤ä¸ªç”¨æˆ·åº“ï¼Œæ‰€ä»¥ä½¿ç”¨ä¸€ä¸ª Map æ¥ä¿å­˜ä¸¤ä¸ªæ•°æ®æºå¯¹è±¡ï¼š</p>
<pre tabindex="0"><code>    private static Map&lt;String, DataSource&gt; createDataSourceMap() {
        Map&lt;String, DataSource&gt; result = new HashMap&lt;&gt;();
        result.put(&quot;ds0&quot;, DataSourceHelper.createDataSource(&quot;ds0&quot;));
        result.put(&quot;ds1&quot;, DataSourceHelper.createDataSource(&quot;ds1&quot;));
        return result;
    }
</code></pre><p>æœ‰äº†åŒ…å«åˆå§‹åŒ– DataSource å¯¹è±¡çš„æ•°æ®æºé›†åˆä¹‹åï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥é€šè¿‡è®¾è®¡åˆ†åº“åˆ†è¡¨è§„åˆ™æ¥è·å–ç›®æ ‡ DataSourceï¼š</p>
<pre tabindex="0"><code>    public DataSource dataSource() throws SQLException {
         //åˆ›å»ºåˆ†ç‰‡è§„åˆ™é…ç½®ç±»
        ShardingRuleConfiguration shardingRuleConfig = new ShardingRuleConfiguration();
        
        //åˆ›å»ºåˆ†è¡¨è§„åˆ™é…ç½®ç±»
        TableRuleConfiguration tableRuleConfig = new TableRuleConfiguration(&quot;user&quot;, &quot;ds${0..1}.user${0..1}&quot;);
        
        //åˆ›å»ºåˆ†å¸ƒå¼ä¸»é”®ç”Ÿæˆé…ç½®ç±»
        Properties properties = new Properties();
        properties.setProperty(&quot;worker.id&quot;, &quot;33&quot;);
        KeyGeneratorConfiguration keyGeneratorConfig = new KeyGeneratorConfiguration(&quot;SNOWFLAKE&quot;, &quot;id&quot;, properties);              
        tableRuleConfig.setKeyGeneratorConfig(keyGeneratorConfig);      
        shardingRuleConfig.getTableRuleConfigs().add(tableRuleConfig);
        
        //æ ¹æ®æ€§åˆ«åˆ†åº“ï¼Œä¸€å…±åˆ†ä¸º 2 ä¸ªåº“
        shardingRuleConfig.setDefaultDatabaseShardingStrategyConfig(new InlineShardingStrategyConfiguration(&quot;sex&quot;, &quot;ds${sex % 2}&quot;));
        
        //æ ¹æ®ç”¨æˆ· ID åˆ†è¡¨ï¼Œä¸€å…±åˆ†ä¸º 2 å¼ è¡¨
        shardingRuleConfig.setDefaultTableShardingStrategyConfig(new StandardShardingStrategyConfiguration(&quot;id&quot;, &quot;user${id % 2}&quot;));
        
        //é€šè¿‡å·¥å‚ç±»åˆ›å»ºå…·ä½“çš„ DataSource
        return ShardingDataSourceFactory.createDataSource(createDataSourceMap(), shardingRuleConfig, new Properties());
    }
</code></pre><p>è¿™é‡Œä½¿ç”¨åˆ°äº†å¤§é‡ ShardingSphere ä¸­çš„è§„åˆ™é…ç½®ç±»ï¼ŒåŒ…å«åˆ†ç‰‡è§„åˆ™é…ç½®ã€åˆ†è¡¨è§„åˆ™é…ç½®ã€åˆ†å¸ƒå¼ä¸»é”®ç”Ÿæˆé…ç½®ç­‰ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬åœ¨åˆ†ç‰‡è§„åˆ™é…ç½®ä¸­ä½¿ç”¨è¡Œè¡¨è¾¾å¼æ¥è®¾ç½®å…·ä½“çš„åˆ†ç‰‡è§„åˆ™ã€‚å…³äºè¡Œè¡¨è¾¾å¼çš„å…·ä½“ä½¿ç”¨æ–¹æ³•å°†åœ¨ä¸‹ä¸€è¯¾æ—¶ä¸­è¿›è¡Œä»‹ç»ï¼Œè¿™é‡Œåªç®€å•åœ°æ ¹æ®ç”¨æˆ·çš„å¹´é¾„å’Œ ID åˆ†åˆ«æ¥è¿›è¡Œåˆ†åº“å’Œåˆ†è¡¨ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬åœ¨æ–¹æ³•çš„æœ€åéƒ¨åˆ†ä¼ å…¥å‰é¢å·²ç»åˆå§‹åŒ–çš„ DataSource é›†åˆå¹¶é€šè¿‡å·¥å‚ç±»æ¥åˆ›å»ºå…·ä½“çš„æŸä¸€ä¸ªç›®æ ‡ DataSourceã€‚</p>
<p>ä¸€æ—¦è·å–äº†ç›®æ ‡ DataSource ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ JDBC ä¸­çš„æ ¸å¿ƒæ¥å£æ¥æ‰§è¡Œä¼ å…¥çš„ SQL è¯­å¥ï¼š</p>
<pre tabindex="0"><code>    List&lt;User&gt; getUsers(final String sql) throws SQLException {
        List&lt;User&gt; result = new LinkedList&lt;&gt;();
        try (Connection connection = dataSource.getConnection();
             PreparedStatement preparedStatement = connection.prepareStatement(sql);
             ResultSet resultSet = preparedStatement.executeQuery()) {
            while (resultSet.next()) {
                User user= new User();
                //çœç•¥è®¾ç½®Userå¯¹è±¡çš„èµ‹å€¼è¯­å¥
                result.add(user);
            }
        }
        return result;
    }
</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œç”¨åˆ°äº†ç†Ÿæ‚‰çš„ Connectionã€PreparedStatement å’Œ ResultSet ç­‰ JDBC æ¥å£æ¥æ‰§è¡ŒæŸ¥è¯¢å¹¶è·å–ç»“æœï¼Œæ•´ä¸ªè¿‡ç¨‹å°±åƒæ˜¯åœ¨ä½¿ç”¨æ™®é€šçš„ JDBC ä¸€æ ·ã€‚ä½†è¿™ä¸ªæ—¶å€™ï¼Œè¿™äº› JDBC æ¥å£èƒŒåçš„å®ç°ç±»éƒ½å·²ç»åµŒå…¥äº†åˆ†ç‰‡åŠŸèƒ½ã€‚</p>
<h4 id="spring">Spring</h4>
<p>å¦‚æœä½¿ç”¨ Spring ä½œä¸ºæˆ‘ä»¬çš„å¼€å‘æ¡†æ¶ï¼Œé‚£ä¹ˆ JDBC ä¸­å„ä¸ªæ ¸å¿ƒå¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹éƒ½ä¼šäº¤ç»™ Spring å®¹å™¨è¿›è¡Œå®Œæˆã€‚<strong>ShardingSphere ä¸­åŸºäºå‘½åç©ºé—´ï¼ˆNameSpaceï¼‰æœºåˆ¶å®Œæˆäº†ä¸ Spring æ¡†æ¶çš„æ— ç¼é›†æˆã€‚è¦æƒ³ä½¿ç”¨è¿™ç§æœºåˆ¶ï¼Œéœ€è¦å…ˆå¼•å…¥å¯¹åº”çš„ Maven ä¾èµ–</strong>ï¼š</p>
<pre tabindex="0"><code>&lt;dependency&gt;
    &lt;groupId&gt;org.apache.shardingsphere&lt;/groupId&gt;
    &lt;artifactId&gt;sharding-jdbc-spring-namespace&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre><p>Spring ä¸­çš„å‘½åç©ºé—´æœºåˆ¶æœ¬è´¨ä¸Šå°±æ˜¯åŸºäº Spring é…ç½®æ–‡ä»¶çš„ XML Scheme æ·»åŠ å®šåˆ¶åŒ–çš„é…ç½®é¡¹å¹¶è¿›è¡Œè§£æï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼šåœ¨ XML é…ç½®æ–‡ä»¶ä¸­çœ‹åˆ°ä¸€ç³»åˆ—ä¸åˆ†ç‰‡ç›¸å…³çš„è‡ªå®šä¹‰é…ç½®é¡¹ã€‚ä¾‹å¦‚ï¼ŒDataSource çš„åˆå§‹åŒ–è¿‡ç¨‹ç›¸å½“äºåˆ›å»ºä¸€ä¸ª Java Bean çš„è¿‡ç¨‹ï¼š</p>
<pre tabindex="0"><code>    &lt;bean id=&quot;ds0&quot; class=&quot;com.alibaba.druid.pool.DruidDataSource&quot;&gt;
        &lt;property name=&quot;driverClassName&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt;
        &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/ds0&quot;/&gt;
        &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt;
        &lt;property name=&quot;password&quot; value=&quot;root&quot;/&gt;
    &lt;/bean&gt;
</code></pre><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥é€šè¿‡ä¸€ç³»åˆ—çš„é…ç½®é¡¹æ¥åˆå§‹åŒ–ç›¸åº”çš„åˆ†åº“è§„åˆ™ï¼Œå¹¶æœ€ç»ˆå®Œæˆç›®æ ‡ DataSource çš„åˆ›å»ºè¿‡ç¨‹ï¼š</p>
<pre tabindex="0"><code>    &lt;!-- åˆ›å»ºåˆ†åº“é…ç½® --&gt;
    &lt;sharding:inline-strategy id=&quot;databaseStrategy&quot; sharding-column=&quot;sex&quot; algorithm-expression=&quot;ds${sex % 2}&quot; /&gt;

    &lt;!-- åˆ›å»ºåˆ†è¡¨é…ç½® --&gt;
    &lt;sharding:inline-strategy id=&quot;tableStrategy&quot; sharding-column=&quot;id&quot; algorithm-expression=&quot;user${id % 2}&quot; /&gt;

    &lt;!-- åˆ›å»ºåˆ†å¸ƒå¼ä¸»é”®ç”Ÿæˆé…ç½® --&gt;
    &lt;bean:properties id=&quot;properties&quot;&gt;
        &lt;prop key=&quot;worker.id&quot;&gt;33&lt;/prop&gt;
    &lt;/bean:properties&gt;
    &lt;sharding:key-generator id=&quot;keyGenerator&quot; type=&quot;SNOWFLAKE&quot; column=&quot;id&quot; props-ref=&quot;properties&quot; /&gt;

    &lt;!-- åˆ›å»ºåˆ†ç‰‡è§„åˆ™é…ç½® --&gt;
    &lt;sharding:data-source id=&quot;shardingDataSource&quot;&gt;
        &lt;sharding:sharding-rule data-source-names=&quot;ds0, ds1&quot;&gt;
            &lt;sharding:table-rules&gt;
                &lt;sharding:table-rule logic-table=&quot;user&quot; actual-data-nodes=&quot;ds${0..1}.user${0..1}&quot; database-strategy-ref=&quot;databaseStrategy&quot; table-strategy-ref=&quot;tableStrategy&quot; key-generator-ref=&quot;keyGenerator&quot; /&gt;
            &lt;/sharding:table-rules&gt;
        &lt;/sharding:sharding-rule&gt;
    &lt;/sharding:data-source&gt;
</code></pre><p>å…³äºè¿™äº›é…ç½®é¡¹çš„å†…å®¹æˆ‘ä»¬åŒæ ·æ”¾åœ¨ä¸‹ä¸€è¯¾æ—¶ä¸­è¿›è¡Œè¯¦ç»†è®¨è®ºã€‚</p>
<h4 id="spring-boot">Spring Boot</h4>
<p>å¦‚æœä½ ä½¿ç”¨çš„å¼€å‘æ¡†æ¶æ˜¯ Spring Bootï¼Œé‚£ä¹ˆæ‰€éœ€è¦åšçš„ä¹Ÿæ˜¯ç¼–å†™ä¸€äº›é…ç½®é¡¹ã€‚åœ¨ Spring Boot ä¸­ï¼Œé…ç½®é¡¹çš„ç»„ç»‡å½¢å¼æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯ .yaml æ–‡ä»¶ï¼Œä¸€ç§æ˜¯ .properties æ–‡ä»¶ï¼Œè¿™é‡Œä»¥ .properties ä¸ºä¾‹ç»™å‡º DataSource çš„é…ç½®ï¼š</p>
<pre tabindex="0"><code>spring.shardingsphere.datasource.names=ds0,ds1 
spring.shardingsphere.datasource.ds0.type=com.alibaba.druid.pool.DruidDataSource
spring.shardingsphere.datasource.ds0.driver-class-name=com.mysql.jdbc.Driver
spring.shardingsphere.datasource.ds0.jdbc-url=jdbc:mysql://localhost:3306/ds0
spring.shardingsphere.datasource.ds0.username=root
spring.shardingsphere.datasource.ds0.password=root 
spring.shardingsphere.datasource.ds1.type=com.alibaba.druid.pool.DruidDataSource
spring.shardingsphere.datasource.ds1.driver-class-name=com.mysql.jdbc.Driver
spring.shardingsphere.datasource.ds1.jdbc-url=jdbc:mysql://localhost:3306/ds1
spring.shardingsphere.datasource.ds1.username=root
spring.shardingsphere.datasource.ds1.password=root
</code></pre><p>æœ‰äº† DataSource ä¹‹åï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥è®¾ç½®å¯¹åº”çš„åˆ†åº“ç­–ç•¥ã€åˆ†è¡¨ç­–ç•¥åŠåˆ†å¸ƒå¼ä¸»é”®ç”Ÿæˆç­–ç•¥ï¼š</p>
<pre tabindex="0"><code>spring.shardingsphere.sharding.default-database-strategy.inline.sharding-column=sex
spring.shardingsphere.sharding.default-database-strategy.inline.algorithm-expression=ds$-&gt;{sex % 2} 
spring.shardingsphere.sharding.tables.user.actual-data-nodes=ds$-&gt;{0..1}.user$-&gt;{0..1}
spring.shardingsphere.sharding.tables.user.table-strategy.inline.sharding-column=id
spring.shardingsphere.sharding.tables.user.table-strategy.inline.algorithm-expression=user$-&gt;{id % 2}
spring.shardingsphere.sharding.tables.user.key-generator.column=id
spring.shardingsphere.sharding.tables.user.key-generator.type=SNOWFLAKE
spring.shardingsphere.sharding.tables.user.key-generator.props.worker.id=33
</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œç›¸æ¯” Spring æä¾›çš„å‘½åç©ºé—´æœºåˆ¶ï¼ŒåŸºäº Spring Boot çš„é…ç½®é£æ ¼ç›¸å¯¹ç®€æ´æ˜äº†ï¼Œå®¹æ˜“ç†è§£ã€‚</p>
<p>ä¸€æ—¦æˆ‘ä»¬æä¾›äº†è¿™äº›é…ç½®é¡¹ï¼Œå°±å¯ä»¥ç›´æ¥åœ¨åº”ç”¨ç¨‹åºä¸­æ³¨å…¥ä¸€ä¸ª DataSource æ¥è·å– Connection ç­‰ JDBC å¯¹è±¡ã€‚ä½†åœ¨æ—¥å¸¸å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨äº† Spring å’Œ Spring Boot å¼€å‘æ¡†æ¶ï¼Œä¸€èˆ¬éƒ½ä¸ä¼šç›´æ¥ä½¿ç”¨åŸç”Ÿçš„ JDBC æ¥å£æ¥æ“ä½œæ•°æ®åº“ï¼Œè€Œæ˜¯é€šè¿‡é›†æˆå¸¸è§çš„ ORM æ¡†æ¶æ¥å®ç°è¿™ä¸€ç‚¹ã€‚è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ã€‚</p>
<h3 id="orm-æ¡†æ¶é›†æˆ">ORM æ¡†æ¶é›†æˆ</h3>
<p>åœ¨ Java é¢†åŸŸï¼Œä¸»æµçš„ ORM æ¡†æ¶å¯ä»¥åˆ†æˆä¸¤å¤§ç±»ï¼Œä¸€ç±»éµå¾ª JPAï¼ˆJava Persistence APIï¼ŒJava æŒä¹…å±‚ APIï¼‰è§„èŒƒï¼Œä»£è¡¨æ€§çš„æ¡†æ¶æœ‰ Hibernateã€TopLink ç­‰ï¼›è€Œå¦ä¸€ç±»åˆ™å®Œå…¨é‡‡ç”¨è‡ªå®šä¹‰çš„æ–¹å¼æ¥å®ç°å¯¹è±¡å’Œå…³ç³»ä¹‹é—´çš„æ˜ å°„ï¼Œä»£è¡¨æ€§çš„æ¡†æ¶å°±æ˜¯ MyBatisã€‚</p>
<p>è¿™é‡Œä»¥ Spring Boot å¼€å‘æ¡†æ¶ä¸ºä¾‹ï¼Œç®€è¦ä»‹ç»è¿™ä¸¤ç§ ORM æ¡†æ¶çš„é›†æˆæ–¹å¼ã€‚åŸºäº Spring Boot æä¾›çš„å¼ºå¤§è‡ªåŠ¨é…ç½®æœºåˆ¶ï¼Œæˆ‘ä»¬å‘ç°é›†æˆè¿™äº› ORM æ¡†æ¶çš„æ–¹å¼éå¸¸ç®€å•ã€‚</p>
<h4 id="jpa">JPA</h4>
<p>æƒ³è¦åœ¨ Spring Boot ä¸­ä½¿ç”¨ JPAï¼Œæˆ‘ä»¬éœ€è¦åœ¨ pom æ–‡ä»¶ä¸­æ·»åŠ å¯¹ spring-boot-starter-data-jpa çš„ Maven ä¾èµ–ï¼š</p>
<pre tabindex="0"><code>&lt;dependency&gt;
       &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
      &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre><p>ä¸€æ—¦æ·»åŠ äº† Maven ä¾èµ–ï¼ŒSpring Boot å°±ä¼šè‡ªåŠ¨å¯¼å…¥ spring-ormã€hibernate-entity-managerã€spring-data-jpa ç­‰ä¸€ç³»åˆ—å·¥å…·åŒ…ã€‚ç„¶åï¼Œåœ¨ application.properties é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä¸ JPA ç›¸å…³çš„é…ç½®é¡¹å°±å¯ä»¥äº†ï¼š</p>
<pre tabindex="0"><code>spring.jpa.properties.hibernate.hbm2ddl.auto=create-drop
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL5Dialect
spring.jpa.properties.hibernate.show_sql=false
</code></pre><p>å½“ç„¶ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ä¸šåŠ¡ä»£ç ä¸­å®Œæˆ JPA çš„ Entity å®ä½“ç±»ã€Repository ä»“åº“ç±»çš„å®šä¹‰ï¼Œå¹¶åœ¨ Spring Boot çš„å¯åŠ¨ç±»ä¸­å®Œæˆå¯¹åŒ…å«å¯¹åº”åŒ…ç»“æ„çš„æ‰«æï¼š</p>
<pre tabindex="0"><code>@ComponentScan(&quot;com.user.jpa&quot;)
@EntityScan(basePackages = &quot;com.user.jpa.entity&quot;)
public class UserApplication
</code></pre><h4 id="mybatis">MyBatis</h4>
<p>å¯¹äº MyBatis è€Œè¨€ï¼Œé›†æˆçš„æ­¥éª¤ä¹Ÿç±»ä¼¼ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ  Maven ä¾èµ–ï¼š</p>
<pre tabindex="0"><code>&lt;dependency&gt;
     &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;
     &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre><p>ç„¶åï¼Œç”±äº MyBatis çš„å¯åŠ¨ä¾èµ–äºæ¡†æ¶æä¾›çš„ä¸“ç”¨é…ç½®é¡¹ï¼Œä¸€èˆ¬æˆ‘ä»¬ä¼šæŠŠè¿™äº›é…ç½®é¡¹ç»„ç»‡åœ¨ä¸€ä¸ªç‹¬ç«‹çš„é…ç½®æ–‡ä»¶ä¸­ï¼Œå¹¶åœ¨ Spring Boot çš„ application.properties ä¸­å¼•ç”¨è¿™ä¸ªé…ç½®æ–‡ä»¶ï¼š</p>
<pre tabindex="0"><code>mybatis.config-location=classpath:META-INF/mybatis-config.xml
</code></pre><p>åœ¨ mybatis-config.xml é…ç½®æ–‡ä»¶ä¸­ï¼Œè‡³å°‘ä¼šåŒ…å«å„ç§ Mybatis Mapper æ–‡ä»¶çš„å®šä¹‰ï¼š</p>
<pre tabindex="0"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE configuration
        PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;
&lt;configuration&gt;
    &lt;mappers&gt;
        &lt;mapper resource=&quot;mappers/UserMapper.xml&quot;/&gt;
    &lt;/mappers&gt;
&lt;/configuration&gt;
</code></pre><p>è€Œåœ¨ Mapper æ–‡ä»¶ä¸­ï¼Œå°±åŒ…å«äº†è¿è¡Œ MyBatis æ‰€éœ€çš„å®ä½“ä¸æ•°æ®åº“æ¨¡å¼ä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Œä»¥åŠå„ç§æ•°æ®åº“æ“ä½œçš„ SQL è¯­å¥å®šä¹‰ã€‚</p>
<p>æœ€åï¼Œæˆ‘ä»¬åŒæ ·éœ€è¦åœ¨ Spring Boot çš„å¯åŠ¨ç±»ä¸­æ·»åŠ å¯¹åŒ…å«å„ç§ Entity å’Œ Repository å®šä¹‰çš„åŒ…ç»“æ„çš„æ‰«ææœºåˆ¶ï¼š</p>
<pre tabindex="0"><code>@ComponentScan(&quot;com.user.mybatis&quot;)
@MapperScan(basePackages = &quot;com.user.mybatis.repository&quot;)
public class UserApplication
</code></pre><p>è¿™æ ·ï¼Œæˆ‘ä»¬åœ¨ä¸šåŠ¡ç³»ç»Ÿä¸­ä½¿ç”¨ ShardingSphere çš„å„ç§æ–¹å¼å°±ä»‹ç»å®Œæ¯•äº†ã€‚</p>
<h3 id="å°ç»“">å°ç»“</h3>
<p>ä½œä¸ºä¸€ä¸ªä¼˜ç§€çš„å¼€æºæ¡†æ¶ï¼ŒShardingSphere æä¾›äº†å¤šæ–¹é¢çš„é›†æˆæ–¹å¼ä¾›å¹¿å¤§å¼€å‘äººå‘˜åœ¨ä¸šåŠ¡ç³»ç»Ÿä¸­ä½¿ç”¨å®ƒæ¥å®Œæˆåˆ†åº“åˆ†è¡¨æ“ä½œã€‚åœ¨è¿™ä¸€è¯¾æ—¶ä¸­ï¼Œæˆ‘ä»¬å…ˆæ¢³ç†äº†ä½œä¸ºä¸€ä¸ªå¼€æºæ¡†æ¶æ‰€åº”è¯¥å…·å¤‡çš„åº”ç”¨æ–¹å¼ï¼Œå¹¶åˆ†æäº†è¿™äº›åº”ç”¨æ–¹å¼åœ¨ ShardingSphere ä¸­çš„å…·ä½“å®ç°æœºåˆ¶ã€‚å¯ä»¥çœ‹åˆ°ï¼Œ<strong>ä» JDBC è§„èŒƒï¼Œåˆ° Springã€Spring Boot å¼€å‘æ¡†æ¶ï¼Œå†åˆ° JPAã€MyBatis ç­‰ä¸»æµ ORM æ¡†æ¶ï¼ŒShardingSphere éƒ½æä¾›äº†å®Œå–„çš„é›†æˆæ–¹æ¡ˆã€‚</strong></p>
<p>è¿™é‡Œç»™ä½ ç•™ä¸€é“æ€è€ƒé¢˜ï¼šä¸ºäº†å®ç°æ¡†æ¶çš„æ˜“ç”¨æ€§ï¼ŒShardingSphere ä¸ºå¼€å‘äººå‘˜æä¾›äº†å“ªäº›å·¥å…·å’Œè§„èŒƒçš„é›†æˆï¼Ÿ</p>
<p>å¦ä¸€æ–¹é¢ï¼Œåœ¨ä»Šå¤©çš„è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿçœ‹åˆ°ï¼Œä½¿ç”¨ ShardingSphere çš„ä¸»è¦æ–¹å¼äº‹å®ä¸Šå°±æ˜¯åŸºäºå®ƒæ‰€æä¾›çš„é…ç½®ä½“ç³»ï¼Œæ¥å®Œæˆå„ç§é…ç½®é¡¹çš„åˆ›å»ºå’Œè®¾ç½®ã€‚å¯ä»¥è¯´ï¼Œé…ç½®å·¥ä½œæ˜¯ä½¿ç”¨ ShardingSphere è¿›è¡Œå¼€å‘çš„ä¸»è¦å·¥ä½œã€‚</p>

        </div>
    </article>
</div>
<div class="division-line"></div>
<div class="others">
    <div>æ ‡ç­¾ï¼šğŸ·ï¸<a class="post-tag" href="/tags/sharding/">sharding</a>&nbsp;</div>
    <div>åˆ†ç±»ï¼š ğŸ“’<a class="post-category" href="/categories/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/">ShardingSphereæ ¸å¿ƒåŸç†ç²¾è®²</a>&nbsp; </div>
</div>

    </main>
    <footer>
        <div id="pagination">
            
<div class="paginator">
    <div class="prev">
        
        <a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/03-%E8%A7%84%E8%8C%83%E5%85%BC%E5%AE%B9jdbc-%E8%A7%84%E8%8C%83%E4%B8%8E-shardingsphere-%E6%98%AF%E4%BB%80%E4%B9%88%E5%85%B3%E7%B3%BB/"><span>03 è§„èŒƒå…¼å®¹ï¼šJDBC è§„èŒƒä¸ ShardingSphere æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ</span></a>
    </div>
    <div class="next">
        
        <a href="http://yipsen.github.io/documents/columns/sharding/shardingsphere%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E7%B2%BE%E8%AE%B2/05-%E9%85%8D%E7%BD%AE%E9%A9%B1%E5%8A%A8shardingsphere-%E4%B8%AD%E7%9A%84%E9%85%8D%E7%BD%AE%E4%BD%93%E7%B3%BB%E6%98%AF%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E7%9A%84/"><span>05 é…ç½®é©±åŠ¨ï¼šShardingSphere ä¸­çš„é…ç½®ä½“ç³»æ˜¯å¦‚ä½•è®¾è®¡çš„ï¼Ÿ</span></a>
    </div>
</div>

        </div>
        <div id="float">
            <ul class="float-button-bar">
    <li>
        <button class="float-button top" onclick="scrollToTop(this);">UP</button>
    </li>
    <li>
        <button class="float-button toggler" onclick="changeSkin(this);">DARK</button>
    </li>
</ul>
        </div>
        <div id="copyright" style="display: none;">
    
    
    <p>&copy; 2020 <a href="/"></a>, powered by Hugo and Qiao</p>
</div>
    </footer>
    
<script>
    const changeSkin = () => {
        document.getElementById('page').classList.toggle('night');
    }
    const scrollToTop = () => {
        window.scrollTo(0, 0);
    }
</script>
</body>

</html>