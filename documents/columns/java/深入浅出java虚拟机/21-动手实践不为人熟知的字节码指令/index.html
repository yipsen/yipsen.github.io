<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
<meta name="X-UA-Compatible" , content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<link rel="icon" type="image/png" href="/%20/favicon.png">

<title>21 åŠ¨æ‰‹å®è·µï¼šä¸ä¸ºäººç†ŸçŸ¥çš„å­—èŠ‚ç æŒ‡ä»¤ | Yipsen Ye</title>
<meta name="description" content="æœ¬è¯¾æ—¶æˆ‘ä»¬ä¸»è¦åˆ†äº«ä¸€ä¸ªå®è·µæ¡ˆä¾‹ï¼šä¸ä¸ºäººç†ŸçŸ¥çš„å­—èŠ‚ç æŒ‡ä»¤ã€‚
ä¸‹é¢å°†é€šè¿‡ä»‹ç» Java è¯­è¨€ä¸­çš„ä¸€äº›å¸¸è§ç‰¹æ€§ï¼Œæ¥çœ‹ä¸€ä¸‹å­—èŠ‚ç çš„åº”ç”¨ï¼Œç”±äº Java ç‰¹æ€§éå¸¸å¤šï¼Œè¿™é‡Œæˆ‘ä»¬ä»…ä»‹ç»ä¸€äº›ç»å¸¸é‡åˆ°çš„ç‰¹æ€§ã€‚javap æ˜¯æ‰‹ä¸­çš„åˆ©å™¨ï¼Œå¤æ‚çš„æ¦‚å¿µéƒ½å¯ä»¥åœ¨è¿™é‡Œç°å‡ºåŸå½¢ï¼Œå¹¶ä¸”èƒ½è®©ä½ å¯¹æ­¤äº§ç”Ÿæ·±åˆ»çš„å°è±¡ã€‚
æœ¬è¯¾æ—¶ä»£ç æ¯”è¾ƒå¤šï¼Œç›¸å…³ä»£ç ç¤ºä¾‹éƒ½å¯ä»¥åœ¨ä»“åº“ä¸­æ‰¾åˆ°ï¼Œå»ºè®®å®é™…æ“ä½œä¸€ä¸‹ã€‚
å¼‚å¸¸å¤„ç† åœ¨ä¸Šä¸€è¯¾æ—¶ä¸­ï¼Œç»†å¿ƒçš„ä½ å¯èƒ½æ³¨æ„åˆ°äº†ï¼Œåœ¨ synchronized ç”Ÿæˆçš„å­—èŠ‚ç ä¸­ï¼Œå…¶å®åŒ…å«ä¸¤æ¡ monitorexit æŒ‡ä»¤ï¼Œæ˜¯ä¸ºäº†ä¿è¯æ‰€æœ‰çš„å¼‚å¸¸æ¡ä»¶ï¼Œéƒ½èƒ½å¤Ÿé€€å‡ºã€‚
è¿™å°±æ¶‰åŠåˆ°äº† Java å­—èŠ‚ç çš„å¼‚å¸¸å¤„ç†æœºåˆ¶ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚
å¦‚æœä½ ç†Ÿæ‚‰ Java è¯­è¨€ï¼Œé‚£ä¹ˆå¯¹ä¸Šé¢çš„å¼‚å¸¸ç»§æ‰¿ä½“ç³»ä¸€å®šä¸ä¼šé™Œç”Ÿï¼Œå…¶ä¸­ï¼ŒError å’Œ RuntimeException æ˜¯éæ£€æŸ¥å‹å¼‚å¸¸ï¼ˆUnchecked Exceptionï¼‰ï¼Œä¹Ÿå°±æ˜¯ä¸éœ€è¦ catch è¯­å¥å»æ•è·çš„å¼‚å¸¸ï¼›è€Œå…¶ä»–å¼‚å¸¸ï¼Œåˆ™éœ€è¦ç¨‹åºå‘˜æ‰‹åŠ¨å»å¤„ç†ã€‚
å¼‚å¸¸è¡¨ åœ¨å‘ç”Ÿå¼‚å¸¸çš„æ—¶å€™ï¼ŒJava å°±å¯ä»¥é€šè¿‡ Java æ‰§è¡Œæ ˆï¼Œæ¥æ„é€ å¼‚å¸¸æ ˆã€‚å›æƒ³ä¸€ä¸‹ç¬¬ 02 è¯¾æ—¶ä¸­çš„æ ˆå¸§ï¼Œè·å–è¿™ä¸ªå¼‚å¸¸æ ˆåªéœ€è¦éå†ä¸€ä¸‹å®ƒä»¬å°±å¯ä»¥äº†ã€‚
ä½†æ˜¯è¿™ç§æ“ä½œï¼Œæ¯”èµ·å¸¸è§„æ“ä½œï¼Œè¦æ˜‚è´µçš„å¤šã€‚Java çš„ Log æ—¥å¿—æ¡†æ¶ï¼Œé€šå¸¸ä¼šæŠŠæ‰€æœ‰é”™è¯¯ä¿¡æ¯æ‰“å°åˆ°æ—¥å¿—ä¸­ï¼Œåœ¨å¼‚å¸¸éå¸¸å¤šçš„æƒ…å†µä¸‹ï¼Œä¼šæ˜¾è‘—å½±å“æ€§èƒ½ã€‚
æˆ‘ä»¬è¿˜æ˜¯çœ‹ä¸€ä¸‹ä¸Šä¸€è¯¾æ—¶ç”Ÿæˆçš„å­—èŠ‚ç ï¼š
void doLock();descriptor: ()Vflags:Code:stack=2, locals=3, args_size=10: aload_01: getfield #3 // Field lock:Ljava/lang/Object;4: dup5: astore_16: monitorenter7: getstatic #4 // Field java/lang/System.out:Ljava/io/PrintStream;10: ldc #8 // String lock12: invokevirtual #6 // Method java/io/PrintStream.">
<meta name="author" content="">

<link rel="stylesheet" type="text/css" href="/styles/main.css">

</head>

<body id="page">
    <header>
        <div class="logo-link" style="width: 60px; color: #CA6924;">
    <a href="http://yipsen.github.io/">
        <img style="margin-bottom: -1rem;" src="/images/deer.svg" alt="logo">
        <span style="font-size: 0.5rem; color: #CA6924;">Yipsen Ye</span>
    </a>
</div>
<nav class="navbar justify-content-end">
    <ul class="nav-list">
        
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/posts/">æœ­è®°</a>
        </li>
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/collections/">é™„è¡¨</a>
        </li>
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/about/">å…³äº</a>
        </li>
        
    </ul>
</nav>
    </header>
    <main id="content">
        
<div class="container"><aside>
    <div>
        
        
            
            
            <div class="post-category-icon"></div>
            <a href="/categories/%e6%b7%b1%e5%85%a5%e6%b5%85%e5%87%bajava%e8%99%9a%e6%8b%9f%e6%9c%ba/">æ·±å…¥æµ…å‡ºJavaè™šæ‹Ÿæœº</a>
            <ul>
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAjava%E8%99%9A%E6%8B%9F%E6%9C%BA/00-%E5%BC%80%E7%AF%87%E8%AF%8Djvm%E4%B8%80%E5%9D%97%E9%9A%BE%E5%95%83%E7%9A%84%E9%AA%A8%E5%A4%B4/">00 å¼€ç¯‡è¯ï¼šJVMï¼Œä¸€å—éš¾å•ƒçš„éª¨å¤´</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAjava%E8%99%9A%E6%8B%9F%E6%9C%BA/01-%E4%B8%80%E6%8E%A2%E7%A9%B6%E7%AB%9F%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81-jvm%E5%AE%83%E5%A4%84%E5%9C%A8%E4%BB%80%E4%B9%88%E4%BD%8D%E7%BD%AE/">01 ä¸€æ¢ç©¶ç«Ÿï¼šä¸ºä»€ä¹ˆéœ€è¦ JVMï¼Ÿå®ƒå¤„åœ¨ä»€ä¹ˆä½ç½®ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAjava%E8%99%9A%E6%8B%9F%E6%9C%BA/02-%E5%A4%A7%E5%8E%82%E9%9D%A2%E8%AF%95%E9%A2%98%E4%BD%A0%E4%B8%8D%E5%BE%97%E4%B8%8D%E6%8E%8C%E6%8F%A1%E7%9A%84-jvm-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/">02 å¤§å‚é¢è¯•é¢˜ï¼šä½ ä¸å¾—ä¸æŒæ¡çš„ JVM å†…å­˜ç®¡ç†</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAjava%E8%99%9A%E6%8B%9F%E6%9C%BA/03-%E5%A4%A7%E5%8E%82%E9%9D%A2%E8%AF%95%E9%A2%98%E4%BB%8E%E8%A6%86%E7%9B%96-jdk-%E7%9A%84%E7%B1%BB%E5%BC%80%E5%A7%8B%E6%8E%8C%E6%8F%A1%E7%B1%BB%E7%9A%84%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6/">03 å¤§å‚é¢è¯•é¢˜ï¼šä»è¦†ç›– JDK çš„ç±»å¼€å§‹æŒæ¡ç±»çš„åŠ è½½æœºåˆ¶</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAjava%E8%99%9A%E6%8B%9F%E6%9C%BA/04-%E5%8A%A8%E6%89%8B%E5%AE%9E%E8%B7%B5%E4%BB%8E%E6%A0%88%E5%B8%A7%E7%9C%8B%E5%AD%97%E8%8A%82%E7%A0%81%E6%98%AF%E5%A6%82%E4%BD%95%E5%9C%A8-jvm-%E4%B8%AD%E8%BF%9B%E8%A1%8C%E6%B5%81%E8%BD%AC%E7%9A%84/">04 åŠ¨æ‰‹å®è·µï¼šä»æ ˆå¸§çœ‹å­—èŠ‚ç æ˜¯å¦‚ä½•åœ¨ JVM ä¸­è¿›è¡Œæµè½¬çš„</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAjava%E8%99%9A%E6%8B%9F%E6%9C%BA/05-%E5%A4%A7%E5%8E%82%E9%9D%A2%E8%AF%95%E9%A2%98%E5%BE%97%E5%BF%83%E5%BA%94%E6%89%8B%E5%BA%94%E5%AF%B9-oom-%E7%9A%84%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87/">05 å¤§å‚é¢è¯•é¢˜ï¼šå¾—å¿ƒåº”æ‰‹åº”å¯¹ OOM çš„ç–‘éš¾æ‚ç—‡</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAjava%E8%99%9A%E6%8B%9F%E6%9C%BA/06-%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E4%BD%A0%E7%9C%9F%E7%9A%84%E4%BA%86%E8%A7%A3%E5%90%97%E4%B8%8A/">06 æ·±å…¥å‰–æï¼šåƒåœ¾å›æ”¶ä½ çœŸçš„äº†è§£å—ï¼Ÿï¼ˆä¸Šï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAjava%E8%99%9A%E6%8B%9F%E6%9C%BA/07-%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E4%BD%A0%E7%9C%9F%E7%9A%84%E4%BA%86%E8%A7%A3%E5%90%97%E4%B8%8B/">07 æ·±å…¥å‰–æï¼šåƒåœ¾å›æ”¶ä½ çœŸçš„äº†è§£å—ï¼Ÿï¼ˆä¸‹ï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAjava%E8%99%9A%E6%8B%9F%E6%9C%BA/08-%E5%A4%A7%E5%8E%82%E9%9D%A2%E8%AF%95%E9%A2%98%E6%9C%89%E4%BA%86-g1-%E8%BF%98%E9%9C%80%E8%A6%81%E5%85%B6%E4%BB%96%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8%E5%90%97/">08 å¤§å‚é¢è¯•é¢˜ï¼šæœ‰äº† G1 è¿˜éœ€è¦å…¶ä»–åƒåœ¾å›æ”¶å™¨å—ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAjava%E8%99%9A%E6%8B%9F%E6%9C%BA/09-%E6%A1%88%E4%BE%8B%E5%AE%9E%E6%88%98%E4%BA%BF%E7%BA%A7%E6%B5%81%E9%87%8F%E9%AB%98%E5%B9%B6%E5%8F%91%E4%B8%8B%E5%A6%82%E4%BD%95%E8%BF%9B%E8%A1%8C%E4%BC%B0%E7%AE%97%E5%92%8C%E8%B0%83%E4%BC%98/">09 æ¡ˆä¾‹å®æˆ˜ï¼šäº¿çº§æµé‡é«˜å¹¶å‘ä¸‹å¦‚ä½•è¿›è¡Œä¼°ç®—å’Œè°ƒä¼˜</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAjava%E8%99%9A%E6%8B%9F%E6%9C%BA/10-%E7%AC%AC09%E8%AE%B2%E6%A1%88%E4%BE%8B%E5%AE%9E%E6%88%98%E9%9D%A2%E5%AF%B9%E7%AA%81%E5%A6%82%E5%85%B6%E6%9D%A5%E7%9A%84-gc-%E9%97%AE%E9%A2%98%E5%A6%82%E4%BD%95%E4%B8%8B%E6%89%8B%E8%A7%A3%E5%86%B3/">10 ç¬¬09è®²ï¼šæ¡ˆä¾‹å®æˆ˜ï¼šé¢å¯¹çªå¦‚å…¶æ¥çš„ GC é—®é¢˜å¦‚ä½•ä¸‹æ‰‹è§£å†³</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAjava%E8%99%9A%E6%8B%9F%E6%9C%BA/11-%E7%AC%AC10%E8%AE%B2%E5%8A%A8%E6%89%8B%E5%AE%9E%E8%B7%B5%E8%87%AA%E5%B7%B1%E6%A8%A1%E6%8B%9F-jvm-%E5%86%85%E5%AD%98%E6%BA%A2%E5%87%BA%E5%9C%BA%E6%99%AF/">11 ç¬¬10è®²ï¼šåŠ¨æ‰‹å®è·µï¼šè‡ªå·±æ¨¡æ‹Ÿ JVM å†…å­˜æº¢å‡ºåœºæ™¯</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAjava%E8%99%9A%E6%8B%9F%E6%9C%BA/12-%E7%AC%AC11%E8%AE%B2%E5%8A%A8%E6%89%8B%E5%AE%9E%E8%B7%B5%E9%81%87%E5%88%B0%E9%97%AE%E9%A2%98%E4%B8%8D%E8%A6%81%E6%85%8C%E8%BD%BB%E6%9D%BE%E6%90%9E%E5%AE%9A%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F/">12 ç¬¬11è®²ï¼šåŠ¨æ‰‹å®è·µï¼šé‡åˆ°é—®é¢˜ä¸è¦æ…Œï¼Œè½»æ¾æå®šå†…å­˜æ³„æ¼</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAjava%E8%99%9A%E6%8B%9F%E6%9C%BA/13-%E5%B7%A5%E5%85%B7%E8%BF%9B%E9%98%B6%E5%A6%82%E4%BD%95%E5%88%A9%E7%94%A8-mat-%E6%89%BE%E5%88%B0%E9%97%AE%E9%A2%98%E5%8F%91%E7%94%9F%E7%9A%84%E6%A0%B9%E6%9C%AC%E5%8E%9F%E5%9B%A0/">13 å·¥å…·è¿›é˜¶ï¼šå¦‚ä½•åˆ©ç”¨ MAT æ‰¾åˆ°é—®é¢˜å‘ç”Ÿçš„æ ¹æœ¬åŸå› </a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAjava%E8%99%9A%E6%8B%9F%E6%9C%BA/14-%E5%8A%A8%E6%89%8B%E5%AE%9E%E8%B7%B5%E8%AE%A9%E9%9D%A2%E8%AF%95%E5%AE%98%E5%88%AE%E7%9B%AE%E7%9B%B8%E7%9C%8B%E7%9A%84%E5%A0%86%E5%A4%96%E5%86%85%E5%AD%98%E6%8E%92%E6%9F%A5/">14 åŠ¨æ‰‹å®è·µï¼šè®©é¢è¯•å®˜åˆ®ç›®ç›¸çœ‹çš„å †å¤–å†…å­˜æ’æŸ¥</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAjava%E8%99%9A%E6%8B%9F%E6%9C%BA/15-%E9%A2%84%E8%AD%A6%E4%B8%8E%E8%A7%A3%E5%86%B3%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA-gc-%E7%9B%91%E6%8E%A7%E4%B8%8E%E8%B0%83%E4%BC%98/">15 é¢„è­¦ä¸è§£å†³ï¼šæ·±å…¥æµ…å‡º GC ç›‘æ§ä¸è°ƒä¼˜</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAjava%E8%99%9A%E6%8B%9F%E6%9C%BA/16-%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90%E4%B8%80%E4%B8%AA%E9%AB%98%E6%AD%BB%E4%BA%A1%E7%8E%87%E7%9A%84%E6%8A%A5%E8%A1%A8%E7%B3%BB%E7%BB%9F%E7%9A%84%E4%BC%98%E5%8C%96%E4%B9%8B%E8%B7%AF/">16 æ¡ˆä¾‹åˆ†æï¼šä¸€ä¸ªé«˜æ­»äº¡ç‡çš„æŠ¥è¡¨ç³»ç»Ÿçš„ä¼˜åŒ–ä¹‹è·¯</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAjava%E8%99%9A%E6%8B%9F%E6%9C%BA/17-%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8%E5%90%8E%E6%88%91%E7%9A%84%E5%BA%94%E7%94%A8%E5%B4%A9%E6%BA%83%E4%BA%86/">17 æ¡ˆä¾‹åˆ†æï¼šåˆ†åº“åˆ†è¡¨åï¼Œæˆ‘çš„åº”ç”¨å´©æºƒäº†</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAjava%E8%99%9A%E6%8B%9F%E6%9C%BA/18-%E5%8A%A8%E6%89%8B%E5%AE%9E%E8%B7%B5%E4%BB%8E%E5%AD%97%E8%8A%82%E7%A0%81%E7%9C%8B%E6%96%B9%E6%B3%95%E8%B0%83%E7%94%A8%E7%9A%84%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0/">18 åŠ¨æ‰‹å®è·µï¼šä»å­—èŠ‚ç çœ‹æ–¹æ³•è°ƒç”¨çš„åº•å±‚å®ç°</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAjava%E8%99%9A%E6%8B%9F%E6%9C%BA/19-%E5%A4%A7%E5%8E%82%E9%9D%A2%E8%AF%95%E9%A2%98%E4%B8%8D%E8%A6%81%E6%90%9E%E6%B7%B7-jmm-%E4%B8%8E-jvm/">19 å¤§å‚é¢è¯•é¢˜ï¼šä¸è¦ææ·· JMM ä¸ JVM</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAjava%E8%99%9A%E6%8B%9F%E6%9C%BA/20-%E5%8A%A8%E6%89%8B%E5%AE%9E%E8%B7%B5%E4%BB%8E%E5%AD%97%E8%8A%82%E7%A0%81%E7%9C%8B%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%9A%84%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0/">20 åŠ¨æ‰‹å®è·µï¼šä»å­—èŠ‚ç çœ‹å¹¶å‘ç¼–ç¨‹çš„åº•å±‚å®ç°</a></li>
                
                
                
                    <li>21 åŠ¨æ‰‹å®è·µï¼šä¸ä¸ºäººç†ŸçŸ¥çš„å­—èŠ‚ç æŒ‡ä»¤</li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAjava%E8%99%9A%E6%8B%9F%E6%9C%BA/22-%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8-java-agent-%E6%8A%80%E6%9C%AF%E5%AF%B9%E5%AD%97%E8%8A%82%E7%A0%81%E8%BF%9B%E8%A1%8C%E4%BF%AE%E6%94%B9/">22 æ·±å…¥å‰–æï¼šå¦‚ä½•ä½¿ç”¨ Java Agent æŠ€æœ¯å¯¹å­—èŠ‚ç è¿›è¡Œä¿®æ”¹</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAjava%E8%99%9A%E6%8B%9F%E6%9C%BA/23-%E5%8A%A8%E6%89%8B%E5%AE%9E%E8%B7%B5jit-%E5%8F%82%E6%95%B0%E9%85%8D%E7%BD%AE%E5%A6%82%E4%BD%95%E5%BD%B1%E5%93%8D%E7%A8%8B%E5%BA%8F%E8%BF%90%E8%A1%8C/">23 åŠ¨æ‰‹å®è·µï¼šJIT å‚æ•°é…ç½®å¦‚ä½•å½±å“ç¨‹åºè¿è¡Œï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAjava%E8%99%9A%E6%8B%9F%E6%9C%BA/24-%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90%E5%A4%A7%E5%9E%8B%E9%A1%B9%E7%9B%AE%E5%A6%82%E4%BD%95%E8%BF%9B%E8%A1%8C%E6%80%A7%E8%83%BD%E7%93%B6%E9%A2%88%E8%B0%83%E4%BC%98/">24 æ¡ˆä¾‹åˆ†æï¼šå¤§å‹é¡¹ç›®å¦‚ä½•è¿›è¡Œæ€§èƒ½ç“¶é¢ˆè°ƒä¼˜ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAjava%E8%99%9A%E6%8B%9F%E6%9C%BA/25-%E6%9C%AA%E6%9D%A5jvm-%E7%9A%84%E5%8E%86%E5%8F%B2%E4%B8%8E%E5%B1%95%E6%9C%9B/">25 æœªæ¥ï¼šJVM çš„å†å²ä¸å±•æœ›</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAjava%E8%99%9A%E6%8B%9F%E6%9C%BA/26-%E7%A6%8F%E5%88%A9%E5%B8%B8%E8%A7%81-jvm-%E9%9D%A2%E8%AF%95%E9%A2%98%E8%A1%A5%E5%85%85/">26 ç¦åˆ©ï¼šå¸¸è§ JVM é¢è¯•é¢˜è¡¥å……</a></li>
                
                
            </ul>
        
    </div>
</aside>

<style>
    aside {
        position: fixed;
        left: 20px;
        background: #ffdee3;
        border-radius: 6px;
        padding: 20px;
        padding-top: 60px;
        box-shadow: 5px 10px #888;
        list-style-type: none;
        display: none;
    }

    .post-category-icon {
        position: absolute;
        width: 80px;
        height: 80px;
        top: -40px;
        left: 50%;
        margin-left: -40px;
        text-align: center;
        font-size: 36px;
        content: 'J';
        background: #ffdee3;
        border-radius: 100%;
        border: 10px solid #fff;
        box-shadow: 5px 10px #888;
    }
</style><article class="post-block">
        <h1 class="post-title">21 åŠ¨æ‰‹å®è·µï¼šä¸ä¸ºäººç†ŸçŸ¥çš„å­—èŠ‚ç æŒ‡ä»¤</h1>
        <div class="post-info">
            <div> 
                <span class="post-date">ğŸ“…&nbsp;2022-01-09 11:12:41</span>ğŸ·ï¸&nbsp;<a class="post-tag" href="/tags/java/">java</a></div><div class="post-category">
                
                ğŸ“š&nbsp;<a href="/categories/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAjava%E8%99%9A%E6%8B%9F%E6%9C%BA/">æ·±å…¥æµ…å‡ºJavaè™šæ‹Ÿæœº</a>
                
            </div></div>
        <div class="post-content">
            <p>æœ¬è¯¾æ—¶æˆ‘ä»¬ä¸»è¦åˆ†äº«ä¸€ä¸ªå®è·µæ¡ˆä¾‹ï¼šä¸ä¸ºäººç†ŸçŸ¥çš„å­—èŠ‚ç æŒ‡ä»¤ã€‚</p>
<p>ä¸‹é¢å°†é€šè¿‡ä»‹ç» Java è¯­è¨€ä¸­çš„ä¸€äº›å¸¸è§ç‰¹æ€§ï¼Œæ¥çœ‹ä¸€ä¸‹å­—èŠ‚ç çš„åº”ç”¨ï¼Œç”±äº Java ç‰¹æ€§éå¸¸å¤šï¼Œè¿™é‡Œæˆ‘ä»¬ä»…ä»‹ç»ä¸€äº›ç»å¸¸é‡åˆ°çš„ç‰¹æ€§ã€‚javap æ˜¯æ‰‹ä¸­çš„åˆ©å™¨ï¼Œå¤æ‚çš„æ¦‚å¿µéƒ½å¯ä»¥åœ¨è¿™é‡Œç°å‡ºåŸå½¢ï¼Œå¹¶ä¸”èƒ½è®©ä½ å¯¹æ­¤äº§ç”Ÿæ·±åˆ»çš„å°è±¡ã€‚</p>
<p>æœ¬è¯¾æ—¶ä»£ç æ¯”è¾ƒå¤šï¼Œç›¸å…³ä»£ç ç¤ºä¾‹éƒ½å¯ä»¥åœ¨ä»“åº“ä¸­æ‰¾åˆ°ï¼Œå»ºè®®å®é™…æ“ä½œä¸€ä¸‹ã€‚</p>
<h2 id="å¼‚å¸¸å¤„ç†">å¼‚å¸¸å¤„ç†</h2>
<p>åœ¨ä¸Šä¸€è¯¾æ—¶ä¸­ï¼Œç»†å¿ƒçš„ä½ å¯èƒ½æ³¨æ„åˆ°äº†ï¼Œåœ¨ synchronized ç”Ÿæˆçš„å­—èŠ‚ç ä¸­ï¼Œå…¶å®åŒ…å«ä¸¤æ¡ monitorexit æŒ‡ä»¤ï¼Œæ˜¯ä¸ºäº†ä¿è¯æ‰€æœ‰çš„å¼‚å¸¸æ¡ä»¶ï¼Œéƒ½èƒ½å¤Ÿé€€å‡ºã€‚</p>
<p>è¿™å°±æ¶‰åŠåˆ°äº† Java å­—èŠ‚ç çš„å¼‚å¸¸å¤„ç†æœºåˆ¶ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>
<p><img src="http://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA%20Java%20%E8%99%9A%E6%8B%9F%E6%9C%BA-%E5%AE%8C/assets/CgpOIF5x0xWABeHPAAAgs1YbFw4651.jpg" alt="img"></p>
<p>å¦‚æœä½ ç†Ÿæ‚‰ Java è¯­è¨€ï¼Œé‚£ä¹ˆå¯¹ä¸Šé¢çš„å¼‚å¸¸ç»§æ‰¿ä½“ç³»ä¸€å®šä¸ä¼šé™Œç”Ÿï¼Œå…¶ä¸­ï¼ŒError å’Œ RuntimeException æ˜¯éæ£€æŸ¥å‹å¼‚å¸¸ï¼ˆUnchecked Exceptionï¼‰ï¼Œä¹Ÿå°±æ˜¯ä¸éœ€è¦ catch è¯­å¥å»æ•è·çš„å¼‚å¸¸ï¼›è€Œå…¶ä»–å¼‚å¸¸ï¼Œåˆ™éœ€è¦ç¨‹åºå‘˜æ‰‹åŠ¨å»å¤„ç†ã€‚</p>
<h3 id="å¼‚å¸¸è¡¨">å¼‚å¸¸è¡¨</h3>
<p>åœ¨å‘ç”Ÿå¼‚å¸¸çš„æ—¶å€™ï¼ŒJava å°±å¯ä»¥é€šè¿‡ Java æ‰§è¡Œæ ˆï¼Œæ¥æ„é€ å¼‚å¸¸æ ˆã€‚å›æƒ³ä¸€ä¸‹ç¬¬ 02 è¯¾æ—¶ä¸­çš„æ ˆå¸§ï¼Œè·å–è¿™ä¸ªå¼‚å¸¸æ ˆåªéœ€è¦éå†ä¸€ä¸‹å®ƒä»¬å°±å¯ä»¥äº†ã€‚</p>
<p>ä½†æ˜¯è¿™ç§æ“ä½œï¼Œæ¯”èµ·å¸¸è§„æ“ä½œï¼Œè¦æ˜‚è´µçš„å¤šã€‚Java çš„ Log æ—¥å¿—æ¡†æ¶ï¼Œé€šå¸¸ä¼šæŠŠæ‰€æœ‰é”™è¯¯ä¿¡æ¯æ‰“å°åˆ°æ—¥å¿—ä¸­ï¼Œåœ¨å¼‚å¸¸éå¸¸å¤šçš„æƒ…å†µä¸‹ï¼Œä¼šæ˜¾è‘—å½±å“æ€§èƒ½ã€‚</p>
<p>æˆ‘ä»¬è¿˜æ˜¯çœ‹ä¸€ä¸‹ä¸Šä¸€è¯¾æ—¶ç”Ÿæˆçš„å­—èŠ‚ç ï¼š</p>
<pre tabindex="0"><code>void doLock();
    descriptor: ()V
    flags:
    Code:
      stack=2, locals=3, args_size=1
         0: aload_0
         1: getfield      #3                  // Field lock:Ljava/lang/Object;
         4: dup
         5: astore_1
         6: monitorenter
         7: getstatic     #4                  // Field java/lang/System.out:Ljava/io/PrintStream;
        10: ldc           #8                  // String lock
        12: invokevirtual #6                  // Method java/io/PrintStream.println:(Ljava/lang/String;)V
        15: aload_1
        16: monitorexit
        17: goto          25
        20: astore_2
        21: aload_1
        22: monitorexit
        23: aload_2
        24: athrow
        25: return
      Exception table:
         from    to  target type
             7    17    20   any
            20    23    20   any
</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œç¼–è¯‘åçš„å­—èŠ‚ç ï¼Œå¸¦æœ‰ä¸€ä¸ªå« Exception table çš„å¼‚å¸¸è¡¨ï¼Œé‡Œé¢çš„æ¯ä¸€è¡Œæ•°æ®ï¼Œéƒ½æ˜¯ä¸€ä¸ªå¼‚å¸¸å¤„ç†å™¨ï¼š</p>
<ul>
<li><strong>from</strong> æŒ‡å®šå­—èŠ‚ç ç´¢å¼•çš„å¼€å§‹ä½ç½®</li>
<li><strong>to</strong> æŒ‡å®šå­—èŠ‚ç ç´¢å¼•çš„ç»“æŸä½ç½®</li>
<li><strong>target</strong> å¼‚å¸¸å¤„ç†çš„èµ·å§‹ä½ç½®</li>
<li><strong>type</strong> å¼‚å¸¸ç±»å‹</li>
</ul>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦åœ¨ from å’Œ to ä¹‹é—´å‘ç”Ÿäº†å¼‚å¸¸ï¼Œå°±ä¼šè·³è½¬åˆ° target æ‰€æŒ‡å®šçš„ä½ç½®ã€‚</p>
<h3 id="finally">finally</h3>
<p>é€šå¸¸æˆ‘ä»¬åœ¨åšä¸€äº›æ–‡ä»¶è¯»å–çš„æ—¶å€™ï¼Œéƒ½ä¼šåœ¨ finally ä»£ç å—ä¸­å…³é—­æµï¼Œä»¥é¿å…å†…å­˜çš„æº¢å‡ºã€‚å…³äºè¿™ä¸ªåœºæ™¯ï¼Œæˆ‘ä»¬å†åˆ†æä¸€ä¸‹ä¸‹é¢è¿™æ®µä»£ç çš„å¼‚å¸¸è¡¨ã€‚</p>
<pre tabindex="0"><code>import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStream;

public class A {
    public void read() {
        InputStream in = null;
        try {
            in = new FileInputStream(&quot;A.java&quot;);
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } finally {
            if (null != in) {
                try {
                    in.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
    }
}
</code></pre><p>ä¸Šé¢çš„ä»£ç ï¼Œæ•è·äº†ä¸€ä¸ª FileNotFoundException å¼‚å¸¸ï¼Œç„¶ååœ¨ finally ä¸­æ•è·äº† IOException å¼‚å¸¸ã€‚å½“æˆ‘ä»¬åˆ†æå­—èŠ‚ç çš„æ—¶å€™ï¼Œå´å‘ç°äº†ä¸€ä¸ªæœ‰æ„æ€çš„åœ°æ–¹ï¼šIOException è¶³è¶³å‡ºç°äº†ä¸‰æ¬¡ã€‚</p>
<pre tabindex="0"><code>Exception table:
    from    to  target type
    17    21    24   Class java/io/IOException
    2    12    32   Class java/io/FileNotFoundException
    42    46    49   Class java/io/IOException
     2    12    57   any
    32    37    57   any
    63    67    70   Class java/io/IOException
</code></pre><p>Java ç¼–è¯‘å™¨ä½¿ç”¨äº†ä¸€ç§æ¯”è¾ƒ<strong>å‚»</strong>çš„æ–¹å¼æ¥ç»„ç»‡ finally çš„å­—èŠ‚ç ï¼Œå®ƒåˆ†åˆ«åœ¨ tryã€catch çš„æ­£å¸¸æ‰§è¡Œè·¯å¾„ä¸Šï¼Œå¤åˆ¶ä¸€ä»½ finally ä»£ç ï¼Œè¿½åŠ åœ¨ æ­£å¸¸æ‰§è¡Œé€»è¾‘çš„åé¢ï¼›åŒæ—¶ï¼Œå†å¤åˆ¶ä¸€ä»½åˆ°å…¶ä»–å¼‚å¸¸æ‰§è¡Œé€»è¾‘çš„å‡ºå£å¤„ã€‚</p>
<p>è¿™ä¹Ÿæ˜¯ä¸‹é¢è¿™æ®µæ–¹æ³•ä¸æŠ¥é”™çš„åŸå› ï¼Œéƒ½å¯ä»¥åœ¨å­—èŠ‚ç ä¸­æ‰¾åˆ°ç­”æ¡ˆã€‚</p>
<pre tabindex="0"><code>//B.java
public int read() {
        try {
            int a = 1 / 0;
            return a;
        } finally {
            return 1;
        }
}
</code></pre><p>ä¸‹é¢æ˜¯ä¸Šé¢ç¨‹åºçš„å­—èŠ‚ç ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œå¼‚å¸¸ä¹‹åï¼Œç›´æ¥è·³è½¬åˆ°åºå· 8 äº†ã€‚</p>
<pre tabindex="0"><code>stack=2, locals=4, args_size=1
         0: iconst_1
         1: iconst_0
         2: idiv
         3: istore_1
         4: iload_1
         5: istore_2
         6: iconst_1
         7: ireturn
         8: astore_3
         9: iconst_1
        10: ireturn
      Exception table:
         from    to  target type
             0     6     8   any
</code></pre><h2 id="è£…ç®±æ‹†ç®±">è£…ç®±æ‹†ç®±</h2>
<p>åœ¨åˆšå¼€å§‹å­¦ä¹  Java è¯­è¨€çš„ä½ ï¼Œå¯èƒ½ä¼šè¢«è‡ªåŠ¨è£…ç®±å’Œæ‹†ç®±æå¾—æ™•å¤´è½¬å‘ã€‚Java ä¸­æœ‰ 8 ç§åŸºæœ¬ç±»å‹ï¼Œä½†é‰´äº Java é¢å‘å¯¹è±¡çš„ç‰¹ç‚¹ï¼Œå®ƒä»¬åŒæ ·æœ‰ç€å¯¹åº”çš„ 8 ä¸ªåŒ…è£…ç±»å‹ï¼Œæ¯”å¦‚ int å’Œ Integerï¼ŒåŒ…è£…ç±»å‹çš„å€¼å¯ä»¥ä¸º nullï¼Œå¾ˆå¤šæ—¶å€™ï¼Œå®ƒä»¬éƒ½èƒ½å¤Ÿç›¸äº’èµ‹å€¼ã€‚</p>
<p>æˆ‘ä»¬ä½¿ç”¨ä¸‹é¢çš„ä»£ç ä»å­—èŠ‚ç å±‚é¢ä¸Šæ¥è§‚å¯Ÿä¸€ä¸‹ï¼š</p>
<pre tabindex="0"><code>public class Box {
    public Integer cal() {
        Integer a = 1000;
        int b = a * 10;
        return b;
    }
}
</code></pre><p>ä¸Šé¢æ˜¯ä¸€æ®µç®€å•çš„ä»£ç ï¼Œé¦–å…ˆä½¿ç”¨åŒ…è£…ç±»å‹ï¼Œæ„é€ äº†ä¸€ä¸ªå€¼ä¸º 1000 çš„æ•°å­—ï¼Œç„¶åä¹˜ä»¥ 10 åè¿”å›ï¼Œä½†æ˜¯ä¸­é—´çš„è®¡ç®—è¿‡ç¨‹ï¼Œä½¿ç”¨äº†æ™®é€šç±»å‹ intã€‚</p>
<pre tabindex="0"><code>public java.lang.Integer read();
    descriptor: ()Ljava/lang/Integer;
    flags: ACC_PUBLIC
    Code:
      stack=2, locals=3, args_size=1
         0: sipush        1000
         3: invokestatic  #2                  // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
         6: astore_1
         7: aload_1
         8: invokevirtual #3                  // Method java/lang/Integer.intValue:()I
        11: bipush        10
        13: imul
        14: istore_2
        15: iload_2
        16: invokestatic  #2                  // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
        19: areturn
</code></pre><p>é€šè¿‡è§‚å¯Ÿå­—èŠ‚ç ï¼Œæˆ‘ä»¬å‘ç°èµ‹å€¼æ“ä½œä½¿ç”¨çš„æ˜¯ Integer.valueOf æ–¹æ³•ï¼Œåœ¨è¿›è¡Œä¹˜æ³•è¿ç®—çš„æ—¶å€™ï¼Œè°ƒç”¨äº† Integer.intValue æ–¹æ³•æ¥è·å–åŸºæœ¬ç±»å‹çš„å€¼ã€‚åœ¨æ–¹æ³•è¿”å›çš„æ—¶å€™ï¼Œå†æ¬¡ä½¿ç”¨äº† Integer.valueOf æ–¹æ³•å¯¹ç»“æœè¿›è¡Œäº†åŒ…è£…ã€‚</p>
<p>è¿™å°±æ˜¯ Java ä¸­çš„è‡ªåŠ¨è£…ç®±æ‹†ç®±çš„åº•å±‚å®ç°ã€‚</p>
<p>ä½†è¿™é‡Œæœ‰ä¸€ä¸ª Java å±‚é¢çš„é™·é˜±é—®é¢˜ï¼Œæˆ‘ä»¬ç»§ç»­è·Ÿè¸ª Integer.valueOf æ–¹æ³•ã€‚</p>
<pre tabindex="0"><code>@HotSpotIntrinsicCandidate
    public static Integer valueOf(int i) {
        if (i &gt;= IntegerCache.low &amp;&amp; i &lt;= IntegerCache.high)
            return IntegerCache.cache[i + (-IntegerCache.low)];
        return new Integer(i);
    }
</code></pre><p>è¿™ä¸ª IntegerCacheï¼Œç¼“å­˜äº† low å’Œ high ä¹‹é—´çš„ Integer å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡ -XX:AutoBoxCacheMax æ¥ä¿®æ”¹ä¸Šé™ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€é“ç»å…¸çš„é¢è¯•é¢˜ï¼Œè¯·è€ƒè™‘ä¸€ä¸‹è¿è¡Œä»£ç åï¼Œä¼šè¾“å‡ºä»€ä¹ˆç»“æœï¼Ÿ</p>
<pre tabindex="0"><code>public class BoxCacheError{
    public static void main(String[] args) {

        Integer n1 = 123;
        Integer n2 = 123;
        Integer n3 = 128;
        Integer n4 = 128;

        System.out.println(n1 == n2);
        System.out.println(n3 == n4);
    }
</code></pre><p>å½“æˆ‘ä½¿ç”¨ <strong>java BoxCacheError</strong> æ‰§è¡Œæ—¶ï¼Œæ˜¯ true,falseï¼›å½“æˆ‘åŠ ä¸Šå‚æ•° <strong>java -XX:AutoBoxCacheMax=256 BoxCacheError</strong> æ‰§è¡Œæ—¶ï¼Œç»“æœæ˜¯ true,tureï¼ŒåŸå› å°±åœ¨äºæ­¤ã€‚</p>
<h2 id="æ•°ç»„è®¿é—®">æ•°ç»„è®¿é—®</h2>
<p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œåœ¨è®¿é—®ä¸€ä¸ªæ•°ç»„é•¿åº¦çš„æ—¶å€™ï¼Œç›´æ¥ä½¿ç”¨å®ƒçš„å±æ€§ <strong>.length</strong> å°±èƒ½è·å–ï¼Œè€Œåœ¨ Java ä¸­å´æ— æ³•æ‰¾åˆ°å¯¹äºæ•°ç»„çš„å®šä¹‰ã€‚</p>
<p>æ¯”å¦‚ int[] è¿™ç§ç±»å‹ï¼Œé€šè¿‡ getClassï¼ˆgetClass æ˜¯ Object ç±»ä¸­çš„æ–¹æ³•ï¼‰å¯ä»¥è·å–å®ƒçš„å…·ä½“ç±»å‹æ˜¯ <strong>[I</strong>ã€‚</p>
<p>å…¶å®ï¼Œæ•°ç»„æ˜¯ JVM å†…ç½®çš„ä¸€ç§å¯¹è±¡ç±»å‹ï¼Œè¿™ä¸ªå¯¹è±¡åŒæ ·æ˜¯ç»§æ‰¿çš„ Object ç±»ã€‚</p>
<p>æˆ‘ä»¬ä½¿ç”¨ä¸‹é¢ä¸€æ®µä»£ç æ¥è§‚å¯Ÿä¸€ä¸‹æ•°ç»„çš„ç”Ÿæˆå’Œè®¿é—®ã€‚</p>
<pre tabindex="0"><code>public class ArrayDemo {
    int getValue() {
        int[] arr = new int[]{
                1111, 2222, 3333, 4444
        };
        return arr[2];
    }

    int getLength(int[] arr) {
        return arr.length;
    }
}
</code></pre><p>é¦–å…ˆçœ‹ä¸€ä¸‹ getValue æ–¹æ³•çš„å­—èŠ‚ç ã€‚</p>
<pre tabindex="0"><code>int getValue();
    descriptor: ()I
    flags:
    Code:
      stack=4, locals=2, args_size=1
         0: iconst_4
         1: newarray       int
         3: dup
         4: iconst_0
         5: sipush        1111
         8: iastorae
         9: dup
        10: iconst_1
        11: sipush        2222
        14: iastore
        15: dup
        16: iconst_2
        17: sipush        3333
        20: iastore
        21: dup
        22: iconst_3
        23: sipush        4444
        26: iastore
        27: astore_1
        28: aload_1
        29: iconst_2
        30: iaload
        31: ireturn
</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œæ–°å»ºæ•°ç»„çš„ä»£ç ï¼Œè¢«ç¼–è¯‘æˆäº† newarray æŒ‡ä»¤ã€‚æ•°ç»„é‡Œçš„åˆå§‹å†…å®¹ï¼Œè¢«é¡ºåºç¼–è¯‘æˆäº†ä¸€ç³»åˆ—æŒ‡ä»¤æ”¾å…¥ï¼š</p>
<ul>
<li><strong>sipush</strong> å°†ä¸€ä¸ªçŸ­æ•´å‹å¸¸é‡å€¼æ¨é€è‡³æ ˆé¡¶ï¼›</li>
<li><strong>iastore</strong> å°†æ ˆé¡¶ int å‹æ•°å€¼å­˜å…¥æŒ‡å®šæ•°ç»„çš„æŒ‡å®šç´¢å¼•ä½ç½®ã€‚</li>
</ul>
<blockquote>
<p>ä¸ºäº†æ”¯æŒå¤šç§ç±»å‹ï¼Œä»æ“ä½œæ•°æ ˆå­˜å‚¨åˆ°æ•°ç»„ï¼Œæœ‰æ›´å¤šçš„æŒ‡ä»¤ï¼šbastoreã€castoreã€sastoreã€iastoreã€lastoreã€fastoreã€dastoreã€aastoreã€‚</p>
</blockquote>
<p>æ•°ç»„å…ƒç´ çš„è®¿é—®ï¼Œæ˜¯é€šè¿‡ç¬¬ 28 ~ 30 è¡Œä»£ç æ¥å®ç°çš„ï¼š</p>
<ul>
<li>
<p><strong>aload_1</strong> å°†ç¬¬äºŒä¸ªå¼•ç”¨ç±»å‹æœ¬åœ°å˜é‡æ¨é€è‡³æ ˆé¡¶ï¼Œè¿™é‡Œæ˜¯ç”Ÿæˆçš„æ•°ç»„ï¼›</p>
</li>
<li>
<p><strong>iconst_2</strong> å°† int å‹ 2 æ¨é€è‡³æ ˆé¡¶ï¼›</p>
</li>
<li>
<p><strong>iaload</strong> å°† int å‹æ•°ç»„æŒ‡å®šç´¢å¼•çš„å€¼æ¨é€è‡³æ ˆé¡¶ã€‚</p>
</li>
</ul>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨è¿™æ®µä»£ç è¿è¡ŒæœŸé—´ï¼Œæœ‰å¯èƒ½ä¼šäº§ç”Ÿ ArrayIndexOutOfBoundsExceptionï¼Œä½†ç”±äºå®ƒæ˜¯ä¸€ç§éæ•è·å‹å¼‚å¸¸ï¼Œæˆ‘ä»¬ä¸å¿…ä¸ºè¿™ç§å¼‚å¸¸æä¾›å¼‚å¸¸å¤„ç†å™¨ã€‚</p>
<p>æˆ‘ä»¬å†çœ‹ä¸€ä¸‹ getLength çš„å­—èŠ‚ç ï¼Œå­—èŠ‚ç å¦‚ä¸‹ï¼š</p>
<pre tabindex="0"><code>int getLength(int[]);
    descriptor: ([I)I
    flags:
    Code:
      stack=1, locals=2, args_size=2
         0: aload_1
         1: arraylength
         2: ireturn
</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œè·å–æ•°ç»„çš„é•¿åº¦ï¼Œæ˜¯ç”±å­—èŠ‚ç æŒ‡ä»¤ arraylength æ¥å®Œæˆçš„ã€‚</p>
<h2 id="foreach">foreach</h2>
<p>æ— è®ºæ˜¯ Java çš„æ•°ç»„ï¼Œè¿˜æ˜¯ Listï¼Œéƒ½å¯ä»¥ä½¿ç”¨ foreach è¯­å¥è¿›è¡Œéå†ï¼Œæ¯”è¾ƒå…¸å‹çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<pre tabindex="0"><code>import java.util.List;

public class ForDemo {
    void loop(int[] arr) {
        for (int i : arr) {
            System.out.println(i);
        }
    }

    void loop(List&lt;Integer&gt; arr) {
        for (int i : arr) {
            System.out.println(i);
        }
    }
</code></pre><p>è™½ç„¶åœ¨è¯­è¨€å±‚é¢å®ƒä»¬çš„è¡¨ç°å½¢å¼æ˜¯ä¸€è‡´çš„ï¼Œä½†å®é™…å®ç°çš„æ–¹æ³•å¹¶ä¸åŒã€‚æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹éå†æ•°ç»„çš„å­—èŠ‚ç ï¼š</p>
<pre tabindex="0"><code>void loop(int[]);
    descriptor: ([I)V
    flags:
    Code:
      stack=2, locals=6, args_size=2
         0: aload_1
         1: astore_2
         2: aload_2
         3: arraylength
         4: istore_3
         5: iconst_0
         6: istore        4
         8: iload         4
        10: iload_3
        11: if_icmpge     34
        14: aload_2
        15: iload         4
        17: iaload
        18: istore        5
        20: getstatic     #2                  // Field java/lang/System.out:Ljava/io/PrintStream;
        23: iload         5
        25: invokevirtual #3                  // Method java/io/PrintStream.println:(I)V
        28: iinc          4, 1
        31: goto          8
        34: return
</code></pre><p>å¯ä»¥å¾ˆå®¹æ˜“çœ‹åˆ°ï¼Œå®ƒå°†ä»£ç è§£é‡Šæˆäº†ä¼ ç»Ÿçš„å˜é‡æ–¹å¼ï¼Œå³ <strong>for(int i;i&lt;length;i++)</strong> çš„å½¢å¼ã€‚</p>
<p>è€Œ List çš„å­—èŠ‚ç å¦‚ä¸‹ï¼š</p>
<pre tabindex="0"><code>void loop(java.util.List&lt;java.lang.Integer&gt;);
    Code:
       0: aload_1
       1: invokeinterface #4,  1            // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
       6: astore_2-
       7: aload_2
       8: invokeinterface #5,  1            // InterfaceMethod java/util/Iterator.hasNext:()Z
      13: ifeq          39
      16: aload_2
      17: invokeinterface #6,  1            // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      22: checkcast     #7                  // class java/lang/Integer
      25: invokevirtual #8                  // Method java/lang/Integer.intValue:()I
      28: istore_3
      29: getstatic     #2                  // Field java/lang/System.out:Ljava/io/PrintStream;
      32: iload_3
      33: invokevirtual #3                  // Method java/io/PrintStream.println:(I)V
      36: goto          7
      39: return
</code></pre><p>å®ƒå®é™…æ˜¯æŠŠ list å¯¹è±¡è¿›è¡Œè¿­ä»£å¹¶éå†çš„ï¼Œåœ¨å¾ªç¯ä¸­ï¼Œä½¿ç”¨äº† Iterator.next() æ–¹æ³•ã€‚</p>
<p>ä½¿ç”¨ jd-gui ç­‰åç¼–è¯‘å·¥å…·ï¼Œå¯ä»¥çœ‹åˆ°å®é™…ç”Ÿæˆçš„ä»£ç ï¼š</p>
<pre tabindex="0"><code>void loop(List&lt;Integer&gt; paramList) {
    for (Iterator&lt;Integer&gt; iterator = paramList.iterator(); iterator.hasNext(); ) {
      int i = ((Integer)iterator.next()).intValue();
      System.out.println(i);
    } 
  }
</code></pre><h2 id="æ³¨è§£">æ³¨è§£</h2>
<p>æ³¨è§£åœ¨ Java ä¸­å¾—åˆ°äº†å¹¿æ³›çš„åº”ç”¨ï¼ŒSpring æ¡†æ¶æ›´æ˜¯ç”±äºæ³¨è§£çš„å­˜åœ¨è€Œèµ·æ­»å›ç”Ÿã€‚æ³¨è§£åœ¨å¼€å‘ä¸­çš„ä½œç”¨å°±æ˜¯åšæ•°æ®çº¦æŸå’Œæ ‡å‡†å®šä¹‰ï¼Œå¯ä»¥å°†å…¶ç†è§£æˆä»£ç çš„è§„èŒƒæ ‡å‡†ï¼Œå¹¶å¸®åŠ©æˆ‘ä»¬å†™å‡ºæ–¹ä¾¿ã€å¿«æ·ã€ç®€æ´çš„ä»£ç ã€‚ é‚£ä¹ˆæ³¨è§£ä¿¡æ¯æ˜¯å­˜æ”¾åœ¨å“ªé‡Œçš„å‘¢ï¼Ÿæˆ‘ä»¬ä½¿ç”¨ä¸¤ä¸ª Java æ–‡ä»¶æ¥çœ‹ä¸€ä¸‹å…¶ä¸­çš„ä¸€ç§æƒ…å†µã€‚ <strong>MyAnnotation.java</strong></p>
<pre tabindex="0"><code>public @interface MyAnnotation {
}
</code></pre><p><strong>AnnotationDemo</strong></p>
<pre tabindex="0"><code>@MyAnnotation
public class AnnotationDemo {
    @MyAnnotation
    public void test(@MyAnnotation  int a){

    }
}
</code></pre><p>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å­—èŠ‚ç ä¿¡æ¯ã€‚</p>
<pre tabindex="0"><code>{
  public AnnotationDemo();
    descriptor: ()V
    flags: ACC_PUBLIC
    Code:
      stack=1, locals=1, args_size=1
         0: aload_0
         1: invokespecial #1                  // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V
         4: return
      LineNumberTable:
        line 2: 0

  public void test(int);
    descriptor: (I)V
    flags: ACC_PUBLIC
    Code:
      stack=0, locals=2, args_size=2
         0: return
      LineNumberTable:
        line 6: 0
    RuntimeInvisibleAnnotations:
      0: #11()
    RuntimeInvisibleParameterAnnotations:
      0:
        0: #11()
}
SourceFile: &quot;AnnotationDemo.java&quot;
RuntimeInvisibleAnnotations:
  0: #11()
</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œæ— è®ºæ˜¯ç±»çš„æ³¨è§£ï¼Œè¿˜æ˜¯æ–¹æ³•æ³¨è§£ï¼Œéƒ½æ˜¯ç”±ä¸€ä¸ªå«åš RuntimeInvisibleAnnotations çš„ç»“æ„æ¥å­˜å‚¨çš„ï¼Œè€Œå‚æ•°çš„å­˜å‚¨ï¼Œæ˜¯ç”± RuntimeInvisibleParameterAnotations æ¥ä¿è¯çš„ã€‚</p>
<h2 id="å°ç»“">å°ç»“</h2>
<p>æœ¬è¯¾æ—¶æˆ‘ä»¬ç®€å•ä»‹ç»äº†ä¸€ä¸‹å·¥ä½œä¸­å¸¸è§çš„ä¸€äº›é—®é¢˜ï¼Œå¹¶ä»å­—èŠ‚ç å±‚é¢åˆ†æäº†å®ƒçš„åŸç†ï¼ŒåŒ…æ‹¬å¼‚å¸¸çš„å¤„ç†ã€finally å—çš„æ‰§è¡Œé¡ºåºï¼›ä»¥åŠéšè—çš„è£…ç®±æ‹†ç®±å’Œ foreach è¯­æ³•ç³–çš„åº•å±‚å®ç°ã€‚</p>
<p>ç”±äº Java çš„ç‰¹æ€§éå¸¸å¤šï¼Œè¿™é‡Œä¸å†ä¸€ä¸€åˆ—å‡ºï¼Œä½†éƒ½å¯ä»¥ä½¿ç”¨è¿™ç§ç®€å•çš„æ–¹å¼ï¼Œä¸€çª¥ç©¶ç«Ÿã€‚å¯ä»¥è®¤ä¸ºæœ¬è¯¾æ—¶å±äºæŠ›ç –å¼•ç‰ï¼Œç»™å‡ºäº†ä¸€ç§å­¦ä¹ æ€è·¯ã€‚</p>
<p>å¦å¤–ï¼Œä¹Ÿå¯ä»¥å¯¹å…¶ä¸­çš„æ€§èƒ½å’Œå¤æ‚åº¦è¿›è¡Œæ€è€ƒã€‚å¯ä»¥æ³¨æ„åˆ°ï¼Œåœ¨éšè—çš„è£…ç®±æ‹†ç®±æ“ä½œä¸­ï¼Œä¼šé€ æˆå¾ˆå¤šå†—ä½™çš„å­—èŠ‚ç æŒ‡ä»¤ç”Ÿæˆã€‚é‚£ä¹ˆï¼Œè¿™ä¸ªä¸œè¥¿ä¼šè€—æ€§èƒ½å—ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œä½†æ˜¯ä¹Ÿä¸å¿…çº ç»“äºæ­¤ã€‚</p>
<p>ä½ æ‰€çœ‹åˆ°çš„å­—èŠ‚ç æŒ‡ä»¤ï¼Œå¯èƒ½æ´‹æ´‹æ´’æ´’å‡ åƒè¡Œï¼Œçœ‹èµ·æ¥å¾ˆå“äººï¼Œä½†æ‰§è¡Œé€Ÿåº¦å‡ ä¹éƒ½æ˜¯çº³ç§’çº§åˆ«çš„ã€‚Java çš„æ— æ•°æ¡†æ¶ï¼ŒåŒ…æ‹¬ JDKï¼Œä¹Ÿä¸ä¼šä¸ºäº†ä¼˜åŒ–è¿™ç§æ€§èƒ½å¯¹ä»£ç è¿›è¡Œé™åˆ¶ã€‚äº†è§£å…¶åŸç†ï¼Œä½†ä¸è¦èˆæœ¬é€æœ«ï¼Œæ¯”å¦‚å‡å°‘ä¸€æ¬¡ Java çº¿ç¨‹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œå°±æ¯”ä½ ä¼˜åŒ–å‡ åƒä¸ªè£…ç®±æ‹†ç®±åŠ¨ä½œï¼Œæ¥çš„æ›´å¿«æ·ä¸€äº›ã€‚</p>

        </div>
    </article>
</div>

    </main>
    <footer>
        <div id="pagination">
            
<div class="paginator">
    <div class="prev">
        
        <a href="/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAjava%E8%99%9A%E6%8B%9F%E6%9C%BA/20-%E5%8A%A8%E6%89%8B%E5%AE%9E%E8%B7%B5%E4%BB%8E%E5%AD%97%E8%8A%82%E7%A0%81%E7%9C%8B%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%9A%84%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0/"><span>20 åŠ¨æ‰‹å®è·µï¼šä»å­—èŠ‚ç çœ‹å¹¶å‘ç¼–ç¨‹çš„åº•å±‚å®ç°</span></a>
    </div>
    <div class="next">
        
        <a href="/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAjava%E8%99%9A%E6%8B%9F%E6%9C%BA/22-%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8-java-agent-%E6%8A%80%E6%9C%AF%E5%AF%B9%E5%AD%97%E8%8A%82%E7%A0%81%E8%BF%9B%E8%A1%8C%E4%BF%AE%E6%94%B9/"><span>22 æ·±å…¥å‰–æï¼šå¦‚ä½•ä½¿ç”¨ Java Agent æŠ€æœ¯å¯¹å­—èŠ‚ç è¿›è¡Œä¿®æ”¹</span></a>
    </div>
</div>

        </div>
        <div class="toggler" onclick="toggleLight(this);">ğŸ’¡</div>
        <div id="copyright" style="display: none;">
    
    
    <p>&copy; 28280 <a href="/"></a>, powered by Hugo and Qiao</p>
</div>
    </footer>
    
<script>
    function toggleLight() {
        document.getElementById('page').classList.toggle('night');
    }
</script>
</body>

</html>