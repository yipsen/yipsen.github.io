<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
<meta name="X-UA-Compatible" , content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<link rel="icon" type="image/png" href="/%20/favicon.png">

<title>27 æ³¨è§£å¤„ç†å™¨ | Yipsen Ye</title>
<meta name="description" content="æ³¨è§£ï¼ˆannotationï¼‰æ˜¯ Java 5 å¼•å…¥çš„ï¼Œç”¨æ¥ä¸ºç±»ã€æ–¹æ³•ã€å­—æ®µã€å‚æ•°ç­‰ Java ç»“æ„æä¾›é¢å¤–ä¿¡æ¯çš„æœºåˆ¶ã€‚æˆ‘å…ˆä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚ï¼ŒJava æ ¸å¿ƒç±»åº“ä¸­çš„@Overrideæ³¨è§£æ˜¯è¢«ç”¨æ¥å£°æ˜æŸä¸ªå®ä¾‹æ–¹æ³•é‡å†™äº†çˆ¶ç±»çš„åŒååŒå‚æ•°ç±»å‹çš„æ–¹æ³•ã€‚
package java.lang;@Target(ElementType.METHOD)@Retention(RetentionPolicy.SOURCE)public @interface Override {}@Overrideæ³¨è§£æœ¬èº«è¢«å¦å¤–ä¸¤ä¸ªå…ƒæ³¨è§£ï¼ˆå³ä½œç”¨åœ¨æ³¨è§£ä¸Šçš„æ³¨è§£ï¼‰æ‰€æ ‡æ³¨ã€‚å…¶ä¸­ï¼Œ@Targetç”¨æ¥é™å®šç›®æ ‡æ³¨è§£æ‰€èƒ½æ ‡æ³¨çš„ Java ç»“æ„ï¼Œè¿™é‡Œ@Overrideä¾¿åªèƒ½è¢«ç”¨æ¥æ ‡æ³¨æ–¹æ³•ã€‚
@Retentionåˆ™ç”¨æ¥é™å®šå½“å‰æ³¨è§£ç”Ÿå‘½å‘¨æœŸã€‚æ³¨è§£å…±æœ‰ä¸‰ç§ä¸åŒçš„ç”Ÿå‘½å‘¨æœŸï¼šSOURCEï¼ŒCLASSæˆ–RUNTIMEï¼Œåˆ†åˆ«è¡¨ç¤ºæ³¨è§£åªå‡ºç°åœ¨æºä»£ç ä¸­ï¼Œåªå‡ºç°åœ¨æºä»£ç å’Œå­—èŠ‚ç ä¸­ï¼Œä»¥åŠå‡ºç°åœ¨æºä»£ç ã€å­—èŠ‚ç å’Œè¿è¡Œè¿‡ç¨‹ä¸­ã€‚
è¿™é‡Œ@Overrideä¾¿åªèƒ½å‡ºç°åœ¨æºä»£ç ä¸­ã€‚ä¸€æ—¦æ ‡æ³¨äº†@Overrideçš„æ–¹æ³•æ‰€åœ¨çš„æºä»£ç è¢«ç¼–è¯‘ä¸ºå­—èŠ‚ç ï¼Œè¯¥æ³¨è§£ä¾¿ä¼šè¢«æ“¦é™¤ã€‚
æˆ‘ä»¬ä¸éš¾çŒœåˆ°ï¼Œ@Overrideä»…å¯¹ Java ç¼–è¯‘å™¨æœ‰ç”¨ã€‚äº‹å®ä¸Šï¼Œå®ƒä¼šä¸º Java ç¼–è¯‘å™¨å¼•å…¥äº†ä¸€æ¡æ–°çš„ç¼–è¯‘è§„åˆ™ï¼Œå³å¦‚æœæ‰€æ ‡æ³¨çš„æ–¹æ³•ä¸æ˜¯ Java è¯­è¨€ä¸­çš„é‡å†™æ–¹æ³•ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨ä¼šæŠ¥é”™ã€‚è€Œå½“ç¼–è¯‘å®Œæˆæ—¶ï¼Œå®ƒçš„ä½¿å‘½ä¹Ÿå°±ç»“æŸäº†ã€‚
æˆ‘ä»¬çŸ¥é“ï¼ŒJava çš„æ³¨è§£æœºåˆ¶å…è®¸å¼€å‘äººå‘˜è‡ªå®šä¹‰æ³¨è§£ã€‚è¿™äº›è‡ªå®šä¹‰æ³¨è§£åŒæ ·å¯ä»¥ä¸º Java ç¼–è¯‘å™¨æ·»åŠ ç¼–è¯‘è§„åˆ™ã€‚ä¸è¿‡ï¼Œè¿™ç§åŠŸèƒ½éœ€è¦ç”±å¼€å‘äººå‘˜æä¾›ï¼Œå¹¶ä¸”ä»¥æ’ä»¶çš„å½¢å¼æ¥å…¥ Java ç¼–è¯‘å™¨ä¸­ï¼Œè¿™äº›æ’ä»¶æˆ‘ä»¬ç§°ä¹‹ä¸ºæ³¨è§£å¤„ç†å™¨ï¼ˆannotation processorï¼‰ã€‚
é™¤äº†å¼•å…¥æ–°çš„ç¼–è¯‘è§„åˆ™ä¹‹å¤–ï¼Œæ³¨è§£å¤„ç†å™¨è¿˜å¯ä»¥ç”¨äºä¿®æ”¹å·²æœ‰çš„ Java æºæ–‡ä»¶ï¼ˆä¸æ¨èï¼‰ï¼Œæˆ–è€…ç”Ÿæˆæ–°çš„ Java æºæ–‡ä»¶ã€‚ä¸‹é¢ï¼Œæˆ‘å°†ç”¨å‡ ä¸ªæ¡ˆä¾‹æ¥è¯¦ç»†é˜è¿°æ³¨è§£å¤„ç†å™¨çš„è¿™äº›åŠŸèƒ½ï¼Œä»¥åŠå®ƒèƒŒåçš„åŸç†ã€‚
æ³¨è§£å¤„ç†å™¨çš„åŸç† åœ¨ä»‹ç»æ³¨è§£å¤„ç†å™¨ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹ Java ç¼–è¯‘å™¨çš„å·¥ä½œæµç¨‹ã€‚
å¦‚ä¸Šå›¾æ‰€ç¤º å‡ºå¤„ [1]ï¼ŒJava æºä»£ç çš„ç¼–è¯‘è¿‡ç¨‹å¯åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼š
 å°†æºæ–‡ä»¶è§£æä¸ºæŠ½è±¡è¯­æ³•æ ‘ï¼› è°ƒç”¨å·²æ³¨å†Œçš„æ³¨è§£å¤„ç†å™¨ï¼› ç”Ÿæˆå­—èŠ‚ç ã€‚  å¦‚æœåœ¨ç¬¬ 2 æ­¥è°ƒç”¨æ³¨è§£å¤„ç†å™¨è¿‡ç¨‹ä¸­ç”Ÿæˆäº†æ–°çš„æºæ–‡ä»¶ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨å°†é‡å¤ç¬¬ 1ã€2 æ­¥ï¼Œè§£æå¹¶ä¸”å¤„ç†æ–°ç”Ÿæˆçš„æºæ–‡ä»¶ã€‚æ¯æ¬¡é‡å¤æˆ‘ä»¬ç§°ä¹‹ä¸ºä¸€è½®ï¼ˆRoundï¼‰ã€‚
ä¹Ÿå°±æ˜¯è¯´ï¼Œç¬¬ä¸€è½®è§£æã€å¤„ç†çš„æ˜¯è¾“å…¥è‡³ç¼–è¯‘å™¨ä¸­çš„å·²æœ‰æºæ–‡ä»¶ã€‚å¦‚æœæ³¨è§£å¤„ç†å™¨ç”Ÿæˆäº†æ–°çš„æºæ–‡ä»¶ï¼Œåˆ™å¼€å§‹ç¬¬äºŒè½®ã€ç¬¬ä¸‰è½®ï¼Œè§£æå¹¶ä¸”å¤„ç†è¿™äº›æ–°ç”Ÿæˆçš„æºæ–‡ä»¶ã€‚å½“æ³¨è§£å¤„ç†å™¨ä¸å†ç”Ÿæˆæ–°çš„æºæ–‡ä»¶ï¼Œç¼–è¯‘è¿›å…¥æœ€åä¸€è½®ï¼Œå¹¶æœ€ç»ˆè¿›å…¥ç”Ÿæˆå­—èŠ‚ç çš„ç¬¬ 3 æ­¥ã€‚
package foo;import java.lang.annotation.*;@Target({ ElementType.TYPE, ElementType.FIELD })@Retention(RetentionPolicy.SOURCE)public @interface CheckGetter {}åœ¨ä¸Šé¢è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘å®šä¹‰äº†ä¸€ä¸ªæ³¨è§£@CheckGetterã€‚å®ƒæ—¢å¯ä»¥ç”¨æ¥æ ‡æ³¨ç±»ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥æ ‡æ³¨å­—æ®µã€‚æ­¤å¤–ï¼Œå®ƒå’Œ@Overrideç›¸åŒï¼Œå…¶ç”Ÿå‘½å‘¨æœŸè¢«é™å®šåœ¨æºä»£ç ä¸­ã€‚">
<meta name="author" content="">

<link rel="stylesheet" type="text/css" href="/styles/main.css">

</head>

<body id="page">
    <header>
        <div class="logo-link" style="width: 60px; color: #CA6924;">
    <a href="http://yipsen.github.io/">
        <img style="margin-bottom: -1rem;" src="/images/deer.svg" alt="logo">
        <span style="font-size: 0.5rem; color: #CA6924;">Yipsen Ye</span>
    </a>
</div>
<nav class="navbar justify-content-end">
    <ul class="nav-list">
        
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/posts/">æœ­è®°</a>
        </li>
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/collections/">é™„è¡¨</a>
        </li>
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/about/">å…³äº</a>
        </li>
        
    </ul>
</nav>
    </header>
    <main id="content">
        
<div class="container"><aside>
    <div>
        
        
            
            
            <div class="post-category-icon"></div>
            <a href="/categories/%e6%b7%b1%e5%85%a5%e6%8b%86%e8%a7%a3java%e8%99%9a%e6%8b%9f%e6%9c%ba/">æ·±å…¥æ‹†è§£Javaè™šæ‹Ÿæœº</a>
            <ul>
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%8B%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA/00-%E5%BC%80%E7%AF%87%E8%AF%8D-%E4%B8%BA%E4%BB%80%E4%B9%88%E6%88%91%E4%BB%AC%E8%A6%81%E5%AD%A6%E4%B9%A0java%E8%99%9A%E6%8B%9F%E6%9C%BA/">00 å¼€ç¯‡è¯ ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦å­¦ä¹ Javaè™šæ‹Ÿæœºï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%8B%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA/01-java%E4%BB%A3%E7%A0%81%E6%98%AF%E6%80%8E%E4%B9%88%E8%BF%90%E8%A1%8C%E7%9A%84/">01 Javaä»£ç æ˜¯æ€ä¹ˆè¿è¡Œçš„ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%8B%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA/02-java%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B/">02 Javaçš„åŸºæœ¬ç±»å‹</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%8B%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA/03-java%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%98%AF%E5%A6%82%E4%BD%95%E5%8A%A0%E8%BD%BDjava%E7%B1%BB%E7%9A%84/">03 Javaè™šæ‹Ÿæœºæ˜¯å¦‚ä½•åŠ è½½Javaç±»çš„</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%8B%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA/04-jvm%E6%98%AF%E5%A6%82%E4%BD%95%E6%89%A7%E8%A1%8C%E6%96%B9%E6%B3%95%E8%B0%83%E7%94%A8%E7%9A%84%E4%B8%8A/">04 JVMæ˜¯å¦‚ä½•æ‰§è¡Œæ–¹æ³•è°ƒç”¨çš„ï¼Ÿï¼ˆä¸Šï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%8B%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA/05-jvm%E6%98%AF%E5%A6%82%E4%BD%95%E6%89%A7%E8%A1%8C%E6%96%B9%E6%B3%95%E8%B0%83%E7%94%A8%E7%9A%84%E4%B8%8B/">05 JVMæ˜¯å¦‚ä½•æ‰§è¡Œæ–¹æ³•è°ƒç”¨çš„ï¼Ÿï¼ˆä¸‹ï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%8B%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA/06-jvm%E6%98%AF%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86%E5%BC%82%E5%B8%B8%E7%9A%84/">06 JVMæ˜¯å¦‚ä½•å¤„ç†å¼‚å¸¸çš„ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%8B%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA/07-jvm%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E5%8F%8D%E5%B0%84%E7%9A%84/">07 JVMæ˜¯å¦‚ä½•å®ç°åå°„çš„ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%8B%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA/08-jvm%E6%98%AF%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0invokedynamic%E7%9A%84%E4%B8%8A/">08 JVMæ˜¯æ€ä¹ˆå®ç°invokedynamicçš„ï¼Ÿï¼ˆä¸Šï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%8B%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA/09-jvm%E6%98%AF%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0invokedynamic%E7%9A%84%E4%B8%8B/">09 JVMæ˜¯æ€ä¹ˆå®ç°invokedynamicçš„ï¼Ÿï¼ˆä¸‹ï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%8B%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA/10-java%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%86%85%E5%AD%98%E5%B8%83%E5%B1%80/">10 Javaå¯¹è±¡çš„å†…å­˜å¸ƒå±€</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%8B%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA/11-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E4%B8%8A/">11 åƒåœ¾å›æ”¶ï¼ˆä¸Šï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%8B%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA/12-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E4%B8%8B/">12 åƒåœ¾å›æ”¶ï¼ˆä¸‹ï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%8B%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA/13-java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B/">13 Javaå†…å­˜æ¨¡å‹</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%8B%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA/14-java%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%98%AF%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0synchronized%E7%9A%84/">14 Javaè™šæ‹Ÿæœºæ˜¯æ€ä¹ˆå®ç°synchronizedçš„ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%8B%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA/15-java%E8%AF%AD%E6%B3%95%E7%B3%96%E4%B8%8Ejava%E7%BC%96%E8%AF%91%E5%99%A8/">15 Javaè¯­æ³•ç³–ä¸Javaç¼–è¯‘å™¨</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%8B%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA/16-%E5%8D%B3%E6%97%B6%E7%BC%96%E8%AF%91%E4%B8%8A/">16 å³æ—¶ç¼–è¯‘ï¼ˆä¸Šï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%8B%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA/17-%E5%8D%B3%E6%97%B6%E7%BC%96%E8%AF%91%E4%B8%8B/">17 å³æ—¶ç¼–è¯‘ï¼ˆä¸‹ï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%8B%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA/18-%E5%8D%B3%E6%97%B6%E7%BC%96%E8%AF%91%E5%99%A8%E7%9A%84%E4%B8%AD%E9%97%B4%E8%A1%A8%E8%BE%BE%E5%BD%A2%E5%BC%8F/">18 å³æ—¶ç¼–è¯‘å™¨çš„ä¸­é—´è¡¨è¾¾å½¢å¼</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%8B%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA/19-java%E5%AD%97%E8%8A%82%E7%A0%81%E5%9F%BA%E7%A1%80%E7%AF%87/">19 Javaå­—èŠ‚ç ï¼ˆåŸºç¡€ç¯‡ï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%8B%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA/20-%E6%96%B9%E6%B3%95%E5%86%85%E8%81%94%E4%B8%8A/">20 æ–¹æ³•å†…è”ï¼ˆä¸Šï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%8B%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA/21-%E6%96%B9%E6%B3%95%E5%86%85%E8%81%94%E4%B8%8B/">21 æ–¹æ³•å†…è”ï¼ˆä¸‹ï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%8B%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA/22-hotspot%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%9A%84intrinsic/">22 HotSpotè™šæ‹Ÿæœºçš„intrinsic</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%8B%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA/23-%E9%80%83%E9%80%B8%E5%88%86%E6%9E%90/">23 é€ƒé€¸åˆ†æ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%8B%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA/24-%E5%AD%97%E6%AE%B5%E8%AE%BF%E9%97%AE%E7%9B%B8%E5%85%B3%E4%BC%98%E5%8C%96/">24 å­—æ®µè®¿é—®ç›¸å…³ä¼˜åŒ–</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%8B%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA/25-%E5%BE%AA%E7%8E%AF%E4%BC%98%E5%8C%96/">25 å¾ªç¯ä¼˜åŒ–</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%8B%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA/26-%E5%90%91%E9%87%8F%E5%8C%96/">26 å‘é‡åŒ–</a></li>
                
                
                
                    <li>27 æ³¨è§£å¤„ç†å™¨</li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%8B%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA/28-%E5%9F%BA%E5%87%86%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6jmh%E4%B8%8A/">28 åŸºå‡†æµ‹è¯•æ¡†æ¶JMHï¼ˆä¸Šï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%8B%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA/29-%E5%9F%BA%E5%87%86%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6jmh%E4%B8%8B/">29 åŸºå‡†æµ‹è¯•æ¡†æ¶JMHï¼ˆä¸‹ï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%8B%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA/30-java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%9A%84%E7%9B%91%E6%8E%A7%E5%8F%8A%E8%AF%8A%E6%96%AD%E5%B7%A5%E5%85%B7%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%AF%87/">30 Javaè™šæ‹Ÿæœºçš„ç›‘æ§åŠè¯Šæ–­å·¥å…·ï¼ˆå‘½ä»¤è¡Œç¯‡ï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%8B%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA/31-java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%9A%84%E7%9B%91%E6%8E%A7%E5%8F%8A%E8%AF%8A%E6%96%AD%E5%B7%A5%E5%85%B7gui%E7%AF%87/">31 Javaè™šæ‹Ÿæœºçš„ç›‘æ§åŠè¯Šæ–­å·¥å…·ï¼ˆGUIç¯‡ï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%8B%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA/32-jni%E7%9A%84%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6/">32 JNIçš„è¿è¡Œæœºåˆ¶</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%8B%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA/33-java-agent%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%B3%A8%E5%85%A5/">33 Java Agentä¸å­—èŠ‚ç æ³¨å…¥</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%8B%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA/34-graal%E7%94%A8java%E7%BC%96%E8%AF%91java/">34 Graalï¼šç”¨Javaç¼–è¯‘Java</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%8B%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA/35-truffle%E8%AF%AD%E8%A8%80%E5%AE%9E%E7%8E%B0%E6%A1%86%E6%9E%B6/">35 Truffleï¼šè¯­è¨€å®ç°æ¡†æ¶</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%8B%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA/36-substratevmaot%E7%BC%96%E8%AF%91%E6%A1%86%E6%9E%B6/">36 SubstrateVMï¼šAOTç¼–è¯‘æ¡†æ¶</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%8B%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA/%E5%B0%BE%E5%A3%B0%E4%B8%A8%E9%81%93%E9%98%BB%E4%B8%94%E9%95%BF%E5%8A%AA%E5%8A%9B%E5%8A%A0%E9%A4%90.html/">å°¾å£°ä¸¨é“é˜»ä¸”é•¿ï¼ŒåŠªåŠ›åŠ é¤.html</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%8B%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA/%E5%B7%A5%E5%85%B7%E7%AF%87-%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%E4%BB%8B%E7%BB%8D/">å·¥å…·ç¯‡ å¸¸ç”¨å·¥å…·ä»‹ç»</a></li>
                
                
            </ul>
        
    </div>
</aside>

<style>
    aside {
        position: fixed;
        left: 20px;
        background: #ffdee3;
        border-radius: 6px;
        padding: 20px;
        padding-top: 60px;
        box-shadow: 5px 10px #888;
        list-style-type: none;
        display: none;
    }

    .post-category-icon {
        position: absolute;
        width: 80px;
        height: 80px;
        top: -40px;
        left: 50%;
        margin-left: -40px;
        text-align: center;
        font-size: 36px;
        content: 'J';
        background: #ffdee3;
        border-radius: 100%;
        border: 10px solid #fff;
        box-shadow: 5px 10px #888;
    }
</style><article class="post-block">
        <h1 class="post-title">27 æ³¨è§£å¤„ç†å™¨</h1>
        <div class="post-info">
            <div> 
                <span class="post-date">ğŸ“…&nbsp;2022-01-09 11:11:17</span>ğŸ·ï¸&nbsp;<a class="post-tag" href="/tags/java/">java</a></div><div class="post-category">
                
                ğŸ“š&nbsp;<a href="/categories/%E6%B7%B1%E5%85%A5%E6%8B%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA/">æ·±å…¥æ‹†è§£Javaè™šæ‹Ÿæœº</a>
                
            </div></div>
        <div class="post-content">
            <p>æ³¨è§£ï¼ˆannotationï¼‰æ˜¯ Java 5 å¼•å…¥çš„ï¼Œç”¨æ¥ä¸ºç±»ã€æ–¹æ³•ã€å­—æ®µã€å‚æ•°ç­‰ Java ç»“æ„æä¾›é¢å¤–ä¿¡æ¯çš„æœºåˆ¶ã€‚æˆ‘å…ˆä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚ï¼ŒJava æ ¸å¿ƒç±»åº“ä¸­çš„<code>@Override</code>æ³¨è§£æ˜¯è¢«ç”¨æ¥å£°æ˜æŸä¸ªå®ä¾‹æ–¹æ³•é‡å†™äº†çˆ¶ç±»çš„åŒååŒå‚æ•°ç±»å‹çš„æ–¹æ³•ã€‚</p>
<pre tabindex="0"><code>package java.lang;
 
@Target(ElementType.METHOD)
@Retention(RetentionPolicy.SOURCE)
public @interface Override {
}
</code></pre><p><code>@Override</code>æ³¨è§£æœ¬èº«è¢«å¦å¤–ä¸¤ä¸ªå…ƒæ³¨è§£ï¼ˆå³ä½œç”¨åœ¨æ³¨è§£ä¸Šçš„æ³¨è§£ï¼‰æ‰€æ ‡æ³¨ã€‚å…¶ä¸­ï¼Œ<code>@Target</code>ç”¨æ¥é™å®šç›®æ ‡æ³¨è§£æ‰€èƒ½æ ‡æ³¨çš„ Java ç»“æ„ï¼Œè¿™é‡Œ<code>@Override</code>ä¾¿åªèƒ½è¢«ç”¨æ¥æ ‡æ³¨æ–¹æ³•ã€‚</p>
<p><code>@Retention</code>åˆ™ç”¨æ¥é™å®šå½“å‰æ³¨è§£ç”Ÿå‘½å‘¨æœŸã€‚æ³¨è§£å…±æœ‰ä¸‰ç§ä¸åŒçš„ç”Ÿå‘½å‘¨æœŸï¼š<code>SOURCE</code>ï¼Œ<code>CLASS</code>æˆ–<code>RUNTIME</code>ï¼Œåˆ†åˆ«è¡¨ç¤ºæ³¨è§£åªå‡ºç°åœ¨æºä»£ç ä¸­ï¼Œåªå‡ºç°åœ¨æºä»£ç å’Œå­—èŠ‚ç ä¸­ï¼Œä»¥åŠå‡ºç°åœ¨æºä»£ç ã€å­—èŠ‚ç å’Œè¿è¡Œè¿‡ç¨‹ä¸­ã€‚</p>
<p>è¿™é‡Œ<code>@Override</code>ä¾¿åªèƒ½å‡ºç°åœ¨æºä»£ç ä¸­ã€‚ä¸€æ—¦æ ‡æ³¨äº†<code>@Override</code>çš„æ–¹æ³•æ‰€åœ¨çš„æºä»£ç è¢«ç¼–è¯‘ä¸ºå­—èŠ‚ç ï¼Œè¯¥æ³¨è§£ä¾¿ä¼šè¢«æ“¦é™¤ã€‚</p>
<p>æˆ‘ä»¬ä¸éš¾çŒœåˆ°ï¼Œ<code>@Override</code>ä»…å¯¹ Java ç¼–è¯‘å™¨æœ‰ç”¨ã€‚äº‹å®ä¸Šï¼Œå®ƒä¼šä¸º Java ç¼–è¯‘å™¨å¼•å…¥äº†ä¸€æ¡æ–°çš„ç¼–è¯‘è§„åˆ™ï¼Œå³å¦‚æœæ‰€æ ‡æ³¨çš„æ–¹æ³•ä¸æ˜¯ Java è¯­è¨€ä¸­çš„é‡å†™æ–¹æ³•ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨ä¼šæŠ¥é”™ã€‚è€Œå½“ç¼–è¯‘å®Œæˆæ—¶ï¼Œå®ƒçš„ä½¿å‘½ä¹Ÿå°±ç»“æŸäº†ã€‚</p>
<p>æˆ‘ä»¬çŸ¥é“ï¼ŒJava çš„æ³¨è§£æœºåˆ¶å…è®¸å¼€å‘äººå‘˜è‡ªå®šä¹‰æ³¨è§£ã€‚è¿™äº›è‡ªå®šä¹‰æ³¨è§£åŒæ ·å¯ä»¥ä¸º Java ç¼–è¯‘å™¨æ·»åŠ ç¼–è¯‘è§„åˆ™ã€‚ä¸è¿‡ï¼Œè¿™ç§åŠŸèƒ½éœ€è¦ç”±å¼€å‘äººå‘˜æä¾›ï¼Œå¹¶ä¸”ä»¥æ’ä»¶çš„å½¢å¼æ¥å…¥ Java ç¼–è¯‘å™¨ä¸­ï¼Œè¿™äº›æ’ä»¶æˆ‘ä»¬ç§°ä¹‹ä¸ºæ³¨è§£å¤„ç†å™¨ï¼ˆannotation processorï¼‰ã€‚</p>
<p>é™¤äº†å¼•å…¥æ–°çš„ç¼–è¯‘è§„åˆ™ä¹‹å¤–ï¼Œæ³¨è§£å¤„ç†å™¨è¿˜å¯ä»¥ç”¨äºä¿®æ”¹å·²æœ‰çš„ Java æºæ–‡ä»¶ï¼ˆä¸æ¨èï¼‰ï¼Œæˆ–è€…ç”Ÿæˆæ–°çš„ Java æºæ–‡ä»¶ã€‚ä¸‹é¢ï¼Œæˆ‘å°†ç”¨å‡ ä¸ªæ¡ˆä¾‹æ¥è¯¦ç»†é˜è¿°æ³¨è§£å¤„ç†å™¨çš„è¿™äº›åŠŸèƒ½ï¼Œä»¥åŠå®ƒèƒŒåçš„åŸç†ã€‚</p>
<h2 id="æ³¨è§£å¤„ç†å™¨çš„åŸç†">æ³¨è§£å¤„ç†å™¨çš„åŸç†</h2>
<p>åœ¨ä»‹ç»æ³¨è§£å¤„ç†å™¨ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹ Java ç¼–è¯‘å™¨çš„å·¥ä½œæµç¨‹ã€‚</p>
<p><img src="http://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/%E6%B7%B1%E5%85%A5%E6%8B%86%E8%A7%A3Java%E8%99%9A%E6%8B%9F%E6%9C%BA/assets/64e93f67c3b422afd90966bfe9aaf5b8.png" alt="img"></p>
<p>å¦‚ä¸Šå›¾æ‰€ç¤º å‡ºå¤„ [1]ï¼ŒJava æºä»£ç çš„ç¼–è¯‘è¿‡ç¨‹å¯åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼š</p>
<ol>
<li>å°†æºæ–‡ä»¶è§£æä¸ºæŠ½è±¡è¯­æ³•æ ‘ï¼›</li>
<li>è°ƒç”¨å·²æ³¨å†Œçš„æ³¨è§£å¤„ç†å™¨ï¼›</li>
<li>ç”Ÿæˆå­—èŠ‚ç ã€‚</li>
</ol>
<p>å¦‚æœåœ¨ç¬¬ 2 æ­¥è°ƒç”¨æ³¨è§£å¤„ç†å™¨è¿‡ç¨‹ä¸­ç”Ÿæˆäº†æ–°çš„æºæ–‡ä»¶ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨å°†é‡å¤ç¬¬ 1ã€2 æ­¥ï¼Œè§£æå¹¶ä¸”å¤„ç†æ–°ç”Ÿæˆçš„æºæ–‡ä»¶ã€‚æ¯æ¬¡é‡å¤æˆ‘ä»¬ç§°ä¹‹ä¸ºä¸€è½®ï¼ˆRoundï¼‰ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œç¬¬ä¸€è½®è§£æã€å¤„ç†çš„æ˜¯è¾“å…¥è‡³ç¼–è¯‘å™¨ä¸­çš„å·²æœ‰æºæ–‡ä»¶ã€‚å¦‚æœæ³¨è§£å¤„ç†å™¨ç”Ÿæˆäº†æ–°çš„æºæ–‡ä»¶ï¼Œåˆ™å¼€å§‹ç¬¬äºŒè½®ã€ç¬¬ä¸‰è½®ï¼Œè§£æå¹¶ä¸”å¤„ç†è¿™äº›æ–°ç”Ÿæˆçš„æºæ–‡ä»¶ã€‚å½“æ³¨è§£å¤„ç†å™¨ä¸å†ç”Ÿæˆæ–°çš„æºæ–‡ä»¶ï¼Œç¼–è¯‘è¿›å…¥æœ€åä¸€è½®ï¼Œå¹¶æœ€ç»ˆè¿›å…¥ç”Ÿæˆå­—èŠ‚ç çš„ç¬¬ 3 æ­¥ã€‚</p>
<pre tabindex="0"><code>package foo;
 
import java.lang.annotation.*;
 
@Target({ ElementType.TYPE, ElementType.FIELD })
@Retention(RetentionPolicy.SOURCE)
public @interface CheckGetter {
}
</code></pre><p>åœ¨ä¸Šé¢è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘å®šä¹‰äº†ä¸€ä¸ªæ³¨è§£<code>@CheckGetter</code>ã€‚å®ƒæ—¢å¯ä»¥ç”¨æ¥æ ‡æ³¨ç±»ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥æ ‡æ³¨å­—æ®µã€‚æ­¤å¤–ï¼Œå®ƒå’Œ<code>@Override</code>ç›¸åŒï¼Œå…¶ç”Ÿå‘½å‘¨æœŸè¢«é™å®šåœ¨æºä»£ç ä¸­ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªå¤„ç†<code>@CheckGetter</code>æ³¨è§£çš„å¤„ç†å™¨ã€‚å®ƒå°†éå†è¢«æ ‡æ³¨çš„ç±»ä¸­çš„å®ä¾‹å­—æ®µï¼Œå¹¶æ£€æŸ¥æœ‰æ²¡æœ‰ç›¸åº”çš„<code>getter</code>æ–¹æ³•ã€‚</p>
<pre tabindex="0"><code>public interface Processor {
 
  void init(ProcessingEnvironment processingEnv);
  
  Set&lt;String&gt; getSupportedAnnotationTypes();
  
  SourceVersion getSupportedSourceVersion();
  
  boolean process(Set&lt;? extends TypeElement&gt; annotations, RoundEnvironment roundEnv);
  
  ...
}
</code></pre><p>æ‰€æœ‰çš„æ³¨è§£å¤„ç†å™¨ç±»éƒ½éœ€è¦å®ç°æ¥å£<code>Processor</code>ã€‚è¯¥æ¥å£ä¸»è¦æœ‰å››ä¸ªé‡è¦æ–¹æ³•ã€‚å…¶ä¸­ï¼Œ<code>init</code>æ–¹æ³•ç”¨æ¥å­˜æ”¾æ³¨è§£å¤„ç†å™¨çš„åˆå§‹åŒ–ä»£ç ã€‚ä¹‹æ‰€ä»¥ä¸ç”¨æ„é€ å™¨ï¼Œæ˜¯å› ä¸ºåœ¨ Java ç¼–è¯‘å™¨ä¸­ï¼Œæ³¨è§£å¤„ç†å™¨çš„å®ä¾‹æ˜¯é€šè¿‡åå°„ API ç”Ÿæˆçš„ã€‚ä¹Ÿæ­£æ˜¯å› ä¸ºä½¿ç”¨åå°„ APIï¼Œæ¯ä¸ªæ³¨è§£å¤„ç†å™¨ç±»éƒ½éœ€è¦å®šä¹‰ä¸€ä¸ªæ— å‚æ•°æ„é€ å™¨ã€‚</p>
<p>é€šå¸¸æ¥è¯´ï¼Œå½“ç¼–å†™æ³¨è§£å¤„ç†å™¨æ—¶ï¼Œæˆ‘ä»¬ä¸å£°æ˜ä»»ä½•æ„é€ å™¨ï¼Œå¹¶ä¾èµ–äº Java ç¼–è¯‘å™¨ï¼Œä¸ºä¹‹æ’å…¥ä¸€ä¸ªæ— å‚æ•°æ„é€ å™¨ã€‚è€Œå…·ä½“çš„åˆå§‹åŒ–ä»£ç ï¼Œåˆ™æ”¾å…¥<code>init</code>æ–¹æ³•ä¹‹ä¸­ã€‚</p>
<p>åœ¨å‰©ä¸‹çš„ä¸‰ä¸ªæ–¹æ³•ä¸­ï¼Œ<code>getSupportedAnnotationTypes</code>æ–¹æ³•å°†è¿”å›æ³¨è§£å¤„ç†å™¨æ‰€æ”¯æŒçš„æ³¨è§£ç±»å‹ï¼Œè¿™äº›æ³¨è§£ç±»å‹åªéœ€ç”¨å­—ç¬¦ä¸²å½¢å¼è¡¨ç¤ºå³å¯ã€‚</p>
<p><code>getSupportedSourceVersion</code>æ–¹æ³•å°†è¿”å›è¯¥å¤„ç†å™¨æ‰€æ”¯æŒçš„ Java ç‰ˆæœ¬ï¼Œé€šå¸¸ï¼Œè¿™ä¸ªç‰ˆæœ¬éœ€è¦ä¸ä½ çš„ Java ç¼–è¯‘å™¨ç‰ˆæœ¬ä¿æŒä¸€è‡´ï¼›è€Œ<code>process</code>æ–¹æ³•åˆ™æ˜¯æœ€ä¸ºå…³é”®çš„æ³¨è§£å¤„ç†æ–¹æ³•ã€‚</p>
<p>JDK æä¾›äº†ä¸€ä¸ªå®ç°<code>Processor</code>æ¥å£çš„æŠ½è±¡ç±»<code>AbstractProcessor</code>ã€‚è¯¥æŠ½è±¡ç±»å®ç°äº†<code>init</code>ã€<code>getSupportedAnnotationTypes</code>å’Œ<code>getSupportedSourceVersion</code>æ–¹æ³•ã€‚</p>
<p>å®ƒçš„å­ç±»å¯ä»¥é€šè¿‡<code>@SupportedAnnotationTypes</code>å’Œ<code>@SupportedSourceVersion</code>æ³¨è§£æ¥å£°æ˜æ‰€æ”¯æŒçš„æ³¨è§£ç±»å‹ä»¥åŠ Java ç‰ˆæœ¬ã€‚</p>
<p>ä¸‹é¢è¿™æ®µä»£ç ä¾¿æ˜¯<code>@CheckGetter</code>æ³¨è§£å¤„ç†å™¨çš„å®ç°ã€‚ç”±äºæˆ‘ä½¿ç”¨äº† Java 10 çš„ç¼–è¯‘å™¨ï¼Œå› æ­¤å°†æ”¯æŒç‰ˆæœ¬è®¾ç½®ä¸º<code>SourceVersion.RELEASE_10</code>ã€‚</p>
<pre tabindex="0"><code>package bar;
 
import java.util.Set;
 
import javax.annotation.processing.*;
import javax.lang.model.SourceVersion;
import javax.lang.model.element.*;
import javax.lang.model.util.ElementFilter;
import javax.tools.Diagnostic.Kind;
 
import foo.CheckGetter;
 
@SupportedAnnotationTypes(&quot;foo.CheckGetter&quot;)
@SupportedSourceVersion(SourceVersion.RELEASE_10)
public class CheckGetterProcessor extends AbstractProcessor {
 
  @Override
  public boolean process(Set&lt;? extends TypeElement&gt; annotations, RoundEnvironment roundEnv) {
    // TODO: annotated ElementKind.FIELD
    for (TypeElement annotatedClass : ElementFilter.typesIn(roundEnv.getElementsAnnotatedWith(CheckGetter.class))) {
      for (VariableElement field : ElementFilter.fieldsIn(annotatedClass.getEnclosedElements())) {
        if (!containsGetter(annotatedClass, field.getSimpleName().toString())) {
          processingEnv.getMessager().printMessage(Kind.ERROR,
              String.format(&quot;getter not found for '%s.%s'.&quot;, annotatedClass.getSimpleName(), field.getSimpleName()));
        }
      }
    }
    return true;
  }
 
  private static boolean containsGetter(TypeElement typeElement, String name) {
    String getter = &quot;get&quot; + name.substring(0, 1).toUpperCase() + name.substring(1).toLowerCase();
    for (ExecutableElement executableElement : ElementFilter.methodsIn(typeElement.getEnclosedElements())) {
      if (!executableElement.getModifiers().contains(Modifier.STATIC)
          &amp;&amp; executableElement.getSimpleName().toString().equals(getter)
          &amp;&amp; executableElement.getParameters().isEmpty()) {
        return true;
      }
    }
    return false;
  }
}
</code></pre><p>è¯¥æ³¨è§£å¤„ç†å™¨ä»…é‡å†™äº†<code>process</code>æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•å°†æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«ä»£è¡¨è¯¥æ³¨è§£å¤„ç†å™¨æ‰€èƒ½å¤„ç†çš„æ³¨è§£ç±»å‹ï¼Œä»¥åŠå›Šæ‹¬å½“å‰è½®ç”Ÿæˆçš„æŠ½è±¡è¯­æ³•æ ‘çš„<code>RoundEnvironment</code>ã€‚</p>
<p>ç”±äºè¯¥å¤„ç†å™¨é’ˆå¯¹çš„æ³¨è§£ä»…æœ‰<code>@CheckGetter</code>ä¸€ä¸ªï¼Œè€Œä¸”æˆ‘ä»¬å¹¶ä¸ä¼šè¯»å–æ³¨è§£ä¸­çš„å€¼ï¼Œå› æ­¤ç¬¬ä¸€ä¸ªå‚æ•°å¹¶ä¸é‡è¦ã€‚åœ¨ä»£ç ä¸­ï¼Œæˆ‘ç›´æ¥ä½¿ç”¨äº†</p>
<pre tabindex="0"><code>`roundEnv.getElementsAnnotatedWith(CheckGetter.class)`
</code></pre><p>æ¥è·å–æ‰€æœ‰è¢«<code>@CheckGetter</code>æ³¨è§£çš„ç±»ï¼ˆä»¥åŠå­—æ®µï¼‰ã€‚</p>
<p><code>process</code>æ–¹æ³•æ¶‰åŠå„ç§ä¸åŒç±»å‹çš„<code>Element</code>ï¼Œåˆ†åˆ«æŒ‡ä»£ Java ç¨‹åºä¸­çš„å„ä¸ªç»“æ„ã€‚å¦‚<code>TypeElement</code>æŒ‡ä»£ç±»æˆ–è€…æ¥å£ï¼Œ<code>VariableElement</code>æŒ‡ä»£å­—æ®µã€å±€éƒ¨å˜é‡ã€enum å¸¸é‡ç­‰ï¼Œ<code>ExecutableElement</code>æŒ‡ä»£æ–¹æ³•æˆ–è€…æ„é€ å™¨ã€‚</p>
<pre tabindex="0"><code>package foo;     // PackageElement
 
class Foo {      // TypeElement
  int a;           // VariableElement
  static int b;    // VariableElement
  Foo () {}        // ExecutableElement
  void setA (      // ExecutableElement
    int newA         // VariableElement
  ) {}
}
</code></pre><p>è¿™äº›ç»“æ„ä¹‹é—´ä¹Ÿæœ‰ä»å±å…³ç³»ï¼Œå¦‚ä¸Šé¢è¿™æ®µä»£ç æ‰€ç¤º (å‡ºå¤„ [2]ï¼‰ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>TypeElement.getEnclosedElements</code>æ–¹æ³•ï¼Œè·å¾—ä¸Šé¢è¿™æ®µä»£ç ä¸­<code>Foo</code>ç±»çš„å­—æ®µã€æ„é€ å™¨ä»¥åŠæ–¹æ³•ã€‚</p>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡<code>ExecutableElement.getParameters</code>æ–¹æ³•ï¼Œè·å¾—<code>setA</code>æ–¹æ³•çš„å‚æ•°ã€‚å…·ä½“è¿™äº›<code>Element</code>ç±»éƒ½æœ‰å“ªäº› APIï¼Œä½ å¯ä»¥å‚è€ƒå®ƒä»¬çš„ Javadoc[3]ã€‚</p>
<p>åœ¨å°†è¯¥æ³¨è§£å¤„ç†å™¨ç¼–è¯‘æˆ class æ–‡ä»¶åï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥å°†å…¶æ³¨å†Œä¸º Java ç¼–è¯‘å™¨çš„æ’ä»¶ï¼Œå¹¶ç”¨æ¥å¤„ç†å…¶ä»–æºä»£ç ã€‚æ³¨å†Œçš„æ–¹æ³•ä¸»è¦æœ‰ä¸¤ç§ã€‚ç¬¬ä¸€ç§æ˜¯ç›´æ¥ä½¿ç”¨ javac å‘½ä»¤çš„<code>-processor</code>å‚æ•°ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre tabindex="0"><code>$ javac -cp /CLASSPATH/TO/CheckGetterProcessor -processor bar.CheckGetterProcessor Foo.java
error: Class 'Foo' is annotated as @CheckGetter, but field 'a' is without getter
1 error
</code></pre><p>ç¬¬äºŒç§åˆ™æ˜¯å°†æ³¨è§£å¤„ç†å™¨ç¼–è¯‘ç”Ÿæˆçš„ class æ–‡ä»¶å‹ç¼©å…¥ jar åŒ…ä¸­ï¼Œå¹¶åœ¨ jar åŒ…çš„é…ç½®æ–‡ä»¶ä¸­è®°å½•è¯¥æ³¨è§£å¤„ç†å™¨çš„åŒ…ååŠç±»åï¼Œå³<code>bar.CheckGetterProcessor</code>ã€‚</p>
<pre tabindex="0"><code>ï¼ˆå…·ä½“è·¯å¾„åŠé…ç½®æ–‡ä»¶åä¸º`META-INF/services/javax.annotation.processing.Processor`ï¼‰
</code></pre><p>å½“å¯åŠ¨ Java ç¼–è¯‘å™¨æ—¶ï¼Œå®ƒä¼šå¯»æ‰¾ classpath è·¯å¾„ä¸Šçš„ jar åŒ…æ˜¯å¦åŒ…å«ä¸Šè¿°é…ç½®æ–‡ä»¶ï¼Œå¹¶è‡ªåŠ¨æ³¨å†Œå…¶ä¸­è®°å½•çš„æ³¨è§£å¤„ç†å™¨ã€‚</p>
<pre tabindex="0"><code>$ javac -cp /PATH/TO/CheckGetterProcessor.jar Foo.java
error: Class 'Foo' is annotated as @CheckGetter, but field 'a' is without getter
1 error
</code></pre><p>æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨ IDE ä¸­é…ç½®æ³¨è§£å¤„ç†å™¨ã€‚è¿™é‡Œæˆ‘å°±ä¸è¿‡å¤šæ¼”ç¤ºäº†ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥è‡ªè¡Œæœç´¢ã€‚</p>
<h2 id="åˆ©ç”¨æ³¨è§£å¤„ç†å™¨ç”Ÿæˆæºä»£ç ">åˆ©ç”¨æ³¨è§£å¤„ç†å™¨ç”Ÿæˆæºä»£ç </h2>
<p>å‰é¢æåˆ°ï¼Œæ³¨è§£å¤„ç†å™¨å¯ä»¥ç”¨æ¥ä¿®æ”¹å·²æœ‰æºä»£ç æˆ–è€…ç”Ÿæˆæºä»£ç ã€‚</p>
<p>ç¡®åˆ‡åœ°è¯´ï¼Œæ³¨è§£å¤„ç†å™¨å¹¶ä¸èƒ½çœŸæ­£åœ°ä¿®æ”¹å·²æœ‰æºä»£ç ã€‚è¿™é‡ŒæŒ‡çš„æ˜¯ä¿®æ”¹ç”± Java æºä»£ç ç”Ÿæˆçš„æŠ½è±¡è¯­æ³•æ ‘ï¼Œåœ¨å…¶ä¸­ä¿®æ”¹å·²æœ‰æ ‘èŠ‚ç‚¹æˆ–è€…æ’å…¥æ–°çš„æ ‘èŠ‚ç‚¹ï¼Œä»è€Œä½¿ç”Ÿæˆçš„å­—èŠ‚ç å‘ç”Ÿå˜åŒ–ã€‚</p>
<p>å¯¹æŠ½è±¡è¯­æ³•æ ‘çš„ä¿®æ”¹æ¶‰åŠäº† Java ç¼–è¯‘å™¨çš„å†…éƒ¨ APIï¼Œè¿™éƒ¨åˆ†å¾ˆå¯èƒ½éšç€ç‰ˆæœ¬å˜æ›´è€Œå¤±æ•ˆã€‚å› æ­¤ï¼Œæˆ‘å¹¶ä¸æ¨èè¿™ç§ä¿®æ”¹æ–¹å¼ã€‚</p>
<p>å¦‚æœä½ æ„Ÿå…´è¶£çš„è¯ï¼Œå¯ä»¥å‚è€ƒ [Project Lombok][4]ã€‚è¿™ä¸ªé¡¹ç›®è‡ªå®šä¹‰äº†ä¸€ç³»åˆ—æ³¨è§£ï¼Œå¹¶æ ¹æ®æ³¨è§£çš„å†…å®¹æ¥ä¿®æ”¹å·²æœ‰çš„æºä»£ç ã€‚ä¾‹å¦‚å®ƒæä¾›äº†<code>@Getter</code>å’Œ<code>@Setter</code>æ³¨è§£ï¼Œèƒ½å¤Ÿä¸ºç¨‹åºè‡ªåŠ¨æ·»åŠ <code>getter</code>ä»¥åŠ<code>setter</code>æ–¹æ³•ã€‚æœ‰å…³å¯¹ä½¿ç”¨å†…éƒ¨ API çš„è®¨è®ºï¼Œä½ å¯ä»¥å‚è€ƒ [è¿™ç¯‡åšå®¢][5]ï¼Œä»¥åŠ [Lombok çš„å›åº”][6]ã€‚</p>
<p>ç”¨æ³¨è§£å¤„ç†å™¨æ¥ç”Ÿæˆæºä»£ç åˆ™æ¯”è¾ƒå¸¸ç”¨ã€‚æˆ‘ä»¬ä»¥å‰ä»‹ç»è¿‡çš„å‹åŠ›æµ‹è¯• jcstressï¼Œä»¥åŠæ¥ä¸‹æ¥å³å°†ä»‹ç»çš„ JMH å·¥å…·ï¼Œéƒ½æ˜¯ä¾èµ–è¿™ç§æ–¹å¼æ¥ç”Ÿæˆæµ‹è¯•ä»£ç çš„ã€‚</p>
<pre tabindex="0"><code>package foo;
 
import java.lang.annotation.*;
 
@Target(ElementType.METHOD)
@Retention(RetentionPolicy.SOURCE)
public @interface Adapt {
  Class&lt;?&gt; value();
}
</code></pre><p>åœ¨ä¸Šé¢è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘å®šä¹‰äº†ä¸€ä¸ªæ³¨è§£<code>@Adapt</code>ã€‚è¿™ä¸ªæ³¨è§£å°†æ¥æ”¶ä¸€ä¸ª<code>Class</code>ç±»å‹çš„å‚æ•°<code>value</code>ï¼ˆå¦‚æœæ³¨è§£ç±»ä»…åŒ…å«ä¸€ä¸ªåä¸º<code>value</code>çš„å‚æ•°æ—¶ï¼Œé‚£ä¹ˆåœ¨ä½¿ç”¨æ³¨è§£æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥çœç•¥<code>value=</code>ï¼‰ï¼Œå…·ä½“ç”¨æ³•å¦‚è¿™æ®µä»£ç æ‰€ç¤ºã€‚</p>
<pre tabindex="0"><code>// Bar.java
package test;
import java.util.function.IntBinaryOperator;
import foo.Adapt;
 
public class Bar {
  @Adapt(IntBinaryOperator.class)
  public static int add(int a, int b) {
    return a + b;
  }
}
</code></pre><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªå¤„ç†<code>@Adapt</code>æ³¨è§£çš„å¤„ç†å™¨ã€‚è¯¥å¤„ç†å™¨å°†ç”Ÿæˆä¸€ä¸ªæ–°çš„æºæ–‡ä»¶ï¼Œå®ç°å‚æ•°<code>value</code>æ‰€æŒ‡å®šçš„æ¥å£ï¼Œå¹¶ä¸”è°ƒç”¨è‡³è¢«è¯¥æ³¨è§£æ‰€æ ‡æ³¨çš„æ–¹æ³•ä¹‹ä¸­ã€‚</p>
<pre tabindex="0"><code>package bar;
 
import java.io.*;
import java.util.Set;
 
import javax.annotation.processing.*;
import javax.lang.model.SourceVersion;
import javax.lang.model.element.*;
import javax.lang.model.type.TypeMirror;
import javax.lang.model.util.ElementFilter;
import javax.tools.JavaFileObject;
 
import javax.tools.Diagnostic.Kind;
 
@SupportedAnnotationTypes(&quot;foo.Adapt&quot;)
@SupportedSourceVersion(SourceVersion.RELEASE_10)
public class AdaptProcessor extends AbstractProcessor {
 
  @Override
  public boolean process(Set&lt;? extends TypeElement&gt; annotations, RoundEnvironment roundEnv) {
    for (TypeElement annotation : annotations) {
      if (!&quot;foo.Adapt&quot;.equals(annotation.getQualifiedName().toString())) {
        continue;
      }
 
      ExecutableElement targetAsKey = getExecutable(annotation, &quot;value&quot;);
 
      for (ExecutableElement annotatedMethod : ElementFilter.methodsIn(roundEnv.getElementsAnnotatedWith(annotation))) {
        if (!annotatedMethod.getModifiers().contains(Modifier.PUBLIC)) {
          processingEnv.getMessager().printMessage(Kind.ERROR, &quot;@Adapt on non-public method&quot;);
          continue;
        }
        if (!annotatedMethod.getModifiers().contains(Modifier.STATIC)) {
          // TODO support non-static methods
          continue;
        }
 
        TypeElement targetInterface = getAnnotationValueAsTypeElement(annotatedMethod, annotation, targetAsKey);
        if (targetInterface.getKind() != ElementKind.INTERFACE) {
          processingEnv.getMessager().printMessage(Kind.ERROR, &quot;@Adapt with non-interface input&quot;);
          continue;
        }
 
        TypeElement enclosingType = getTopLevelEnclosingType(annotatedMethod);
        createAdapter(enclosingType, annotatedMethod, targetInterface);
      }
    }
    return true;
  }
 
  private void createAdapter(TypeElement enclosingClass, ExecutableElement annotatedMethod,
      TypeElement targetInterface) {
    PackageElement packageElement = (PackageElement) enclosingClass.getEnclosingElement();
    String packageName = packageElement.getQualifiedName().toString();
    String className = enclosingClass.getSimpleName().toString();
    String methodName = annotatedMethod.getSimpleName().toString();
    String adapterName = className + &quot;_&quot; + methodName + &quot;Adapter&quot;;
 
    ExecutableElement overriddenMethod = getFirstNonDefaultExecutable(targetInterface);
 
    try {
      Filer filer = processingEnv.getFiler();
      JavaFileObject sourceFile = filer.createSourceFile(packageName + &quot;.&quot; + adapterName, new Element[0]);
 
      try (PrintWriter out = new PrintWriter(sourceFile.openWriter())) {
        out.println(&quot;package &quot; + packageName + &quot;;&quot;);
        out.println(&quot;import &quot; + targetInterface.getQualifiedName() + &quot;;&quot;);
        out.println();
        out.println(&quot;public class &quot; + adapterName + &quot; implements &quot; + targetInterface.getSimpleName() + &quot; {&quot;);
        out.println(&quot;  @Override&quot;);
        out.println(&quot;  public &quot; + overriddenMethod.getReturnType() + &quot; &quot; + overriddenMethod.getSimpleName()
            + formatParameter(overriddenMethod, true) + &quot; {&quot;);
        out.println(&quot;    return &quot; + className + &quot;.&quot; + methodName + formatParameter(overriddenMethod, false) + &quot;;&quot;);
        out.println(&quot;  }&quot;);
        out.println(&quot;}&quot;);
      }
    } catch (IOException e) {
      throw new RuntimeException(e);
    }
  }
 
  private ExecutableElement getExecutable(TypeElement annotation, String methodName) {
    for (ExecutableElement method : ElementFilter.methodsIn(annotation.getEnclosedElements())) {
      if (methodName.equals(method.getSimpleName().toString())) {
        return method;
      }
    }
    processingEnv.getMessager().printMessage(Kind.ERROR, &quot;Incompatible @Adapt.&quot;);
    return null;
  }
 
  private ExecutableElement getFirstNonDefaultExecutable(TypeElement annotation) {
    for (ExecutableElement method : ElementFilter.methodsIn(annotation.getEnclosedElements())) {
      if (!method.isDefault()) {
        return method;
      }
    }
    processingEnv.getMessager().printMessage(Kind.ERROR,
        &quot;Target interface should declare at least one non-default method.&quot;);
    return null;
  }
 
  private TypeElement getAnnotationValueAsTypeElement(ExecutableElement annotatedMethod, TypeElement annotation,
      ExecutableElement annotationFunction) {
    TypeMirror annotationType = annotation.asType();
 
    for (AnnotationMirror annotationMirror : annotatedMethod.getAnnotationMirrors()) {
      if (processingEnv.getTypeUtils().isSameType(annotationMirror.getAnnotationType(), annotationType)) {
        AnnotationValue value = annotationMirror.getElementValues().get(annotationFunction);
        if (value == null) {
          processingEnv.getMessager().printMessage(Kind.ERROR, &quot;Unknown @Adapt target&quot;);
          continue;
        }
        TypeMirror targetInterfaceTypeMirror = (TypeMirror) value.getValue();
        return (TypeElement) processingEnv.getTypeUtils().asElement(targetInterfaceTypeMirror);
      }
    }
    processingEnv.getMessager().printMessage(Kind.ERROR, &quot;@Adapt should contain target()&quot;);
    return null;
  }
 
  private TypeElement getTopLevelEnclosingType(ExecutableElement annotatedMethod) {
    TypeElement enclosingType = null;
    Element enclosing = annotatedMethod.getEnclosingElement();
 
    while (enclosing != null) {
      if (enclosing.getKind() == ElementKind.CLASS) {
        enclosingType = (TypeElement) enclosing;
      } else if (enclosing.getKind() == ElementKind.PACKAGE) {
        break;
      }
      enclosing = enclosing.getEnclosingElement();
    }
    return enclosingType;
  }
 
  private String formatParameter(ExecutableElement method, boolean includeType) {
    StringBuilder builder = new StringBuilder();
    builder.append('(');
    String separator = &quot;&quot;;
 
    for (VariableElement parameter : method.getParameters()) {
      builder.append(separator);
      if (includeType) {
        builder.append(parameter.asType());
        builder.append(' ');
      }
      builder.append(parameter.getSimpleName());
      separator = &quot;, &quot;;
    }
    builder.append(')');
    return builder.toString();
  }
}
</code></pre><p>åœ¨è¿™ä¸ªæ³¨è§£å¤„ç†å™¨å®ç°ä¸­ï¼Œæˆ‘ä»¬å°†è¯»å–æ³¨è§£ä¸­çš„å€¼ï¼Œå› æ­¤æˆ‘å°†ä½¿ç”¨<code>process</code>æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå¹¶é€šè¿‡å®ƒè·å¾—è¢«æ ‡æ³¨æ–¹æ³•å¯¹åº”çš„<code>@Adapt</code>æ³¨è§£ä¸­çš„<code>value</code>å€¼ã€‚</p>
<p>ä¹‹æ‰€ä»¥é‡‡ç”¨è¿™ç§éº»çƒ¦çš„æ–¹å¼ï¼Œæ˜¯å› ä¸º<code>value</code>å€¼å±äº<code>Class</code>ç±»å‹ã€‚åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œè¢«ç¼–è¯‘ä»£ç ä¸­çš„<code>Class</code>å¸¸é‡æœªå¿…è¢«åŠ è½½è¿› Java ç¼–è¯‘å™¨æ‰€åœ¨çš„è™šæ‹Ÿæœºä¸­ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡<code>process</code>æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œè·å¾—<code>value</code>æ‰€æŒ‡å‘çš„æ¥å£çš„æŠ½è±¡è¯­æ³•æ ‘ï¼Œå¹¶æ®æ­¤ç”Ÿæˆæºä»£ç ã€‚</p>
<p>ç”Ÿæˆæºä»£ç çš„æ–¹å¼å®é™…ä¸Šéå¸¸å®¹æ˜“ç†è§£ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>Filer.createSourceFile</code>æ–¹æ³•è·å¾—ä¸€ä¸ªç±»ä¼¼äºæ–‡ä»¶çš„æ¦‚å¿µï¼Œå¹¶é€šè¿‡<code>PrintWriter</code>å°†å…·ä½“çš„å†…å®¹ä¸€ä¸€å†™å…¥å³å¯ã€‚</p>
<p>å½“å°†è¯¥æ³¨è§£å¤„ç†å™¨ä½œä¸ºæ’ä»¶æ¥å…¥ Java ç¼–è¯‘å™¨æ—¶ï¼Œç¼–è¯‘å‰é¢çš„<code>test/Bar.java</code>å°†ç”Ÿæˆä¸‹è¿°ä»£ç ï¼Œå¹¶ä¸”è§¦å‘æ–°ä¸€è½®çš„ç¼–è¯‘ã€‚</p>
<pre tabindex="0"><code>package test;
import java.util.function.IntBinaryOperator;
 
public class Bar_addAdapter implements IntBinaryOperator {
  @Override
  public int applyAsInt(int arg0, int arg1) {
    return Bar.add(arg0, arg1);
  }
}
</code></pre><blockquote>
<p>æ³¨æ„ï¼Œè¯¥æ³¨è§£å¤„ç†å™¨æ²¡æœ‰å¤„ç†æ‰€ç¼–è¯‘çš„ä»£ç åŒ…åä¸ºç©ºçš„æƒ…å†µã€‚</p>
</blockquote>
<h2 id="æ€»ç»“ä¸å®è·µ">æ€»ç»“ä¸å®è·µ</h2>
<p>ä»Šå¤©æˆ‘ä»‹ç»äº† Java ç¼–è¯‘å™¨çš„æ³¨è§£å¤„ç†å™¨ã€‚</p>
<p>æ³¨è§£å¤„ç†å™¨ä¸»è¦æœ‰ä¸‰ä¸ªç”¨é€”ã€‚ä¸€æ˜¯å®šä¹‰ç¼–è¯‘è§„åˆ™ï¼Œå¹¶æ£€æŸ¥è¢«ç¼–è¯‘çš„æºæ–‡ä»¶ã€‚äºŒæ˜¯ä¿®æ”¹å·²æœ‰æºä»£ç ã€‚ä¸‰æ˜¯ç”Ÿæˆæ–°çš„æºä»£ç ã€‚å…¶ä¸­ï¼Œç¬¬äºŒç§æ¶‰åŠäº† Java ç¼–è¯‘å™¨çš„å†…éƒ¨ APIï¼Œå› æ­¤å¹¶ä¸æ¨èã€‚ç¬¬ä¸‰ç§è¾ƒä¸ºå¸¸è§ï¼Œæ˜¯ OpenJDK å·¥å…· jcstressï¼Œä»¥åŠ JMH ç”Ÿæˆæµ‹è¯•ä»£ç çš„æ–¹å¼ã€‚</p>
<p>Java æºä»£ç çš„ç¼–è¯‘è¿‡ç¨‹å¯åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼Œåˆ†åˆ«ä¸ºè§£ææºæ–‡ä»¶ç”ŸæˆæŠ½è±¡è¯­æ³•æ ‘ï¼Œè°ƒç”¨å·²æ³¨å†Œçš„æ³¨è§£å¤„ç†å™¨ï¼Œå’Œç”Ÿæˆå­—èŠ‚ç ã€‚å¦‚æœåœ¨ç¬¬ 2 æ­¥ä¸­ï¼Œæ³¨è§£å¤„ç†å™¨ç”Ÿæˆäº†æ–°çš„æºä»£ç ï¼Œé‚£ä¹ˆ Java ç¼–è¯‘å™¨å°†é‡å¤ç¬¬ 1ã€2 æ­¥ï¼Œç›´è‡³ä¸å†ç”Ÿæˆæ–°çš„æºä»£ç ã€‚</p>
<hr>
<p>ä»Šå¤©çš„å®è·µç¯èŠ‚ï¼Œè¯·å®ç°æœ¬æ–‡çš„æ¡ˆä¾‹<code>CheckGetterProcessor</code>ä¸­çš„ TODO é¡¹ï¼Œå¤„ç†ç”±<code>@CheckGetter</code>æ³¨è§£çš„å­—æ®µã€‚</p>
<p>[1]Â http://openjdk.java.net/groups/compiler/doc/compilation-overview/index.html [2]Â http://hannesdorfmann.com/annotation-processing/annotationprocessing101 [3]Â https://docs.oracle.com/javase/10/docs/api/javax/lang/model/element/package-summary.html [4]Â https://projectlombok.org/ [5]Â http://notatube.blogspot.com/2010/11/project-lombok-trick-explained.html [6]Â http://jnb.ociweb.com/jnb/jnbJan2010.html#controversy</p>

        </div>
    </article>
</div>

    </main>
    <footer>
        <div id="pagination">
            
<div class="paginator">
    <div class="prev">
        
        <a href="/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%8B%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA/26-%E5%90%91%E9%87%8F%E5%8C%96/"><span>26 å‘é‡åŒ–</span></a>
    </div>
    <div class="next">
        
        <a href="/documents/columns/java/%E6%B7%B1%E5%85%A5%E6%8B%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA/28-%E5%9F%BA%E5%87%86%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6jmh%E4%B8%8A/"><span>28 åŸºå‡†æµ‹è¯•æ¡†æ¶JMHï¼ˆä¸Šï¼‰</span></a>
    </div>
</div>

        </div>
        <div class="toggler" onclick="toggleLight(this);">ğŸ’¡</div>
        <div id="copyright" style="display: none;">
    
    
    <p>&copy; 28280 <a href="/"></a>, powered by Hugo and Qiao</p>
</div>
    </footer>
    
<script>
    function toggleLight() {
        document.getElementById('page').classList.toggle('night');
    }
</script>
</body>

</html>