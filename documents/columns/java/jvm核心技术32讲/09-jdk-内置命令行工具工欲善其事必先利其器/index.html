<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
<meta name="X-UA-Compatible" , content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<link rel="icon" type="image/png" href="/%20/favicon.png">

<title>09 JDK å†…ç½®å‘½ä»¤è¡Œå·¥å…·ï¼šå·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ | Yipsen Ye</title>
<meta name="description" content="å¾ˆå¤šæƒ…å†µä¸‹ï¼ŒJVM è¿è¡Œç¯å¢ƒä¸­å¹¶æ²¡æœ‰è¶æ‰‹çš„å·¥å…·ï¼Œæ‰€ä»¥æŒæ¡åŸºæœ¬çš„å†…ç½®å·¥å…·æ˜¯ä¸€é¡¹åŸºæœ¬åŠŸã€‚
JDK è‡ªå¸¦çš„å·¥å…·å’Œç¨‹åºå¯ä»¥åˆ†ä¸º 2 å¤§ç±»å‹ï¼š
 å¼€å‘å·¥å…· è¯Šæ–­åˆ†æå·¥å…·  JDK å†…ç½®çš„å¼€å‘å·¥å…· å†™è¿‡ Java ç¨‹åºçš„åŒå­¦ï¼Œå¯¹ JDK ä¸­çš„å¼€å‘å·¥å…·åº”è¯¥æ¯”è¾ƒç†Ÿæ‚‰ã€‚ ä¸‹é¢åˆ—ä¸¾å¸¸ç”¨çš„éƒ¨åˆ†ï¼š
å·¥å…·
ç®€ä»‹
java
Java åº”ç”¨çš„å¯åŠ¨ç¨‹åº
javac
JDK å†…ç½®çš„ç¼–è¯‘å·¥å…·
javap
åç¼–è¯‘ class æ–‡ä»¶çš„å·¥å…·
javadoc
æ ¹æ® Java ä»£ç å’Œæ ‡å‡†æ³¨é‡Šï¼Œè‡ªåŠ¨ç”Ÿæˆç›¸å…³çš„ API è¯´æ˜æ–‡æ¡£
javah
JNI å¼€å‘æ—¶ï¼Œæ ¹æ® Java ä»£ç ç”Ÿæˆéœ€è¦çš„ .h æ–‡ä»¶ã€‚
extcheck
æ£€æŸ¥æŸä¸ª jar æ–‡ä»¶å’Œè¿è¡Œæ—¶æ‰©å±• jar æœ‰æ²¡æœ‰ç‰ˆæœ¬å†²çªï¼Œå¾ˆå°‘ä½¿ç”¨
jdb
Java Debugger å¯ä»¥è°ƒè¯•æœ¬åœ°å’Œè¿œç«¯ç¨‹åºï¼Œå±äº JPDA ä¸­çš„ä¸€ä¸ª Demo å®ç°ï¼Œä¾›å…¶ä»–è°ƒè¯•å™¨å‚è€ƒã€‚å¼€å‘æ—¶å¾ˆå°‘ä½¿ç”¨
jdeps
æ¢æµ‹ class æˆ– jar åŒ…éœ€è¦çš„ä¾èµ–
jar
æ‰“åŒ…å·¥å…·ï¼Œå¯ä»¥å°†æ–‡ä»¶å’Œç›®å½•æ‰“åŒ…æˆä¸º .jar æ–‡ä»¶ï¼›.jar æ–‡ä»¶æœ¬è´¨ä¸Šå°±æ˜¯ zip æ–‡ä»¶ï¼Œåªæ˜¯åç¼€ä¸åŒã€‚ä½¿ç”¨æ—¶æŒ‰é¡ºåºå¯¹åº”å¥½é€‰é¡¹å’Œå‚æ•°å³å¯ã€‚">
<meta name="author" content="">

<link rel="stylesheet" type="text/css" href="/styles/main.css">

</head>

<body id="page">
    <header>
        <div class="nav-logo">
    <a href="http://yipsen.github.io/">
        
        <span class="nav-title">Yipsen Ye</span>
    </a>
</div>
<nav class="navbar justify-content-end">
    <ul class="nav-list">
        
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/posts/">æ–‡ç« </a>
        </li>
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/collections/">é™„è¡¨</a>
        </li>
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/about/">å…³äº</a>
        </li>
        
    </ul>
</nav>
    </header>
    <main id="content">
        
<div class="container"><aside>
    <div>
        
        
            
            
            <div class="post-category-icon"></div>
            <a href="/categories/jvm%e6%a0%b8%e5%bf%83%e6%8a%80%e6%9c%af32%e8%ae%b2/">JVMæ ¸å¿ƒæŠ€æœ¯32è®²</a>
            <ul>
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/jvm%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF32%E8%AE%B2/01-%E9%98%85%E8%AF%BB%E6%AD%A4%E4%B8%93%E6%A0%8F%E7%9A%84%E6%AD%A3%E7%A1%AE%E5%A7%BF%E5%8A%BF/">01 é˜…è¯»æ­¤ä¸“æ çš„æ­£ç¡®å§¿åŠ¿</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/jvm%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF32%E8%AE%B2/02-%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87%E5%8D%83%E9%87%8C%E4%B9%8B%E8%A1%8C%E5%A7%8B%E4%BA%8E%E8%B6%B3%E4%B8%8B/">02 ç¯å¢ƒå‡†å¤‡ï¼šåƒé‡Œä¹‹è¡Œï¼Œå§‹äºè¶³ä¸‹</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/jvm%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF32%E8%AE%B2/03-%E5%B8%B8%E7%94%A8%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87%E6%B2%A1%E6%9C%89%E9%87%8F%E5%8C%96%E5%B0%B1%E6%B2%A1%E6%9C%89%E6%94%B9%E8%BF%9B/">03 å¸¸ç”¨æ€§èƒ½æŒ‡æ ‡ï¼šæ²¡æœ‰é‡åŒ–ï¼Œå°±æ²¡æœ‰æ”¹è¿›</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/jvm%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF32%E8%AE%B2/04-jvm-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E4%B8%8D%E7%A7%AF%E8%B7%AC%E6%AD%A5%E6%97%A0%E4%BB%A5%E8%87%B3%E5%8D%83%E9%87%8C/">04 JVM åŸºç¡€çŸ¥è¯†ï¼šä¸ç§¯è·¬æ­¥ï¼Œæ— ä»¥è‡³åƒé‡Œ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/jvm%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF32%E8%AE%B2/05-java-%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF%E4%B8%8D%E7%A7%AF%E7%BB%86%E6%B5%81%E6%97%A0%E4%BB%A5%E6%88%90%E6%B1%9F%E6%B2%B3/">05 Java å­—èŠ‚ç æŠ€æœ¯ï¼šä¸ç§¯ç»†æµï¼Œæ— ä»¥æˆæ±Ÿæ²³</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/jvm%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF32%E8%AE%B2/06-java-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%E5%B1%B1%E4%B8%8D%E8%BE%9E%E5%9C%9F%E6%95%85%E8%83%BD%E6%88%90%E5%85%B6%E9%AB%98/">06 Java ç±»åŠ è½½å™¨ï¼šå±±ä¸è¾åœŸï¼Œæ•…èƒ½æˆå…¶é«˜</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/jvm%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF32%E8%AE%B2/07-java-%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E6%B5%B7%E4%B8%8D%E8%BE%9E%E6%B0%B4%E6%95%85%E8%83%BD%E6%88%90%E5%85%B6%E6%B7%B1/">07 Java å†…å­˜æ¨¡å‹ï¼šæµ·ä¸è¾æ°´ï¼Œæ•…èƒ½æˆå…¶æ·±</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/jvm%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF32%E8%AE%B2/08-jvm-%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0%E8%AF%A6%E8%A7%A3%E5%8D%9A%E8%A7%82%E8%80%8C%E7%BA%A6%E5%8F%96%E5%8E%9A%E7%A7%AF%E8%80%8C%E8%96%84%E5%8F%91/">08 JVM å¯åŠ¨å‚æ•°è¯¦è§£ï¼šåšè§‚è€Œçº¦å–ã€åšç§¯è€Œè–„å‘</a></li>
                
                
                
                    <li>09 JDK å†…ç½®å‘½ä»¤è¡Œå·¥å…·ï¼šå·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨</li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/jvm%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF32%E8%AE%B2/10-jdk-%E5%86%85%E7%BD%AE%E5%9B%BE%E5%BD%A2%E7%95%8C%E9%9D%A2%E5%B7%A5%E5%85%B7%E6%B5%B7%E9%98%94%E5%87%AD%E9%B1%BC%E8%B7%83%E5%A4%A9%E9%AB%98%E4%BB%BB%E9%B8%9F%E9%A3%9E/">10 JDK å†…ç½®å›¾å½¢ç•Œé¢å·¥å…·ï¼šæµ·é˜”å‡­é±¼è·ƒï¼Œå¤©é«˜ä»»é¸Ÿé£</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/jvm%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF32%E8%AE%B2/11-jdwp-%E7%AE%80%E4%BB%8B%E5%8D%81%E6%AD%A5%E6%9D%80%E4%B8%80%E4%BA%BA%E5%8D%83%E9%87%8C%E4%B8%8D%E7%95%99%E8%A1%8C/">11 JDWP ç®€ä»‹ï¼šåæ­¥æ€ä¸€äººï¼Œåƒé‡Œä¸ç•™è¡Œ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/jvm%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF32%E8%AE%B2/12-jmx-%E4%B8%8E%E7%9B%B8%E5%85%B3%E5%B7%A5%E5%85%B7%E5%B1%B1%E9%AB%98%E6%9C%88%E5%B0%8F%E6%B0%B4%E8%90%BD%E7%9F%B3%E5%87%BA/">12 JMX ä¸ç›¸å…³å·¥å…·ï¼šå±±é«˜æœˆå°ï¼Œæ°´è½çŸ³å‡º</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/jvm%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF32%E8%AE%B2/13-%E5%B8%B8%E8%A7%81%E7%9A%84-gc-%E7%AE%97%E6%B3%95gc-%E7%9A%84%E8%83%8C%E6%99%AF%E4%B8%8E%E5%8E%9F%E7%90%86/">13 å¸¸è§çš„ GC ç®—æ³•ï¼ˆGC çš„èƒŒæ™¯ä¸åŸç†ï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/jvm%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF32%E8%AE%B2/14-%E5%B8%B8%E8%A7%81%E7%9A%84-gc-%E7%AE%97%E6%B3%95parallelcmsg1/">14 å¸¸è§çš„ GC ç®—æ³•ï¼ˆParallelCMSG1ï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/jvm%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF32%E8%AE%B2/15-java11-zgc-%E5%92%8C-java12-shenandoah-%E4%BB%8B%E7%BB%8D%E8%8B%9F%E6%97%A5%E6%96%B0%E6%97%A5%E6%97%A5%E6%96%B0%E5%8F%88%E6%97%A5%E6%96%B0/">15 Java11 ZGC å’Œ Java12 Shenandoah ä»‹ç»ï¼šè‹Ÿæ—¥æ–°ã€æ—¥æ—¥æ–°ã€åˆæ—¥æ–°</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/jvm%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF32%E8%AE%B2/16-oracle-graalvm-%E4%BB%8B%E7%BB%8D%E4%BC%9A%E5%BD%93%E5%87%8C%E7%BB%9D%E9%A1%B6%E4%B8%80%E8%A7%88%E4%BC%97%E5%B1%B1%E5%B0%8F/">16 Oracle GraalVM ä»‹ç»ï¼šä¼šå½“å‡Œç»é¡¶ã€ä¸€è§ˆä¼—å±±å°</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/jvm%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF32%E8%AE%B2/17-gc-%E6%97%A5%E5%BF%97%E8%A7%A3%E8%AF%BB%E4%B8%8E%E5%88%86%E6%9E%90%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE/">17 GC æ—¥å¿—è§£è¯»ä¸åˆ†æï¼ˆåŸºç¡€é…ç½®ï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/jvm%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF32%E8%AE%B2/18-gc-%E6%97%A5%E5%BF%97%E8%A7%A3%E8%AF%BB%E4%B8%8E%E5%88%86%E6%9E%90%E5%AE%9E%E4%BE%8B%E5%88%86%E6%9E%90%E4%B8%8A%E7%AF%87/">18 GC æ—¥å¿—è§£è¯»ä¸åˆ†æï¼ˆå®ä¾‹åˆ†æä¸Šç¯‡ï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/jvm%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF32%E8%AE%B2/19-gc-%E6%97%A5%E5%BF%97%E8%A7%A3%E8%AF%BB%E4%B8%8E%E5%88%86%E6%9E%90%E5%AE%9E%E4%BE%8B%E5%88%86%E6%9E%90%E4%B8%AD%E7%AF%87/">19 GC æ—¥å¿—è§£è¯»ä¸åˆ†æï¼ˆå®ä¾‹åˆ†æä¸­ç¯‡ï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/jvm%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF32%E8%AE%B2/20-gc-%E6%97%A5%E5%BF%97%E8%A7%A3%E8%AF%BB%E4%B8%8E%E5%88%86%E6%9E%90%E5%AE%9E%E4%BE%8B%E5%88%86%E6%9E%90%E4%B8%8B%E7%AF%87/">20 GC æ—¥å¿—è§£è¯»ä¸åˆ†æï¼ˆå®ä¾‹åˆ†æä¸‹ç¯‡ï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/jvm%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF32%E8%AE%B2/21-gc-%E6%97%A5%E5%BF%97%E8%A7%A3%E8%AF%BB%E4%B8%8E%E5%88%86%E6%9E%90%E7%95%AA%E5%A4%96%E7%AF%87%E5%8F%AF%E8%A7%86%E5%8C%96%E5%B7%A5%E5%85%B7/">21 GC æ—¥å¿—è§£è¯»ä¸åˆ†æï¼ˆç•ªå¤–ç¯‡å¯è§†åŒ–å·¥å…·ï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/jvm%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF32%E8%AE%B2/22-jvm-%E7%9A%84%E7%BA%BF%E7%A8%8B%E5%A0%86%E6%A0%88%E7%AD%89%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E6%93%8D%E5%8D%83%E6%9B%B2%E8%80%8C%E5%90%8E%E6%99%93%E5%A3%B0%E8%A7%82%E5%8D%83%E5%89%91%E8%80%8C%E5%90%8E%E8%AF%86%E5%99%A8/">22 JVM çš„çº¿ç¨‹å †æ ˆç­‰æ•°æ®åˆ†æï¼šæ“åƒæ›²è€Œåæ™“å£°ã€è§‚åƒå‰‘è€Œåè¯†å™¨</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/jvm%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF32%E8%AE%B2/23-%E5%86%85%E5%AD%98%E5%88%86%E6%9E%90%E4%B8%8E%E7%9B%B8%E5%85%B3%E5%B7%A5%E5%85%B7%E4%B8%8A%E7%AF%87%E5%86%85%E5%AD%98%E5%B8%83%E5%B1%80%E4%B8%8E%E5%88%86%E6%9E%90%E5%B7%A5%E5%85%B7/">23 å†…å­˜åˆ†æä¸ç›¸å…³å·¥å…·ä¸Šç¯‡ï¼ˆå†…å­˜å¸ƒå±€ä¸åˆ†æå·¥å…·ï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/jvm%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF32%E8%AE%B2/24-%E5%86%85%E5%AD%98%E5%88%86%E6%9E%90%E4%B8%8E%E7%9B%B8%E5%85%B3%E5%B7%A5%E5%85%B7%E4%B8%8B%E7%AF%87%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%88%86%E6%9E%90/">24 å†…å­˜åˆ†æä¸ç›¸å…³å·¥å…·ä¸‹ç¯‡ï¼ˆå¸¸è§é—®é¢˜åˆ†æï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/jvm%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF32%E8%AE%B2/25-fastthread-%E7%9B%B8%E5%85%B3%E7%9A%84%E5%B7%A5%E5%85%B7%E4%BB%8B%E7%BB%8D%E6%AC%B2%E7%A9%B7%E5%8D%83%E9%87%8C%E7%9B%AE%E6%9B%B4%E4%B8%8A%E4%B8%80%E5%B1%82%E6%A5%BC/">25 FastThread ç›¸å…³çš„å·¥å…·ä»‹ç»ï¼šæ¬²ç©·åƒé‡Œç›®ï¼Œæ›´ä¸Šä¸€å±‚æ¥¼</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/jvm%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF32%E8%AE%B2/26-%E9%9D%A2%E4%B8%B4%E5%A4%8D%E6%9D%82%E9%97%AE%E9%A2%98%E6%97%B6%E7%9A%84%E5%87%A0%E4%B8%AA%E9%AB%98%E7%BA%A7%E5%B7%A5%E5%85%B7%E5%AE%83%E5%B1%B1%E4%B9%8B%E7%9F%B3%E5%8F%AF%E4%BB%A5%E6%94%BB%E7%8E%89/">26 é¢ä¸´å¤æ‚é—®é¢˜æ—¶çš„å‡ ä¸ªé«˜çº§å·¥å…·ï¼šå®ƒå±±ä¹‹çŸ³ï¼Œå¯ä»¥æ”»ç‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/jvm%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF32%E8%AE%B2/27-jvm-%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5%E5%88%86%E6%9E%90%E4%B8%8A%E7%AF%87%E8%B0%83%E4%BC%98%E7%BB%8F%E9%AA%8C/">27 JVM é—®é¢˜æ’æŸ¥åˆ†æä¸Šç¯‡ï¼ˆè°ƒä¼˜ç»éªŒï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/jvm%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF32%E8%AE%B2/28-jvm-%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5%E5%88%86%E6%9E%90%E4%B8%8B%E7%AF%87%E6%A1%88%E4%BE%8B%E5%AE%9E%E6%88%98/">28 JVM é—®é¢˜æ’æŸ¥åˆ†æä¸‹ç¯‡ï¼ˆæ¡ˆä¾‹å®æˆ˜ï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/jvm%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF32%E8%AE%B2/29-gc-%E7%96%91%E9%9A%BE%E6%83%85%E5%86%B5%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5%E4%B8%8E%E5%88%86%E6%9E%90%E4%B8%8A%E7%AF%87/">29 GC ç–‘éš¾æƒ…å†µé—®é¢˜æ’æŸ¥ä¸åˆ†æï¼ˆä¸Šç¯‡ï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/jvm%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF32%E8%AE%B2/30-gc-%E7%96%91%E9%9A%BE%E6%83%85%E5%86%B5%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5%E4%B8%8E%E5%88%86%E6%9E%90%E4%B8%8B%E7%AF%87/">30 GC ç–‘éš¾æƒ…å†µé—®é¢˜æ’æŸ¥ä¸åˆ†æï¼ˆä¸‹ç¯‡ï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/jvm%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF32%E8%AE%B2/31-jvm-%E7%9B%B8%E5%85%B3%E7%9A%84%E5%B8%B8%E8%A7%81%E9%9D%A2%E8%AF%95%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB%E8%BF%90%E7%AD%B9%E7%AD%96%E5%B8%B7%E5%B8%90%E4%B9%8B%E4%B8%AD%E5%86%B3%E8%83%9C%E4%BA%8E%E5%8D%83%E9%87%8C%E4%B9%8B%E5%A4%96/">31 JVM ç›¸å…³çš„å¸¸è§é¢è¯•é—®é¢˜æ±‡æ€»ï¼šè¿ç­¹ç­–å¸·å¸ä¹‹ä¸­ï¼Œå†³èƒœäºåƒé‡Œä¹‹å¤–</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/java/jvm%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF32%E8%AE%B2/32-%E5%BA%94%E5%AF%B9%E5%AE%B9%E5%99%A8%E6%97%B6%E4%BB%A3%E9%9D%A2%E4%B8%B4%E7%9A%84%E6%8C%91%E6%88%98%E9%95%BF%E9%A3%8E%E7%A0%B4%E6%B5%AA%E4%BC%9A%E6%9C%89%E6%97%B6%E7%9B%B4%E6%8C%82%E4%BA%91%E5%B8%86%E6%B5%8E%E6%B2%A7%E6%B5%B7/">32 åº”å¯¹å®¹å™¨æ—¶ä»£é¢ä¸´çš„æŒ‘æˆ˜ï¼šé•¿é£ç ´æµªä¼šæœ‰æ—¶ã€ç›´æŒ‚äº‘å¸†æµæ²§æµ·</a></li>
                
                
            </ul>
        
    </div>
</aside>

<style>
    aside {
        position: fixed;
        left: 20px;
        background: #ffdee3;
        border-radius: 6px;
        padding: 20px;
        padding-top: 60px;
        box-shadow: 5px 10px #888;
        list-style-type: none;
        display: none;
    }

    .post-category-icon {
        position: absolute;
        width: 80px;
        height: 80px;
        top: -40px;
        left: 50%;
        margin-left: -40px;
        text-align: center;
        font-size: 36px;
        content: 'J';
        background: #ffdee3;
        border-radius: 100%;
        border: 10px solid #fff;
        box-shadow: 5px 10px #888;
    }
</style><article class="post-block">
        <h1 class="post-title">09 JDK å†…ç½®å‘½ä»¤è¡Œå·¥å…·ï¼šå·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨</h1>
        <div class="post-info">
            <div class="post-date"> 
                <span>2021-12-22 01:45:09</span>
            </div>
        </div>
        <div class="post-content">
            <p>å¾ˆå¤šæƒ…å†µä¸‹ï¼ŒJVM è¿è¡Œç¯å¢ƒä¸­å¹¶æ²¡æœ‰è¶æ‰‹çš„å·¥å…·ï¼Œæ‰€ä»¥æŒæ¡åŸºæœ¬çš„å†…ç½®å·¥å…·æ˜¯ä¸€é¡¹åŸºæœ¬åŠŸã€‚</p>
<p>JDK è‡ªå¸¦çš„å·¥å…·å’Œç¨‹åºå¯ä»¥åˆ†ä¸º 2 å¤§ç±»å‹ï¼š</p>
<ol>
<li>å¼€å‘å·¥å…·</li>
<li>è¯Šæ–­åˆ†æå·¥å…·</li>
</ol>
<h3 id="jdk-å†…ç½®çš„å¼€å‘å·¥å…·">JDK å†…ç½®çš„å¼€å‘å·¥å…·</h3>
<p>å†™è¿‡ Java ç¨‹åºçš„åŒå­¦ï¼Œå¯¹ JDK ä¸­çš„å¼€å‘å·¥å…·åº”è¯¥æ¯”è¾ƒç†Ÿæ‚‰ã€‚ ä¸‹é¢åˆ—ä¸¾å¸¸ç”¨çš„éƒ¨åˆ†ï¼š</p>
<p>å·¥å…·</p>
<p>ç®€ä»‹</p>
<p>java</p>
<p>Java åº”ç”¨çš„å¯åŠ¨ç¨‹åº</p>
<p>javac</p>
<p>JDK å†…ç½®çš„ç¼–è¯‘å·¥å…·</p>
<p>javap</p>
<p>åç¼–è¯‘ class æ–‡ä»¶çš„å·¥å…·</p>
<p><strong>javadoc</strong></p>
<p>æ ¹æ® Java ä»£ç å’Œæ ‡å‡†æ³¨é‡Šï¼Œè‡ªåŠ¨ç”Ÿæˆç›¸å…³çš„ API è¯´æ˜æ–‡æ¡£</p>
<p><strong>javah</strong></p>
<p>JNI å¼€å‘æ—¶ï¼Œæ ¹æ® Java ä»£ç ç”Ÿæˆéœ€è¦çš„ .h æ–‡ä»¶ã€‚</p>
<p>extcheck</p>
<p>æ£€æŸ¥æŸä¸ª jar æ–‡ä»¶å’Œè¿è¡Œæ—¶æ‰©å±• jar æœ‰æ²¡æœ‰ç‰ˆæœ¬å†²çªï¼Œå¾ˆå°‘ä½¿ç”¨</p>
<p>jdb</p>
<p>Java Debugger å¯ä»¥è°ƒè¯•æœ¬åœ°å’Œè¿œç«¯ç¨‹åºï¼Œå±äº JPDA ä¸­çš„ä¸€ä¸ª Demo å®ç°ï¼Œä¾›å…¶ä»–è°ƒè¯•å™¨å‚è€ƒã€‚å¼€å‘æ—¶å¾ˆå°‘ä½¿ç”¨</p>
<p>jdeps</p>
<p>æ¢æµ‹ class æˆ– jar åŒ…éœ€è¦çš„ä¾èµ–</p>
<p>jar</p>
<p>æ‰“åŒ…å·¥å…·ï¼Œå¯ä»¥å°†æ–‡ä»¶å’Œç›®å½•æ‰“åŒ…æˆä¸º .jar æ–‡ä»¶ï¼›.jar æ–‡ä»¶æœ¬è´¨ä¸Šå°±æ˜¯ zip æ–‡ä»¶ï¼Œåªæ˜¯åç¼€ä¸åŒã€‚ä½¿ç”¨æ—¶æŒ‰é¡ºåºå¯¹åº”å¥½é€‰é¡¹å’Œå‚æ•°å³å¯ã€‚</p>
<p>keytool</p>
<p>å®‰å…¨è¯ä¹¦å’Œå¯†é’¥çš„ç®¡ç†å·¥å…·ï¼ˆæ”¯æŒç”Ÿæˆã€å¯¼å…¥ã€å¯¼å‡ºç­‰æ“ä½œï¼‰</p>
<p>jarsigner</p>
<p>jar æ–‡ä»¶ç­¾åå’ŒéªŒè¯å·¥å…·</p>
<p>policytool</p>
<p>å®é™…ä¸Šè¿™æ˜¯ä¸€æ¬¾å›¾å½¢ç•Œé¢å·¥å…·ï¼Œç®¡ç†æœ¬æœºçš„ Java å®‰å…¨ç­–ç•¥</p>
<p>å¼€å‘å·¥å…·æ­¤å¤„ä¸åšè¯¦ç»†ä»‹ç»ï¼Œæœ‰å…´è¶£çš„åŒå­¦è¯·å‚è€ƒæ–‡æœ«çš„é“¾æ¥ã€‚</p>
<p>ä¸‹é¢ä»‹ç»è¯Šæ–­å’Œåˆ†æå·¥å…·ã€‚</p>
<h3 id="å‘½ä»¤è¡Œè¯Šæ–­å’Œåˆ†æå·¥å…·">å‘½ä»¤è¡Œè¯Šæ–­å’Œåˆ†æå·¥å…·</h3>
<p>JDK å†…ç½®äº†å„ç§å‘½ä»¤è¡Œå·¥å…·ï¼Œæ¡ä»¶å—é™æ—¶æˆ‘ä»¬å¯ä»¥å…ˆç”¨å‘½ä»¤è¡Œå·¥å…·å¿«é€ŸæŸ¥çœ‹ JVM å®ä¾‹çš„åŸºæœ¬æƒ…å†µã€‚</p>
<blockquote>
<p>macOS Xã€Windows ç³»ç»Ÿçš„æŸäº›è´¦æˆ·æƒé™ä¸å¤Ÿï¼Œæœ‰äº›å·¥å…·å¯èƒ½ä¼šæŠ¥é”™/å¤±è´¥ï¼Œå‡å¦‚å‡ºé—®é¢˜äº†è¯·æ’é™¤è¿™ä¸ªå› ç´ ã€‚</p>
</blockquote>
<h3 id="jps-å·¥å…·ç®€ä»‹">JPS å·¥å…·ç®€ä»‹</h3>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œæ“ä½œç³»ç»Ÿæä¾›ä¸€ä¸ªå·¥å…·å«åš psï¼Œç”¨äºæ˜¾ç¤ºè¿›ç¨‹çŠ¶æ€ï¼ˆProcess Statusï¼‰ã€‚</p>
<p>Javaä¹Ÿ æä¾›äº†ç±»ä¼¼çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå«åš JPSï¼Œç”¨äºå±•ç¤º Java è¿›ç¨‹ä¿¡æ¯ï¼ˆåˆ—è¡¨ï¼‰ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒJPS å±•ç¤ºçš„æ˜¯å½“å‰ç”¨æˆ·å¯çœ‹è§çš„ Java è¿›ç¨‹ï¼Œå¦‚æœçœ‹ä¸è§æŸäº›è¿›ç¨‹å¯èƒ½éœ€è¦ sudoã€su ä¹‹ç±»çš„å‘½ä»¤æ¥åˆ‡æ¢æƒé™ã€‚</p>
<p>æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯ï¼š</p>
<blockquote>
<p>$ <code>jps -help</code></p>
</blockquote>
<pre tabindex="0"><code>usage: jps [-help]
       jps [-q] [-mlvV] [&lt;hostid&gt;]
Definitions:
    &lt;hostid&gt;:      &lt;hostname&gt;[:&lt;port&gt;]

</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œ è¿™äº›å‚æ•°åˆ†ä¸ºäº†å¤šä¸ªç»„ï¼Œ<code>-help</code>ã€<code>-q</code>ã€<code>-mlvV</code>ï¼Œ åŒä¸€ç»„å¯ä»¥å…±ç”¨ä¸€ä¸ª <code>-</code>ã€‚</p>
<p>å¸¸ç”¨å‚æ•°æ˜¯å°å†™çš„ <code>-v</code>ï¼Œæ˜¾ç¤ºä¼ é€’ç»™ JVM çš„å¯åŠ¨å‚æ•°ã€‚</p>
<blockquote>
<p>$ <code>jps -v</code></p>
</blockquote>
<pre tabindex="0"><code>15883 Jps -Dapplication.home=/usr/local/jdk1.8.0_74 -Xms8m
6446 Jstatd -Dapplication.home=/usr/local/jdk1.8.0_74 -Xms8m
        -Djava.security.policy=/etc/java/jstatd.all.policy
32383 Bootstrap -Xmx4096m -XX:+UseG1GC -verbose:gc
        -XX:+PrintGCDateStamps -XX:+PrintGCDetails
        -Xloggc:/xxx-tomcat/logs/gc.log
        -Dcatalina.base=/xxx-tomcat -Dcatalina.home=/data/tomcat

</code></pre><p>çœ‹çœ‹è¾“å‡ºçš„å†…å®¹ï¼Œå…¶ä¸­æœ€é‡è¦çš„ä¿¡æ¯æ˜¯å‰é¢çš„è¿›ç¨‹ IDï¼ˆPIDï¼‰ã€‚</p>
<p>å…¶ä»–å‚æ•°ä¸å¤ªå¸¸ç”¨ï¼š</p>
<ul>
<li><code>-q</code>ï¼šåªæ˜¾ç¤ºè¿›ç¨‹å·ã€‚</li>
<li><code>-m</code>ï¼šæ˜¾ç¤ºä¼ ç»™ main æ–¹æ³•çš„å‚æ•°ä¿¡æ¯</li>
<li><code>-l</code>ï¼šæ˜¾ç¤ºå¯åŠ¨ class çš„å®Œæ•´ç±»åï¼Œæˆ–è€…å¯åŠ¨ jar çš„å®Œæ•´è·¯å¾„</li>
<li><code>-V</code>ï¼šå¤§å†™çš„ Vï¼Œè¿™ä¸ªå‚æ•°æœ‰é—®é¢˜ï¼Œç›¸å½“äºæ²¡ä¼ ä¸€æ ·ã€‚å®˜æ–¹è¯´çš„è·Ÿ <code>-q</code> å·®ä¸å¤šã€‚</li>
<li><code>&lt;hostid&gt;</code>ï¼šéƒ¨åˆ†æ˜¯è¿œç¨‹ä¸»æœºçš„æ ‡è¯†ç¬¦ï¼Œéœ€è¦è¿œç¨‹ä¸»æœºå¯åŠ¨ <code>jstatd</code> æœåŠ¡å™¨æ”¯æŒã€‚</li>
</ul>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæ ¼å¼ä¸º <code>&lt;hostname&gt;[:&lt;port&gt;]</code>ï¼Œä¸èƒ½ç”¨ IPï¼Œç¤ºä¾‹ï¼š<code>jps -v sample.com:1099</code>ã€‚</p>
<p>çŸ¥é“ JVM è¿›ç¨‹çš„ PID ä¹‹åï¼Œå°±å¯ä»¥ä½¿ç”¨å…¶ä»–å·¥å…·æ¥è¿›è¡Œè¯Šæ–­äº†ã€‚</p>
<h3 id="jstat-å·¥å…·ç®€ä»‹">jstat å·¥å…·ç®€ä»‹</h3>
<p>jstat ç”¨æ¥ç›‘æ§ JVM å†…ç½®çš„å„ç§ç»Ÿè®¡ä¿¡æ¯ï¼Œä¸»è¦æ˜¯å†…å­˜å’Œ GC ç›¸å…³çš„ä¿¡æ¯ã€‚</p>
<p>æŸ¥çœ‹ jstat çš„å¸®åŠ©ä¿¡æ¯ï¼Œå¤§è‡´å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>$ <code>jstat -help</code></p>
</blockquote>
<pre tabindex="0"><code>Usage: jstat -help|-options
       jstat -&lt;option&gt; [-t] [-h&lt;lines&gt;] &lt;vmid&gt; [&lt;interval&gt; [&lt;count&gt;]]

Definitions:
  &lt;option&gt;      å¯ç”¨çš„é€‰é¡¹ï¼ŒæŸ¥çœ‹è¯¦æƒ…è¯·ä½¿ç”¨ -options
  &lt;vmid&gt;        è™šæ‹Ÿæœºæ ‡è¯†ç¬¦ï¼Œæ ¼å¼ï¼š&lt;lvmid&gt;[@&lt;hostname&gt;[:&lt;port&gt;]]
  &lt;lines&gt;       æ ‡é¢˜è¡Œé—´éš”çš„é¢‘ç‡.
  &lt;interval&gt;    é‡‡æ ·å‘¨æœŸï¼Œ&lt;n&gt;[&quot;ms&quot;|&quot;s&quot;]ï¼Œé»˜è®¤å•ä½æ˜¯æ¯«ç§’ &quot;ms&quot;
  &lt;count&gt;       é‡‡ç”¨æ€»æ¬¡æ•°
  -J&lt;flag&gt;      ä¼ ç»™jstatåº•å±‚JVMçš„ &lt;flag&gt; å‚æ•°

</code></pre><p>å†æ¥çœ‹çœ‹ <code>&lt;option&gt;</code> éƒ¨åˆ†æ”¯æŒå“ªäº›é€‰é¡¹ï¼š</p>
<blockquote>
<p>$ <code>jstat -options</code></p>
</blockquote>
<pre tabindex="0"><code>-class
-compiler
-gc
-gccapacity
-gccause
-gcmetacapacity
-gcnew
-gcnewcapacity
-gcold
-gcoldcapacity
-gcutil
-printcompilation

</code></pre><p>ç®€å•è¯´æ˜è¿™äº›é€‰é¡¹ï¼Œä¸æ„Ÿå…´è¶£å¯ä»¥è·³ç€è¯»ã€‚</p>
<ul>
<li><code>-class</code>ï¼šç±»åŠ è½½ï¼ˆClass loaderï¼‰ä¿¡æ¯ç»Ÿè®¡ã€‚</li>
<li><code>-compiler</code>ï¼šJIT å³æ—¶ç¼–è¯‘å™¨ç›¸å…³çš„ç»Ÿè®¡ä¿¡æ¯ã€‚</li>
<li><code>-gc</code>ï¼šGC ç›¸å…³çš„å †å†…å­˜ä¿¡æ¯ï¼Œç”¨æ³•ï¼š<code>jstat -gc -h 10 -t 864 1s 20</code>ã€‚</li>
<li><code>-gccapacity</code>ï¼šå„ä¸ªå†…å­˜æ± åˆ†ä»£ç©ºé—´çš„å®¹é‡ã€‚</li>
<li><code>-gccause</code>ï¼šçœ‹ä¸Šæ¬¡ GCã€æœ¬æ¬¡ GCï¼ˆå¦‚æœæ­£åœ¨ GC ä¸­ï¼‰çš„åŸå› ï¼Œå…¶ä»–è¾“å‡ºå’Œ <code>-gcutil</code> é€‰é¡¹ä¸€è‡´ã€‚</li>
<li><code>-gcnew</code>ï¼šå¹´è½»ä»£çš„ç»Ÿè®¡ä¿¡æ¯ï¼ˆNew = Young = Eden + S0 + S1ï¼‰ã€‚</li>
<li><code>-gcnewcapacity</code>ï¼šå¹´è½»ä»£ç©ºé—´å¤§å°ç»Ÿè®¡ã€‚</li>
<li><code>-gcold</code>ï¼šè€å¹´ä»£å’Œå…ƒæ•°æ®åŒºçš„è¡Œä¸ºç»Ÿè®¡ã€‚</li>
<li><code>-gcoldcapacity</code>ï¼šold ç©ºé—´å¤§å°ç»Ÿè®¡ã€‚</li>
<li><code>-gcmetacapacity</code>ï¼šmeta åŒºå¤§å°ç»Ÿè®¡ã€‚</li>
<li><code>-gcutil</code>ï¼šGC ç›¸å…³åŒºåŸŸçš„ä½¿ç”¨ç‡ï¼ˆutilizationï¼‰ç»Ÿè®¡ã€‚</li>
<li><code>-printcompilation</code>ï¼šæ‰“å° JVM ç¼–è¯‘ç»Ÿè®¡ä¿¡æ¯ã€‚</li>
</ul>
<p>å®ä¾‹ï¼š</p>
<pre tabindex="0"><code>jstat -gcutil -t 864

</code></pre><p><code>-gcutil</code> é€‰é¡¹æ˜¯ç»Ÿè®¡ GC ç›¸å…³åŒºåŸŸçš„ä½¿ç”¨ç‡ï¼ˆutilizationï¼‰ï¼Œç»“æœå¦‚ä¸‹ï¼š</p>
<p>Timestamp</p>
<p>S0</p>
<p>S1</p>
<p>E</p>
<p>O</p>
<p>M</p>
<p>CCS</p>
<p>YGC</p>
<p>YGCT</p>
<p>FGC</p>
<p>FGCT</p>
<p>GCT</p>
<p>14251645.5</p>
<p>0.00</p>
<p>13.50</p>
<p>55.05</p>
<p>71.91</p>
<p>83.84</p>
<p>69.52</p>
<p>113767</p>
<p>206.036</p>
<p>4</p>
<p>0.122</p>
<p>206.158</p>
<p><code>-t</code> é€‰é¡¹çš„ä½ç½®æ˜¯å›ºå®šçš„ï¼Œä¸èƒ½åœ¨å‰ä¹Ÿä¸èƒ½åœ¨åã€‚å¯ä»¥çœ‹å‡ºæ˜¯ç”¨äºæ˜¾ç¤ºæ—¶é—´æˆ³ï¼Œå³ JVM å¯åŠ¨åˆ°ç°åœ¨çš„ç§’æ•°ã€‚</p>
<p>ç®€å•åˆ†æä¸€ä¸‹ï¼š</p>
<ul>
<li>Timestamp åˆ—ï¼šJVM å¯åŠ¨äº† 1425 ä¸‡ç§’ï¼Œå¤§çº¦ 164 å¤©ã€‚</li>
<li>S0ï¼šå°±æ˜¯ 0 å·å­˜æ´»åŒºçš„ç™¾åˆ†æ¯”ä½¿ç”¨ç‡ã€‚0% å¾ˆæ­£å¸¸ï¼Œå› ä¸º S0 å’Œ S1 éšæ—¶æœ‰ä¸€ä¸ªæ˜¯ç©ºçš„ã€‚</li>
<li>S1ï¼šå°±æ˜¯ 1 å·å­˜æ´»åŒºçš„ç™¾åˆ†æ¯”ä½¿ç”¨ç‡ã€‚</li>
<li>Eï¼šå°±æ˜¯ Eden åŒºï¼Œæ–°ç”Ÿä»£çš„ç™¾åˆ†æ¯”ä½¿ç”¨ç‡ã€‚</li>
<li>Oï¼šå°±æ˜¯ Old åŒºï¼Œè€å¹´ä»£ã€‚ç™¾åˆ†æ¯”ä½¿ç”¨ç‡ã€‚</li>
<li>Mï¼šå°±æ˜¯ Meta åŒºï¼Œå…ƒæ•°æ®åŒºç™¾åˆ†æ¯”ä½¿ç”¨ç‡ã€‚</li>
<li>CCSï¼šå‹ç¼© class ç©ºé—´ï¼ˆCompressed class spaceï¼‰çš„ç™¾åˆ†æ¯”ä½¿ç”¨ç‡ã€‚</li>
<li>YGCï¼ˆYoung GCï¼‰ï¼šå¹´è½»ä»£ GC çš„æ¬¡æ•°ã€‚11 ä¸‡å¤šæ¬¡ï¼Œä¸ç®—å°‘ã€‚</li>
<li>YGCT å¹´è½»ä»£ GC æ¶ˆè€—çš„æ€»æ—¶é—´ã€‚206 ç§’ï¼Œå æ€»è¿è¡Œæ—¶é—´çš„ä¸‡åˆ†ä¹‹ä¸€ä¸åˆ°ï¼ŒåŸºæœ¬ä¸Šå¯å¿½ç•¥ã€‚</li>
<li>FGCï¼šFullGC çš„æ¬¡æ•°ï¼Œå¯ä»¥çœ‹åˆ°åªå‘ç”Ÿäº† 4 æ¬¡ï¼Œé—®é¢˜åº”è¯¥ä¸å¤§ã€‚</li>
<li>FGCTï¼šFullGC çš„æ€»æ—¶é—´ï¼Œ0.122 ç§’ï¼Œå¹³å‡æ¯æ¬¡ 30ms å·¦å³ï¼Œå¤§éƒ¨åˆ†ç³»ç»Ÿåº”è¯¥èƒ½æ‰¿å—ã€‚</li>
<li>GCTï¼šæ‰€æœ‰ GC åŠ èµ·æ¥æ¶ˆè€—çš„æ€»æ—¶é—´ï¼Œå³ YGCT + FGCTã€‚</li>
</ul>
<p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>-gcutil</code> è¿™ä¸ªé€‰é¡¹å‡ºæ¥çš„ä¿¡æ¯ä¸å¤ªå¥½ç”¨ï¼Œç»Ÿè®¡çš„ç»“æœæ˜¯ç™¾åˆ†æ¯”ï¼Œä¸å¤ªç›´è§‚ã€‚</p>
<p>å†çœ‹çœ‹ <code>-gc</code> é€‰é¡¹ï¼ŒGC ç›¸å…³çš„å †å†…å­˜ä¿¡æ¯ã€‚</p>
<pre tabindex="0"><code>jstat -gc -t 864 1s
jstat -gc -t 864 1s 3
jstat -gc -t -h 10 864 1s 15

</code></pre><p>å…¶ä¸­çš„ <code>1s</code> å äº† <code>&lt;interval&gt;</code> è¿™ä¸ªæ§½ä½ï¼Œè¡¨ç¤ºæ¯ 1 ç§’è¾“å‡ºä¸€æ¬¡ä¿¡æ¯ã€‚</p>
<p><code>1s 3</code> çš„æ„æ€æ˜¯æ¯ç§’è¾“å‡º 1 æ¬¡ï¼Œæœ€å¤š 3 æ¬¡ã€‚</p>
<p>å¦‚æœåªæŒ‡å®šåˆ·æ–°å‘¨æœŸï¼Œä¸æŒ‡å®š <code>&lt;count&gt;</code> éƒ¨åˆ†ï¼Œåˆ™ä¼šä¸€ç›´æŒç»­è¾“å‡ºã€‚ é€€å‡ºè¾“å‡ºæŒ‰ <code>CTRL+C</code> å³å¯ã€‚</p>
<p><code>-h 10</code> çš„æ„æ€æ˜¯æ¯ 10 è¡Œè¾“å‡ºä¸€æ¬¡è¡¨å¤´ã€‚</p>
<p>ç»“æœå¤§è‡´å¦‚ä¸‹ï¼š</p>
<p>Timestamp</p>
<p>S0C</p>
<p>S1C</p>
<p>S0U</p>
<p>S1U</p>
<p>EC</p>
<p>EU</p>
<p>OC</p>
<p>OU</p>
<p>MC</p>
<p>MU</p>
<p>YGC</p>
<p>YGCT</p>
<p>FGC</p>
<p>FGCT</p>
<p>14254245.3</p>
<p>1152.0</p>
<p>1152.0</p>
<p>145.6</p>
<p>0.0</p>
<p>9600.0</p>
<p>2312.8</p>
<p>11848.0</p>
<p>8527.3</p>
<p>31616.0</p>
<p>26528.6</p>
<p>113788</p>
<p>206.082</p>
<p>4</p>
<p>0.122</p>
<p>14254246.3</p>
<p>1152.0</p>
<p>1152.0</p>
<p>145.6</p>
<p>0.0</p>
<p>9600.0</p>
<p>2313.1</p>
<p>11848.0</p>
<p>8527.3</p>
<p>31616.0</p>
<p>26528.6</p>
<p>113788</p>
<p>206.082</p>
<p>4</p>
<p>0.122</p>
<p>14254247.3</p>
<p>1152.0</p>
<p>1152.0</p>
<p>145.6</p>
<p>0.0</p>
<p>9600.0</p>
<p>2313.4</p>
<p>11848.0</p>
<p>8527.3</p>
<p>31616.0</p>
<p>26528.6</p>
<p>113788</p>
<p>206.082</p>
<p>4</p>
<p>0.122</p>
<p>ä¸Šé¢çš„ç»“æœæ˜¯ç²¾ç®€è¿‡çš„ï¼Œä¸ºäº†æ’ç‰ˆå»æ‰äº† GCTã€CCSCã€CCSU è¿™ä¸‰åˆ—ã€‚çœ‹åˆ°è¿™äº›å•è¯å¯ä»¥è¯•ç€çŒœä¸€ä¸‹æ„æ€ï¼Œè¯¦ç»†çš„è§£è¯»å¦‚ä¸‹ï¼š</p>
<ul>
<li>Timestamp åˆ—ï¼šJVM å¯åŠ¨äº† 1425 ä¸‡ç§’ï¼Œå¤§çº¦ 164 å¤©ã€‚</li>
<li>S0Cï¼š0 å·å­˜æ´»åŒºçš„å½“å‰å®¹é‡ï¼ˆcapacityï¼‰ï¼Œå•ä½ kBã€‚</li>
<li>S1Cï¼š1 å·å­˜æ´»åŒºçš„å½“å‰å®¹é‡ï¼Œå•ä½ kBã€‚</li>
<li>S0Uï¼š0 å·å­˜æ´»åŒºçš„ä½¿ç”¨é‡ï¼ˆutilizationï¼‰ï¼Œå•ä½ kBã€‚</li>
<li>S1Uï¼š1 å·å­˜æ´»åŒºçš„ä½¿ç”¨é‡ï¼Œå•ä½ kBã€‚</li>
<li>ECï¼šEden åŒºï¼Œæ–°ç”Ÿä»£çš„å½“å‰å®¹é‡ï¼Œå•ä½ kBã€‚</li>
<li>EUï¼šEden åŒºï¼Œæ–°ç”Ÿä»£çš„ä½¿ç”¨é‡ï¼Œå•ä½ kBã€‚</li>
<li>OCï¼šOld åŒºï¼Œè€å¹´ä»£çš„å½“å‰å®¹é‡ï¼Œå•ä½ kBã€‚</li>
<li>OUï¼šOld åŒºï¼Œè€å¹´ä»£çš„ä½¿ç”¨é‡ï¼Œå•ä½ kBã€‚ ï¼ˆéœ€è¦å…³æ³¨ï¼‰</li>
<li>MCï¼šå…ƒæ•°æ®åŒºçš„å®¹é‡ï¼Œå•ä½ kBã€‚</li>
<li>MUï¼šå…ƒæ•°æ®åŒºçš„ä½¿ç”¨é‡ï¼Œå•ä½ kBã€‚</li>
<li>CCSCï¼šå‹ç¼©çš„ class ç©ºé—´å®¹é‡ï¼Œå•ä½ kBã€‚</li>
<li>CCSUï¼šå‹ç¼©çš„ class ç©ºé—´ä½¿ç”¨é‡ï¼Œå•ä½ kBã€‚</li>
<li>YGCï¼šå¹´è½»ä»£ GC çš„æ¬¡æ•°ã€‚</li>
<li>YGCTï¼šå¹´è½»ä»£ GC æ¶ˆè€—çš„æ€»æ—¶é—´ã€‚ ï¼ˆé‡ç‚¹å…³æ³¨ï¼‰</li>
<li>FGCï¼šFull GC çš„æ¬¡æ•°</li>
<li>FGCTï¼šFull GC æ¶ˆè€—çš„æ—¶é—´ã€‚ ï¼ˆé‡ç‚¹å…³æ³¨ï¼‰</li>
<li>GCTï¼šåƒåœ¾æ”¶é›†æ¶ˆè€—çš„æ€»æ—¶é—´ã€‚</li>
</ul>
<p>æœ€é‡è¦çš„ä¿¡æ¯æ˜¯ GC çš„æ¬¡æ•°å’Œæ€»æ¶ˆè€—æ—¶é—´ï¼Œå…¶æ¬¡æ˜¯è€å¹´ä»£çš„ä½¿ç”¨é‡ã€‚</p>
<p>åœ¨æ²¡æœ‰å…¶ä»–ç›‘æ§å·¥å…·çš„æƒ…å†µä¸‹ï¼Œ jstat å¯ä»¥ç®€å•æŸ¥çœ‹å„ä¸ªå†…å­˜æ± å’Œ GC çš„ä¿¡æ¯ï¼Œå¯ç”¨äºåˆ¤åˆ«æ˜¯å¦æ˜¯ GC é—®é¢˜æˆ–è€…å†…å­˜æº¢å‡ºã€‚</p>
<h3 id="jmap-å·¥å…·">jmap å·¥å…·</h3>
<p>é¢è¯•æœ€å¸¸é—®çš„å°±æ˜¯ jmap å·¥å…·äº†ã€‚jmap ä¸»è¦ç”¨æ¥ Dump å †å†…å­˜ã€‚å½“ç„¶ä¹Ÿæ”¯æŒè¾“å‡ºç»Ÿè®¡ä¿¡æ¯ã€‚</p>
<p>å®˜æ–¹æ¨èä½¿ç”¨ JDK 8 è‡ªå¸¦çš„ jcmd å·¥å…·æ¥å–ä»£ jmapï¼Œä½†æ˜¯ jmap æ·±å…¥äººå¿ƒï¼Œjcmd å¯èƒ½æš‚æ—¶å–ä»£ä¸äº†ã€‚</p>
<p>æŸ¥çœ‹ jmap å¸®åŠ©ä¿¡æ¯ï¼š</p>
<blockquote>
<p>$ <code>jmap -help</code></p>
</blockquote>
<pre tabindex="0"><code>Usage:
    jmap [option] &lt;pid&gt;
        (è¿æ¥åˆ°æœ¬åœ°è¿›ç¨‹)
    jmap [option] &lt;executable &lt;core&gt;
        (è¿æ¥åˆ° core file)
    jmap [option] [server_id@]&lt;remote-IP-hostname&gt;
        (è¿æ¥åˆ°è¿œç¨‹ debug æœåŠ¡)

where &lt;option&gt; is one of:
    &lt;none&gt;               ç­‰åŒäº Solaris çš„ pmap å‘½ä»¤
    -heap                æ‰“å° Java å †å†…å­˜æ±‡æ€»ä¿¡æ¯
    -histo[:live]        æ‰“å° Java å †å†…å­˜å¯¹è±¡çš„ç›´æ–¹å›¾ç»Ÿè®¡ä¿¡æ¯
                         å¦‚æœæŒ‡å®šäº† &quot;live&quot; é€‰é¡¹åˆ™åªç»Ÿè®¡å­˜æ´»å¯¹è±¡ï¼Œå¼ºåˆ¶è§¦å‘ä¸€æ¬¡ GC
    -clstats             æ‰“å° class loader ç»Ÿè®¡ä¿¡æ¯
    -finalizerinfo       æ‰“å°ç­‰å¾… finalization çš„å¯¹è±¡ä¿¡æ¯
    -dump:&lt;dump-options&gt; å°†å †å†…å­˜ dump ä¸º hprof äºŒè¿›åˆ¶æ ¼å¼
                         æ”¯æŒçš„ dump-optionsï¼š
                           live         åª dump å­˜æ´»å¯¹è±¡ï¼Œä¸æŒ‡å®šåˆ™å¯¼å‡ºå…¨éƒ¨ã€‚
                           format=b     äºŒè¿›åˆ¶æ ¼å¼(binary format)
                           file=&lt;file&gt;  å¯¼å‡ºæ–‡ä»¶çš„è·¯å¾„
                         ç¤ºä¾‹ï¼šjmap -dump:live,format=b,file=heap.bin &lt;pid&gt;
    -F                   å¼ºåˆ¶å¯¼å‡ºï¼Œè‹¥ jmap è¢« hang ä½ä¸å“åº”ï¼Œå¯æ–­å¼€åä½¿ç”¨æ­¤é€‰é¡¹ã€‚
                         å…¶ä¸­ &quot;live&quot; é€‰é¡¹ä¸æ”¯æŒå¼ºåˆ¶å¯¼å‡ºã€‚
    -h | -help           to print this help message
    -J&lt;flag&gt;             to pass &lt;flag&gt; directly to the runtime system

</code></pre><p>å¸¸ç”¨é€‰é¡¹å°± 3 ä¸ªï¼š</p>
<ul>
<li><code>-heap</code>ï¼šæ‰“å°å †å†…å­˜ï¼ˆ/å†…å­˜æ± ï¼‰çš„é…ç½®å’Œä½¿ç”¨ä¿¡æ¯ã€‚</li>
<li><code>-histo</code>ï¼šçœ‹å“ªäº›ç±»å ç”¨çš„ç©ºé—´æœ€å¤šï¼Œç›´æ–¹å›¾ã€‚</li>
<li><code>-dump:format=b,file=xxxx.hprof</code>ï¼šDump å †å†…å­˜ã€‚</li>
</ul>
<p>ç¤ºä¾‹ï¼šçœ‹å †å†…å­˜ç»Ÿè®¡ä¿¡æ¯ã€‚</p>
<blockquote>
<p>$ <code>jmap -heap 4524</code></p>
</blockquote>
<p>è¾“å‡ºä¿¡æ¯ï¼š</p>
<pre tabindex="0"><code>Attaching to process ID 4524, please wait...
Debugger attached successfully.
Server compiler detected.
JVM version is 25.65-b01

using thread-local object allocation.
Parallel GC with 4 thread(s)

Heap Configuration:
   MinHeapFreeRatio         = 0
   MaxHeapFreeRatio         = 100
   MaxHeapSize              = 2069889024 (1974.0MB)
   NewSize                  = 42991616 (41.0MB)
   MaxNewSize               = 689963008 (658.0MB)
   OldSize                  = 87031808 (83.0MB)
   NewRatio                 = 2
   SurvivorRatio            = 8
   MetaspaceSize            = 21807104 (20.796875MB)
   CompressedClassSpaceSize = 1073741824 (1024.0MB)
   MaxMetaspaceSize         = 17592186044415 MB
   G1HeapRegionSize         = 0 (0.0MB)

Heap Usage:
PS Young Generation
Eden Space:
   capacity = 24117248 (23.0MB)
   used     = 11005760 (10.49591064453125MB)
   free     = 13111488 (12.50408935546875MB)
   45.63439410665761% used
From Space:
   capacity = 1048576 (1.0MB)
   used     = 65536 (0.0625MB)
   free     = 983040 (0.9375MB)
   6.25% used
To Space:
   capacity = 1048576 (1.0MB)
   used     = 0 (0.0MB)
   free     = 1048576 (1.0MB)
   0.0% used
PS Old Generation
   capacity = 87031808 (83.0MB)
   used     = 22912000 (21.8505859375MB)
   free     = 64119808 (61.1494140625MB)
   26.32600715361446% used

12800 interned Strings occupying 1800664 bytes.

</code></pre><ul>
<li>Attachedï¼Œè¿ç€ï¼›</li>
<li>Detachedï¼Œåˆ†ç¦»ã€‚</li>
</ul>
<p>å¯ä»¥çœ‹åˆ°å †å†…å­˜å’Œå†…å­˜æ± çš„ç›¸å…³ä¿¡æ¯ã€‚å½“ç„¶ï¼Œè¿™äº›ä¿¡æ¯æœ‰å¤šç§æ–¹å¼å¯ä»¥å¾—åˆ°ï¼Œæ¯”å¦‚ JMXã€‚</p>
<p>çœ‹çœ‹ç›´æ–¹å›¾ï¼š</p>
<blockquote>
<p>$ <code>jmap -histo 4524</code></p>
</blockquote>
<p>ç»“æœä¸ºï¼š</p>
<pre tabindex="0"><code> num     #instances         #bytes  class name
----------------------------------------------
   1:         52214       11236072  [C
   2:        126872        5074880  java.util.TreeMap$Entry
   3:          5102        5041568  [B
   4:         17354        2310576  [I
   5:         45258        1086192  java.lang.String
......

</code></pre><p>ç®€å•åˆ†æï¼Œå…¶ä¸­ <code>[C</code> å ç”¨äº† 11MB å†…å­˜ï¼Œæ²¡å ç”¨ä»€ä¹ˆç©ºé—´ã€‚</p>
<p><code>[C</code> è¡¨ç¤º <code>chat[]</code>ï¼Œ<code>[B</code> è¡¨ç¤º <code>byte[]</code>ï¼Œ<code>[I</code> è¡¨ç¤º <code>int[]</code>ï¼Œå…¶ä»–ç±»ä¼¼ã€‚è¿™ç§åŸºç¡€æ•°æ®ç±»å‹å¾ˆéš¾åˆ†æå‡ºä»€ä¹ˆé—®é¢˜ã€‚</p>
<p>Java ä¸­çš„å¤§å¯¹è±¡ã€å·¨æ— éœ¸å¯¹è±¡ï¼Œä¸€èˆ¬éƒ½æ˜¯é•¿åº¦å¾ˆå¤§çš„æ•°ç»„ã€‚</p>
<p>Dump å †å†…å­˜ï¼š</p>
<pre tabindex="0"><code>cd $CATALINA_BASE
jmap -dump:format=b,file=3826.hprof 3826

</code></pre><p>å¯¼å‡ºå®Œæˆåï¼Œdump æ–‡ä»¶å¤§çº¦å’Œå †å†…å­˜ä¸€æ ·å¤§ã€‚å¯ä»¥æƒ³åŠæ³•å‹ç¼©å¹¶ä¼ è¾“ã€‚</p>
<p>åˆ†æ hprof æ–‡ä»¶å¯ä»¥ä½¿ç”¨ jhat æˆ–è€… <a href="https://www.eclipse.org/mat/">mat</a> å·¥å…·ã€‚</p>
<h3 id="jcmd-å·¥å…·">jcmd å·¥å…·</h3>
<p>è¯Šæ–­å·¥å…·ï¼šjcmd æ˜¯ JDK 8 æ¨å‡ºçš„ä¸€æ¬¾æœ¬åœ°è¯Šæ–­å·¥å…·ï¼Œåªæ”¯æŒè¿æ¥æœ¬æœºä¸ŠåŒä¸€ä¸ªç”¨æˆ·ç©ºé—´ä¸‹çš„ JVM è¿›ç¨‹ã€‚</p>
<p>æŸ¥çœ‹å¸®åŠ©ï¼š</p>
<blockquote>
<p>$ <code>jcmd -help</code></p>
</blockquote>
<pre tabindex="0"><code>Usage: jcmd &lt;pid | main class&gt; &lt;command ...|PerfCounter.print|-f file&gt;
   or: jcmd -l                                                   
   or: jcmd -h                                                   

  command å¿…é¡»æ˜¯æŒ‡å®š JVM å¯ç”¨çš„æœ‰æ•ˆ jcmd å‘½ä»¤ã€‚     
  å¯ä»¥ä½¿ç”¨ &quot;help&quot; å‘½ä»¤æŸ¥çœ‹è¯¥ JVM æ”¯æŒå“ªäº›å‘½ä»¤ã€‚  
  å¦‚æœæŒ‡å®š pid éƒ¨åˆ†çš„å€¼ä¸º 0ï¼Œåˆ™ä¼šå°† commands å‘é€ç»™æ‰€æœ‰å¯è§çš„ Java è¿›ç¨‹ã€‚  
  æŒ‡å®š main class åˆ™ç”¨æ¥åŒ¹é…å¯åŠ¨ç±»ã€‚å¯ä»¥éƒ¨åˆ†åŒ¹é…ã€‚ï¼ˆé€‚ç”¨åŒä¸€ä¸ªç±»å¯åŠ¨å¤šå®ä¾‹ï¼‰ã€‚                       
  If no options are given, lists Java processes (same as -p).    

  PerfCounter.print å‘½ä»¤å¯ä»¥å±•ç¤ºè¯¥è¿›ç¨‹æš´éœ²çš„å„ç§è®¡æ•°å™¨
  -f  ä»æ–‡ä»¶è¯»å–å¯æ‰§è¡Œå‘½ä»¤                 
  -l  åˆ—å‡ºï¼ˆlistï¼‰æœ¬æœºä¸Šå¯è§çš„ JVM è¿›ç¨‹                    
  -h  this help                          

</code></pre><p>æŸ¥çœ‹è¿›ç¨‹ä¿¡æ¯ï¼š</p>
<pre tabindex="0"><code>jcmd
jcmd -l
jps -lm

11155 org.jetbrains.idea.maven.server.RemoteMavenServer

</code></pre><p>è¿™å‡ ä¸ªå‘½ä»¤çš„ç»“æœå·®ä¸å¤šã€‚å¯ä»¥çœ‹åˆ°å…¶ä¸­æœ‰ä¸€ä¸ª PID ä¸º 11155 çš„è¿›ç¨‹ï¼Œä¸‹é¢çœ‹çœ‹å¯ä»¥ç”¨è¿™ä¸ª PID åšä»€ä¹ˆã€‚</p>
<p>ç»™è¿™ä¸ªè¿›ç¨‹å‘ä¸€ä¸ª help æŒ‡ä»¤ï¼š</p>
<pre tabindex="0"><code>jcmd 11155 help
jcmd RemoteMavenServer help

</code></pre><p>pid å’Œ main-class è¾“å‡ºä¿¡æ¯æ˜¯ä¸€æ ·çš„ï¼š</p>
<pre tabindex="0"><code>11155:
The following commands are available:
VM.native_memory
ManagementAgent.stop
ManagementAgent.start_local
ManagementAgent.start
GC.rotate_log
Thread.print
GC.class_stats
GC.class_histogram
GC.heap_dump
GC.run_finalization
GC.run
VM.uptime
VM.flags
VM.system_properties
VM.command_line
VM.version
help

</code></pre><p>å¯ä»¥è¯•è¯•è¿™äº›å‘½ä»¤ã€‚æŸ¥çœ‹ VM ç›¸å…³çš„ä¿¡æ¯ï¼š</p>
<pre tabindex="0"><code># JVM å®ä¾‹è¿è¡Œæ—¶é—´
jcmd 11155 VM.uptime
9307.052 s

#JVM ç‰ˆæœ¬å·
jcmd 11155 VM.version
OpenJDK 64-Bit Server VM version 25.76-b162
JDK 8.0_76

# JVM å®é™…ç”Ÿæ•ˆçš„é…ç½®å‚æ•°
jcmd 11155 VM.flags
11155:
-XX:CICompilerCount=4 -XX:InitialHeapSize=268435456
-XX:MaxHeapSize=536870912 -XX:MaxNewSize=178782208
-XX:MinHeapDeltaBytes=524288 -XX:NewSize=89128960
-XX:OldSize=179306496 -XX:+UseCompressedClassPointers
-XX:+UseCompressedOops -XX:+UseParallelGC

# æŸ¥çœ‹å‘½ä»¤è¡Œå‚æ•°
jcmd 11155 VM.command_line
VM Arguments:
jvm_args: -Xmx512m -Dfile.encoding=UTF-8
java_command: org.jetbrains.idea.maven.server.RemoteMavenServer
java_class_path (initial): ...(xxxçœç•¥)...
Launcher Type: SUN_STANDARD

# ç³»ç»Ÿå±æ€§
jcmd 11155 VM.system_properties
...
java.runtime.name=OpenJDK Runtime Environment
java.vm.version=25.76-b162
java.vm.vendor=Oracle Corporation
user.country=CN

</code></pre><p>GC ç›¸å…³çš„å‘½ä»¤ï¼Œç»Ÿè®¡æ¯ä¸ªç±»çš„å®ä¾‹å ç”¨å­—èŠ‚æ•°ã€‚</p>
<blockquote>
<p>$ <code>jcmd 11155 GC.class_histogram</code></p>
</blockquote>
<pre tabindex="0"><code> num     #instances         #bytes  class name
----------------------------------------------
   1:         11613        1420944  [C
   2:          3224         356840  java.lang.Class
   3:           797         300360  [B
   4:         11555         277320  java.lang.String
   5:          1551         193872  [I
   6:          2252         149424  [Ljava.lang.Object;

</code></pre><p>Dump å †å†…å­˜ï¼š</p>
<blockquote>
<p>$<code>jcmd 11155 help GC.heap_dump</code></p>
</blockquote>
<pre tabindex="0"><code>Syntax : GC.heap_dump [options] &lt;filename&gt;
Arguments: filename :  Name of the dump file (STRING, no default value)
Options:  -all=true æˆ–è€… -all=false (é»˜è®¤)

# ä¸¤è€…æ•ˆæœå·®ä¸å¤š; jcmd éœ€è¦æŒ‡å®šç»å¯¹è·¯å¾„ï¼› jmap ä¸èƒ½æŒ‡å®šç»å¯¹è·¯å¾„
jcmd 11155 GC.heap_dump -all=true ~/11155-by-jcmd.hprof
jmap -dump:file=./11155-by-jmap.hprof 11155

</code></pre><p>jcmd å‘çš„åœ°æ–¹åœ¨äºï¼Œå¿…é¡»æŒ‡å®šç»å¯¹è·¯å¾„ï¼Œå¦åˆ™å¯¼å‡ºçš„ hprof æ–‡ä»¶å°±ä»¥ JVM æ‰€åœ¨çš„ç›®å½•è®¡ç®—ã€‚ï¼ˆå› ä¸ºæ˜¯å‘å‘½ä»¤äº¤ç»™ JVM æ‰§è¡Œçš„ï¼‰</p>
<p>å…¶ä»–å‘½ä»¤ç”¨æ³•ç±»ä¼¼ï¼Œå¿…è¦æ—¶è¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚</p>
<h3 id="jstack-å·¥å…·">jstack å·¥å…·</h3>
<p>å‘½ä»¤è¡Œå·¥å…·ã€è¯Šæ–­å·¥å…·ï¼šjstack å·¥å…·å¯ä»¥æ‰“å°å‡º Java çº¿ç¨‹çš„è°ƒç”¨æ ˆä¿¡æ¯ï¼ˆStack Traceï¼‰ã€‚ä¸€èˆ¬ç”¨æ¥æŸ¥çœ‹å­˜åœ¨å“ªäº›çº¿ç¨‹ï¼Œè¯Šæ–­æ˜¯å¦å­˜åœ¨æ­»é”ç­‰ã€‚</p>
<p>è¿™æ—¶å€™å°±çœ‹å‡ºæ¥ç»™çº¿ç¨‹ï¼ˆæ± ï¼‰å‘½åçš„å¿…è¦æ€§äº†ï¼ˆå¼€å‘ä¸è§„èŒƒï¼Œæ•´ä¸ªé¡¹ç›®éƒ½æ˜¯å‘ï¼‰ï¼Œå…·ä½“å¯å‚è€ƒé˜¿é‡Œå·´å·´çš„ Java å¼€å‘è§„èŒƒã€‚</p>
<p>çœ‹çœ‹å¸®åŠ©ä¿¡æ¯ï¼š</p>
<blockquote>
<p>$<code>jstack -help</code></p>
</blockquote>
<pre tabindex="0"><code>Usage:
    jstack [-l] &lt;pid&gt;
        (to connect to running process)
    jstack -F [-m] [-l] &lt;pid&gt;
        (to connect to a hung process)
    jstack [-m] [-l] &lt;executable&gt; &lt;core&gt;
        (to connect to a core file)
    jstack [-m] [-l] [server_id@]&lt;remote server IP or hostname&gt;
        (to connect to a remote debug server)

Options:
    -F  to force a thread dump. Use when jstack &lt;pid&gt; does not respond (process is hung)
    -m  to print both java and native frames (mixed mode)
    -l  long listing. Prints additional information about locks
    -h or -help to print this help message

</code></pre><p>é€‰é¡¹è¯´æ˜ï¼š</p>
<ul>
<li><code>-F</code>ï¼šå¼ºåˆ¶æ‰§è¡Œ Thread Dumpï¼Œå¯åœ¨ Java è¿›ç¨‹å¡æ­»ï¼ˆhung ä½ï¼‰æ—¶ä½¿ç”¨ï¼Œæ­¤é€‰é¡¹å¯èƒ½éœ€è¦ç³»ç»Ÿæƒé™ã€‚</li>
<li><code>-m</code>ï¼šæ··åˆæ¨¡å¼ï¼ˆmixed modeï¼‰ï¼Œå°† Java å¸§å’Œ native å¸§ä¸€èµ·è¾“å‡ºï¼Œæ­¤é€‰é¡¹å¯èƒ½éœ€è¦ç³»ç»Ÿæƒé™ã€‚</li>
<li><code>-l</code>ï¼šé•¿åˆ—è¡¨æ¨¡å¼ï¼Œå°†çº¿ç¨‹ç›¸å…³çš„ locks ä¿¡æ¯ä¸€èµ·è¾“å‡ºï¼Œæ¯”å¦‚æŒæœ‰çš„é”ï¼Œç­‰å¾…çš„é”ã€‚</li>
</ul>
<p>å¸¸ç”¨çš„é€‰é¡¹æ˜¯ <code>-l</code>ï¼Œç¤ºä¾‹ç”¨æ³•ã€‚</p>
<pre tabindex="0"><code>jstack 4524
jstack -l 4524

</code></pre><p>æ­»é”çš„åŸå› ä¸€èˆ¬æ˜¯é”å®šå¤šä¸ªèµ„æºçš„é¡ºåºå‡ºäº†é—®é¢˜ï¼ˆäº¤å‰ä¾èµ–ï¼‰ï¼Œ ç½‘ä¸Šç¤ºä¾‹ä»£ç å¾ˆå¤šï¼Œæ¯”å¦‚æœç´¢â€œJava æ­»é” ç¤ºä¾‹â€ã€‚</p>
<p>åœ¨ Linux å’Œ macOS ä¸Šï¼Œ<code>jstack pid</code> çš„æ•ˆæœè·Ÿ <code>kill -3 pid</code> ç›¸åŒã€‚</p>
<h3 id="jinfo-å·¥å…·">jinfo å·¥å…·</h3>
<p>è¯Šæ–­å·¥å…·ï¼šjinfo ç”¨æ¥æŸ¥çœ‹å…·ä½“ç”Ÿæ•ˆçš„é…ç½®ä¿¡æ¯ä»¥åŠç³»ç»Ÿå±æ€§ï¼Œè¿˜æ”¯æŒåŠ¨æ€å¢åŠ ä¸€éƒ¨åˆ†å‚æ•°ã€‚</p>
<p>çœ‹çœ‹å¸®åŠ©ä¿¡æ¯ï¼š</p>
<blockquote>
<p>$ <code>jinfo -help</code></p>
</blockquote>
<pre tabindex="0"><code>Usage:
    jinfo [option] &lt;pid&gt;
        (to connect to running process)
    jinfo [option] &lt;executable &lt;core&gt;
        (to connect to a core file)
    jinfo [option] [server_id@]&lt;remote-IP-hostname&gt;
        (to connect to remote debug server)

where &lt;option&gt; is one of:
    -flag &lt;name&gt;         to print the value of the named VM flag
    -flag [+|-]&lt;name&gt;    to enable or disable the named VM flag
    -flag &lt;name&gt;=&lt;value&gt; to set the named VM flag to the given value
    -flags               to print VM flags
    -sysprops            to print Java system properties
    &lt;no option&gt;          to print both of the above
    -h | -help           to print this help message

</code></pre><p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<pre tabindex="0"><code>jinfo 36663
jinfo -flags 36663

</code></pre><p>ä¸åŠ å‚æ•°è¿‡æ»¤ï¼Œåˆ™æ‰“å°æ‰€æœ‰ä¿¡æ¯ã€‚</p>
<p>jinfo åœ¨ Windows ä¸Šæ¯”è¾ƒç¨³å®šã€‚åœ¨ macOS ä¸Šéœ€è¦ root æƒé™ï¼Œæˆ–æ˜¯éœ€è¦åœ¨æç¤ºä¸‹è¾“å…¥å½“å‰ç”¨æˆ·çš„å¯†ç ã€‚</p>
<p><img src="http://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/JVM%20%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF%2032%20%E8%AE%B2%EF%BC%88%E5%AE%8C%EF%BC%89/assets/780663e0-2608-11ea-aa89-e1cacb5bf377" alt="56345767.png"></p>
<p>ç„¶åå°±å¯ä»¥çœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯ï¼š</p>
<pre tabindex="0"><code>jinfo 36663
Attaching to process ID 36663, please wait...
Debugger attached successfully.
Server compiler detected.
JVM version is 25.131-b11
Java System Properties:

java.runtime.name = Java(TM) SE Runtime Environment
java.vm.version = 25.131-b11
sun.boot.library.path = /Library/Java/JavaVirtualMachines/jdk1.8.0_131.jdk/Contents/Home/jre/lib
// ä¸­é—´çœç•¥äº†å‡ åè¡Œ
java.ext.dirs = /Users/kimmking/Library/Java/Extensions:/Library/Java/JavaVirtualMachines/jdk1.8.0_131.jdk/Contents/Home/jre/lib/ext:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java
sun.boot.class.path = /Library/Java/JavaVirtualMachines/jdk1.8.0_131.jdk/Contents/Home/jre/lib/resources.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_131.jdk/Contents/Home/jre/lib/rt.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_131.jdk/Contents/Home/jre/lib/sunrsasign.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_131.jdk/Contents/Home/jre/lib/jsse.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_131.jdk/Contents/Home/jre/lib/jce.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_131.jdk/Contents/Home/jre/lib/charsets.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_131.jdk/Contents/Home/jre/lib/jfr.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_131.jdk/Contents/Home/jre/classes
java.vendor = Oracle Corporation
maven.home = /Users/kimmking/tools/apache-maven-3.5.0
file.separator = /
java.vendor.url.bug = http://bugreport.sun.com/bugreport/
sun.io.unicode.encoding = UnicodeBig
sun.cpu.endian = little
sun.cpu.isalist =

VM Flags:
Non-default VM flags: -XX:CICompilerCount=3 -XX:InitialHeapSize=134217728 -XX:MaxHeapSize=2147483648 -XX:MaxNewSize=715653120 -XX:MinHeapDeltaBytes=524288 -XX:NewSize=44564480 -XX:OldSize=89653248 -XX:+TraceClassLoading -XX:+TraceClassUnloading -XX:+UseCompressedClassPointers -XX:+UseCompressedOops -XX:+UseFastUnorderedTimeStamps -XX:+UseParallelGC
Command line: -Dclassworlds.conf=/Users/kimmking/tools/apache-maven-3.5.0/bin/m2.conf -Dmaven.home=/Users/kimmking/tools/apache-maven-3.5.0 -Dmaven.multiModuleProjectDirectory=/Users/kimmking/gateway/spring-cloud-gateway-demo/netty-server

</code></pre><p>å¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„ç³»ç»Ÿå±æ€§å’Œå¯åŠ¨ä½¿ç”¨çš„ VM å‚æ•°ã€å‘½ä»¤è¡Œå‚æ•°ã€‚éå¸¸æœ‰åˆ©äºæˆ‘ä»¬æ’æŸ¥é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯å»æ’æŸ¥ä¸€ä¸ªå·²ç»è¿è¡Œçš„ JVM é‡Œé—®é¢˜ï¼Œé€šè¿‡ jinfo æˆ‘ä»¬å°±çŸ¥é“å®ƒä¾èµ–äº†å“ªäº›åº“ï¼Œç”¨äº†å“ªäº›å‚æ•°å¯åŠ¨ã€‚</p>
<p>å¦‚æœåœ¨ Mac å’Œ Linux ç³»ç»Ÿä¸Šä½¿ç”¨ä¸€ç›´æŠ¥é”™ï¼Œåˆ™å¯èƒ½æ˜¯æ²¡æœ‰æƒé™ï¼Œæˆ–è€… jinfo ç‰ˆæœ¬å’Œç›®æ ‡ JVM ç‰ˆæœ¬ä¸ä¸€è‡´çš„åŸå› ï¼Œä¾‹å¦‚ï¼š</p>
<pre tabindex="0"><code>Error attaching to process:
  sun.jvm.hotspot.runtime.VMVersionMismatchException:
    Supported versions are 25.74-b02. Target VM is 25.66-b17

</code></pre><h3 id="jrunscript-å’Œ-jjs-å·¥å…·">jrunscript å’Œ jjs å·¥å…·</h3>
<p>jrunscript å’Œ jjs å·¥å…·ç”¨æ¥æ‰§è¡Œè„šæœ¬ï¼Œåªè¦å®‰è£…äº† JDK 8+ï¼Œå°±å¯ä»¥åƒ shell å‘½ä»¤ä¸€æ ·æ‰§è¡Œç›¸å…³çš„æ“ä½œäº†ã€‚è¿™ä¸¤ä¸ªå·¥å…·èƒŒåï¼Œéƒ½æ˜¯ JDK 8 è‡ªå¸¦çš„ JavaScript å¼•æ“ Nashornã€‚</p>
<p>æ‰§è¡Œäº¤äº’å¼æ“ä½œï¼š</p>
<pre tabindex="0"><code>$ jrunscript
nashorn&gt; 66+88
154

</code></pre><p>æˆ–è€…ï¼š</p>
<pre tabindex="0"><code>$ jjs
jjs&gt; 66+88
154

</code></pre><p>æŒ‰ CTRL+C æˆ–è€…è¾“å…¥ exit() å›è½¦ï¼Œé€€å‡ºäº¤äº’å¼å‘½ä»¤è¡Œã€‚</p>
<p>å…¶ä¸­ jrunscript å¯ä»¥ç›´æ¥ç”¨æ¥æ‰§è¡Œ JS ä»£ç å—æˆ– JS æ–‡ä»¶ã€‚æ¯”å¦‚ç±»ä¼¼ curl è¿™æ ·çš„æ“ä½œï¼š</p>
<pre tabindex="0"><code>jrunscript -e &quot;cat('http://www.baidu.com')&quot;

</code></pre><p>æˆ–è€…è¿™æ ·ï¼š</p>
<pre tabindex="0"><code>jrunscript -e &quot;print('hello,kk.jvm'+1)&quot;

</code></pre><p>ç”šè‡³å¯ä»¥æ‰§è¡Œ JS è„šæœ¬ï¼š</p>
<pre tabindex="0"><code>jrunscript -l js -f /XXX/XXX/test.js

</code></pre><p>è€Œ jjs åˆ™åªèƒ½äº¤äº’æ¨¡å¼ï¼Œä½†æ˜¯å¯ä»¥æŒ‡å®š JavaScript æ”¯æŒçš„ ECMAScript è¯­è¨€ç‰ˆæœ¬ï¼Œæ¯”å¦‚ ES5 æˆ–è€… ES6ã€‚</p>
<p>è¿™ä¸ªå·¥å…·åœ¨æŸäº›æƒ…å†µä¸‹è¿˜æ˜¯æœ‰ç”¨çš„ï¼Œè¿˜å¯ä»¥åœ¨è„šæœ¬ä¸­æ‰§è¡Œ Java ä»£ç ï¼Œæˆ–è€…è°ƒç”¨ç”¨æˆ·è‡ªå·±çš„ jar æ–‡ä»¶æˆ–è€… Java ç±»ã€‚è¯¦ç»†çš„æ“ä½œè¯´æ˜å¯ä»¥å‚è€ƒï¼š</p>
<blockquote>
<p><a href="https://docs.oracle.com/javase/7/docs/technotes/tools/share/jrunscript.html">jrunscript - command line script shell</a></p>
</blockquote>
<p>å¦‚æœæ˜¯ JDK 9 åŠä»¥ä¸Šçš„ç‰ˆæœ¬ï¼Œåˆ™æœ‰ä¸€ä¸ªæ›´å®Œå–„çš„ REPL å·¥å…·â€”â€”JShellï¼Œå¯ä»¥ç›´æ¥è§£é‡Šæ‰§è¡Œ Java ä»£ç ã€‚</p>
<p>è€Œè¿™äº›æ€§èƒ½è¯Šæ–­å·¥å…·å®˜æ–¹å¹¶ä¸æä¾›æŠ€æœ¯æ”¯æŒï¼Œæ‰€ä»¥å¦‚æœç¢°åˆ°æŠ¥é”™ä¿¡æ¯ï¼Œè¯·ä¸è¦ç€æ€¥ï¼Œå¯ä»¥è¯•è¯•å…¶ä»–å·¥å…·ã€‚ä¸è¡Œå°±æ¢ JDK ç‰ˆæœ¬ã€‚</p>
<h3 id="å‚è€ƒæ–‡æ¡£">å‚è€ƒæ–‡æ¡£</h3>
<ul>
<li><a href="https://docs.oracle.com/javase/8/docs/technotes/tools/index.html">JDK å†…ç½®ç¨‹åºå’Œå·¥å…·</a></li>
</ul>

        </div>
    </article>
</div>
<div class="division-line"></div>
<div class="others">
    <div>æ ‡ç­¾ï¼šğŸ·ï¸<a class="post-tag" href="/tags/java/">java</a>&nbsp;</div>
    <div>åˆ†ç±»ï¼š ğŸ“’<a class="post-category" href="/categories/jvm%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF32%E8%AE%B2/">JVMæ ¸å¿ƒæŠ€æœ¯32è®²</a>&nbsp; </div>
</div>

    </main>
    <footer>
        <div id="pagination">
            
<div class="paginator">
    <div class="prev">
        
        <a href="http://yipsen.github.io/documents/columns/java/jvm%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF32%E8%AE%B2/08-jvm-%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0%E8%AF%A6%E8%A7%A3%E5%8D%9A%E8%A7%82%E8%80%8C%E7%BA%A6%E5%8F%96%E5%8E%9A%E7%A7%AF%E8%80%8C%E8%96%84%E5%8F%91/"><span>08 JVM å¯åŠ¨å‚æ•°è¯¦è§£ï¼šåšè§‚è€Œçº¦å–ã€åšç§¯è€Œè–„å‘</span></a>
    </div>
    <div class="next">
        
        <a href="http://yipsen.github.io/documents/columns/java/jvm%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF32%E8%AE%B2/10-jdk-%E5%86%85%E7%BD%AE%E5%9B%BE%E5%BD%A2%E7%95%8C%E9%9D%A2%E5%B7%A5%E5%85%B7%E6%B5%B7%E9%98%94%E5%87%AD%E9%B1%BC%E8%B7%83%E5%A4%A9%E9%AB%98%E4%BB%BB%E9%B8%9F%E9%A3%9E/"><span>10 JDK å†…ç½®å›¾å½¢ç•Œé¢å·¥å…·ï¼šæµ·é˜”å‡­é±¼è·ƒï¼Œå¤©é«˜ä»»é¸Ÿé£</span></a>
    </div>
</div>

        </div>
        <div id="float">
            <ul class="float-button-bar">
    <li>
        <button class="float-button top" onclick="scrollToTop(this);">UP</button>
    </li>
    <li>
        <button class="float-button toggler" onclick="changeSkin(this);">DARK</button>
    </li>
</ul>
        </div>
        <div id="copyright" style="display: none;">
    
    
    <p>&copy; 2020 <a href="/"></a>, powered by Hugo and Qiao</p>
</div>
    </footer>
    
<script>
    const changeSkin = () => {
        document.getElementById('page').classList.toggle('night');
    }
    const scrollToTop = () => {
        window.scrollTo(0, 0);
    }
</script>
</body>

</html>