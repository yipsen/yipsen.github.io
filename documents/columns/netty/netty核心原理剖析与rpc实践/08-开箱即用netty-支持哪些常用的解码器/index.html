<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
<meta name="X-UA-Compatible" , content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<link rel="icon" type="image/png" href="/%20/favicon.png">

<title>08 å¼€ç®±å³ç”¨ï¼šNetty æ”¯æŒå“ªäº›å¸¸ç”¨çš„è§£ç å™¨ï¼Ÿ | Yipsen Ye</title>
<meta name="description" content="åœ¨å‰ä¸¤èŠ‚è¯¾æˆ‘ä»¬ä»‹ç»äº† TCP æ‹†åŒ…/ç²˜åŒ…çš„é—®é¢˜ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨ Netty å®ç°è‡ªå®šä¹‰åè®®çš„ç¼–è§£ç ã€‚å¯ä»¥çœ‹åˆ°ï¼Œç½‘ç»œé€šä¿¡çš„åº•å±‚å®ç°ï¼ŒNetty éƒ½å·²ç»å¸®æˆ‘ä»¬å°è£…å¥½äº†ï¼Œæˆ‘ä»¬åªéœ€è¦æ‰©å±• ChannelHandler å®ç°è‡ªå®šä¹‰çš„ç¼–è§£ç é€»è¾‘å³å¯ã€‚æ›´åŠ äººæ€§åŒ–çš„æ˜¯ï¼ŒNetty æä¾›äº†å¾ˆå¤šå¼€ç®±å³ç”¨çš„è§£ç å™¨ï¼Œè¿™äº›è§£ç å™¨åŸºæœ¬è¦†ç›–äº† TCP æ‹†åŒ…/ç²˜åŒ…çš„é€šç”¨è§£å†³æ–¹æ¡ˆã€‚æœ¬èŠ‚è¯¾æˆ‘ä»¬å°†å¯¹ Netty å¸¸ç”¨çš„è§£ç å™¨è¿›è¡Œè®²è§£ï¼Œä¸€èµ·æ¢ç´¢ä¸‹å®ƒä»¬æœ‰å“ªäº›ç”¨æ³•å’ŒæŠ€å·§ã€‚
åœ¨æœ¬èŠ‚è¯¾å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆå›é¡¾ä¸€ä¸‹ TCP æ‹†åŒ…/ç²˜åŒ…çš„ä¸»æµè§£å†³æ–¹æ¡ˆã€‚å¹¶æ¢³ç†å‡º Netty å¯¹åº”çš„ç¼–ç å™¨ç±»ã€‚
å›ºå®šé•¿åº¦è§£ç å™¨ FixedLengthFrameDecoder å›ºå®šé•¿åº¦è§£ç å™¨ FixedLengthFrameDecoder éå¸¸ç®€å•ï¼Œç›´æ¥é€šè¿‡æ„é€ å‡½æ•°è®¾ç½®å›ºå®šé•¿åº¦çš„å¤§å° frameLengthï¼Œæ— è®ºæ¥æ”¶æ–¹ä¸€æ¬¡è·å–å¤šå¤§çš„æ•°æ®ï¼Œéƒ½ä¼šä¸¥æ ¼æŒ‰ç…§ frameLength è¿›è¡Œè§£ç ã€‚å¦‚æœç´¯ç§¯è¯»å–åˆ°é•¿åº¦å¤§å°ä¸º frameLength çš„æ¶ˆæ¯ï¼Œé‚£ä¹ˆè§£ç å™¨è®¤ä¸ºå·²ç»è·å–åˆ°äº†ä¸€ä¸ªå®Œæ•´çš„æ¶ˆæ¯ã€‚å¦‚æœæ¶ˆæ¯é•¿åº¦å°äº frameLengthï¼ŒFixedLengthFrameDecoder è§£ç å™¨ä¼šä¸€ç›´ç­‰åç»­æ•°æ®åŒ…çš„åˆ°è¾¾ï¼Œç›´è‡³è·å¾—å®Œæ•´çš„æ¶ˆæ¯ã€‚ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­æ„Ÿå—ä¸€ä¸‹ä½¿ç”¨ Netty å®ç°å›ºå®šé•¿åº¦è§£ç æ˜¯å¤šä¹ˆç®€å•ã€‚
public class EchoServer {public void startEchoServer(int port) throws Exception {EventLoopGroup bossGroup = new NioEventLoopGroup();EventLoopGroup workerGroup = new NioEventLoopGroup();try {ServerBootstrap b = new ServerBootstrap();b.group(bossGroup, workerGroup).channel(NioServerSocketChannel.class).childHandler(new ChannelInitializer&amp;lt;SocketChannel&amp;gt;() {@Overridepublic void initChannel(SocketChannel ch) {ch.">
<meta name="author" content="">

<link rel="stylesheet" type="text/css" href="/styles/main.css">

</head>

<body id="page">
    <header>
        <div class="logo-link" style="width: 60px; color: #CA6924;">
    <a href="http://yipsen.github.io/">
        <img style="margin-bottom: -1rem;" src="/images/deer.svg" alt="logo">
        <span style="font-size: 0.5rem; color: #CA6924;">Yipsen Ye</span>
    </a>
</div>
<nav class="navbar justify-content-end">
    <ul class="nav-list">
        
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/posts/">æœ­è®°</a>
        </li>
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/collections/">é™„è¡¨</a>
        </li>
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/about/">å…³äº</a>
        </li>
        
    </ul>
</nav>
    </header>
    <main id="content">
        
<div class="container"><aside>
    <div>
        
        
            
            
            <div class="post-category-icon"></div>
            <a href="/categories/netty%e6%a0%b8%e5%bf%83%e5%8e%9f%e7%90%86%e5%89%96%e6%9e%90%e4%b8%8erpc%e5%ae%9e%e8%b7%b5/">Nettyæ ¸å¿ƒåŸç†å‰–æä¸RPCå®è·µ</a>
            <ul>
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/00-%E5%AD%A6%E5%A5%BD-netty%E6%98%AF%E4%BD%A0%E4%BF%AE%E7%82%BC-java-%E5%86%85%E5%8A%9F%E7%9A%84%E5%BF%85%E7%BB%8F%E4%B9%8B%E8%B7%AF/">00 å­¦å¥½ Nettyï¼Œæ˜¯ä½ ä¿®ç‚¼ Java å†…åŠŸçš„å¿…ç»ä¹‹è·¯</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/01-%E5%88%9D%E8%AF%86-netty%E4%B8%BA%E4%BB%80%E4%B9%88-netty-%E8%BF%99%E4%B9%88%E6%B5%81%E8%A1%8C/">01 åˆè¯† Nettyï¼šä¸ºä»€ä¹ˆ Netty è¿™ä¹ˆæµè¡Œï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/02-%E7%BA%B5%E8%A7%88%E5%85%A8%E5%B1%80%E6%8A%8A%E6%8F%A1-netty-%E6%95%B4%E4%BD%93%E6%9E%B6%E6%9E%84%E8%84%89%E7%BB%9C/">02 çºµè§ˆå…¨å±€ï¼šæŠŠæ¡ Netty æ•´ä½“æ¶æ„è„‰ç»œ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/03-%E5%BC%95%E5%AF%BC%E5%99%A8%E4%BD%9C%E7%94%A8%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%92%8C%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%90%AF%E5%8A%A8%E9%83%BD%E8%A6%81%E5%81%9A%E4%BA%9B%E4%BB%80%E4%B9%88/">03 å¼•å¯¼å™¨ä½œç”¨ï¼šå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å¯åŠ¨éƒ½è¦åšäº›ä»€ä¹ˆï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/04-%E4%BA%8B%E4%BB%B6%E8%B0%83%E5%BA%A6%E5%B1%82%E4%B8%BA%E4%BB%80%E4%B9%88-eventloop-%E6%98%AF-netty-%E7%9A%84%E7%B2%BE%E9%AB%93/">04 äº‹ä»¶è°ƒåº¦å±‚ï¼šä¸ºä»€ä¹ˆ EventLoop æ˜¯ Netty çš„ç²¾é«“ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/05-%E6%9C%8D%E5%8A%A1%E7%BC%96%E6%8E%92%E5%B1%82pipeline-%E5%A6%82%E4%BD%95%E5%8D%8F%E8%B0%83%E5%90%84%E7%B1%BB-handler-/">05 æœåŠ¡ç¼–æ’å±‚ï¼šPipeline å¦‚ä½•åè°ƒå„ç±» Handler ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/06-%E7%B2%98%E5%8C%85%E6%8B%86%E5%8C%85%E9%97%AE%E9%A2%98%E5%A6%82%E4%BD%95%E8%8E%B7%E5%8F%96%E4%B8%80%E4%B8%AA%E5%AE%8C%E6%95%B4%E7%9A%84%E7%BD%91%E7%BB%9C%E5%8C%85/">06 ç²˜åŒ…æ‹†åŒ…é—®é¢˜ï¼šå¦‚ä½•è·å–ä¸€ä¸ªå®Œæ•´çš„ç½‘ç»œåŒ…ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/07-%E6%8E%A5%E5%A4%B4%E6%9A%97%E8%AF%AD%E5%A6%82%E4%BD%95%E5%88%A9%E7%94%A8-netty-%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8D%8F%E8%AE%AE%E9%80%9A%E4%BF%A1/">07 æ¥å¤´æš—è¯­ï¼šå¦‚ä½•åˆ©ç”¨ Netty å®ç°è‡ªå®šä¹‰åè®®é€šä¿¡ï¼Ÿ</a></li>
                
                
                
                    <li>08 å¼€ç®±å³ç”¨ï¼šNetty æ”¯æŒå“ªäº›å¸¸ç”¨çš„è§£ç å™¨ï¼Ÿ</li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/09-%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93writeandflush-%E5%A4%84%E7%90%86%E6%B5%81%E7%A8%8B%E5%89%96%E6%9E%90/">09 æ•°æ®ä¼ è¾“ï¼šwriteAndFlush å¤„ç†æµç¨‹å‰–æ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/10-%E5%8F%8C%E5%88%83%E5%89%91%E5%90%88%E7%90%86%E7%AE%A1%E7%90%86-netty-%E5%A0%86%E5%A4%96%E5%86%85%E5%AD%98/">10 åŒåˆƒå‰‘ï¼šåˆç†ç®¡ç† Netty å †å¤–å†…å­˜</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/11-%E5%8F%A6%E8%B5%B7%E7%82%89%E7%81%B6netty-%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93%E8%BD%BD%E4%BD%93-bytebuf-%E8%AF%A6%E8%A7%A3/">11 å¦èµ·ç‚‰ç¶ï¼šNetty æ•°æ®ä¼ è¾“è½½ä½“ ByteBuf è¯¦è§£</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/12-%E4%BB%96%E5%B1%B1%E4%B9%8B%E7%9F%B3%E9%AB%98%E6%80%A7%E8%83%BD%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E5%99%A8-jemalloc-%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/">12 ä»–å±±ä¹‹çŸ³ï¼šé«˜æ€§èƒ½å†…å­˜åˆ†é…å™¨ jemalloc åŸºæœ¬åŸç†</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/13-%E4%B8%BE%E4%B8%80%E5%8F%8D%E4%B8%89netty-%E9%AB%98%E6%80%A7%E8%83%BD%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E8%AE%BE%E8%AE%A1%E4%B8%8A/">13 ä¸¾ä¸€åä¸‰ï¼šNetty é«˜æ€§èƒ½å†…å­˜ç®¡ç†è®¾è®¡ï¼ˆä¸Šï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/14-%E4%B8%BE%E4%B8%80%E5%8F%8D%E4%B8%89netty-%E9%AB%98%E6%80%A7%E8%83%BD%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E8%AE%BE%E8%AE%A1%E4%B8%8B/">14 ä¸¾ä¸€åä¸‰ï¼šNetty é«˜æ€§èƒ½å†…å­˜ç®¡ç†è®¾è®¡ï¼ˆä¸‹ï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/15-%E8%BD%BB%E9%87%8F%E7%BA%A7%E5%AF%B9%E8%B1%A1%E5%9B%9E%E6%94%B6%E7%AB%99recycler-%E5%AF%B9%E8%B1%A1%E6%B1%A0%E6%8A%80%E6%9C%AF%E8%A7%A3%E6%9E%90/">15 è½»é‡çº§å¯¹è±¡å›æ”¶ç«™ï¼šRecycler å¯¹è±¡æ± æŠ€æœ¯è§£æ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/16-io-%E5%8A%A0%E9%80%9F%E4%B8%8E%E4%BC%97%E4%B8%8D%E5%90%8C%E7%9A%84-netty-%E9%9B%B6%E6%8B%B7%E8%B4%9D%E6%8A%80%E6%9C%AF/">16 IO åŠ é€Ÿï¼šä¸ä¼—ä¸åŒçš„ Netty é›¶æ‹·è´æŠ€æœ¯</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/17-%E6%BA%90%E7%A0%81%E7%AF%87%E4%BB%8E-linux-%E5%87%BA%E5%8F%91%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B/">17 æºç ç¯‡ï¼šä» Linux å‡ºå‘æ·±å…¥å‰–ææœåŠ¡ç«¯å¯åŠ¨æµç¨‹</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/18-%E6%BA%90%E7%A0%81%E7%AF%87%E8%A7%A3%E5%AF%86-netty-reactor-%E7%BA%BF%E7%A8%8B%E6%A8%A1%E5%9E%8B/">18 æºç ç¯‡ï¼šè§£å¯† Netty Reactor çº¿ç¨‹æ¨¡å‹</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/19-%E6%BA%90%E7%A0%81%E7%AF%87%E4%B8%80%E4%B8%AA%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82%E5%9C%A8-netty-%E4%B8%AD%E7%9A%84%E6%97%85%E7%A8%8B/">19 æºç ç¯‡ï¼šä¸€ä¸ªç½‘ç»œè¯·æ±‚åœ¨ Netty ä¸­çš„æ—…ç¨‹</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/20-%E6%8A%80%E5%B7%A7%E7%AF%87netty-%E7%9A%84-fastthreadlocal-%E7%A9%B6%E7%AB%9F%E6%AF%94-threadlocal-%E5%BF%AB%E5%9C%A8%E5%93%AA%E5%84%BF/">20 æŠ€å·§ç¯‡ï¼šNetty çš„ FastThreadLocal ç©¶ç«Ÿæ¯” ThreadLocal å¿«åœ¨å“ªå„¿ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/21-%E6%8A%80%E5%B7%A7%E7%AF%87%E5%BB%B6%E8%BF%9F%E4%BB%BB%E5%8A%A1%E5%A4%84%E7%90%86%E7%A5%9E%E5%99%A8%E4%B9%8B%E6%97%B6%E9%97%B4%E8%BD%AE-hashedwheeltimer/">21 æŠ€å·§ç¯‡ï¼šå»¶è¿Ÿä»»åŠ¡å¤„ç†ç¥å™¨ä¹‹æ—¶é—´è½® HashedWheelTimer</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/22-%E6%8A%80%E5%B7%A7%E7%AF%87%E9%AB%98%E6%80%A7%E8%83%BD%E6%97%A0%E9%94%81%E9%98%9F%E5%88%97-mpsc-queue/">22 æŠ€å·§ç¯‡ï¼šé«˜æ€§èƒ½æ— é”é˜Ÿåˆ— Mpsc Queue</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/23-%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E9%AB%98%E6%80%A7%E8%83%BD%E5%88%86%E5%B8%83%E5%BC%8F-rpc-%E6%A1%86%E6%9E%B6/">23 æ¶æ„è®¾è®¡ï¼šå¦‚ä½•å®ç°ä¸€ä¸ªé«˜æ€§èƒ½åˆ†å¸ƒå¼ RPC æ¡†æ¶</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/24-%E6%9C%8D%E5%8A%A1%E5%8F%91%E5%B8%83%E4%B8%8E%E8%AE%A2%E9%98%85%E6%90%AD%E5%BB%BA%E7%94%9F%E4%BA%A7%E8%80%85%E5%92%8C%E6%B6%88%E8%B4%B9%E8%80%85%E7%9A%84%E5%9F%BA%E7%A1%80%E6%A1%86%E6%9E%B6/">24 æœåŠ¡å‘å¸ƒä¸è®¢é˜…ï¼šæ­å»ºç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„åŸºç¡€æ¡†æ¶</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/25-%E8%BF%9C%E7%A8%8B%E9%80%9A%E4%BF%A1%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE%E8%AE%BE%E8%AE%A1%E4%BB%A5%E5%8F%8A%E7%BC%96%E8%A7%A3%E7%A0%81%E7%9A%84%E5%AE%9E%E7%8E%B0/">25 è¿œç¨‹é€šä¿¡ï¼šé€šä¿¡åè®®è®¾è®¡ä»¥åŠç¼–è§£ç çš„å®ç°</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/26-%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86%E6%9C%8D%E5%8A%A1%E5%8F%91%E7%8E%B0%E4%B8%8E%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E6%9C%BA%E5%88%B6%E7%9A%84%E5%AE%9E%E7%8E%B0/">26 æœåŠ¡æ²»ç†ï¼šæœåŠ¡å‘ç°ä¸è´Ÿè½½å‡è¡¡æœºåˆ¶çš„å®ç°</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/27-%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E4%B8%BA%E7%94%A8%E6%88%B7%E5%B1%8F%E8%94%BD-rpc-%E8%B0%83%E7%94%A8%E7%9A%84%E5%BA%95%E5%B1%82%E7%BB%86%E8%8A%82/">27 åŠ¨æ€ä»£ç†ï¼šä¸ºç”¨æˆ·å±è”½ RPC è°ƒç”¨çš„åº•å±‚ç»†èŠ‚</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/28-%E5%AE%9E%E6%88%98%E6%80%BB%E7%BB%93rpc-%E5%AE%9E%E6%88%98%E6%80%BB%E7%BB%93%E4%B8%8E%E8%BF%9B%E9%98%B6%E5%BB%B6%E4%BC%B8/">28 å®æˆ˜æ€»ç»“ï¼šRPC å®æˆ˜æ€»ç»“ä¸è¿›é˜¶å»¶ä¼¸</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/29-%E7%BC%96%E7%A8%8B%E6%80%9D%E6%83%B3netty-%E4%B8%AD%E5%BA%94%E7%94%A8%E4%BA%86%E5%93%AA%E4%BA%9B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">29 ç¼–ç¨‹æ€æƒ³ï¼šNetty ä¸­åº”ç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/30-%E5%AE%9E%E8%B7%B5%E6%80%BB%E7%BB%93netty-%E5%9C%A8%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E4%B8%80%E4%BA%9B%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/">30 å®è·µæ€»ç»“ï¼šNetty åœ¨é¡¹ç›®å¼€å‘ä¸­çš„ä¸€äº›æœ€ä½³å®è·µ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/31-%E7%BB%93%E6%9D%9F%E8%AF%AD-%E6%8A%80%E6%9C%AF%E6%88%90%E9%95%BF%E4%B9%8B%E8%B7%AF%E5%A6%82%E4%BD%95%E6%89%93%E9%80%A0%E8%87%AA%E5%B7%B1%E7%9A%84%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB/">31 ç»“æŸè¯­ æŠ€æœ¯æˆé•¿ä¹‹è·¯ï¼šå¦‚ä½•æ‰“é€ è‡ªå·±çš„æŠ€æœ¯ä½“ç³»</a></li>
                
                
            </ul>
        
    </div>
</aside>

<style>
    aside {
        position: fixed;
        left: 20px;
        background: #ffdee3;
        border-radius: 6px;
        padding: 20px;
        padding-top: 60px;
        box-shadow: 5px 10px #888;
        list-style-type: none;
        display: none;
    }

    .post-category-icon {
        position: absolute;
        width: 80px;
        height: 80px;
        top: -40px;
        left: 50%;
        margin-left: -40px;
        text-align: center;
        font-size: 36px;
        content: 'J';
        background: #ffdee3;
        border-radius: 100%;
        border: 10px solid #fff;
        box-shadow: 5px 10px #888;
    }
</style><article class="post-block">
        <h1 class="post-title">08 å¼€ç®±å³ç”¨ï¼šNetty æ”¯æŒå“ªäº›å¸¸ç”¨çš„è§£ç å™¨ï¼Ÿ</h1>
        <div class="post-info">
            <div> 
                <span class="post-date">ğŸ“…&nbsp;2021-12-22 01:54:29</span>ğŸ·ï¸&nbsp;<a class="post-tag" href="/tags/netty/">netty</a></div><div class="post-category">
                
                ğŸ“š&nbsp;<a href="/categories/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/">Nettyæ ¸å¿ƒåŸç†å‰–æä¸RPCå®è·µ</a>
                
            </div></div>
        <div class="post-content">
            <p>åœ¨å‰ä¸¤èŠ‚è¯¾æˆ‘ä»¬ä»‹ç»äº† TCP æ‹†åŒ…/ç²˜åŒ…çš„é—®é¢˜ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨ Netty å®ç°è‡ªå®šä¹‰åè®®çš„ç¼–è§£ç ã€‚å¯ä»¥çœ‹åˆ°ï¼Œç½‘ç»œé€šä¿¡çš„åº•å±‚å®ç°ï¼ŒNetty éƒ½å·²ç»å¸®æˆ‘ä»¬å°è£…å¥½äº†ï¼Œæˆ‘ä»¬åªéœ€è¦æ‰©å±• ChannelHandler å®ç°è‡ªå®šä¹‰çš„ç¼–è§£ç é€»è¾‘å³å¯ã€‚æ›´åŠ äººæ€§åŒ–çš„æ˜¯ï¼ŒNetty æä¾›äº†å¾ˆå¤šå¼€ç®±å³ç”¨çš„è§£ç å™¨ï¼Œè¿™äº›è§£ç å™¨åŸºæœ¬è¦†ç›–äº† TCP æ‹†åŒ…/ç²˜åŒ…çš„é€šç”¨è§£å†³æ–¹æ¡ˆã€‚æœ¬èŠ‚è¯¾æˆ‘ä»¬å°†å¯¹ Netty å¸¸ç”¨çš„è§£ç å™¨è¿›è¡Œè®²è§£ï¼Œä¸€èµ·æ¢ç´¢ä¸‹å®ƒä»¬æœ‰å“ªäº›ç”¨æ³•å’ŒæŠ€å·§ã€‚</p>
<p>åœ¨æœ¬èŠ‚è¯¾å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆå›é¡¾ä¸€ä¸‹ TCP æ‹†åŒ…/ç²˜åŒ…çš„ä¸»æµè§£å†³æ–¹æ¡ˆã€‚å¹¶æ¢³ç†å‡º Netty å¯¹åº”çš„ç¼–ç å™¨ç±»ã€‚</p>
<h3 id="å›ºå®šé•¿åº¦è§£ç å™¨-fixedlengthframedecoder">å›ºå®šé•¿åº¦è§£ç å™¨ FixedLengthFrameDecoder</h3>
<p>å›ºå®šé•¿åº¦è§£ç å™¨ FixedLengthFrameDecoder éå¸¸ç®€å•ï¼Œç›´æ¥é€šè¿‡æ„é€ å‡½æ•°è®¾ç½®å›ºå®šé•¿åº¦çš„å¤§å° frameLengthï¼Œæ— è®ºæ¥æ”¶æ–¹ä¸€æ¬¡è·å–å¤šå¤§çš„æ•°æ®ï¼Œéƒ½ä¼šä¸¥æ ¼æŒ‰ç…§ frameLength è¿›è¡Œè§£ç ã€‚å¦‚æœç´¯ç§¯è¯»å–åˆ°é•¿åº¦å¤§å°ä¸º frameLength çš„æ¶ˆæ¯ï¼Œé‚£ä¹ˆè§£ç å™¨è®¤ä¸ºå·²ç»è·å–åˆ°äº†ä¸€ä¸ªå®Œæ•´çš„æ¶ˆæ¯ã€‚å¦‚æœæ¶ˆæ¯é•¿åº¦å°äº frameLengthï¼ŒFixedLengthFrameDecoder è§£ç å™¨ä¼šä¸€ç›´ç­‰åç»­æ•°æ®åŒ…çš„åˆ°è¾¾ï¼Œç›´è‡³è·å¾—å®Œæ•´çš„æ¶ˆæ¯ã€‚ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­æ„Ÿå—ä¸€ä¸‹ä½¿ç”¨ Netty å®ç°å›ºå®šé•¿åº¦è§£ç æ˜¯å¤šä¹ˆç®€å•ã€‚</p>
<pre tabindex="0"><code>public class EchoServer {

    public void startEchoServer(int port) throws Exception {

        EventLoopGroup bossGroup = new NioEventLoopGroup();

        EventLoopGroup workerGroup = new NioEventLoopGroup();

        try {

            ServerBootstrap b = new ServerBootstrap();

            b.group(bossGroup, workerGroup)

                    .channel(NioServerSocketChannel.class)

                    .childHandler(new ChannelInitializer&lt;SocketChannel&gt;() {

                        @Override

                        public void initChannel(SocketChannel ch) {

                            ch.pipeline().addLast(new FixedLengthFrameDecoder(10));

                            ch.pipeline().addLast(new EchoServerHandler());

                        }

                    });

            ChannelFuture f = b.bind(port).sync();

            f.channel().closeFuture().sync();

        } finally {

            bossGroup.shutdownGracefully();

            workerGroup.shutdownGracefully();

        }

    }

    public static void main(String[] args) throws Exception {

        new EchoServer().startEchoServer(8088);

    }

}

@Sharable

public class EchoServerHandler extends ChannelInboundHandlerAdapter {

    @Override

    public void channelRead(ChannelHandlerContext ctx, Object msg) {

        System.out.println(&quot;Receive client : [&quot; + ((ByteBuf) msg).toString(CharsetUtil.UTF_8) + &quot;]&quot;);

    }

}
</code></pre><p>åœ¨ä¸Šè¿°æœåŠ¡ç«¯çš„ä»£ç ä¸­ä½¿ç”¨äº†å›ºå®š 10 å­—èŠ‚çš„è§£ç å™¨ï¼Œå¹¶åœ¨è§£ç ä¹‹åé€šè¿‡ EchoServerHandler æ‰“å°ç»“æœã€‚æˆ‘ä»¬å¯ä»¥å¯åŠ¨æœåŠ¡ç«¯ï¼Œé€šè¿‡ telnet å‘½ä»¤åƒæœåŠ¡ç«¯å‘é€æ•°æ®ï¼Œè§‚å¯Ÿä»£ç è¾“å‡ºçš„ç»“æœã€‚</p>
<p>å®¢æˆ·ç«¯è¾“å…¥ï¼š</p>
<pre tabindex="0"><code>telnet localhost 8088

Trying ::1...

Connected to localhost.

Escape character is '^]'.

1234567890123

456789012
</code></pre><p>æœåŠ¡ç«¯è¾“å‡ºï¼š</p>
<pre tabindex="0"><code>Receive client : [1234567890]

Receive client : [123

45678]
</code></pre><h3 id="ç‰¹æ®Šåˆ†éš”ç¬¦è§£ç å™¨-delimiterbasedframedecoder">ç‰¹æ®Šåˆ†éš”ç¬¦è§£ç å™¨ DelimiterBasedFrameDecoder</h3>
<p>ä½¿ç”¨ç‰¹æ®Šåˆ†éš”ç¬¦è§£ç å™¨ DelimiterBasedFrameDecoder ä¹‹å‰æˆ‘ä»¬éœ€è¦äº†è§£ä»¥ä¸‹å‡ ä¸ªå±æ€§çš„ä½œç”¨ã€‚</p>
<ul>
<li><strong>delimiters</strong></li>
</ul>
<p>delimiters æŒ‡å®šç‰¹æ®Šåˆ†éš”ç¬¦ï¼Œé€šè¿‡å†™å…¥ ByteBuf ä½œä¸º<strong>å‚æ•°</strong>ä¼ å…¥ã€‚delimiters çš„ç±»å‹æ˜¯ ByteBuf æ•°ç»„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åŒæ—¶æŒ‡å®šå¤šä¸ªåˆ†éš”ç¬¦ï¼Œä½†æ˜¯æœ€ç»ˆä¼šé€‰æ‹©é•¿åº¦æœ€çŸ­çš„åˆ†éš”ç¬¦è¿›è¡Œæ¶ˆæ¯æ‹†åˆ†ã€‚</p>
<p>ä¾‹å¦‚æ¥æ”¶æ–¹æ”¶åˆ°çš„æ•°æ®ä¸ºï¼š</p>
<pre tabindex="0"><code>+--------------+

| ABC\nDEF\r\n |

+--------------+
</code></pre><p>å¦‚æœæŒ‡å®šçš„å¤šä¸ªåˆ†éš”ç¬¦ä¸º \n å’Œ \r\nï¼ŒDelimiterBasedFrameDecoder ä¼šé€€åŒ–æˆä½¿ç”¨ LineBasedFrameDecoder è¿›è¡Œè§£æï¼Œé‚£ä¹ˆä¼šè§£ç å‡ºä¸¤ä¸ªæ¶ˆæ¯ã€‚</p>
<pre tabindex="0"><code>+-----+-----+

| ABC | DEF |

+-----+-----+
</code></pre><p>å¦‚æœæŒ‡å®šçš„ç‰¹å®šåˆ†éš”ç¬¦åªæœ‰ \r\nï¼Œé‚£ä¹ˆåªä¼šè§£ç å‡ºä¸€ä¸ªæ¶ˆæ¯ï¼š</p>
<pre tabindex="0"><code>+----------+

| ABC\nDEF |

+----------+
</code></pre><ul>
<li><strong>maxLength</strong></li>
</ul>
<p>maxLength æ˜¯æŠ¥æ–‡æœ€å¤§é•¿åº¦çš„é™åˆ¶ã€‚å¦‚æœè¶…è¿‡ maxLength è¿˜æ²¡æœ‰æ£€æµ‹åˆ°æŒ‡å®šåˆ†éš”ç¬¦ï¼Œå°†ä¼šæŠ›å‡º TooLongFrameExceptionã€‚å¯ä»¥è¯´ maxLength æ˜¯å¯¹ç¨‹åºåœ¨æç«¯æƒ…å†µä¸‹çš„ä¸€ç§<strong>ä¿æŠ¤æªæ–½</strong>ã€‚</p>
<ul>
<li><strong>failFast</strong></li>
</ul>
<p>failFast ä¸ maxLength éœ€è¦æ­é…ä½¿ç”¨ï¼Œé€šè¿‡è®¾ç½® failFast å¯ä»¥æ§åˆ¶æŠ›å‡º TooLongFrameException çš„æ—¶æœºï¼Œå¯ä»¥è¯´ Netty åœ¨ç»†èŠ‚ä¸Šè€ƒè™‘å¾—é¢é¢ä¿±åˆ°ã€‚å¦‚æœ failFast=trueï¼Œé‚£ä¹ˆåœ¨è¶…å‡º maxLength ä¼šç«‹å³æŠ›å‡º TooLongFrameExceptionï¼Œä¸å†ç»§ç»­è¿›è¡Œè§£ç ã€‚å¦‚æœ failFast=falseï¼Œé‚£ä¹ˆä¼šç­‰åˆ°è§£ç å‡ºä¸€ä¸ªå®Œæ•´çš„æ¶ˆæ¯åæ‰ä¼šæŠ›å‡º TooLongFrameExceptionã€‚</p>
<ul>
<li><strong>stripDelimiter</strong></li>
</ul>
<p>stripDelimiter çš„ä½œç”¨æ˜¯åˆ¤æ–­è§£ç åå¾—åˆ°çš„æ¶ˆæ¯æ˜¯å¦å»é™¤åˆ†éš”ç¬¦ã€‚å¦‚æœ stripDelimiter=falseï¼Œç‰¹å®šåˆ†éš”ç¬¦ä¸º \nï¼Œé‚£ä¹ˆä¸Šè¿°æ•°æ®åŒ…è§£ç å‡ºçš„ç»“æœä¸ºï¼š</p>
<pre tabindex="0"><code>+-------+---------+

| ABC\n | DEF\r\n |

+-------+---------+
</code></pre><p>ä¸‹é¢æˆ‘ä»¬è¿˜æ˜¯ç»“åˆä»£ç ç¤ºä¾‹å­¦ä¹  DelimiterBasedFrameDecoder çš„ç”¨æ³•ï¼Œä¾ç„¶ä»¥å›ºå®šç¼–ç å™¨å°èŠ‚ä¸­ä½¿ç”¨çš„ä»£ç ä¸ºåŸºç¡€ç¨åšæ”¹åŠ¨ï¼Œå¼•å…¥ç‰¹æ®Šåˆ†éš”ç¬¦è§£ç å™¨ DelimiterBasedFrameDecoderï¼š</p>
<pre tabindex="0"><code>b.group(bossGroup, workerGroup)

    .channel(NioServerSocketChannel.class)

    .childHandler(new ChannelInitializer&lt;SocketChannel&gt;() {

        @Override

        public void initChannel(SocketChannel ch) {

            ByteBuf delimiter = Unpooled.copiedBuffer(&quot;&amp;&quot;.getBytes());

            ch.pipeline().addLast(new DelimiterBasedFrameDecoder(10, true, true, delimiter));

            ch.pipeline().addLast(new EchoServerHandler());

        }

    });
</code></pre><p>æˆ‘ä»¬ä¾ç„¶é€šè¿‡ telnet æ¨¡æ‹Ÿå®¢æˆ·ç«¯å‘é€æ•°æ®ï¼Œè§‚å¯Ÿä»£ç è¾“å‡ºçš„ç»“æœï¼Œå¯ä»¥å‘ç°ç”±äº maxLength è®¾ç½®çš„åªæœ‰ 10ï¼Œæ‰€ä»¥åœ¨è§£æåˆ°ç¬¬ä¸‰ä¸ªæ¶ˆæ¯æ—¶æŠ›å‡ºå¼‚å¸¸ã€‚</p>
<p>å®¢æˆ·ç«¯è¾“å…¥ï¼š</p>
<pre tabindex="0"><code>telnet localhost 8088

Trying ::1...

Connected to localhost.

Escape character is '^]'.

hello&amp;world&amp;1234567890ab
</code></pre><p>æœåŠ¡ç«¯è¾“å‡ºï¼š</p>
<pre tabindex="0"><code>Receive client : [hello]

Receive client : [world]

ä¹æœˆ 25, 2020 8:46:01 ä¸‹åˆ io.netty.channel.DefaultChannelPipeline onUnhandledInboundException

è­¦å‘Š: An exceptionCaught() event was fired, and it reached at the tail of the pipeline. It usually means the last handler in the pipeline did not handle the exception.

io.netty.handler.codec.TooLongFrameException: frame length exceeds 10: 13 - discarded

at io.netty.handler.codec.DelimiterBasedFrameDecoder.fail(DelimiterBasedFrameDecoder.java:302)

at io.netty.handler.codec.DelimiterBasedFrameDecoder.decode(DelimiterBasedFrameDecoder.java:268)

at io.netty.handler.codec.DelimiterBasedFrameDecoder.decode(DelimiterBasedFrameDecoder.java:218)
</code></pre><h3 id="é•¿åº¦åŸŸè§£ç å™¨-lengthfieldbasedframedecoder">é•¿åº¦åŸŸè§£ç å™¨ LengthFieldBasedFrameDecoder</h3>
<p>é•¿åº¦åŸŸè§£ç å™¨ LengthFieldBasedFrameDecoder æ˜¯è§£å†³ TCP æ‹†åŒ…/ç²˜åŒ…é—®é¢˜æœ€å¸¸ç”¨çš„**è§£ç å™¨ã€‚**å®ƒåŸºæœ¬ä¸Šå¯ä»¥è¦†ç›–å¤§éƒ¨åˆ†åŸºäºé•¿åº¦æ‹†åŒ…åœºæ™¯ï¼Œå¼€æºæ¶ˆæ¯ä¸­é—´ä»¶ RocketMQ å°±æ˜¯ä½¿ç”¨ LengthFieldBasedFrameDecoder è¿›è¡Œè§£ç çš„ã€‚LengthFieldBasedFrameDecoder ç›¸æ¯” FixedLengthFrameDecoder å’Œ DelimiterBasedFrameDecoder è¦å¤æ‚ä¸€äº›ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±ä¸€èµ·å­¦ä¹ ä¸‹è¿™ä¸ªå¼ºå¤§çš„è§£ç å™¨ã€‚</p>
<p>é¦–å…ˆæˆ‘ä»¬åŒæ ·å…ˆäº†è§£ LengthFieldBasedFrameDecoder ä¸­çš„å‡ ä¸ªé‡è¦å±æ€§ï¼Œè¿™é‡Œæˆ‘ä¸»è¦æŠŠå®ƒä»¬åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š<strong>é•¿åº¦åŸŸè§£ç å™¨ç‰¹æœ‰å±æ€§</strong>ä»¥åŠ<strong>ä¸å…¶ä»–è§£ç å™¨ï¼ˆå¦‚ç‰¹å®šåˆ†éš”ç¬¦è§£ç å™¨ï¼‰çš„ç›¸ä¼¼çš„å±æ€§</strong>ã€‚</p>
<ul>
<li><strong>é•¿åº¦åŸŸè§£ç å™¨ç‰¹æœ‰å±æ€§ã€‚</strong></li>
</ul>
<pre tabindex="0"><code>// é•¿åº¦å­—æ®µçš„åç§»é‡ï¼Œä¹Ÿå°±æ˜¯å­˜æ”¾é•¿åº¦æ•°æ®çš„èµ·å§‹ä½ç½®

private final int lengthFieldOffset; 

// é•¿åº¦å­—æ®µæ‰€å ç”¨çš„å­—èŠ‚æ•°

private final int lengthFieldLength; 

/*

 * æ¶ˆæ¯é•¿åº¦çš„ä¿®æ­£å€¼

 *

 * åœ¨å¾ˆå¤šè¾ƒä¸ºå¤æ‚ä¸€äº›çš„åè®®è®¾è®¡ä¸­ï¼Œé•¿åº¦åŸŸä¸ä»…ä»…åŒ…å«æ¶ˆæ¯çš„é•¿åº¦ï¼Œè€Œä¸”åŒ…å«å…¶ä»–çš„æ•°æ®ï¼Œå¦‚ç‰ˆæœ¬å·ã€æ•°æ®ç±»å‹ã€æ•°æ®çŠ¶æ€ç­‰ï¼Œé‚£ä¹ˆè¿™æ—¶å€™æˆ‘ä»¬éœ€è¦ä½¿ç”¨ lengthAdjustment è¿›è¡Œä¿®æ­£

 * 

 * lengthAdjustment = åŒ…ä½“çš„é•¿åº¦å€¼ - é•¿åº¦åŸŸçš„å€¼

 *

 */

private final int lengthAdjustment; 

// è§£ç åéœ€è¦è·³è¿‡çš„åˆå§‹å­—èŠ‚æ•°ï¼Œä¹Ÿå°±æ˜¯æ¶ˆæ¯å†…å®¹å­—æ®µçš„èµ·å§‹ä½ç½®

private final int initialBytesToStrip;

// é•¿åº¦å­—æ®µç»“æŸçš„åç§»é‡ï¼ŒlengthFieldEndOffset = lengthFieldOffset + lengthFieldLength

private final int lengthFieldEndOffset;
</code></pre><ul>
<li><strong>ä¸å›ºå®šé•¿åº¦è§£ç å™¨å’Œç‰¹å®šåˆ†éš”ç¬¦è§£ç å™¨ç›¸ä¼¼çš„å±æ€§ã€‚</strong></li>
</ul>
<pre tabindex="0"><code>private final int maxFrameLength; // æŠ¥æ–‡æœ€å¤§é™åˆ¶é•¿åº¦

private final boolean failFast; // æ˜¯å¦ç«‹å³æŠ›å‡º TooLongFrameExceptionï¼Œä¸ maxFrameLength æ­é…ä½¿ç”¨

private boolean discardingTooLongFrame; // æ˜¯å¦å¤„äºä¸¢å¼ƒæ¨¡å¼

private long tooLongFrameLength; // éœ€è¦ä¸¢å¼ƒçš„å­—èŠ‚æ•°

private long bytesToDiscard; // ç´¯è®¡ä¸¢å¼ƒçš„å­—èŠ‚æ•°
</code></pre><p>ä¸‹é¢æˆ‘ä»¬ç»“åˆå…·ä½“çš„ç¤ºä¾‹æ¥è§£é‡Šä¸‹æ¯ç§å‚æ•°çš„ç»„åˆï¼Œå…¶å®åœ¨ Netty LengthFieldBasedFrameDecoder æºç çš„æ³¨é‡Šä¸­å·²ç»æè¿°å¾—éå¸¸è¯¦ç»†ï¼Œä¸€å…±ç»™å‡ºäº† 7 ä¸ªåœºæ™¯ç¤ºä¾‹ï¼Œç†è§£äº†è¿™äº›ç¤ºä¾‹åŸºæœ¬ä¸Šå¯ä»¥çœŸæ­£æŒæ¡ LengthFieldBasedFrameDecoder çš„å‚æ•°ç”¨æ³•ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼šå…¸å‹çš„åŸºäºæ¶ˆæ¯é•¿åº¦ + æ¶ˆæ¯å†…å®¹çš„è§£ç ã€‚</strong></p>
<pre tabindex="0"><code>BEFORE DECODE (14 bytes)         AFTER DECODE (14 bytes)

+--------+----------------+      +--------+----------------+

| Length | Actual Content |-----&gt;| Length | Actual Content |

| 0x000C | &quot;HELLO, WORLD&quot; |      | 0x000C | &quot;HELLO, WORLD&quot; |

+--------+----------------+      +--------+----------------+
</code></pre><p>ä¸Šè¿°åè®®æ˜¯æœ€åŸºæœ¬çš„æ ¼å¼ï¼ŒæŠ¥æ–‡åªåŒ…å«æ¶ˆæ¯é•¿åº¦ Length å’Œæ¶ˆæ¯å†…å®¹ Content å­—æ®µï¼Œå…¶ä¸­ Length ä¸º 16 è¿›åˆ¶è¡¨ç¤ºï¼Œå…±å ç”¨ 2 å­—èŠ‚ï¼ŒLength çš„å€¼ 0x000C ä»£è¡¨ Content å ç”¨ 12 å­—èŠ‚ã€‚è¯¥åè®®å¯¹åº”çš„è§£ç å™¨å‚æ•°ç»„åˆå¦‚ä¸‹ï¼š</p>
<ul>
<li>lengthFieldOffset = 0ï¼Œå› ä¸º Length å­—æ®µå°±åœ¨æŠ¥æ–‡çš„å¼€å§‹ä½ç½®ã€‚</li>
<li>lengthFieldLength = 2ï¼Œåè®®è®¾è®¡çš„å›ºå®šé•¿åº¦ã€‚</li>
<li>lengthAdjustment = 0ï¼ŒLength å­—æ®µåªåŒ…å«æ¶ˆæ¯é•¿åº¦ï¼Œä¸éœ€è¦åšä»»ä½•ä¿®æ­£ã€‚</li>
<li>initialBytesToStrip = 0ï¼Œè§£ç åå†…å®¹ä¾ç„¶æ˜¯ Length + Contentï¼Œä¸éœ€è¦è·³è¿‡ä»»ä½•åˆå§‹å­—èŠ‚ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹ 2ï¼šè§£ç ç»“æœéœ€è¦æˆªæ–­ã€‚</strong></p>
<pre tabindex="0"><code>BEFORE DECODE (14 bytes)         AFTER DECODE (12 bytes)

+--------+----------------+      +----------------+

| Length | Actual Content |-----&gt;| Actual Content |

| 0x000C | &quot;HELLO, WORLD&quot; |      | &quot;HELLO, WORLD&quot; |

+--------+----------------+      +----------------+
</code></pre><p>ç¤ºä¾‹ 2 å’Œç¤ºä¾‹ 1 çš„åŒºåˆ«åœ¨äºè§£ç åçš„ç»“æœåªåŒ…å«æ¶ˆæ¯å†…å®¹ï¼Œå…¶ä»–çš„éƒ¨åˆ†æ˜¯ä¸å˜çš„ã€‚è¯¥åè®®å¯¹åº”çš„è§£ç å™¨å‚æ•°ç»„åˆå¦‚ä¸‹ï¼š</p>
<ul>
<li>lengthFieldOffset = 0ï¼Œå› ä¸º Length å­—æ®µå°±åœ¨æŠ¥æ–‡çš„å¼€å§‹ä½ç½®ã€‚</li>
<li>lengthFieldLength = 2ï¼Œåè®®è®¾è®¡çš„å›ºå®šé•¿åº¦ã€‚</li>
<li>lengthAdjustment = 0ï¼ŒLength å­—æ®µåªåŒ…å«æ¶ˆæ¯é•¿åº¦ï¼Œä¸éœ€è¦åšä»»ä½•ä¿®æ­£ã€‚</li>
<li>initialBytesToStrip = 2ï¼Œè·³è¿‡ Length å­—æ®µçš„å­—èŠ‚é•¿åº¦ï¼Œè§£ç å ByteBuf ä¸­åªåŒ…å« Contentå­—æ®µã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹ 3ï¼šé•¿åº¦å­—æ®µåŒ…å«æ¶ˆæ¯é•¿åº¦å’Œæ¶ˆæ¯å†…å®¹æ‰€å çš„å­—èŠ‚ã€‚</strong></p>
<pre tabindex="0"><code>BEFORE DECODE (14 bytes)         AFTER DECODE (14 bytes)

+--------+----------------+      +--------+----------------+

| Length | Actual Content |-----&gt;| Length | Actual Content |

| 0x000E | &quot;HELLO, WORLD&quot; |      | 0x000E | &quot;HELLO, WORLD&quot; |

+--------+----------------+      +--------+----------------+
</code></pre><p>ä¸å‰ä¸¤ä¸ªç¤ºä¾‹ä¸åŒçš„æ˜¯ï¼Œç¤ºä¾‹ 3 çš„ Length å­—æ®µåŒ…å« Length å­—æ®µè‡ªèº«çš„å›ºå®šé•¿åº¦ä»¥åŠ Content å­—æ®µæ‰€å ç”¨çš„å­—èŠ‚æ•°ï¼ŒLength çš„å€¼ä¸º 0x000Eï¼ˆ2 + 12 = 14 å­—èŠ‚ï¼‰ï¼Œåœ¨ Length å­—æ®µå€¼ï¼ˆ14 å­—èŠ‚ï¼‰çš„åŸºç¡€ä¸Šåš lengthAdjustmentï¼ˆ-2ï¼‰çš„ä¿®æ­£ï¼Œæ‰èƒ½å¾—åˆ°çœŸå®çš„ Content å­—æ®µé•¿åº¦ï¼Œæ‰€ä»¥å¯¹åº”çš„è§£ç å™¨å‚æ•°ç»„åˆå¦‚ä¸‹ï¼š</p>
<ul>
<li>lengthFieldOffset = 0ï¼Œå› ä¸º Length å­—æ®µå°±åœ¨æŠ¥æ–‡çš„å¼€å§‹ä½ç½®ã€‚</li>
<li>lengthFieldLength = 2ï¼Œåè®®è®¾è®¡çš„å›ºå®šé•¿åº¦ã€‚</li>
<li>lengthAdjustment = -2ï¼Œé•¿åº¦å­—æ®µä¸º 14 å­—èŠ‚ï¼Œéœ€è¦å‡ 2 æ‰æ˜¯æ‹†åŒ…æ‰€éœ€è¦çš„é•¿åº¦ã€‚</li>
<li>initialBytesToStrip = 0ï¼Œè§£ç åå†…å®¹ä¾ç„¶æ˜¯ Length + Contentï¼Œä¸éœ€è¦è·³è¿‡ä»»ä½•åˆå§‹å­—èŠ‚ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹ 4ï¼šåŸºäºé•¿åº¦å­—æ®µåç§»çš„è§£ç ã€‚</strong></p>
<pre tabindex="0"><code>BEFORE DECODE (17 bytes)                      AFTER DECODE (17 bytes)

+----------+----------+----------------+      +----------+----------+----------------+

| Header 1 |  Length  | Actual Content |-----&gt;| Header 1 |  Length  | Actual Content |

|  0xCAFE  | 0x00000C | &quot;HELLO, WORLD&quot; |      |  0xCAFE  | 0x00000C | &quot;HELLO, WORLD&quot; |

+----------+----------+----------------+      +----------+----------+----------------+
</code></pre><p>ç¤ºä¾‹ 4 ä¸­ Length å­—æ®µä¸å†æ˜¯æŠ¥æ–‡çš„èµ·å§‹ä½ç½®ï¼ŒLength å­—æ®µçš„å€¼ä¸º 0x00000Cï¼Œè¡¨ç¤º Content å­—æ®µå ç”¨ 12 å­—èŠ‚ï¼Œè¯¥åè®®å¯¹åº”çš„è§£ç å™¨å‚æ•°ç»„åˆå¦‚ä¸‹ï¼š</p>
<ul>
<li>lengthFieldOffset = 2ï¼Œéœ€è¦è·³è¿‡ Header 1 æ‰€å ç”¨çš„ 2 å­—èŠ‚ï¼Œæ‰æ˜¯ Length çš„èµ·å§‹ä½ç½®ã€‚</li>
<li>lengthFieldLength = 3ï¼Œåè®®è®¾è®¡çš„å›ºå®šé•¿åº¦ã€‚</li>
<li>lengthAdjustment = 0ï¼ŒLength å­—æ®µåªåŒ…å«æ¶ˆæ¯é•¿åº¦ï¼Œä¸éœ€è¦åšä»»ä½•ä¿®æ­£ã€‚</li>
<li>initialBytesToStrip = 0ï¼Œè§£ç åå†…å®¹ä¾ç„¶æ˜¯å®Œæ•´çš„æŠ¥æ–‡ï¼Œä¸éœ€è¦è·³è¿‡ä»»ä½•åˆå§‹å­—èŠ‚ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹ 5ï¼šé•¿åº¦å­—æ®µä¸å†…å®¹å­—æ®µä¸å†ç›¸é‚»ã€‚</strong></p>
<pre tabindex="0"><code>BEFORE DECODE (17 bytes)                      AFTER DECODE (17 bytes)

+----------+----------+----------------+      +----------+----------+----------------+

|  Length  | Header 1 | Actual Content |-----&gt;|  Length  | Header 1 | Actual Content |

| 0x00000C |  0xCAFE  | &quot;HELLO, WORLD&quot; |      | 0x00000C |  0xCAFE  | &quot;HELLO, WORLD&quot; |

+----------+----------+----------------+      +----------+----------+----------------+
</code></pre><p>ç¤ºä¾‹ 5 ä¸­çš„ Length å­—æ®µä¹‹åæ˜¯ Header 1ï¼ŒLength ä¸ Content å­—æ®µä¸å†ç›¸é‚»ã€‚Length å­—æ®µæ‰€è¡¨ç¤ºçš„å†…å®¹ç•¥è¿‡äº† Header 1 å­—æ®µï¼Œæ‰€ä»¥ä¹Ÿéœ€è¦é€šè¿‡ lengthAdjustment ä¿®æ­£æ‰èƒ½å¾—åˆ° Header + Content çš„å†…å®¹ã€‚ç¤ºä¾‹ 5 æ‰€å¯¹åº”çš„è§£ç å™¨å‚æ•°ç»„åˆå¦‚ä¸‹ï¼š</p>
<ul>
<li>lengthFieldOffset = 0ï¼Œå› ä¸º Length å­—æ®µå°±åœ¨æŠ¥æ–‡çš„å¼€å§‹ä½ç½®ã€‚</li>
<li>lengthFieldLength = 3ï¼Œåè®®è®¾è®¡çš„å›ºå®šé•¿åº¦ã€‚</li>
<li>lengthAdjustment = 2ï¼Œç”±äº Header + Content ä¸€å…±å ç”¨ 2 + 12 = 14 å­—èŠ‚ï¼Œæ‰€ä»¥ Length å­—æ®µå€¼ï¼ˆ12 å­—èŠ‚ï¼‰åŠ ä¸Š lengthAdjustmentï¼ˆ2 å­—èŠ‚ï¼‰æ‰èƒ½å¾—åˆ° Header + Content çš„å†…å®¹ï¼ˆ14 å­—èŠ‚ï¼‰ã€‚</li>
<li>initialBytesToStrip = 0ï¼Œè§£ç åå†…å®¹ä¾ç„¶æ˜¯å®Œæ•´çš„æŠ¥æ–‡ï¼Œä¸éœ€è¦è·³è¿‡ä»»ä½•åˆå§‹å­—èŠ‚ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹ 6ï¼šåŸºäºé•¿åº¦åç§»å’Œé•¿åº¦ä¿®æ­£çš„è§£ç ã€‚</strong></p>
<pre tabindex="0"><code>BEFORE DECODE (16 bytes)                       AFTER DECODE (13 bytes)

+------+--------+------+----------------+      +------+----------------+

| HDR1 | Length | HDR2 | Actual Content |-----&gt;| HDR2 | Actual Content |

| 0xCA | 0x000C | 0xFE | &quot;HELLO, WORLD&quot; |      | 0xFE | &quot;HELLO, WORLD&quot; |

+------+--------+------+----------------+      +------+----------------+
</code></pre><p>ç¤ºä¾‹ 6 ä¸­ Length å­—æ®µå‰ååˆ†ä¸ºåˆ« HDR1 å’Œ HDR2 å­—æ®µï¼Œå„å ç”¨ 1 å­—èŠ‚ï¼Œæ‰€ä»¥æ—¢éœ€è¦åšé•¿åº¦å­—æ®µçš„åç§»ï¼Œä¹Ÿéœ€è¦åš lengthAdjustment ä¿®æ­£ï¼Œå…·ä½“ä¿®æ­£çš„è¿‡ç¨‹ä¸ ç¤ºä¾‹ 5 ç±»ä¼¼ã€‚å¯¹åº”çš„è§£ç å™¨å‚æ•°ç»„åˆå¦‚ä¸‹ï¼š</p>
<ul>
<li>lengthFieldOffset = 1ï¼Œéœ€è¦è·³è¿‡ HDR1 æ‰€å ç”¨çš„ 1 å­—èŠ‚ï¼Œæ‰æ˜¯ Length çš„èµ·å§‹ä½ç½®ã€‚</li>
<li>lengthFieldLength = 2ï¼Œåè®®è®¾è®¡çš„å›ºå®šé•¿åº¦ã€‚</li>
<li>lengthAdjustment = 1ï¼Œç”±äº HDR2 + Content ä¸€å…±å ç”¨ 1 + 12 = 13 å­—èŠ‚ï¼Œæ‰€ä»¥ Length å­—æ®µå€¼ï¼ˆ12 å­—èŠ‚ï¼‰åŠ ä¸Š lengthAdjustmentï¼ˆ1ï¼‰æ‰èƒ½å¾—åˆ° HDR2 + Content çš„å†…å®¹ï¼ˆ13 å­—èŠ‚ï¼‰ã€‚</li>
<li>initialBytesToStrip = 3ï¼Œè§£ç åè·³è¿‡ HDR1 å’Œ Length å­—æ®µï¼Œå…±å ç”¨ 3 å­—èŠ‚ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹ 7ï¼šé•¿åº¦å­—æ®µåŒ…å«é™¤ Content å¤–çš„å¤šä¸ªå…¶ä»–å­—æ®µã€‚</strong></p>
<pre tabindex="0"><code>BEFORE DECODE (16 bytes)                       AFTER DECODE (13 bytes)

+------+--------+------+----------------+      +------+----------------+

| HDR1 | Length | HDR2 | Actual Content |-----&gt;| HDR2 | Actual Content |

| 0xCA | 0x0010 | 0xFE | &quot;HELLO, WORLD&quot; |      | 0xFE | &quot;HELLO, WORLD&quot; |

+------+--------+------+----------------+      +------+----------------+
</code></pre><p>ç¤ºä¾‹ 7 ä¸ ç¤ºä¾‹ 6 çš„åŒºåˆ«åœ¨äº Length å­—æ®µè®°å½•äº†æ•´ä¸ªæŠ¥æ–‡çš„é•¿åº¦ï¼ŒåŒ…å« Length è‡ªèº«æ‰€å å­—èŠ‚ã€HDR1 ã€HDR2 ä»¥åŠ Content å­—æ®µçš„é•¿åº¦ï¼Œè§£ç å™¨éœ€è¦çŸ¥é“å¦‚ä½•è¿›è¡Œ lengthAdjustment è°ƒæ•´ï¼Œæ‰èƒ½å¾—åˆ° HDR2 å’Œ Content çš„å†…å®¹ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é‡‡ç”¨å¦‚ä¸‹çš„è§£ç å™¨å‚æ•°ç»„åˆï¼š</p>
<ul>
<li>lengthFieldOffset = 1ï¼Œéœ€è¦è·³è¿‡ HDR1 æ‰€å ç”¨çš„ 1 å­—èŠ‚ï¼Œæ‰æ˜¯ Length çš„èµ·å§‹ä½ç½®ã€‚</li>
<li>lengthFieldLength = 2ï¼Œåè®®è®¾è®¡çš„å›ºå®šé•¿åº¦ã€‚</li>
<li>lengthAdjustment = -3ï¼ŒLength å­—æ®µå€¼ï¼ˆ16 å­—èŠ‚ï¼‰éœ€è¦å‡å» HDR1ï¼ˆ1 å­—èŠ‚ï¼‰ å’Œ Length è‡ªèº«æ‰€å å­—èŠ‚é•¿åº¦ï¼ˆ2 å­—èŠ‚ï¼‰æ‰èƒ½å¾—åˆ° HDR2 å’Œ Content çš„å†…å®¹ï¼ˆ1 + 12 = 13 å­—èŠ‚ï¼‰ã€‚</li>
<li>initialBytesToStrip = 3ï¼Œè§£ç åè·³è¿‡ HDR1 å’Œ Length å­—æ®µï¼Œå…±å ç”¨ 3 å­—èŠ‚ã€‚</li>
</ul>
<p>ä»¥ä¸Š 7 ç§ç¤ºä¾‹æ¶µç›–äº† LengthFieldBasedFrameDecoder å¤§éƒ¨åˆ†çš„ä½¿ç”¨åœºæ™¯ï¼Œä½ æ˜¯å¦å­¦ä¼šäº†å‘¢ï¼Ÿæœ€åç•™ä¸€ä¸ªå°ä»»åŠ¡ï¼Œåœ¨ä¸Šä¸€èŠ‚è¯¾ç¨‹ä¸­æˆ‘ä»¬è®¾è®¡äº†ä¸€ä¸ªè¾ƒä¸ºé€šç”¨çš„åè®®ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚å¦‚ä½•ä½¿ç”¨é•¿åº¦åŸŸè§£ç å™¨ LengthFieldBasedFrameDecoder å®Œæˆè¯¥åè®®çš„è§£ç å‘¢ï¼ŸæŠ“ç´§è‡ªå·±å°è¯•ä¸‹å§ã€‚</p>
<pre tabindex="0"><code>+---------------------------------------------------------------+

| é­”æ•° 2byte | åè®®ç‰ˆæœ¬å· 1byte | åºåˆ—åŒ–ç®—æ³• 1byte | æŠ¥æ–‡ç±»å‹ 1byte  |

+---------------------------------------------------------------+

| çŠ¶æ€ 1byte |        ä¿ç•™å­—æ®µ 4byte     |      æ•°æ®é•¿åº¦ 4byte     | 

+---------------------------------------------------------------+

|                   æ•°æ®å†…å®¹ ï¼ˆé•¿åº¦ä¸å®šï¼‰                          |

+---------------------------------------------------------------+
</code></pre><h3 id="æ€»ç»“">æ€»ç»“</h3>
<p>æœ¬èŠ‚è¯¾æˆ‘ä»¬ä»‹ç»äº†ä¸‰ç§å¸¸ç”¨çš„è§£ç å™¨ï¼Œä»ä¸­æˆ‘ä»¬å¯ä»¥ä½“ä¼šåˆ° Netty åœ¨è®¾è®¡ä¸Šçš„ä¼˜é›…ï¼Œåªéœ€è¦è°ƒæ•´å‚æ•°å°±å¯ä»¥è½»æ¾å®ç°å„ç§åŠŸèƒ½ã€‚åœ¨å¥å£®æ€§ä¸Šï¼ŒNetty ä¹Ÿè€ƒè™‘å¾—éå¸¸å…¨é¢ï¼Œå¾ˆå¤šè¾¹ç•Œæƒ…å†µ Netty éƒ½è´´å¿ƒåœ°å¢åŠ äº†ä¿æŠ¤æ€§æªæ–½ã€‚å®ç°ä¸€ä¸ªå¥å£®çš„è§£ç å™¨å¹¶ä¸å®¹æ˜“ï¼Œå¾ˆå¯èƒ½å› ä¸ºä¸€æ¬¡è§£æé”™è¯¯å°±ä¼šå¯¼è‡´è§£ç å™¨ä¸€ç›´å¤„ç†é”™ä¹±çš„çŠ¶æ€ã€‚å¦‚æœä½ ä½¿ç”¨äº†åŸºäºé•¿åº¦ç¼–ç çš„äºŒè¿›åˆ¶åè®®ï¼Œé‚£ä¹ˆæ¨èä½ ä½¿ç”¨ LengthFieldBasedFrameDecoderï¼Œå®ƒå·²ç»å¯ä»¥æ»¡è¶³å®é™…é¡¹ç›®ä¸­çš„å¤§éƒ¨åˆ†åœºæ™¯ï¼ŒåŸºæœ¬ä¸éœ€è¦å†è‡ªå®šä¹‰å®ç°äº†ã€‚å¸Œæœ›æœ‹å‹ä»¬åœ¨é¡¹ç›®å¼€å‘ä¸­èƒ½å¤Ÿå­¦ä»¥è‡´ç”¨ã€‚</p>

        </div>
    </article>
</div>

    </main>
    <footer>
        <div id="pagination">
            
<div class="paginator">
    <div class="prev">
        
        <a href="/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/07-%E6%8E%A5%E5%A4%B4%E6%9A%97%E8%AF%AD%E5%A6%82%E4%BD%95%E5%88%A9%E7%94%A8-netty-%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8D%8F%E8%AE%AE%E9%80%9A%E4%BF%A1/"><span>07 æ¥å¤´æš—è¯­ï¼šå¦‚ä½•åˆ©ç”¨ Netty å®ç°è‡ªå®šä¹‰åè®®é€šä¿¡ï¼Ÿ</span></a>
    </div>
    <div class="next">
        
        <a href="/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/09-%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93writeandflush-%E5%A4%84%E7%90%86%E6%B5%81%E7%A8%8B%E5%89%96%E6%9E%90/"><span>09 æ•°æ®ä¼ è¾“ï¼šwriteAndFlush å¤„ç†æµç¨‹å‰–æ</span></a>
    </div>
</div>

        </div>
        <div class="toggler" onclick="toggleLight(this);">ğŸ’¡</div>
        <div id="copyright" style="display: none;">
    
    
    <p>&copy; 27270 <a href="/"></a>, powered by Hugo and Qiao</p>
</div>
    </footer>
    
<script>
    function toggleLight() {
        document.getElementById('page').classList.toggle('night');
    }
</script>
</body>

</html>