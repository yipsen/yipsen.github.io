<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
<meta name="X-UA-Compatible" , content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<link rel="icon" type="image/png" href="/%20/favicon.png">

<title>05 æœåŠ¡ç¼–æ’å±‚ï¼šPipeline å¦‚ä½•åè°ƒå„ç±» Handler ï¼Ÿ | Yipsen Ye</title>
<meta name="description" content="é€šè¿‡ä¸ŠèŠ‚è¯¾çš„å­¦ä¹ ï¼Œæˆ‘ä»¬çŸ¥é“ EventLoop å¯ä»¥è¯´æ˜¯ Netty çš„è°ƒåº¦ä¸­å¿ƒï¼Œè´Ÿè´£ç›‘å¬å¤šç§äº‹ä»¶ç±»å‹ï¼šI/O äº‹ä»¶ã€ä¿¡å·äº‹ä»¶ã€å®šæ—¶äº‹ä»¶ç­‰ï¼Œç„¶è€Œå®é™…çš„ä¸šåŠ¡å¤„ç†é€»è¾‘åˆ™æ˜¯ç”± ChannelPipeline ä¸­æ‰€å®šä¹‰çš„ ChannelHandler å®Œæˆçš„ï¼ŒChannelPipeline å’Œ ChannelHandler ä¹Ÿæ˜¯æˆ‘ä»¬åœ¨å¹³æ—¶åº”ç”¨å¼€å‘çš„è¿‡ç¨‹ä¸­æ‰“äº¤é“æœ€å¤šçš„ç»„ä»¶ã€‚Netty æœåŠ¡ç¼–æ’å±‚çš„æ ¸å¿ƒç»„ä»¶ ChannelPipeline å’Œ ChannelHandler ä¸ºç”¨æˆ·æä¾›äº† I/O äº‹ä»¶çš„å…¨éƒ¨æ§åˆ¶æƒã€‚ä»Šå¤©è¿™èŠ‚è¯¾æˆ‘ä»¬ä¾¿ä¸€èµ·æ·±å…¥å­¦ä¹  Netty æ˜¯å¦‚ä½•åˆ©ç”¨è¿™ä¸¤ä¸ªç»„ä»¶ï¼Œå°†æ•°æ®ç©è½¬èµ·æ¥ã€‚
åœ¨å­¦ä¹ è¿™èŠ‚è¯¾ä¹‹å‰ï¼Œæˆ‘å…ˆæŠ›å‡ºå‡ ä¸ªé—®é¢˜ã€‚
 ChannelPipeline ä¸ ChannelHandler çš„å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿå®ƒä»¬ä¹‹é—´æ˜¯å¦‚ä½•ååŒå·¥ä½œçš„ï¼Ÿ ChannelHandler çš„ç±»å‹æœ‰å“ªäº›ï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ Netty ä¸­ I/O äº‹ä»¶æ˜¯å¦‚ä½•ä¼ æ’­çš„ï¼Ÿ  å¸Œæœ›ä½ åœ¨å­¦ä¹ å®Œæœ¬è¯¾æ—¶åï¼Œå¯ä»¥æ‰¾åˆ°é—®é¢˜çš„ç­”æ¡ˆã€‚
ChannelPipeline æ¦‚è¿° Pipeline çš„å­—é¢æ„æ€æ˜¯ç®¡é“ã€æµæ°´çº¿ã€‚å®ƒåœ¨ Netty ä¸­èµ·åˆ°çš„ä½œç”¨ï¼Œå’Œä¸€ä¸ªå·¥å‚çš„æµæ°´çº¿ç±»ä¼¼ã€‚åŸå§‹çš„ç½‘ç»œå­—èŠ‚æµç»è¿‡ Pipeline ï¼Œè¢«ä¸€æ­¥æ­¥åŠ å·¥åŒ…è£…ï¼Œæœ€åå¾—åˆ°åŠ å·¥åçš„æˆå“ã€‚ç»è¿‡å‰é¢è¯¾ç¨‹æ ¸å¿ƒç»„ä»¶çš„åˆæ­¥å­¦ä¹ ï¼Œæˆ‘ä»¬å·²ç»å¯¹ ChannelPipeline æœ‰äº†åˆæ­¥çš„å°è±¡ï¼šå®ƒæ˜¯ Netty çš„æ ¸å¿ƒå¤„ç†é“¾ï¼Œç”¨ä»¥å®ç°ç½‘ç»œäº‹ä»¶çš„åŠ¨æ€ç¼–æ’å’Œæœ‰åºä¼ æ’­ã€‚
ä»Šå¤©æˆ‘ä»¬å°†ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ä¸€èµ·æ¢è®¨ ChannelPipeline çš„å®ç°åŸç†ï¼š
 ChannelPipeline å†…éƒ¨ç»“æ„ï¼› ChannelHandler æ¥å£è®¾è®¡ï¼› ChannelPipeline äº‹ä»¶ä¼ æ’­æœºåˆ¶ï¼› ChannelPipeline å¼‚å¸¸ä¼ æ’­æœºåˆ¶ã€‚  ChannelPipeline å†…éƒ¨ç»“æ„ é¦–å…ˆæˆ‘ä»¬è¦ç†æ¸…æ¥š ChannelPipeline çš„å†…éƒ¨ç»“æ„æ˜¯ä»€ä¹ˆæ ·å­ï¼Œè¿™æ ·æ‰èƒ½ç†è§£ ChannelPipeline çš„å¤„ç†æµç¨‹ã€‚ChannelPipeline ä½œä¸º Netty çš„æ ¸å¿ƒç¼–æ’ç»„ä»¶ï¼Œè´Ÿè´£è°ƒåº¦å„ç§ç±»å‹çš„ ChannelHandlerï¼Œå®é™…æ•°æ®çš„åŠ å·¥å¤„ç†æ“ä½œåˆ™æ˜¯ç”± ChannelHandler å®Œæˆçš„ã€‚">
<meta name="author" content="">

<link rel="stylesheet" type="text/css" href="/styles/main.css">

</head>

<body id="page">
    <header>
        <div class="nav-logo">
    <a href="http://yipsen.github.io/">
        
        <span class="nav-title">Yipsen Ye</span>
    </a>
</div>
<nav class="navbar justify-content-end">
    <ul class="nav-list">
        
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/posts/">æ–‡ç« </a>
        </li>
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/collections/">é™„è¡¨</a>
        </li>
        
        <li class="nav-item">
            <a class="nav-link"
                href="http://yipsen.github.io/about/">å…³äº</a>
        </li>
        
    </ul>
</nav>
    </header>
    <main id="content">
        
<div class="container"><aside>
    <div>
        
        
            
            
            <div class="post-category-icon"></div>
            <a href="/categories/netty%e6%a0%b8%e5%bf%83%e5%8e%9f%e7%90%86%e5%89%96%e6%9e%90%e4%b8%8erpc%e5%ae%9e%e8%b7%b5/">Nettyæ ¸å¿ƒåŸç†å‰–æä¸RPCå®è·µ</a>
            <ul>
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/00-%E5%AD%A6%E5%A5%BD-netty%E6%98%AF%E4%BD%A0%E4%BF%AE%E7%82%BC-java-%E5%86%85%E5%8A%9F%E7%9A%84%E5%BF%85%E7%BB%8F%E4%B9%8B%E8%B7%AF/">00 å­¦å¥½ Nettyï¼Œæ˜¯ä½ ä¿®ç‚¼ Java å†…åŠŸçš„å¿…ç»ä¹‹è·¯</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/01-%E5%88%9D%E8%AF%86-netty%E4%B8%BA%E4%BB%80%E4%B9%88-netty-%E8%BF%99%E4%B9%88%E6%B5%81%E8%A1%8C/">01 åˆè¯† Nettyï¼šä¸ºä»€ä¹ˆ Netty è¿™ä¹ˆæµè¡Œï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/02-%E7%BA%B5%E8%A7%88%E5%85%A8%E5%B1%80%E6%8A%8A%E6%8F%A1-netty-%E6%95%B4%E4%BD%93%E6%9E%B6%E6%9E%84%E8%84%89%E7%BB%9C/">02 çºµè§ˆå…¨å±€ï¼šæŠŠæ¡ Netty æ•´ä½“æ¶æ„è„‰ç»œ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/03-%E5%BC%95%E5%AF%BC%E5%99%A8%E4%BD%9C%E7%94%A8%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%92%8C%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%90%AF%E5%8A%A8%E9%83%BD%E8%A6%81%E5%81%9A%E4%BA%9B%E4%BB%80%E4%B9%88/">03 å¼•å¯¼å™¨ä½œç”¨ï¼šå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å¯åŠ¨éƒ½è¦åšäº›ä»€ä¹ˆï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/04-%E4%BA%8B%E4%BB%B6%E8%B0%83%E5%BA%A6%E5%B1%82%E4%B8%BA%E4%BB%80%E4%B9%88-eventloop-%E6%98%AF-netty-%E7%9A%84%E7%B2%BE%E9%AB%93/">04 äº‹ä»¶è°ƒåº¦å±‚ï¼šä¸ºä»€ä¹ˆ EventLoop æ˜¯ Netty çš„ç²¾é«“ï¼Ÿ</a></li>
                
                
                
                    <li>05 æœåŠ¡ç¼–æ’å±‚ï¼šPipeline å¦‚ä½•åè°ƒå„ç±» Handler ï¼Ÿ</li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/06-%E7%B2%98%E5%8C%85%E6%8B%86%E5%8C%85%E9%97%AE%E9%A2%98%E5%A6%82%E4%BD%95%E8%8E%B7%E5%8F%96%E4%B8%80%E4%B8%AA%E5%AE%8C%E6%95%B4%E7%9A%84%E7%BD%91%E7%BB%9C%E5%8C%85/">06 ç²˜åŒ…æ‹†åŒ…é—®é¢˜ï¼šå¦‚ä½•è·å–ä¸€ä¸ªå®Œæ•´çš„ç½‘ç»œåŒ…ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/07-%E6%8E%A5%E5%A4%B4%E6%9A%97%E8%AF%AD%E5%A6%82%E4%BD%95%E5%88%A9%E7%94%A8-netty-%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8D%8F%E8%AE%AE%E9%80%9A%E4%BF%A1/">07 æ¥å¤´æš—è¯­ï¼šå¦‚ä½•åˆ©ç”¨ Netty å®ç°è‡ªå®šä¹‰åè®®é€šä¿¡ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/08-%E5%BC%80%E7%AE%B1%E5%8D%B3%E7%94%A8netty-%E6%94%AF%E6%8C%81%E5%93%AA%E4%BA%9B%E5%B8%B8%E7%94%A8%E7%9A%84%E8%A7%A3%E7%A0%81%E5%99%A8/">08 å¼€ç®±å³ç”¨ï¼šNetty æ”¯æŒå“ªäº›å¸¸ç”¨çš„è§£ç å™¨ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/09-%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93writeandflush-%E5%A4%84%E7%90%86%E6%B5%81%E7%A8%8B%E5%89%96%E6%9E%90/">09 æ•°æ®ä¼ è¾“ï¼šwriteAndFlush å¤„ç†æµç¨‹å‰–æ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/10-%E5%8F%8C%E5%88%83%E5%89%91%E5%90%88%E7%90%86%E7%AE%A1%E7%90%86-netty-%E5%A0%86%E5%A4%96%E5%86%85%E5%AD%98/">10 åŒåˆƒå‰‘ï¼šåˆç†ç®¡ç† Netty å †å¤–å†…å­˜</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/11-%E5%8F%A6%E8%B5%B7%E7%82%89%E7%81%B6netty-%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93%E8%BD%BD%E4%BD%93-bytebuf-%E8%AF%A6%E8%A7%A3/">11 å¦èµ·ç‚‰ç¶ï¼šNetty æ•°æ®ä¼ è¾“è½½ä½“ ByteBuf è¯¦è§£</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/12-%E4%BB%96%E5%B1%B1%E4%B9%8B%E7%9F%B3%E9%AB%98%E6%80%A7%E8%83%BD%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E5%99%A8-jemalloc-%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/">12 ä»–å±±ä¹‹çŸ³ï¼šé«˜æ€§èƒ½å†…å­˜åˆ†é…å™¨ jemalloc åŸºæœ¬åŸç†</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/13-%E4%B8%BE%E4%B8%80%E5%8F%8D%E4%B8%89netty-%E9%AB%98%E6%80%A7%E8%83%BD%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E8%AE%BE%E8%AE%A1%E4%B8%8A/">13 ä¸¾ä¸€åä¸‰ï¼šNetty é«˜æ€§èƒ½å†…å­˜ç®¡ç†è®¾è®¡ï¼ˆä¸Šï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/14-%E4%B8%BE%E4%B8%80%E5%8F%8D%E4%B8%89netty-%E9%AB%98%E6%80%A7%E8%83%BD%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E8%AE%BE%E8%AE%A1%E4%B8%8B/">14 ä¸¾ä¸€åä¸‰ï¼šNetty é«˜æ€§èƒ½å†…å­˜ç®¡ç†è®¾è®¡ï¼ˆä¸‹ï¼‰</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/15-%E8%BD%BB%E9%87%8F%E7%BA%A7%E5%AF%B9%E8%B1%A1%E5%9B%9E%E6%94%B6%E7%AB%99recycler-%E5%AF%B9%E8%B1%A1%E6%B1%A0%E6%8A%80%E6%9C%AF%E8%A7%A3%E6%9E%90/">15 è½»é‡çº§å¯¹è±¡å›æ”¶ç«™ï¼šRecycler å¯¹è±¡æ± æŠ€æœ¯è§£æ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/16-io-%E5%8A%A0%E9%80%9F%E4%B8%8E%E4%BC%97%E4%B8%8D%E5%90%8C%E7%9A%84-netty-%E9%9B%B6%E6%8B%B7%E8%B4%9D%E6%8A%80%E6%9C%AF/">16 IO åŠ é€Ÿï¼šä¸ä¼—ä¸åŒçš„ Netty é›¶æ‹·è´æŠ€æœ¯</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/17-%E6%BA%90%E7%A0%81%E7%AF%87%E4%BB%8E-linux-%E5%87%BA%E5%8F%91%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B/">17 æºç ç¯‡ï¼šä» Linux å‡ºå‘æ·±å…¥å‰–ææœåŠ¡ç«¯å¯åŠ¨æµç¨‹</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/18-%E6%BA%90%E7%A0%81%E7%AF%87%E8%A7%A3%E5%AF%86-netty-reactor-%E7%BA%BF%E7%A8%8B%E6%A8%A1%E5%9E%8B/">18 æºç ç¯‡ï¼šè§£å¯† Netty Reactor çº¿ç¨‹æ¨¡å‹</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/19-%E6%BA%90%E7%A0%81%E7%AF%87%E4%B8%80%E4%B8%AA%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82%E5%9C%A8-netty-%E4%B8%AD%E7%9A%84%E6%97%85%E7%A8%8B/">19 æºç ç¯‡ï¼šä¸€ä¸ªç½‘ç»œè¯·æ±‚åœ¨ Netty ä¸­çš„æ—…ç¨‹</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/20-%E6%8A%80%E5%B7%A7%E7%AF%87netty-%E7%9A%84-fastthreadlocal-%E7%A9%B6%E7%AB%9F%E6%AF%94-threadlocal-%E5%BF%AB%E5%9C%A8%E5%93%AA%E5%84%BF/">20 æŠ€å·§ç¯‡ï¼šNetty çš„ FastThreadLocal ç©¶ç«Ÿæ¯” ThreadLocal å¿«åœ¨å“ªå„¿ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/21-%E6%8A%80%E5%B7%A7%E7%AF%87%E5%BB%B6%E8%BF%9F%E4%BB%BB%E5%8A%A1%E5%A4%84%E7%90%86%E7%A5%9E%E5%99%A8%E4%B9%8B%E6%97%B6%E9%97%B4%E8%BD%AE-hashedwheeltimer/">21 æŠ€å·§ç¯‡ï¼šå»¶è¿Ÿä»»åŠ¡å¤„ç†ç¥å™¨ä¹‹æ—¶é—´è½® HashedWheelTimer</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/22-%E6%8A%80%E5%B7%A7%E7%AF%87%E9%AB%98%E6%80%A7%E8%83%BD%E6%97%A0%E9%94%81%E9%98%9F%E5%88%97-mpsc-queue/">22 æŠ€å·§ç¯‡ï¼šé«˜æ€§èƒ½æ— é”é˜Ÿåˆ— Mpsc Queue</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/23-%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E9%AB%98%E6%80%A7%E8%83%BD%E5%88%86%E5%B8%83%E5%BC%8F-rpc-%E6%A1%86%E6%9E%B6/">23 æ¶æ„è®¾è®¡ï¼šå¦‚ä½•å®ç°ä¸€ä¸ªé«˜æ€§èƒ½åˆ†å¸ƒå¼ RPC æ¡†æ¶</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/24-%E6%9C%8D%E5%8A%A1%E5%8F%91%E5%B8%83%E4%B8%8E%E8%AE%A2%E9%98%85%E6%90%AD%E5%BB%BA%E7%94%9F%E4%BA%A7%E8%80%85%E5%92%8C%E6%B6%88%E8%B4%B9%E8%80%85%E7%9A%84%E5%9F%BA%E7%A1%80%E6%A1%86%E6%9E%B6/">24 æœåŠ¡å‘å¸ƒä¸è®¢é˜…ï¼šæ­å»ºç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„åŸºç¡€æ¡†æ¶</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/25-%E8%BF%9C%E7%A8%8B%E9%80%9A%E4%BF%A1%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE%E8%AE%BE%E8%AE%A1%E4%BB%A5%E5%8F%8A%E7%BC%96%E8%A7%A3%E7%A0%81%E7%9A%84%E5%AE%9E%E7%8E%B0/">25 è¿œç¨‹é€šä¿¡ï¼šé€šä¿¡åè®®è®¾è®¡ä»¥åŠç¼–è§£ç çš„å®ç°</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/26-%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86%E6%9C%8D%E5%8A%A1%E5%8F%91%E7%8E%B0%E4%B8%8E%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E6%9C%BA%E5%88%B6%E7%9A%84%E5%AE%9E%E7%8E%B0/">26 æœåŠ¡æ²»ç†ï¼šæœåŠ¡å‘ç°ä¸è´Ÿè½½å‡è¡¡æœºåˆ¶çš„å®ç°</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/27-%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E4%B8%BA%E7%94%A8%E6%88%B7%E5%B1%8F%E8%94%BD-rpc-%E8%B0%83%E7%94%A8%E7%9A%84%E5%BA%95%E5%B1%82%E7%BB%86%E8%8A%82/">27 åŠ¨æ€ä»£ç†ï¼šä¸ºç”¨æˆ·å±è”½ RPC è°ƒç”¨çš„åº•å±‚ç»†èŠ‚</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/28-%E5%AE%9E%E6%88%98%E6%80%BB%E7%BB%93rpc-%E5%AE%9E%E6%88%98%E6%80%BB%E7%BB%93%E4%B8%8E%E8%BF%9B%E9%98%B6%E5%BB%B6%E4%BC%B8/">28 å®æˆ˜æ€»ç»“ï¼šRPC å®æˆ˜æ€»ç»“ä¸è¿›é˜¶å»¶ä¼¸</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/29-%E7%BC%96%E7%A8%8B%E6%80%9D%E6%83%B3netty-%E4%B8%AD%E5%BA%94%E7%94%A8%E4%BA%86%E5%93%AA%E4%BA%9B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">29 ç¼–ç¨‹æ€æƒ³ï¼šNetty ä¸­åº”ç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/30-%E5%AE%9E%E8%B7%B5%E6%80%BB%E7%BB%93netty-%E5%9C%A8%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E4%B8%80%E4%BA%9B%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/">30 å®è·µæ€»ç»“ï¼šNetty åœ¨é¡¹ç›®å¼€å‘ä¸­çš„ä¸€äº›æœ€ä½³å®è·µ</a></li>
                
                
                
                    <li><a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/31-%E7%BB%93%E6%9D%9F%E8%AF%AD-%E6%8A%80%E6%9C%AF%E6%88%90%E9%95%BF%E4%B9%8B%E8%B7%AF%E5%A6%82%E4%BD%95%E6%89%93%E9%80%A0%E8%87%AA%E5%B7%B1%E7%9A%84%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB/">31 ç»“æŸè¯­ æŠ€æœ¯æˆé•¿ä¹‹è·¯ï¼šå¦‚ä½•æ‰“é€ è‡ªå·±çš„æŠ€æœ¯ä½“ç³»</a></li>
                
                
            </ul>
        
    </div>
</aside>

<style>
    aside {
        position: fixed;
        left: 20px;
        background: #ffdee3;
        border-radius: 6px;
        padding: 20px;
        padding-top: 60px;
        box-shadow: 5px 10px #888;
        list-style-type: none;
        display: none;
    }

    .post-category-icon {
        position: absolute;
        width: 80px;
        height: 80px;
        top: -40px;
        left: 50%;
        margin-left: -40px;
        text-align: center;
        font-size: 36px;
        content: 'J';
        background: #ffdee3;
        border-radius: 100%;
        border: 10px solid #fff;
        box-shadow: 5px 10px #888;
    }
</style><article class="post-block">
        <h1 class="post-title">05 æœåŠ¡ç¼–æ’å±‚ï¼šPipeline å¦‚ä½•åè°ƒå„ç±» Handler ï¼Ÿ</h1>
        <div class="post-info">
            <div class="post-date"> 
                <span>2021-12-22 01:54:26</span>
            </div>
        </div>
        <div class="post-content">
            <p>é€šè¿‡ä¸ŠèŠ‚è¯¾çš„å­¦ä¹ ï¼Œæˆ‘ä»¬çŸ¥é“ EventLoop å¯ä»¥è¯´æ˜¯ Netty çš„è°ƒåº¦ä¸­å¿ƒï¼Œè´Ÿè´£ç›‘å¬å¤šç§äº‹ä»¶ç±»å‹ï¼šI/O äº‹ä»¶ã€ä¿¡å·äº‹ä»¶ã€å®šæ—¶äº‹ä»¶ç­‰ï¼Œç„¶è€Œå®é™…çš„ä¸šåŠ¡å¤„ç†é€»è¾‘åˆ™æ˜¯ç”± ChannelPipeline ä¸­æ‰€å®šä¹‰çš„ ChannelHandler å®Œæˆçš„ï¼ŒChannelPipeline å’Œ ChannelHandler ä¹Ÿæ˜¯æˆ‘ä»¬åœ¨å¹³æ—¶åº”ç”¨å¼€å‘çš„è¿‡ç¨‹ä¸­æ‰“äº¤é“æœ€å¤šçš„ç»„ä»¶ã€‚Netty æœåŠ¡ç¼–æ’å±‚çš„æ ¸å¿ƒç»„ä»¶ ChannelPipeline å’Œ ChannelHandler ä¸ºç”¨æˆ·æä¾›äº† I/O äº‹ä»¶çš„å…¨éƒ¨æ§åˆ¶æƒã€‚ä»Šå¤©è¿™èŠ‚è¯¾æˆ‘ä»¬ä¾¿ä¸€èµ·æ·±å…¥å­¦ä¹  Netty æ˜¯å¦‚ä½•åˆ©ç”¨è¿™ä¸¤ä¸ªç»„ä»¶ï¼Œå°†æ•°æ®ç©è½¬èµ·æ¥ã€‚</p>
<p>åœ¨å­¦ä¹ è¿™èŠ‚è¯¾ä¹‹å‰ï¼Œæˆ‘å…ˆæŠ›å‡ºå‡ ä¸ªé—®é¢˜ã€‚</p>
<ul>
<li>ChannelPipeline ä¸ ChannelHandler çš„å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿå®ƒä»¬ä¹‹é—´æ˜¯å¦‚ä½•ååŒå·¥ä½œçš„ï¼Ÿ</li>
<li>ChannelHandler çš„ç±»å‹æœ‰å“ªäº›ï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</li>
<li>Netty ä¸­ I/O äº‹ä»¶æ˜¯å¦‚ä½•ä¼ æ’­çš„ï¼Ÿ</li>
</ul>
<p>å¸Œæœ›ä½ åœ¨å­¦ä¹ å®Œæœ¬è¯¾æ—¶åï¼Œå¯ä»¥æ‰¾åˆ°é—®é¢˜çš„ç­”æ¡ˆã€‚</p>
<h3 id="channelpipeline-æ¦‚è¿°">ChannelPipeline æ¦‚è¿°</h3>
<p>Pipeline çš„å­—é¢æ„æ€æ˜¯ç®¡é“ã€æµæ°´çº¿ã€‚å®ƒåœ¨ Netty ä¸­èµ·åˆ°çš„ä½œç”¨ï¼Œå’Œä¸€ä¸ªå·¥å‚çš„æµæ°´çº¿ç±»ä¼¼ã€‚åŸå§‹çš„ç½‘ç»œå­—èŠ‚æµç»è¿‡ Pipeline ï¼Œè¢«ä¸€æ­¥æ­¥åŠ å·¥åŒ…è£…ï¼Œæœ€åå¾—åˆ°åŠ å·¥åçš„æˆå“ã€‚ç»è¿‡å‰é¢è¯¾ç¨‹æ ¸å¿ƒç»„ä»¶çš„åˆæ­¥å­¦ä¹ ï¼Œæˆ‘ä»¬å·²ç»å¯¹ ChannelPipeline æœ‰äº†åˆæ­¥çš„å°è±¡ï¼šå®ƒæ˜¯ Netty çš„æ ¸å¿ƒå¤„ç†é“¾ï¼Œç”¨ä»¥å®ç°ç½‘ç»œäº‹ä»¶çš„åŠ¨æ€ç¼–æ’å’Œæœ‰åºä¼ æ’­ã€‚</p>
<p>ä»Šå¤©æˆ‘ä»¬å°†ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ä¸€èµ·æ¢è®¨ ChannelPipeline çš„å®ç°åŸç†ï¼š</p>
<ul>
<li>ChannelPipeline å†…éƒ¨ç»“æ„ï¼›</li>
<li>ChannelHandler æ¥å£è®¾è®¡ï¼›</li>
<li>ChannelPipeline äº‹ä»¶ä¼ æ’­æœºåˆ¶ï¼›</li>
<li>ChannelPipeline å¼‚å¸¸ä¼ æ’­æœºåˆ¶ã€‚</li>
</ul>
<h3 id="channelpipeline-å†…éƒ¨ç»“æ„">ChannelPipeline å†…éƒ¨ç»“æ„</h3>
<p>é¦–å…ˆæˆ‘ä»¬è¦ç†æ¸…æ¥š ChannelPipeline çš„å†…éƒ¨ç»“æ„æ˜¯ä»€ä¹ˆæ ·å­ï¼Œè¿™æ ·æ‰èƒ½ç†è§£ ChannelPipeline çš„å¤„ç†æµç¨‹ã€‚ChannelPipeline ä½œä¸º Netty çš„æ ¸å¿ƒç¼–æ’ç»„ä»¶ï¼Œè´Ÿè´£è°ƒåº¦å„ç§ç±»å‹çš„ ChannelHandlerï¼Œå®é™…æ•°æ®çš„åŠ å·¥å¤„ç†æ“ä½œåˆ™æ˜¯ç”± ChannelHandler å®Œæˆçš„ã€‚</p>
<p>ChannelPipeline å¯ä»¥çœ‹ä½œæ˜¯ ChannelHandler çš„å®¹å™¨è½½ä½“ï¼Œå®ƒæ˜¯ç”±ä¸€ç»„ ChannelHandler å®ä¾‹ç»„æˆçš„ï¼Œå†…éƒ¨é€šè¿‡åŒå‘é“¾è¡¨å°†ä¸åŒçš„ ChannelHandler é“¾æ¥åœ¨ä¸€èµ·ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚å½“æœ‰ I/O è¯»å†™äº‹ä»¶è§¦å‘æ—¶ï¼ŒChannelPipeline ä¼šä¾æ¬¡è°ƒç”¨ ChannelHandler åˆ—è¡¨å¯¹ Channel çš„æ•°æ®è¿›è¡Œæ‹¦æˆªå’Œå¤„ç†ã€‚</p>
<p><img src="http://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/Netty%20%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8E%20RPC%20%E5%AE%9E%E8%B7%B5-%E5%AE%8C/assets/CgqCHl-dLiiAcORMAAYJnrq5ceE455.png" alt="image.png"></p>
<p>ç”±ä¸Šå›¾å¯çŸ¥ï¼Œæ¯ä¸ª Channel ä¼šç»‘å®šä¸€ä¸ª ChannelPipelineï¼Œæ¯ä¸€ä¸ª ChannelPipeline éƒ½åŒ…å«å¤šä¸ª ChannelHandlerContextï¼Œæ‰€æœ‰ ChannelHandlerContext ä¹‹é—´ç»„æˆäº†åŒå‘é“¾è¡¨ã€‚åˆå› ä¸ºæ¯ä¸ª ChannelHandler éƒ½å¯¹åº”ä¸€ä¸ª ChannelHandlerContextï¼Œæ‰€ä»¥å®é™…ä¸Š ChannelPipeline ç»´æŠ¤çš„æ˜¯å®ƒä¸ ChannelHandlerContext çš„å…³ç³»ã€‚é‚£ä¹ˆä½ å¯èƒ½ä¼šæœ‰ç–‘é—®ï¼Œä¸ºä»€ä¹ˆè¿™é‡Œä¼šå¤šä¸€å±‚ ChannelHandlerContext çš„å°è£…å‘¢ï¼Ÿ</p>
<p>å…¶å®è¿™æ˜¯ä¸€ç§æ¯”è¾ƒå¸¸ç”¨çš„ç¼–ç¨‹æ€æƒ³ã€‚ChannelHandlerContext ç”¨äºä¿å­˜ ChannelHandler ä¸Šä¸‹æ–‡ï¼›ChannelHandlerContext åˆ™åŒ…å«äº† ChannelHandler ç”Ÿå‘½å‘¨æœŸçš„æ‰€æœ‰äº‹ä»¶ï¼Œå¦‚ connectã€bindã€readã€flushã€writeã€close ç­‰ã€‚å¯ä»¥è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœæ²¡æœ‰ ChannelHandlerContext çš„è¿™å±‚å°è£…ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨åš ChannelHandler ä¹‹é—´ä¼ é€’çš„æ—¶å€™ï¼Œå‰ç½®åç½®çš„é€šç”¨é€»è¾‘å°±è¦åœ¨æ¯ä¸ª ChannelHandler é‡Œéƒ½å®ç°ä¸€ä»½ã€‚è¿™æ ·è™½ç„¶èƒ½è§£å†³é—®é¢˜ï¼Œä½†æ˜¯ä»£ç ç»“æ„çš„è€¦åˆï¼Œä¼šéå¸¸ä¸ä¼˜é›…ã€‚</p>
<p>æ ¹æ®ç½‘ç»œæ•°æ®çš„æµå‘ï¼ŒChannelPipeline åˆ†ä¸ºå…¥ç«™ ChannelInboundHandler å’Œå‡ºç«™ ChannelOutboundHandler ä¸¤ç§å¤„ç†å™¨ã€‚åœ¨å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯é€šä¿¡çš„è¿‡ç¨‹ä¸­ï¼Œæ•°æ®ä»å®¢æˆ·ç«¯å‘å‘æœåŠ¡ç«¯çš„è¿‡ç¨‹å«å‡ºç«™ï¼Œåä¹‹ç§°ä¸ºå…¥ç«™ã€‚æ•°æ®å…ˆç”±ä¸€ç³»åˆ— InboundHandler å¤„ç†åå…¥ç«™ï¼Œç„¶åå†ç”±ç›¸åæ–¹å‘çš„ OutboundHandler å¤„ç†å®Œæˆåå‡ºç«™ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚æˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„è§£ç å™¨ Decoder å°±æ˜¯å…¥ç«™æ“ä½œï¼Œç¼–ç å™¨ Encoder å°±æ˜¯å‡ºç«™æ“ä½œã€‚æœåŠ¡ç«¯æ¥æ”¶åˆ°å®¢æˆ·ç«¯æ•°æ®éœ€è¦å…ˆç»è¿‡ Decoder å…¥ç«™å¤„ç†åï¼Œå†é€šè¿‡ Encoder å‡ºç«™é€šçŸ¥å®¢æˆ·ç«¯ã€‚</p>
<p><img src="http://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/Netty%20%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8E%20RPC%20%E5%AE%9E%E8%B7%B5-%E5%AE%8C/assets/Ciqc1F-dLm2APCjcAAPRZBy9s5c466.png" alt="image.png"></p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬è¯¦ç»†åˆ†æä¸‹ ChannelPipeline åŒå‘é“¾è¡¨çš„æ„é€ ï¼ŒChannelPipeline çš„åŒå‘é“¾è¡¨åˆ†åˆ«ç»´æŠ¤äº† HeadContext å’Œ TailContext çš„å¤´å°¾èŠ‚ç‚¹ã€‚æˆ‘ä»¬è‡ªå®šä¹‰çš„ ChannelHandler ä¼šæ’å…¥åˆ° Head å’Œ Tail ä¹‹é—´ï¼Œè¿™ä¸¤ä¸ªèŠ‚ç‚¹åœ¨ Netty ä¸­å·²ç»é»˜è®¤å®ç°äº†ï¼Œå®ƒä»¬åœ¨ ChannelPipeline ä¸­èµ·åˆ°äº†è‡³å…³é‡è¦çš„ä½œç”¨ã€‚é¦–å…ˆæˆ‘ä»¬çœ‹ä¸‹ HeadContext å’Œ TailContext çš„ç»§æ‰¿å…³ç³»ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>
<p><img src="http://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/Netty%20%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8E%20RPC%20%E5%AE%9E%E8%B7%B5-%E5%AE%8C/assets/Ciqc1F-aW9qADWwSAAndrBdsXyc104.png" alt="image.png"></p>
<p>HeadContext æ—¢æ˜¯ Inbound å¤„ç†å™¨ï¼Œä¹Ÿæ˜¯ Outbound å¤„ç†å™¨ã€‚å®ƒåˆ†åˆ«å®ç°äº† ChannelInboundHandler å’Œ ChannelOutboundHandlerã€‚ç½‘ç»œæ•°æ®å†™å…¥æ“ä½œçš„å…¥å£å°±æ˜¯ç”± HeadContext èŠ‚ç‚¹å®Œæˆçš„ã€‚HeadContext ä½œä¸º Pipeline çš„å¤´ç»“ç‚¹è´Ÿè´£è¯»å–æ•°æ®å¹¶å¼€å§‹ä¼ é€’ InBound äº‹ä»¶ï¼Œå½“æ•°æ®å¤„ç†å®Œæˆåï¼Œæ•°æ®ä¼šåæ–¹å‘ç»è¿‡ Outbound å¤„ç†å™¨ï¼Œæœ€ç»ˆä¼ é€’åˆ° HeadContextï¼Œæ‰€ä»¥ HeadContext åˆæ˜¯å¤„ç† Outbound äº‹ä»¶çš„æœ€åä¸€ç«™ã€‚æ­¤å¤– HeadContext åœ¨ä¼ é€’äº‹ä»¶ä¹‹å‰ï¼Œè¿˜ä¼šæ‰§è¡Œä¸€äº›å‰ç½®æ“ä½œã€‚</p>
<p>TailContext åªå®ç°äº† ChannelInboundHandler æ¥å£ã€‚å®ƒä¼šåœ¨ ChannelInboundHandler è°ƒç”¨é“¾è·¯çš„æœ€åä¸€æ­¥æ‰§è¡Œï¼Œä¸»è¦ç”¨äºç»ˆæ­¢ Inbound äº‹ä»¶ä¼ æ’­ï¼Œä¾‹å¦‚é‡Šæ”¾ Message æ•°æ®èµ„æºç­‰ã€‚TailContext èŠ‚ç‚¹ä½œä¸º OutBound äº‹ä»¶ä¼ æ’­çš„ç¬¬ä¸€ç«™ï¼Œä»…ä»…æ˜¯å°† OutBound äº‹ä»¶ä¼ é€’ç»™ä¸Šä¸€ä¸ªèŠ‚ç‚¹ã€‚</p>
<p>ä»æ•´ä¸ª ChannelPipeline è°ƒç”¨é“¾è·¯æ¥çœ‹ï¼Œå¦‚æœç”± Channel ç›´æ¥è§¦å‘äº‹ä»¶ä¼ æ’­ï¼Œé‚£ä¹ˆè°ƒç”¨é“¾è·¯å°†è´¯ç©¿æ•´ä¸ª ChannelPipelineã€‚ç„¶è€Œä¹Ÿå¯ä»¥åœ¨å…¶ä¸­æŸä¸€ä¸ª ChannelHandlerContext è§¦å‘åŒæ ·çš„æ–¹æ³•ï¼Œè¿™æ ·åªä¼šä»å½“å‰çš„ ChannelHandler å¼€å§‹æ‰§è¡Œäº‹ä»¶ä¼ æ’­ï¼Œè¯¥è¿‡ç¨‹ä¸ä¼šä»å¤´è´¯ç©¿åˆ°å°¾ï¼Œåœ¨ä¸€å®šåœºæ™¯ä¸‹ï¼Œå¯ä»¥æé«˜ç¨‹åºæ€§èƒ½ã€‚</p>
<h3 id="channelhandler-æ¥å£è®¾è®¡">ChannelHandler æ¥å£è®¾è®¡</h3>
<p>åœ¨å­¦ä¹  ChannelPipeline äº‹ä»¶ä¼ æ’­æœºåˆ¶ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£ I/O äº‹ä»¶çš„ç”Ÿå‘½å‘¨æœŸã€‚æ•´ä¸ª ChannelHandler æ˜¯å›´ç»• I/O äº‹ä»¶çš„ç”Ÿå‘½å‘¨æœŸæ‰€è®¾è®¡çš„ï¼Œä¾‹å¦‚å»ºç«‹è¿æ¥ã€è¯»æ•°æ®ã€å†™æ•°æ®ã€è¿æ¥é”€æ¯ç­‰ã€‚ChannelHandler æœ‰ä¸¤ä¸ªé‡è¦çš„<strong>å­æ¥å£</strong>ï¼š<strong>ChannelInboundHandler</strong>å’Œ<strong>ChannelOutboundHandler</strong>ï¼Œåˆ†åˆ«æ‹¦æˆª<strong>å…¥ç«™å’Œå‡ºç«™çš„å„ç§ I/O äº‹ä»¶</strong>ã€‚</p>
<p><strong>1. ChannelInboundHandler çš„äº‹ä»¶å›è°ƒæ–¹æ³•ä¸è§¦å‘æ—¶æœºã€‚</strong></p>
<p>äº‹ä»¶å›è°ƒæ–¹æ³•</p>
<p>è§¦å‘æ—¶æœº</p>
<p>channelRegistered</p>
<p>Channel è¢«æ³¨å†Œåˆ° EventLoop</p>
<p>channelUnregistered</p>
<p>Channel ä» EventLoop ä¸­å–æ¶ˆæ³¨å†Œ</p>
<p>channelActive</p>
<p>Channel å¤„äºå°±ç»ªçŠ¶æ€ï¼Œå¯ä»¥è¢«è¯»å†™</p>
<p>channelInactive</p>
<p>Channel å¤„äºéå°±ç»ªçŠ¶æ€Channel å¯ä»¥ä»è¿œç«¯è¯»å–åˆ°æ•°æ®</p>
<p>channelRead</p>
<p>Channel å¯ä»¥ä»è¿œç«¯è¯»å–åˆ°æ•°æ®</p>
<p>channelReadComplete</p>
<p>Channel è¯»å–æ•°æ®å®Œæˆ</p>
<p>userEventTriggered</p>
<p>ç”¨æˆ·äº‹ä»¶è§¦å‘æ—¶</p>
<p>channelWritabilityChanged</p>
<p>Channel çš„å†™çŠ¶æ€å‘ç”Ÿå˜åŒ–</p>
<p><strong>2. ChannelOutboundHandler çš„äº‹ä»¶å›è°ƒæ–¹æ³•ä¸è§¦å‘æ—¶æœºã€‚</strong></p>
<p>ChannelOutboundHandler çš„äº‹ä»¶å›è°ƒæ–¹æ³•éå¸¸æ¸…æ™°ï¼Œç›´æ¥é€šè¿‡ ChannelOutboundHandler çš„æ¥å£åˆ—è¡¨å¯ä»¥çœ‹åˆ°æ¯ç§æ“ä½œæ‰€å¯¹åº”çš„å›è°ƒæ–¹æ³•ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚è¿™é‡Œæ¯ä¸ªå›è°ƒæ–¹æ³•éƒ½æ˜¯åœ¨ç›¸åº”æ“ä½œæ‰§è¡Œä¹‹å‰è§¦å‘ï¼Œåœ¨æ­¤å°±ä¸å¤šåšèµ˜è¿°äº†ã€‚æ­¤å¤– ChannelOutboundHandler ä¸­ç»å¤§éƒ¨åˆ†æ¥å£éƒ½åŒ…å«ChannelPromise å‚æ•°ï¼Œä»¥ä¾¿äºåœ¨æ“ä½œå®Œæˆæ—¶èƒ½å¤ŸåŠæ—¶è·å¾—é€šçŸ¥ã€‚</p>
<p><img src="http://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/Netty%20%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8E%20RPC%20%E5%AE%9E%E8%B7%B5-%E5%AE%8C/assets/CgqCHl-aW-2AJmXxAAVxQEbkD5w806.png" alt="image"></p>
<h3 id="äº‹ä»¶ä¼ æ’­æœºåˆ¶">äº‹ä»¶ä¼ æ’­æœºåˆ¶</h3>
<p>åœ¨ä¸Šæ–‡ä¸­æˆ‘ä»¬ä»‹ç»äº† ChannelPipeline å¯åˆ†ä¸ºå…¥ç«™ ChannelInboundHandler å’Œå‡ºç«™ ChannelOutboundHandler ä¸¤ç§å¤„ç†å™¨ï¼Œä¸æ­¤å¯¹åº”ä¼ è¾“çš„äº‹ä»¶ç±»å‹å¯ä»¥åˆ†ä¸º<strong>Inbound äº‹ä»¶</strong>å’Œ<strong>Outbound äº‹ä»¶</strong>ã€‚</p>
<p>æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä»£ç ç¤ºä¾‹ï¼Œä¸€èµ·ä½“éªŒä¸‹ ChannelPipeline çš„äº‹ä»¶ä¼ æ’­æœºåˆ¶ã€‚</p>
<pre tabindex="0"><code>serverBootstrap.childHandler(new ChannelInitializer&lt;SocketChannel&gt;() {

    @Override

    public void initChannel(SocketChannel ch) {

        ch.pipeline()

                .addLast(new SampleInBoundHandler(&quot;SampleInBoundHandlerA&quot;, false))

                .addLast(new SampleInBoundHandler(&quot;SampleInBoundHandlerB&quot;, false))

                .addLast(new SampleInBoundHandler(&quot;SampleInBoundHandlerC&quot;, true));

        ch.pipeline()

                .addLast(new SampleOutBoundHandler(&quot;SampleOutBoundHandlerA&quot;))

                .addLast(new SampleOutBoundHandler(&quot;SampleOutBoundHandlerB&quot;))

                .addLast(new SampleOutBoundHandler(&quot;SampleOutBoundHandlerC&quot;));
    }

}

public class SampleInBoundHandler extends ChannelInboundHandlerAdapter {

    private final String name;

    private final boolean flush;

    public SampleInBoundHandler(String name, boolean flush) {

        this.name = name;

        this.flush = flush;

    }

    @Override

    public void channelRead(ChannelHandlerContext ctx, Object msg) throws Exception {

        System.out.println(&quot;InBoundHandler: &quot; + name);

        if (flush) {

            ctx.channel().writeAndFlush(msg);

        } else {

            super.channelRead(ctx, msg);

        }

    }

}
public class SampleOutBoundHandler extends ChannelOutboundHandlerAdapter {

    private final String name;

    public SampleOutBoundHandler(String name) {

        this.name = name;

    }

    @Override

    public void write(ChannelHandlerContext ctx, Object msg, ChannelPromise promise) throws Exception {

        System.out.println(&quot;OutBoundHandler: &quot; + name);

        super.write(ctx, msg, promise);

    }

}
</code></pre><p>é€šè¿‡ Pipeline çš„ addLast æ–¹æ³•åˆ†åˆ«æ·»åŠ äº†ä¸‰ä¸ª InboundHandler å’Œ OutboundHandlerï¼Œæ·»åŠ é¡ºåºéƒ½æ˜¯ A -&gt; B -&gt; Cï¼Œä¸‹å›¾å¯ä»¥è¡¨ç¤ºåˆå§‹åŒ–å ChannelPipeline çš„å†…éƒ¨ç»“æ„ã€‚</p>
<p><img src="http://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/Netty%20%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8E%20RPC%20%E5%AE%9E%E8%B7%B5-%E5%AE%8C/assets/CgqCHl-dLuOAPXJFAAJ3Qmmho38501.png" alt="image.png"></p>
<p>å½“å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€è¯·æ±‚æ—¶ï¼Œä¼šè§¦å‘ SampleInBoundHandler è°ƒç”¨é“¾çš„ channelRead äº‹ä»¶ã€‚ç»è¿‡ SampleInBoundHandler è°ƒç”¨é“¾å¤„ç†å®Œæˆåï¼Œåœ¨ SampleInBoundHandlerC ä¸­ä¼šè°ƒç”¨ writeAndFlush æ–¹æ³•å‘å®¢æˆ·ç«¯å†™å›æ•°æ®ï¼Œæ­¤æ—¶ä¼šè§¦å‘ SampleOutBoundHandler è°ƒç”¨é“¾çš„ write äº‹ä»¶ã€‚æœ€åæˆ‘ä»¬çœ‹ä¸‹ä»£ç ç¤ºä¾‹çš„æ§åˆ¶å°è¾“å‡ºï¼š</p>
<p><img src="http://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/Netty%20%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8E%20RPC%20%E5%AE%9E%E8%B7%B5-%E5%AE%8C/assets/CgqCHl-aW_yAKkKnAAWUaqNNpiI795.png" alt="image"></p>
<p>ç”±æ­¤å¯è§ï¼ŒInbound äº‹ä»¶å’Œ Outbound äº‹ä»¶çš„ä¼ æ’­æ–¹å‘æ˜¯ä¸ä¸€æ ·çš„ã€‚Inbound äº‹ä»¶çš„ä¼ æ’­æ–¹å‘ä¸º Head -&gt; Tailï¼Œè€Œ Outbound äº‹ä»¶ä¼ æ’­æ–¹å‘æ˜¯ Tail -&gt; Headï¼Œä¸¤è€…æ°æ°ç›¸åã€‚åœ¨ Netty åº”ç”¨ç¼–ç¨‹ä¸­ä¸€å®šè¦ç†æ¸…æ¥šäº‹ä»¶ä¼ æ’­çš„é¡ºåºã€‚æ¨èä½ åœ¨ç³»ç»Ÿè®¾è®¡æ—¶æ¨¡æ‹Ÿå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„åœºæ™¯ç”»å‡º ChannelPipeline çš„å†…éƒ¨ç»“æ„å›¾ï¼Œä»¥é¿å…ææ··è°ƒç”¨å…³ç³»ã€‚</p>
<h3 id="å¼‚å¸¸ä¼ æ’­æœºåˆ¶">å¼‚å¸¸ä¼ æ’­æœºåˆ¶</h3>
<p>ChannelPipeline äº‹ä»¶ä¼ æ’­çš„å®ç°é‡‡ç”¨äº†ç»å…¸çš„è´£ä»»é“¾æ¨¡å¼ï¼Œè°ƒç”¨é“¾è·¯ç¯ç¯ç›¸æ‰£ã€‚é‚£ä¹ˆå¦‚æœæœ‰ä¸€ä¸ªèŠ‚ç‚¹å¤„ç†é€»è¾‘å¼‚å¸¸ä¼šå‡ºç°ä»€ä¹ˆç°è±¡å‘¢ï¼Ÿæˆ‘ä»¬é€šè¿‡ä¿®æ”¹ SampleInBoundHandler çš„å®ç°æ¥æ¨¡æ‹Ÿä¸šåŠ¡é€»è¾‘å¼‚å¸¸ï¼š</p>
<pre tabindex="0"><code>public class SampleInBoundHandler extends ChannelInboundHandlerAdapter {

    private final String name;

    private final boolean flush;

    public SampleInBoundHandler(String name, boolean flush) {

        this.name = name;

        this.flush = flush;

    }

    @Override

    public void channelRead(ChannelHandlerContext ctx, Object msg) {

        System.out.println(&quot;InBoundHandler: &quot; + name);

        if (flush) {

            ctx.channel().writeAndFlush(msg);

        } else {

            throw new RuntimeException(&quot;InBoundHandler: &quot; + name);

        }

    }

    @Override

    public void exceptionCaught(ChannelHandlerContext ctx, Throwable cause) {

        System.out.println(&quot;InBoundHandlerException: &quot; + name);

        ctx.fireExceptionCaught(cause);

    }

}
</code></pre><p>åœ¨ channelRead äº‹ä»¶å¤„ç†ä¸­ï¼Œç¬¬ä¸€ä¸ª A èŠ‚ç‚¹å°±ä¼šæŠ›å‡º RuntimeExceptionã€‚åŒæ—¶æˆ‘ä»¬é‡å†™äº† ChannelInboundHandlerAdapter ä¸­çš„ exceptionCaught æ–¹æ³•ï¼Œåªæ˜¯åœ¨å¼€å¤´åŠ ä¸Šäº†æ§åˆ¶å°è¾“å‡ºï¼Œæ–¹ä¾¿è§‚å¯Ÿå¼‚å¸¸ä¼ æ’­çš„è¡Œä¸ºã€‚ä¸‹é¢çœ‹ä¸€ä¸‹ä»£ç è¿è¡Œçš„æ§åˆ¶å°è¾“å‡ºç»“æœï¼š</p>
<p><img src="http://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/Netty%20%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8E%20RPC%20%E5%AE%9E%E8%B7%B5-%E5%AE%8C/assets/Ciqc1F-aXAiAV52JABzDltoTrWE345.png" alt="image"></p>
<p>ç”±è¾“å‡ºç»“æœå¯ä»¥çœ‹å‡º ctx.fireExceptionCaugh ä¼šå°†å¼‚å¸¸æŒ‰é¡ºåºä» Head èŠ‚ç‚¹ä¼ æ’­åˆ° Tail èŠ‚ç‚¹ã€‚å¦‚æœç”¨æˆ·æ²¡æœ‰å¯¹å¼‚å¸¸è¿›è¡Œæ‹¦æˆªå¤„ç†ï¼Œæœ€åå°†ç”± Tail èŠ‚ç‚¹ç»Ÿä¸€å¤„ç†ï¼Œåœ¨ TailContext æºç ä¸­å¯ä»¥æ‰¾åˆ°å…·ä½“å®ç°ï¼š</p>
<pre tabindex="0"><code>protected void onUnhandledInboundException(Throwable cause) {

    try {

        logger.warn(

                &quot;An exceptionCaught() event was fired, and it reached at the tail of the pipeline. &quot; +

                        &quot;It usually means the last handler in the pipeline did not handle the exception.&quot;,

                cause);

    } finally {

        ReferenceCountUtil.release(cause);

    }

}
</code></pre><p>è™½ç„¶ Netty ä¸­ TailContext æä¾›äº†å…œåº•çš„å¼‚å¸¸å¤„ç†é€»è¾‘ï¼Œä½†æ˜¯åœ¨å¾ˆå¤šåœºæ™¯ä¸‹ï¼Œå¹¶ä¸èƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ã€‚å‡å¦‚ä½ éœ€è¦æ‹¦æˆªæŒ‡å®šçš„å¼‚å¸¸ç±»å‹ï¼Œå¹¶åšå‡ºç›¸åº”çš„å¼‚å¸¸å¤„ç†ï¼Œåº”è¯¥å¦‚ä½•å®ç°å‘¢ï¼Ÿæˆ‘ä»¬æ¥ç€å¾€ä¸‹çœ‹ã€‚</p>
<h3 id="å¼‚å¸¸å¤„ç†çš„æœ€ä½³å®è·µ">å¼‚å¸¸å¤„ç†çš„æœ€ä½³å®è·µ</h3>
<p>åœ¨ Netty åº”ç”¨å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œè‰¯å¥½çš„å¼‚å¸¸å¤„ç†æœºåˆ¶ä¼šè®©æ’æŸ¥é—®é¢˜çš„è¿‡ç¨‹äº‹åŠåŠŸå€ã€‚æ‰€ä»¥æ¨èç”¨æˆ·å¯¹å¼‚å¸¸è¿›è¡Œç»Ÿä¸€æ‹¦æˆªï¼Œç„¶åæ ¹æ®å®é™…ä¸šåŠ¡åœºæ™¯å®ç°æ›´åŠ å®Œå–„çš„å¼‚å¸¸å¤„ç†æœºåˆ¶ã€‚é€šè¿‡å¼‚å¸¸ä¼ æ’­æœºåˆ¶çš„å­¦ä¹ ï¼Œæˆ‘ä»¬åº”è¯¥å¯ä»¥æƒ³åˆ°æœ€å¥½çš„æ–¹æ³•æ˜¯åœ¨ ChannelPipeline è‡ªå®šä¹‰å¤„ç†å™¨çš„æœ«ç«¯æ·»åŠ ç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†å™¨ï¼Œæ­¤æ—¶ ChannelPipeline çš„å†…éƒ¨ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>
<p><img src="http://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/Netty%20%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8E%20RPC%20%E5%AE%9E%E8%B7%B5-%E5%AE%8C/assets/Ciqc1F-dLz2AMj8yAALx2oNWK94344.png" alt="image.png"></p>
<p>ç”¨æˆ·è‡ªå®šä¹‰çš„å¼‚å¸¸å¤„ç†å™¨ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<pre tabindex="0"><code>public class ExceptionHandler extends ChannelDuplexHandler {

    @Override

    public void exceptionCaught(ChannelHandlerContext ctx, Throwable cause) {

        if (cause instanceof RuntimeException) {

            System.out.println(&quot;Handle Business Exception Success.&quot;);

        }

    }

}
</code></pre><p>åŠ å…¥ç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†å™¨åï¼Œå¯ä»¥çœ‹åˆ°å¼‚å¸¸å·²ç»è¢«ä¼˜é›…åœ°æ‹¦æˆªå¹¶å¤„ç†æ‰äº†ã€‚è¿™ä¹Ÿæ˜¯ Netty æ¨èçš„æœ€ä½³å¼‚å¸¸å¤„ç†å®è·µã€‚</p>
<p><img src="http://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/Netty%20%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8E%20RPC%20%E5%AE%9E%E8%B7%B5-%E5%AE%8C/assets/CgqCHl-aXBCAS8QAAAWXhTFjQOE519.png" alt="image"></p>
<h3 id="æ€»ç»“">æ€»ç»“</h3>
<p>æœ¬èŠ‚è¯¾æˆ‘ä»¬æ·±å…¥åˆ†æäº† Pipeline çš„è®¾è®¡åŸç†ä¸äº‹ä»¶ä¼ æ’­æœºåˆ¶ã€‚é‚£ä¹ˆè¯¾ç¨‹æœ€åˆæˆ‘æå‡ºçš„å‡ ä¸ªé—®é¢˜ä½ æ˜¯å¦å·²ç»éƒ½æ‰¾åˆ°ç­”æ¡ˆäº†ï¼Ÿæˆ‘æ¥åšä¸ªç®€å•çš„æ€»ç»“ï¼š</p>
<ul>
<li>ChannelPipeline æ˜¯åŒå‘é“¾è¡¨ç»“æ„ï¼ŒåŒ…å« ChannelInboundHandler å’Œ ChannelOutboundHandler ä¸¤ç§å¤„ç†å™¨ã€‚</li>
<li>ChannelHandlerContext æ˜¯å¯¹ ChannelHandler çš„å°è£…ï¼Œæ¯ä¸ª ChannelHandler éƒ½å¯¹åº”ä¸€ä¸ª ChannelHandlerContextï¼Œå®é™…ä¸Š ChannelPipeline ç»´æŠ¤çš„æ˜¯ä¸ ChannelHandlerContext çš„å…³ç³»ã€‚</li>
<li>Inbound äº‹ä»¶å’Œ Outbound äº‹ä»¶çš„ä¼ æ’­æ–¹å‘ç›¸åï¼ŒInbound äº‹ä»¶çš„ä¼ æ’­æ–¹å‘ä¸º Head -&gt; Tailï¼Œè€Œ Outbound äº‹ä»¶ä¼ æ’­æ–¹å‘æ˜¯ Tail -&gt; Headã€‚</li>
<li>å¼‚å¸¸äº‹ä»¶çš„å¤„ç†é¡ºåºä¸ ChannelHandler çš„æ·»åŠ é¡ºåºç›¸åŒï¼Œä¼šä¾æ¬¡å‘åä¼ æ’­ï¼Œä¸ Inbound äº‹ä»¶å’Œ Outbound äº‹ä»¶æ— å…³ã€‚</li>
</ul>
<p>ChannelPipeline ç²¾å¦™çš„è®¾è®¡æ€æƒ³å€¼å¾—æˆ‘ä»¬å­¦ä»¥è‡´ç”¨ï¼Œå»ºè®®æœ‰å…´è¶£çš„åŒå­¦å¯ä»¥æ·±å…¥å­¦ä¹ ä¸‹è¿™ä¸ªç»„ä»¶çš„æ ¸å¿ƒæºç ã€‚åœ¨æœªæ¥æºç ç¯‡çš„è¯¾ç¨‹ä¸­æˆ‘ä»¬å°†ä¼šç»§ç»­æ·±å…¥äº†è§£ ChannelPipeline è¿™ä¸ªç»„ä»¶ã€‚</p>

        </div>
    </article>
</div>
<div class="division-line"></div>
<div class="others">
    <div>æ ‡ç­¾ï¼šğŸ·ï¸<a class="post-tag" href="/tags/netty/">netty</a>&nbsp;</div>
    <div>åˆ†ç±»ï¼š ğŸ“’<a class="post-category" href="/categories/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/">Nettyæ ¸å¿ƒåŸç†å‰–æä¸RPCå®è·µ</a>&nbsp; </div>
</div>

    </main>
    <footer>
        <div id="pagination">
            
<div class="paginator">
    <div class="prev">
        
        <a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/04-%E4%BA%8B%E4%BB%B6%E8%B0%83%E5%BA%A6%E5%B1%82%E4%B8%BA%E4%BB%80%E4%B9%88-eventloop-%E6%98%AF-netty-%E7%9A%84%E7%B2%BE%E9%AB%93/"><span>04 äº‹ä»¶è°ƒåº¦å±‚ï¼šä¸ºä»€ä¹ˆ EventLoop æ˜¯ Netty çš„ç²¾é«“ï¼Ÿ</span></a>
    </div>
    <div class="next">
        
        <a href="http://yipsen.github.io/documents/columns/netty/netty%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8Erpc%E5%AE%9E%E8%B7%B5/06-%E7%B2%98%E5%8C%85%E6%8B%86%E5%8C%85%E9%97%AE%E9%A2%98%E5%A6%82%E4%BD%95%E8%8E%B7%E5%8F%96%E4%B8%80%E4%B8%AA%E5%AE%8C%E6%95%B4%E7%9A%84%E7%BD%91%E7%BB%9C%E5%8C%85/"><span>06 ç²˜åŒ…æ‹†åŒ…é—®é¢˜ï¼šå¦‚ä½•è·å–ä¸€ä¸ªå®Œæ•´çš„ç½‘ç»œåŒ…ï¼Ÿ</span></a>
    </div>
</div>

        </div>
        <div id="float">
            <ul class="float-button-bar">
    <li>
        <button class="float-button top" onclick="scrollToTop(this);">UP</button>
    </li>
    <li>
        <button class="float-button toggler" onclick="changeSkin(this);">DARK</button>
    </li>
</ul>
        </div>
        <div id="copyright" style="display: none;">
    
    
    <p>&copy; 2020 <a href="/"></a>, powered by Hugo and Qiao</p>
</div>
    </footer>
    
<script>
    const changeSkin = () => {
        document.getElementById('page').classList.toggle('night');
    }
    const scrollToTop = () => {
        window.scrollTo(0, 0);
    }
</script>
</body>

</html>